{"pageProps":{"postData":{"id":"HackMyVMRunas","contentHtml":"<h1>Runas.</h1>\n<p>windows靶机</p>\n<blockquote>\n<p><a href=\"https://hackmyvm.eu/machines/machine.php?vm=Runas\">https://hackmyvm.eu/machines/machine.php?vm=Runas</a></p>\n</blockquote>\n<h2>信息收集 &#x26; 扫描</h2>\n<pre><code class=\"hljs language-c\">nmap -sP <span class=\"hljs-number\">192.168</span>.<span class=\"hljs-number\">56.0</span>/<span class=\"hljs-number\">24</span>               \nStarting Nmap <span class=\"hljs-number\">7.94</span>SVN ( https:<span class=\"hljs-comment\">//nmap.org ) at 2025-01-02 09:49 EST</span>\nNmap scan report <span class=\"hljs-keyword\">for</span> <span class=\"hljs-number\">192.168</span>.<span class=\"hljs-number\">56.1</span>\nHost is up (<span class=\"hljs-number\">0.00028</span>s latency).\nMAC Address: <span class=\"hljs-number\">0</span>A:<span class=\"hljs-number\">00</span>:<span class=\"hljs-number\">27</span>:<span class=\"hljs-number\">00</span>:<span class=\"hljs-number\">00</span>:<span class=\"hljs-number\">23</span> (Unknown)\nNmap scan report <span class=\"hljs-keyword\">for</span> <span class=\"hljs-number\">192.168</span>.<span class=\"hljs-number\">56.2</span>\nHost is up (<span class=\"hljs-number\">0.00024</span>s latency).\nMAC Address: <span class=\"hljs-number\">08</span>:<span class=\"hljs-number\">00</span>:<span class=\"hljs-number\">27</span>:C8:<span class=\"hljs-number\">55</span>:<span class=\"hljs-number\">1</span>D (Oracle VirtualBox virtual NIC)\nNmap scan report <span class=\"hljs-keyword\">for</span> <span class=\"hljs-number\">192.168</span>.<span class=\"hljs-number\">56.5</span>\nHost is up (<span class=\"hljs-number\">0.00027</span>s latency).\nMAC Address: <span class=\"hljs-number\">08</span>:<span class=\"hljs-number\">00</span>:<span class=\"hljs-number\">27</span>:C0:A2:<span class=\"hljs-number\">2F</span> (Oracle VirtualBox virtual NIC)\nNmap scan report <span class=\"hljs-keyword\">for</span> <span class=\"hljs-number\">192.168</span>.<span class=\"hljs-number\">56.4</span>\n</code></pre>\n<pre><code class=\"hljs language-c\">nmap -sT -min-rate <span class=\"hljs-number\">10000</span> -p- <span class=\"hljs-number\">192.168</span>.<span class=\"hljs-number\">56.5</span>\nStarting Nmap <span class=\"hljs-number\">7.94</span>SVN ( https:<span class=\"hljs-comment\">//nmap.org ) at 2025-01-02 09:51 EST</span>\nWarning: <span class=\"hljs-number\">192.168</span>.<span class=\"hljs-number\">56.5</span> giving up on port because retransmission cap hit (<span class=\"hljs-number\">10</span>).\nNmap scan report <span class=\"hljs-keyword\">for</span> <span class=\"hljs-number\">192.168</span>.<span class=\"hljs-number\">56.5</span>\nHost is up (<span class=\"hljs-number\">0.00065</span>s latency).\nNot shown: <span class=\"hljs-number\">64645</span> closed tcp ports (conn-refused), <span class=\"hljs-number\">878</span> filtered tcp ports (no-response)\nPORT      STATE SERVICE\n<span class=\"hljs-number\">80</span>/tcp    open  http\n<span class=\"hljs-number\">135</span>/tcp   open  msrpc\n<span class=\"hljs-number\">139</span>/tcp   open  netbios-ssn\n<span class=\"hljs-number\">445</span>/tcp   open  microsoft-ds\n<span class=\"hljs-number\">3389</span>/tcp  open  ms-wbt-server\n<span class=\"hljs-number\">5357</span>/tcp  open  wsdapi\n<span class=\"hljs-number\">49152</span>/tcp open  unknown\n<span class=\"hljs-number\">49153</span>/tcp open  unknown\n<span class=\"hljs-number\">49154</span>/tcp open  unknown\n<span class=\"hljs-number\">49155</span>/tcp open  unknown\n<span class=\"hljs-number\">49156</span>/tcp open  unknown\n<span class=\"hljs-number\">49157</span>/tcp open  unknown\nMAC Address: <span class=\"hljs-number\">08</span>:<span class=\"hljs-number\">00</span>:<span class=\"hljs-number\">27</span>:C0:A2:<span class=\"hljs-number\">2F</span> (Oracle VirtualBox virtual NIC)\n</code></pre>\n<p>存在<code>445</code>端口，可能存在永恒之蓝</p>\n<pre><code class=\"hljs language-c\">nmap -sT -sV -O -p <span class=\"hljs-number\">80</span>,<span class=\"hljs-number\">135</span>,<span class=\"hljs-number\">139</span>,<span class=\"hljs-number\">3389</span>,<span class=\"hljs-number\">445</span> <span class=\"hljs-number\">192.168</span>.<span class=\"hljs-number\">56.5</span>\nStarting Nmap <span class=\"hljs-number\">7.94</span>SVN ( https:<span class=\"hljs-comment\">//nmap.org ) at 2025-01-02 10:00 EST</span>\nNmap scan report <span class=\"hljs-keyword\">for</span> <span class=\"hljs-number\">192.168</span>.<span class=\"hljs-number\">56.5</span>\nHost is up (<span class=\"hljs-number\">0.00061</span>s latency).\n\nPORT     STATE SERVICE        VERSION\n<span class=\"hljs-number\">80</span>/tcp   open  http           Apache httpd <span class=\"hljs-number\">2.4</span>.<span class=\"hljs-number\">57</span> ((Win64) PHP/<span class=\"hljs-number\">7.2</span>.<span class=\"hljs-number\">0</span>)\n<span class=\"hljs-number\">135</span>/tcp  open  msrpc          Microsoft Windows RPC\n<span class=\"hljs-number\">139</span>/tcp  open  netbios-ssn    Microsoft Windows netbios-ssn\n<span class=\"hljs-number\">445</span>/tcp  open  microsoft-ds   Microsoft Windows <span class=\"hljs-number\">7</span> - <span class=\"hljs-number\">10</span> microsoft-ds (workgroup: WORKGROUP)\n<span class=\"hljs-number\">3389</span>/tcp open  ms-wbt-server?\n<span class=\"hljs-number\">1</span> service unrecognized despite returning data. If you know the service/version, please submit the following fingerprint at https:<span class=\"hljs-comment\">//nmap.org/cgi-bin/submit.cgi?new-service :</span>\nSF-Port3389-TCP:V=<span class=\"hljs-number\">7.94</span>SVN%I=<span class=\"hljs-number\">7</span>%D=<span class=\"hljs-number\">1</span>/<span class=\"hljs-number\">2</span>%Time=<span class=\"hljs-number\">6776</span>AA10%P=x86_64-pc-linux-gnu%r(\nSF:TerminalServerCookie,<span class=\"hljs-number\">13</span>,<span class=\"hljs-string\">\"\\x03\\0\\0\\x13\\x0e\\xd0\\0\\0\\x124\\0\\x03\\0\\x08\\0\\x0\nSF:3\\0\\0\\0\"</span>);\nMAC Address: <span class=\"hljs-number\">08</span>:<span class=\"hljs-number\">00</span>:<span class=\"hljs-number\">27</span>:C0:A2:<span class=\"hljs-number\">2F</span> (Oracle VirtualBox virtual NIC)\nWarning: OSScan results may be unreliable because we could not find at least <span class=\"hljs-number\">1</span> open and <span class=\"hljs-number\">1</span> closed port\nDevice type: general purpose\nRunning: Microsoft Windows <span class=\"hljs-number\">7</span>|<span class=\"hljs-number\">2008</span>|<span class=\"hljs-number\">8.1</span>\nOS CPE: cpe:/o:microsoft:windows_7::- cpe:/o:microsoft:windows_7::sp1 cpe:/o:microsoft:windows_server_2008::sp1 cpe:/o:microsoft:windows_server_2008:r2 cpe:/o:microsoft:windows_8 cpe:/o:microsoft:windows_8.<span class=\"hljs-number\">1</span>\nOS details: Microsoft Windows <span class=\"hljs-number\">7</span> SP0 - SP1, Windows Server <span class=\"hljs-number\">2008</span> SP1, Windows Server <span class=\"hljs-number\">2008</span> R2, Windows <span class=\"hljs-number\">8</span>, or Windows <span class=\"hljs-number\">8.1</span> Update <span class=\"hljs-number\">1</span>\nNetwork Distance: <span class=\"hljs-number\">1</span> hop\nService Info: Host: RUNAS-PC; OS: Windows; CPE: cpe:/o:microsoft:windows\n</code></pre>\n<pre><code class=\"hljs language-c\">nmap -script=vuln -p <span class=\"hljs-number\">80</span>,<span class=\"hljs-number\">135</span>,<span class=\"hljs-number\">139</span>,<span class=\"hljs-number\">445</span>,<span class=\"hljs-number\">3389</span> <span class=\"hljs-number\">192.168</span>.<span class=\"hljs-number\">56.5</span>\nStarting Nmap <span class=\"hljs-number\">7.94</span>SVN ( https:<span class=\"hljs-comment\">//nmap.org ) at 2025-01-02 10:02 EST</span>\nNmap scan report <span class=\"hljs-keyword\">for</span> <span class=\"hljs-number\">192.168</span>.<span class=\"hljs-number\">56.5</span>\nHost is up (<span class=\"hljs-number\">0.00094</span>s latency).\n\nPORT     STATE SERVICE\n<span class=\"hljs-number\">80</span>/tcp   open  http\n| http-slowloris-check: \n|   VULNERABLE:\n|   Slowloris DOS attack\n|     State: LIKELY VULNERABLE\n|     IDs:  CVE:CVE<span class=\"hljs-number\">-2007</span><span class=\"hljs-number\">-6750</span>\n|       Slowloris tries to keep many connections to the target web server open and hold\n|       them open as <span class=\"hljs-type\">long</span> as possible.  It accomplishes this by opening connections to\n|       the target web server and sending a partial request. By doing so, it starves\n|       the http server<span class=\"hljs-string\">'s resources causing Denial Of Service.\n|       \n|     Disclosure date: 2009-09-17\n|     References:\n|       https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2007-6750\n|_      http://ha.ckers.org/slowloris/\n|_http-stored-xss: Couldn'</span>t find any stored XSS vulnerabilities.\n|_http-dombased-xss: Couldn<span class=\"hljs-string\">'t find any DOM based XSS.\n|_http-vuln-cve2017-1001000: ERROR: Script execution failed (use -d to debug)\n|_http-trace: TRACE is enabled\n|_http-csrf: Couldn'</span>t find any CSRF vulnerabilities.\n| http-<span class=\"hljs-keyword\">enum</span>: \n|_  /: Root directory w/ directory listing\n<span class=\"hljs-number\">135</span>/tcp  open  msrpc\n<span class=\"hljs-number\">139</span>/tcp  open  netbios-ssn\n<span class=\"hljs-number\">445</span>/tcp  open  microsoft-ds\n<span class=\"hljs-number\">3389</span>/tcp open  ms-wbt-server\nMAC Address: <span class=\"hljs-number\">08</span>:<span class=\"hljs-number\">00</span>:<span class=\"hljs-number\">27</span>:C0:A2:<span class=\"hljs-number\">2F</span> (Oracle VirtualBox virtual NIC)\n\nHost script results:\n|_samba-vuln-cve<span class=\"hljs-number\">-2012</span><span class=\"hljs-number\">-1182</span>: NT_STATUS_ACCESS_DENIED\n|_smb-vuln-ms10<span class=\"hljs-number\">-054</span>: <span class=\"hljs-literal\">false</span>\n|_smb-vuln-ms10<span class=\"hljs-number\">-061</span>: NT_STATUS_ACCESS_DENIED\n</code></pre>\n<p>还是先从<code>80</code>端口开始渗透</p>\n<h2>web渗透</h2>\n<p><img src=\"/post-images/HackMyVMRunas/image5.png\" alt=\"image.png\"></p>\n<p>点击<code>index.php</code></p>\n<p><img src=\"/post-images/HackMyVMRunas/image6.png\" alt=\"image.png\"></p>\n<p>看着像是文件包含，尝试常规的文件（靶机是windows环境）</p>\n<p>读取<code>system.ini</code>成功</p>\n<p><img src=\"/post-images/HackMyVMRunas/image7.png\" alt=\"image.png\"></p>\n<p>再尝试读取别的，我输入了一个不存在文件夹，爆出了服务器的绝对路径<code>C:\\Apache24\\htdocs\\</code></p>\n<p><img src=\"/post-images/HackMyVMRunas/image8.png\" alt=\"image.png\"></p>\n<p>尝试读取配置文件发现读取失败，尝试了伪协议后也发现无效</p>\n<p>尝试直接读取<code>flag</code>文件，读取成功…</p>\n<p><code>HMV{Username_Is_My_Hint}</code></p>\n<p><img src=\"/post-images/HackMyVMRunas/image9.png\" alt=\"image.png\"></p>\n<p>再读取用户<code>flag</code> ，也可以</p>\n<p><img src=\"/post-images/HackMyVMRunas/image10.png\" alt=\"image.png\"></p>\n<p><code>HMV{User_Flag_Was_A_Bit_Bitter}</code></p>\n<p><img src=\"/post-images/HackMyVMRunas/image11.png\" alt=\"image.png\"></p>","title":"HackMyVM - Runas","date":"2025-04-03","updated":"2025-04-03","comments":true,"tags":["HackMyVM","Linux靶机"],"categories":"靶机","description":"Runas. windows靶机 https://hackmyvm.eu/machines/machine.php?vm=Runas 信息收集 & 扫描 存在445端口，可能存在永恒之蓝 还是先从80端口开始渗透 web渗透 点击index.php 看着像是文件包含，尝试常规的文件（靶机是windo..."},"recentPosts":[{"id":"HackMyVMSysadmin","title":"HackMyVM - Sysadmin","date":"2025-10-25","isEncrypted":false,"year":"2025","month":"10","day":"25"},{"id":"TheHackersLabsAllSafe","title":"TheHackersLabs - AllSafe","date":"2025-10-21","isEncrypted":false,"year":"2025","month":"10","day":"21"},{"id":"TheHackersLabsLavaShop","title":"TheHackersLabs - LavaShop","date":"2025-10-20","isEncrypted":false,"year":"2025","month":"10","day":"20"},{"id":"HackMyVMBirdeye","title":"HackMyVM - Birdeye","date":"2025-10-17","isEncrypted":false,"year":"2025","month":"10","day":"17"},{"id":"HackTheBoxSeason8 - Signed","title":"HackTheBox - Season9 - Signed","date":"2025-10-14","isEncrypted":true,"year":"2025","month":"10","day":"14"},{"id":"HackTheBoxSeason8 - TombWatcher","title":"HackTheBox - Machine - TombWatcher","date":"2025-06-08","isEncrypted":false,"year":"2025","month":"10","day":"13"},{"id":"HackTheBoxSeason8 - Certificate","title":"HackTheBox - Machine - Certificate","date":"2025-06-02","isEncrypted":false,"year":"2025","month":"10","day":"13"}]},"__N_SSG":true}