{"pageProps":{"postData":{"id":"反弹 shell 升级","contentHtml":"<h2>方案 1：升级成半交互 Shell</h2>\n<pre><code class=\"hljs language-bash\">rlwrap -cAr nc -lvnp 1234\n</code></pre>\n<h2>方案 1：升级成完全交互 Shell</h2>\n<pre><code class=\"hljs language-bash\">python3 -c <span class=\"hljs-string\">'import pty;pty.spawn(\"/bin/bash\")'</span>;\n// 或者\n/usr/bin/script -qc /bin/bash /dev/null\n</code></pre>\n<p>然后设置一些重要的环境变量</p>\n<pre><code class=\"hljs language-bash\"><span class=\"hljs-built_in\">export</span> SHELL=bash\n<span class=\"hljs-built_in\">export</span> TERM=xterm-256color\n</code></pre>\n<p>然后 <code>ctrl-z</code> 以将 shell 发送到后台</p>\n<p>设置 <code>shell</code> 以通过反向 <code>shell</code> 发送控制字符和其他原始输入。使用以下stty命令来执行此操作。</p>\n<pre><code class=\"hljs language-bash\"><span class=\"hljs-built_in\">stty</span> raw -<span class=\"hljs-built_in\">echo</span>;<span class=\"hljs-built_in\">fg</span>\n</code></pre>\n<p><strong>回车一次</strong>后输入 <strong>reset</strong> 再<strong>回车</strong>将再次进入 <code>shell</code> 中</p>\n<p>这里设置完毕后，可以执行 mysql 等有二级回显的命令的了。但是没办法运行全局编辑器，因为屏幕尺寸不一样。</p>\n<p>查看本机的屏幕尺寸</p>\n<pre><code class=\"hljs language-bash\">➜  Leet <span class=\"hljs-built_in\">stty</span> -a               \nspeed 38400 baud; rows 45; columns 228; line = 0;\nintr = ^C; quit = ^\\; erase = ^?; <span class=\"hljs-built_in\">kill</span> = ^U; eof = ^D; eol = &#x3C;undef>; eol2 = &#x3C;undef>; swtch = &#x3C;undef>; start = ^Q; stop = ^S; susp = ^Z; rprnt = ^R; werase = ^W; lnext = ^V; discard = ^O; min = 1; <span class=\"hljs-keyword\">time</span> = 0;\n-parenb -parodd -cmspar cs8 -hupcl -cstopb cread -clocal -crtscts\n-ignbrk -brkint -ignpar -parmrk -inpck -istrip -inlcr -igncr icrnl ixon -ixoff -iuclc -ixany -imaxbel iutf8\nopost -olcuc -ocrnl onlcr -onocr -onlret -ofill -ofdel nl0 cr0 tab0 bs0 vt0 ff0\nisig icanon iexten <span class=\"hljs-built_in\">echo</span> echoe echok -echonl -noflsh -xcase -tostop -echoprt echoctl echoke -flusho -extproc\n</code></pre>\n<p>靶机中设置尺寸</p>\n<pre><code class=\"hljs language-bash\"><span class=\"hljs-built_in\">stty</span> rows 45 columns 228\n</code></pre>\n<p>这样就可以使用全局编辑器了</p>","title":"反弹 shell 升级 tty","date":"2025-04-21","updated":"2025-04-21","comments":true,"tags":["小技巧","反弹shell","Linux"],"categories":"杂项","description":"方案 1：升级成半交互 Shell\n\n\n\n方案 1：升级成完全交互 Shell\n\n\n\n然后设置一些重要的环境变量\n\n\n\n然后 `ctrl-z` 以将 shell 发送到后台\n\n设置 `shell` 以通过反向 `shell` 发送控制字符和其他原始输入。使用以下stty命令来执行此操作。\n\n\n\n回车一次后输入 reset 再回车将再次进入 `shell` 中\n\n这里设置完毕后，可以执行 mysql..."},"recentPosts":[{"id":"HackTheBoxSeason8 - Cobblestone","title":"HackTheBox - Season8 - Cobblestone","date":"2025-08-11","isEncrypted":true,"year":"2025","month":"08","day":"11"},{"id":"TheHackersLabsShadowGate","title":"TheHackersLabs - ShadowGate","date":"2025-08-06","isEncrypted":false,"year":"2025","month":"08","day":"06"},{"id":"HackTheBoxSeason7-Code","title":"HackTheBox - Machine - Code","date":"2025-04-04","isEncrypted":false,"year":"2025","month":"08","day":"06"},{"id":"TheHackersLabsOfusPingu","title":"TheHackersLabs - OfusPingu","date":"2025-08-05","isEncrypted":false,"year":"2025","month":"08","day":"05"},{"id":"TheHackersLabsDoraemon","title":"TheHackersLabs - Doraemon","date":"2025-08-03","isEncrypted":false,"year":"2025","month":"08","day":"03"},{"id":"HackTheBoxSeason8 - Editor","title":"HackTheBox - Season8 - Editor","date":"2025-08-03","isEncrypted":true,"year":"2025","month":"08","day":"03"},{"id":"TheHackersLabsHellRoot","title":"TheHackersLabs - HellRoot","date":"2025-08-02","isEncrypted":false,"year":"2025","month":"08","day":"02"}]},"__N_SSG":true}