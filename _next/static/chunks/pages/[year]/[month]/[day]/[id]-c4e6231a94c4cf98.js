(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[357],{1300:(e,t,a)=>{"use strict";a.r(t),a.d(t,{__N_SSG:()=>S,default:()=>L});var r=a(7876),n=a(7796),i=a(4835),s=a(2867),d=a(4232),l=a(8230),o=a.n(l),c=a(6108),x=a(7212);let m={showSidebarBackground:!0};function h(e){let{contentSelector:t="article",isEncrypted:a=!1,isDecrypted:n=!0,isMobile:i=!1}=e,[s,l]=(0,d.useState)([]),[h,u]=(0,d.useState)(""),[p,f]=(0,d.useState)(0),[y,w]=(0,d.useState)(!1),g={type:"tween",duration:.5,ease:"easeInOut"},v={hidden:{opacity:0,y:10},visible:{opacity:1,y:0,transition:g},exit:{opacity:0,y:-10,transition:{...g,duration:.3}}};(0,d.useEffect)(()=>{let e=()=>{w(window.innerWidth<768)};return e(),window.addEventListener("resize",e),()=>{window.removeEventListener("resize",e)}},[]);let b=()=>{if(a&&!n)return void l([]);let e=document.querySelector(t);if(!e)return;let r=Array.from(e.querySelectorAll("h1, h2, h3")),i=r.map((e,t)=>(e.id||(e.textContent.trim()?e.id="heading-".concat(t,"-").concat(encodeURIComponent(e.textContent.trim()).replace(/%/g,"").substring(0,50)):e.id="heading-".concat(t)),{id:e.id,text:e.textContent,level:parseInt(e.tagName.substring(1))}));f(e=>e+1),l(i);let s=new IntersectionObserver(e=>{e.forEach(e=>{e.isIntersecting&&u(e.target.id)})},{rootMargin:"-20% 0% -80% 0%",threshold:0});return r.forEach(e=>{s.observe(e)}),()=>{s.disconnect()}};(0,d.useEffect)(()=>{let e=b(),t=()=>{e&&e(),setTimeout(b,100)};return window.addEventListener("contentLoaded",t),()=>{e&&e(),window.removeEventListener("contentLoaded",t)}},[t,a,n]);let j=()=>{if(y)return null;let e=m.showSidebarBackground?"p-3 pr-5 m-3 mt-3 rounded-2xl backdrop-blur-2xl md:shadow-[0_0_35px_rgba(0,0,0,0.1)] dark:md:shadow-[0_0_35px_rgba(0,0,0,0.2)] hidden md:flex md:flex-col w-full":"p-3 pr-5 mt-3 hidden md:flex md:flex-col w-full";return(0,r.jsxs)(c.P.nav,{className:e,initial:"hidden",animate:"visible",variants:v,children:[(0,r.jsx)(o(),{href:"/",className:"hover:text-red-700 text-gray-700 my-1",children:"Home"}),(0,r.jsx)(o(),{href:"/writing",className:"hover:text-red-700 text-gray-700 my-1",children:"Writing"}),(0,r.jsx)(o(),{href:"/about",className:"hover:text-red-700 text-gray-700 my-1",children:"About"}),(0,r.jsx)(o(),{href:"/search",className:"hover:text-red-700 text-gray-700 my-1",children:"Search"})]})};if(a&&!n)return(0,r.jsx)("div",{children:j()});if(0===s.length)return(0,r.jsx)("div",{children:!i&&j()});let N=i?"p-4 bg-white dark:bg-neutral-800 text-gray-800 dark:text-gray-300 flex flex-col w-full":m.showSidebarBackground?"p-3 pr-5 m-3 rounded-2xl backdrop-blur-2xl md:shadow-[0_0_35px_rgba(0,0,0,0.1)] dark:md:shadow-[0_0_35px_rgba(0,0,0,0.2)] flex flex-col w-full":"p-3 pr-5 flex flex-col w-full";return(0,r.jsxs)("div",{className:i?"":"md:mt-25",children:[(0,r.jsx)(x.N,{mode:"wait",children:(0,r.jsx)(c.P.nav,{className:N,initial:"hidden",animate:"visible",exit:"exit",variants:v,children:(0,r.jsx)("div",{className:"max-h-[50vh] overflow-y-auto pr-2 scrollbar-hide",children:s.map((e,t)=>{let a=2===e.level||3===e.level?"  ":"",n=2===e.level?"text-gray-700 dark:text-gray-300 ml-1":3===e.level?"text-gray-700 dark:text-gray-300 ml-6":"text-red-700 dark:text-red-400 font-bold text-xl mb-1";return(0,r.jsxs)(c.P.a,{href:"#".concat(e.id),className:"hover:text-red-700 dark:hover:text-red-400 hover:underline hover:underline-offset-3 ".concat(n," ").concat(h===e.id?"font-bold":""," block"),onClick:t=>{var a;t.preventDefault(),null==(a=document.getElementById(e.id))||a.scrollIntoView({behavior:"smooth"})},initial:{opacity:0,x:-5},animate:{opacity:1,x:0},transition:{delay:.05*t,duration:.3},children:[a," ",e.text]},e.id)})})},"toc-".concat(p))}),!y&&!i&&(0,r.jsxs)(c.P.nav,{className:m.showSidebarBackground?"p-3 pr-5 m-3 mt-5 rounded-2xl backdrop-blur-2xl md:shadow-[0_0_35px_rgba(0,0,0,0.1)] dark:md:shadow-[0_0_35px_rgba(0,0,0,0.2)] hidden md:flex md:flex-col w-full":"p-3 pr-5 mt-5 hidden md:flex md:flex-col w-full",initial:"hidden",animate:"visible",variants:v,children:[(0,r.jsx)(o(),{href:"/",className:"hover:text-red-700 text-gray-700 dark:text-gray-300 my-1",children:"\uD83C\uDFE0 Home"}),(0,r.jsx)(o(),{href:"/writing",className:"hover:text-red-700 text-gray-700 dark:text-gray-300 my-1",children:"\uD83D\uDCDA Writing"}),(0,r.jsx)(o(),{href:"/about",className:"hover:text-red-700 text-gray-700 dark:text-gray-300 my-1",children:"\uD83D\uDEDC About"}),(0,r.jsx)(o(),{href:"/search",className:"hover:text-red-700 text-gray-700 dark:text-gray-300 my-1",children:"\uD83D\uDD0D Search"})]})]})}function u(e,t){let a;return function(){for(var r=arguments.length,n=Array(r),i=0;i<r;i++)n[i]=arguments[i];clearTimeout(a),a=setTimeout(()=>e.apply(this,n),t)}}function p(e){let{contentSelector:t=".markdown-body",isDecrypted:a=!0,isEncrypted:n=!1}=e,[i,s]=(0,d.useState)(!0),[l,o]=(0,d.useState)(!1),[m,p]=(0,d.useState)(0),[f,y]=(0,d.useState)(!1),[w,g]=(0,d.useState)(!0),[v,b]=(0,d.useState)(!1),[j,N]=(0,d.useState)({}),[k,E]=(0,d.useState)(!0),_=(0,d.useRef)(null),S={type:"tween",duration:.5,ease:"easeInOut"},L={hidden:{opacity:0,y:10},visible:{opacity:1,y:0,transition:S},exit:{opacity:0,y:-10,transition:{...S,duration:.3}}};(0,d.useEffect)(()=>{let e=setTimeout(()=>{b(!0)},300);return()=>clearTimeout(e)},[]),(0,d.useEffect)(()=>{s(!0)},[]),(0,d.useEffect)(()=>{let e=u(()=>{g(window.innerWidth<1300)},100);return e(),window.addEventListener("resize",e),()=>{window.removeEventListener("resize",e)}},[]);let T=(0,d.useCallback)(()=>{if(n&&!a)return void y(!1);if(window.innerWidth<1300){E(!1);let e=document.querySelector(t);y(!!e&&e.querySelectorAll("h1, h2, h3").length>0);return}let e=document.querySelector(t);if(!e||0===e.querySelectorAll("h1, h2, h3").length)return void y(!1);y(!0);let r=e.getBoundingClientRect(),i=window.innerWidth,s=Math.max(0,i-r.right-30-28),d=240;s<260&&(d=Math.max(0,s-20));let l=d>=100;E(l),l&&N({width:"".concat(d,"px"),left:"".concat(Math.min(r.right+30,i-d-28),"px")})},[t,n,a]);(0,d.useEffect)(()=>{let e=u(()=>{p(e=>e+1),T()},100);window.addEventListener("content-rendered",e),window.addEventListener("contentLoaded",e),setTimeout(()=>{e()},500);let t=u(()=>{T()},100);return window.addEventListener("resize",t),()=>{window.removeEventListener("content-rendered",e),window.removeEventListener("contentLoaded",e),window.removeEventListener("resize",t)}},[T]);let C={position:"fixed",top:"6rem",zIndex:10,maxHeight:"80vh",...j};return n&&!a?null:(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(x.N,{mode:"wait",children:f&&!w&&v&&k&&(0,r.jsx)(c.P.div,{ref:_,className:"hidden md:block",style:C,initial:"hidden",animate:"visible",exit:"exit",variants:L,children:(0,r.jsx)(h,{contentSelector:t,isEncrypted:n,isDecrypted:a},m)},"floating-toc-".concat(m))}),(0,r.jsx)(x.N,{children:f&&w&&(0,r.jsx)(c.P.button,{className:"fixed bottom-16 right-6 z-50 w-14 h-14 rounded-full bg-red-700 dark:bg-red-600 text-white shadow-lg flex items-center justify-center",onClick:()=>o(!l),initial:"hidden",animate:"visible",exit:"exit",variants:L,children:(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h7"})})})}),(0,r.jsx)(x.N,{children:l&&f&&w&&(0,r.jsxs)(c.P.div,{className:"fixed bottom-32 right-4 z-50 bg-white dark:bg-neutral-800 max-w-[85vw] max-h-[70vh] w-auto shadow-xl dark:shadow-[0_0_35px_rgba(0,0,0,0.3)] flex flex-col rounded-lg overflow-hidden",initial:"hidden",animate:"visible",exit:"exit",variants:L,children:[(0,r.jsxs)("div",{className:"flex justify-between items-center p-3 border-b dark:border-gray-700",children:[(0,r.jsx)("h2",{className:"text-xl font-bold text-red-700 dark:text-red-400",children:" "}),(0,r.jsx)("button",{onClick:()=>o(!1),className:"text-gray-700 dark:text-gray-300 hover:text-red-700 dark:hover:text-red-400",children:(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,r.jsx)("div",{className:"overflow-y-auto scrollbar-hide max-h-[60vh] rounded-b-lg",children:(0,r.jsx)(h,{contentSelector:t,isEncrypted:n,isDecrypted:a,isMobile:!0},m)})]})})]})}var f=a(8591),y=a(6057),w=a(586);let g=()=>{let{scrollYProgress:e}=(0,y.L)(),t=(0,w.z)(e,{stiffness:100,damping:30,restDelta:.001});return(0,r.jsx)(c.P.div,{className:"fixed top-0 left-0 right-0 h-1 bg-pink-700 z-50 origin-left",style:{scaleX:t}})};var v=a(9099);function b(e){let{isEncrypted:t=!1,isDecrypted:a=!0}=e,[n,i]=(0,d.useState)(!1),[s,l]=(0,d.useState)({}),[h,u]=(0,d.useState)(!0),[p,f]=(0,d.useState)([]),[y,w]=(0,d.useState)(!0),g=(0,v.useRouter)(),b={type:"tween",duration:.5,ease:"easeInOut"},j={hidden:{opacity:0,y:10},visible:{opacity:1,y:0,transition:b},exit:{opacity:0,y:-10,transition:{...b,duration:.3}}};(0,d.useEffect)(()=>{let e=()=>{window.__RECENT_POSTS__?(f(window.__RECENT_POSTS__),w(!1)):setTimeout(e,500)};e()},[]),(0,d.useEffect)(()=>{let e=setTimeout(()=>{i(!0)},300);return()=>clearTimeout(e)},[]);let N=(0,d.useCallback)(()=>{let e=document.querySelector("article");if(!e)return;if(window.innerWidth<1300)return void u(!1);let t=e.getBoundingClientRect(),a=Math.min(240,Math.max(0,t.left-30)-20),r=(a=Math.max(0,a))>=100;u(r),r&&l({width:"".concat(a,"px"),left:"".concat(Math.max(20,t.left-30-a),"px")})},[]);(0,d.useEffect)(()=>{var e;let t,a=(e=()=>{N()},function(){for(var a=arguments.length,r=Array(a),n=0;n<a;n++)r[n]=arguments[n];clearTimeout(t),t=setTimeout(()=>e.apply(this,r),100)});return a(),window.addEventListener("resize",a),()=>{window.removeEventListener("resize",a)}},[N]),(0,d.useEffect)(()=>{if(!g.isReady)return;let e=setTimeout(()=>{if(N(),document.querySelector("article")){let e=new CustomEvent("contentLoaded");window.dispatchEvent(e)}},500);return()=>clearTimeout(e)},[g.asPath,g.isReady,N]);let k={position:"fixed",top:"6rem",zIndex:10,...s},E=(0,d.useCallback)((e,t)=>{e.preventDefault(),g.push(t)},[g]);return(0,r.jsx)(x.N,{mode:"wait",children:n&&h&&(0,r.jsx)(c.P.div,{style:k,className:"hidden md:block",initial:"hidden",animate:"visible",exit:"exit",variants:j,children:(0,r.jsxs)("nav",{className:m.showSidebarBackground?"md:mt-25 p-3 pr-5 rounded-2xl backdrop-blur-2xl md:shadow-[0_0_35px_rgba(0,0,0,0.1)] dark:md:shadow-[0_0_35px_rgba(0,0,0,0.2)] flex flex-col":"md:mt-25 p-3 pr-5 flex flex-col",children:[(0,r.jsx)("div",{className:"text-red-700 dark:text-red-400 font-bold mb-2 text-xl",children:"Recent Posts"}),y?(0,r.jsx)("div",{className:"flex flex-col space-y-3 py-2",children:[1,2,3,4,5].map(e=>(0,r.jsx)("div",{className:"animate-pulse",children:(0,r.jsx)("div",{className:"h-4 bg-gray-300 dark:bg-gray-700 rounded w-full"})},e))}):p.length>0?(0,r.jsx)("ul",{className:"flex flex-col space-y-2",children:p.map((e,t)=>(0,r.jsx)(c.P.li,{className:"text-sm break-words",initial:{opacity:0,x:-5},animate:{opacity:1,x:0},transition:{delay:.05*t,duration:.3},children:(0,r.jsxs)(o(),{href:"/".concat(e.year,"/").concat(e.month,"/").concat(e.day,"/").concat(e.id),className:"text-gray-700 dark:text-gray-300 text-base hover:text-red-700 dark:hover:text-red-400 hover:underline hover:underline-offset-3 flex items-center",onClick:t=>E(t,"/".concat(e.year,"/").concat(e.month,"/").concat(e.day,"/").concat(e.id)),children:[(0,r.jsx)("span",{className:"break-words",children:e.title}),e.isEncrypted&&(0,r.jsx)("span",{className:"ml-1 text-amber-600 dark:text-amber-500",title:"需要密码",children:"\uD83D\uDD12"})]})},e.id))}):(0,r.jsx)("div",{className:"text-gray-500 dark:text-gray-400 text-sm py-2",children:"暂无文章"})]})},"left-sidebar-".concat(g.asPath))})}var j=a(8847),N=a.n(j);let k=N()(()=>a.e(362).then(a.bind(a,1362)),{loadableGenerated:{webpack:()=>[1362]},loading:()=>(0,r.jsx)("div",{className:"my-8 text-center",children:(0,r.jsxs)("div",{className:"flex flex-col items-center gap-3",children:[(0,r.jsx)("div",{className:"w-8 h-8 border-4 border-red-700 dark:border-red-400 border-t-transparent rounded-full animate-spin"}),(0,r.jsx)("p",{className:"text-gray-500 dark:text-gray-400 text-sm",children:"加载加密模块..."})]})}),ssr:!1}),E=N()(()=>a.e(742).then(a.bind(a,9742)),{loadableGenerated:{webpack:()=>[9742]},ssr:!1}),_=N()(()=>a.e(699).then(a.bind(a,2699)),{loadableGenerated:{webpack:()=>[2699]},loading:()=>(0,r.jsx)("div",{className:"flex justify-center w-full mt-12 mb-6",children:(0,r.jsx)("div",{className:"w-full md:w-3xl px-3",children:(0,r.jsxs)("div",{className:"flex flex-col items-center gap-3 py-8",children:[(0,r.jsx)("div",{className:"w-8 h-8 border-4 border-gray-400 dark:border-gray-600 border-t-transparent rounded-full animate-spin"}),(0,r.jsx)("p",{className:"text-gray-500 dark:text-gray-400 text-sm",children:"加载评论系统..."})]})})}),ssr:!1});var S=!0;function L(e){var t;let{postData:a,recentPosts:l}=e,[x,m]=(0,d.useState)(!1),[h,u]=(0,d.useState)(!1);(0,d.useEffect)(()=>{m(!0);let e=setTimeout(()=>{window.dispatchEvent(new Event("content-rendered"))},500);return()=>clearTimeout(e)},[]),(0,d.useEffect)(()=>{if(h){let e=setTimeout(()=>{window.dispatchEvent(new Event("content-rendered"))},500);return()=>clearTimeout(e)}},[h]);let y=(t=a.tags)&&t.some(e=>e.toLowerCase().includes("encrypt")||e.toLowerCase().includes("加密"));(0,d.useEffect)(()=>{window.__RECENT_POSTS__=l},[l]);let w="https://www.sunsetaction.top/".concat(a.date.split("-")[0],"/").concat(a.date.split("-")[1],"/").concat(a.date.split("-")[2],"/").concat(a.id);return(0,r.jsxs)(n.A,{post:!0,children:[(0,r.jsx)(s.bV,{title:a.title,description:a.description||"".concat(a.title," - Sunset Blog"),canonical:w,openGraph:{title:"".concat(a.title," | Sunset Blog"),description:a.description||"".concat(a.title," - Sunset Blog"),url:w,type:"article",article:{publishedTime:a.date,modifiedTime:a.updated||a.date,section:a.categories||"Blog",tags:a.tags||[],authors:["Sunset"]},images:[{url:a.cover||"https://www.sunsetaction.top/images/logo.png",width:1200,height:630,alt:a.title}]}}),(0,r.jsx)(s.dp,{type:"BlogPosting",url:w,title:a.title,images:[a.cover||"https://www.sunsetaction.top/images/logo.png"],datePublished:a.date,dateModified:a.updated||a.date,authorName:"Sunset",description:a.description||"".concat(a.title," - Sunset Blog"),publisherName:"Sunset Blog",publisherLogo:"https://www.sunsetaction.top/images/logo.png"}),x&&(0,r.jsx)(g,{}),(0,r.jsxs)("div",{className:"w-full relative",children:[x&&(0,r.jsx)(b,{isEncrypted:y,isDecrypted:h}),(0,r.jsx)("div",{className:"flex justify-center",children:(0,r.jsxs)(c.P.article,{className:"w-full md:w-3/4 lg:w-2/3 xl:w-4xl px-3 mt-5 md:mt-15 max-w-[800px]",initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.4,ease:[.22,1,.36,1]},children:[(0,r.jsx)(c.P.h1,{className:"text-xl md:text-2xl font-bold text-red-700 dark:text-red-400",initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.1,duration:.3},children:a.title}),(0,r.jsxs)(c.P.div,{className:"flex flex-col",initial:{opacity:0},animate:{opacity:1},transition:{delay:.2,duration:.3},children:[(0,r.jsxs)("div",{className:"flex text-sm mt-1",children:[(0,r.jsx)("p",{className:"font-bold text-gray-600 dark:text-gray-300 md:text-base",children:"SUNSET"}),(0,r.jsx)("p",{className:"font-thin text-gray-600 dark:text-gray-300 ml-2 md:text-base",children:a.date}),(0,r.jsxs)("p",{className:"font-thin text-gray-600 dark:text-gray-300 ml-2 md:text-base",children:["(Updated:",a.updated,")"]})]}),(0,r.jsxs)("div",{className:"flex text-sm mt-1",children:[(0,r.jsx)("p",{className:"font-bold text-gray-600 dark:text-gray-300 md:text-base",children:"Category:"}),(0,r.jsx)(i.E,{variant:"secondary",className:"ml-2 md:text-sm text-gray-700 dark:text-gray-300 ",children:a.categories})]}),(0,r.jsxs)("div",{className:"flex flex-wrap text-sm mt-1",children:[(0,r.jsx)("p",{className:"font-bold text-gray-600 dark:text-gray-300 md:text-base",children:"Tags:"}),a.tags.map(e=>(0,r.jsx)(o(),{href:"/tag/".concat(encodeURIComponent(e)),children:(0,r.jsx)(i.E,{variant:"secondary",className:"ml-2 md:text-sm text-gray-700 dark:text-gray-300 cursor-pointer hover:bg-red-700 hover:text-white transition-colors",children:e})},e))]})]}),(0,r.jsx)(c.P.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.3,duration:.4},children:x?y?(0,r.jsx)(k,{content:a.contentHtml,correctPassword:"sunsetaction",onDecrypted:e=>{u(e)}}):(0,r.jsx)(f.A,{html:a.contentHtml}):(0,r.jsx)("div",{className:"my-8 text-center",children:(0,r.jsxs)("div",{className:"flex flex-col items-center gap-3",children:[(0,r.jsx)("div",{className:"w-8 h-8 border-4 border-red-700 dark:border-red-400 border-t-transparent rounded-full animate-spin"}),(0,r.jsx)("p",{className:"text-gray-500 dark:text-gray-400 text-sm",children:"加载中..."})]})})})]},a.id)}),x&&(0,r.jsx)(p,{contentSelector:".markdown-body",isEncrypted:y,isDecrypted:h}),x&&(0,r.jsx)(E,{}),x&&(0,r.jsx)(_,{})]})]})}},8591:(e,t,a)=>{"use strict";a.d(t,{A:()=>i});var r=a(7876),n=a(4232);let i=e=>{let{html:t}=e,a=(0,n.useRef)(null);return(0,n.useEffect)(()=>{a.current&&t&&a.current.querySelectorAll("table").forEach(e=>{if(e.parentElement&&!e.parentElement.classList.contains("table-container")){let t=document.createElement("div");t.className="table-container",e.parentNode.insertBefore(t,e),t.appendChild(e)}})},[t]),(0,r.jsx)("div",{ref:a,className:"markdown-body",dangerouslySetInnerHTML:{__html:t}})}},9918:(e,t,a)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/[year]/[month]/[day]/[id]",function(){return a(1300)}])}},e=>{var t=t=>e(e.s=t);e.O(0,[669,525,152,636,593,792],()=>t(9918)),_N_E=e.O()}]);