{"pageProps":{"postData":{"id":"玄机第二章 日志分析-apache日志分析","contentHtml":"<h1>第二章 日志分析-apache日志分析</h1>\n<p>用的很笨的方法去做的</p>\n<ol>\n<li>\n<p>提交当天访问次数最多的IP，即黑客IP：</p>\n<pre><code class=\"hljs language-bash\">root@ip-10-0-10-5:/var/log/apache2#  <span class=\"hljs-built_in\">cat</span> access.log.1 | awk -F <span class=\"hljs-string\">'-'</span> <span class=\"hljs-string\">'{print $1}'</span>|<span class=\"hljs-built_in\">sort</span>|<span class=\"hljs-built_in\">uniq</span> -c|<span class=\"hljs-built_in\">sort</span>\n      1 \n      1 192.168.200.211 \n      1 192.168.200.48 \n     29 ::1 \n      5 192.168.200.38 \n   6555 192.168.200.2 \n</code></pre>\n<p>可以看到最多的IP是<code>192.168.200.2</code> 既：</p>\n<pre><code class=\"hljs language-bash\">flag{192.168.200.2}\n</code></pre>\n</li>\n<li>\n<p>黑客使用的浏览器指纹是什么，提交指纹的md5：</p>\n<p>指纹指的应该是<code>UA</code> ，很奇怪这个不对</p>\n<pre><code class=\"hljs language-bash\">root@ip-10-0-10-5:/var/log/apache2#  <span class=\"hljs-built_in\">cat</span> access.log.1 | grep 192.168.200.2 | <span class=\"hljs-built_in\">head</span> -n 1\n192.168.200.2 - - [03/Aug/2023:08:24:29 +0000] <span class=\"hljs-string\">\"GET / HTTP/1.1\"</span> 200 1945 <span class=\"hljs-string\">\"-\"</span> <span class=\"hljs-string\">\"Mozilla/5.0 (Macintosh; Intel Mac OS X 10.15; rv:109.0) Gecko/20100101 Firefox/115.0\"</span>\n</code></pre>\n<p>再查看一下，下面还有<code>safari</code>的UA</p>\n<pre><code class=\"hljs language-bash\">192.168.200.2 - - [03/Aug/2023:08:46:38 +0000] <span class=\"hljs-string\">\"GET / HTTP/1.1\"</span> 200 1945 <span class=\"hljs-string\">\"-\"</span> <span class=\"hljs-string\">\"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/87.0.4280.88 Safari/537.36\"</span>\n192.168.200.2 - - [03/Aug/2023:08:46:38 +0000] <span class=\"hljs-string\">\"GET / HTTP/1.1\"</span> 200 1944 <span class=\"hljs-string\">\"-\"</span> <span class=\"hljs-string\">\"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/87.0.4280.88 Safari/537.36\"</span>\n192.168.200.2 - - [03/Aug/2023:08:46:38 +0000] <span class=\"hljs-string\">\"GET /lts7Km HTTP/1.1\"</span> 404 492 <span class=\"hljs-string\">\"-\"</span> <span class=\"hljs-string\">\"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/87.0.4280.88 Safari/537.36\"</span>\n192.168.200.2 - - [03/Aug/2023:08:46:38 +0000] <span class=\"hljs-string\">\"GET /UoQqyZ HTTP/1.1\"</span> 404 492 <span class=\"hljs-string\">\"-\"</span> <span class=\"hljs-string\">\"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/87.0.4280.88 Safari/537.36\"</span>\n192.168.200.2 - - [03/Aug/2023:08:46:38 +0000] <span class=\"hljs-string\">\"GET /.ace8Cy HTTP/1.1\"</span> 404 492 <span class=\"hljs-string\">\"-\"</span> <span class=\"hljs-string\">\"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/87.0.4280.88 Safari/537.36\"</span>\n192.168.200.2 - - [03/Aug/2023:08:46:38 +0000] <span class=\"hljs-string\">\"GET /lzz02M/ HTTP/1.1\"</span> 404 492 <span class=\"hljs-string\">\"-\"</span> <span class=\"hljs-string\">\"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/87.0.4280.88 Safari/537.36\"</span>\n192.168.200.2 - - [03/Aug/2023:08:46:38 +0000] <span class=\"hljs-string\">\"GET /CXDj5h.php HTTP/1.1\"</span> 404 492 <span class=\"hljs-string\">\"-\"</span> <span class=\"hljs-string\">\"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/87.0.4280.88 Safari/537.36\"</span>\n192.168.200.2 - - [03/Aug/2023:08:46:38 +0000] <span class=\"hljs-string\">\"GET /RL8s5f.aspx HTTP/1.1\"</span> 404 492 <span class=\"hljs-string\">\"-\"</span> <span class=\"hljs-string\">\"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/87.0.4280.88 Safari/537.36\"</span>\n192.168.200.2 - - [03/Aug/2023:08:46:38 +0000] <span class=\"hljs-string\">\"GET /2oGGLR.jsp HTTP/1.1\"</span> 404 492 <span class=\"hljs-string\">\"-\"</span> <span class=\"hljs-string\">\"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/87.0.4280.88 Safari/537.36\"</span>\n192.168.200.2 - - [03/Aug/2023:08:46:38 +0000] <span class=\"hljs-string\">\"GET /u9Mnnt.html HTTP/1.1\"</span> 404 492 <span class=\"hljs-string\">\"-\"</span> <span class=\"hljs-string\">\"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/87.0.4280.88 Safari/537.36\"</span>\n192.168.200.2 - - [03/Aug/2023:08:46:38 +0000] <span class=\"hljs-string\">\"GET /r02mMk.js HTTP/1.1\"</span> 404 492 <span class=\"hljs-string\">\"-\"</span> <span class=\"hljs-string\">\"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/87.0.4280.88 Safari/537.36\"</span>\n192.168.200.2 - - [03/Aug/2023:08:46:38 +0000] <span class=\"hljs-string\">\"GET /!.gitignore HTTP/1.1\"</span> 404 492 <span class=\"hljs-string\">\"-\"</span> <span class=\"hljs-string\">\"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/87.0.4280.88 Safari/537.36\n</span></code></pre>\n<pre><code class=\"hljs language-bash\">root@ip-10-0-10-5:/var/log/apache2# <span class=\"hljs-built_in\">echo</span> -n <span class=\"hljs-string\">\"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/87.0.4280.88 Safari/537.36\"</span> | <span class=\"hljs-built_in\">md5sum</span>\n2d6330f380f44ac20f3a02eed0958f66  \n</code></pre>\n<pre><code class=\"hljs language-bash\">flag{2d6330f380f44ac20f3a02eed0958f66}\n</code></pre>\n</li>\n<li>\n<p>查看包含index.php页面被访问的次数，提交次数：</p>\n<pre><code class=\"hljs language-bash\">root@ip-10-0-10-5:/var/log/apache2# <span class=\"hljs-built_in\">cat</span> access.log.1 |grep 192.168.200.2 | grep /index.php | <span class=\"hljs-built_in\">wc</span> -l\n\t27\n</code></pre>\n<pre><code class=\"hljs language-bash\">flag{27}\n</code></pre>\n</li>\n<li>\n<p>查看黑客IP访问了多少次，提交次数：</p>\n<pre><code class=\"hljs language-bash\">root@ip-10-0-10-5:/var/log/apache2# <span class=\"hljs-built_in\">cat</span> access.log.1 |grep 192.168.200.2 | <span class=\"hljs-built_in\">wc</span> -l\n6556\n</code></pre>\n<pre><code class=\"hljs language-bash\">flag{6555}\n</code></pre>\n</li>\n<li>\n<p>查看2023年8月03日8时这一个小时内有多少IP访问，提交次数:</p>\n<pre><code class=\"hljs language-bash\">root@ip-10-0-10-5:/var/log/apache2# <span class=\"hljs-built_in\">cat</span> access.log.1 | grep 03/Aug/2023:08 | awk -F <span class=\"hljs-string\">'-'</span> <span class=\"hljs-string\">'{print $1}'</span>| <span class=\"hljs-built_in\">sort</span> | <span class=\"hljs-built_in\">uniq</span> | <span class=\"hljs-built_in\">wc</span> -l\n5\n</code></pre>\n<pre><code class=\"hljs language-bash\">flag{5}\n</code></pre>\n</li>\n</ol>","title":"玄机 - 第二章 日志分析-apache日志分析","date":"2025-04-04","updated":"2025-04-03","comments":true,"tags":["玄机","应急响应","日志分析"],"categories":"靶机"},"recentPosts":[{"id":"Personalsunset","title":"Personal - sunset","date":"2025-06-10","isEncrypted":true,"year":"2025","month":"06","day":"10"},{"id":"HackTheBoxSeason8 - TombWatcher","title":"HackTheBox - Season8 - TombWatcher","date":"2025-06-08","isEncrypted":true,"year":"2025","month":"06","day":"08"},{"id":"HackTheBoxMachine - Bucket","title":"HackTheBox - Machine - Bucket","date":"2025-06-06","isEncrypted":false,"year":"2025","month":"06","day":"06"},{"id":"HackTheBoxMachine -Support","title":"HackTheBox - Machine - Support","date":"2025-06-05","isEncrypted":false,"year":"2025","month":"06","day":"05"},{"id":"HackTheBoxMachine - Hospital","title":"HackTheBox - Machine - Hospital","date":"2025-06-04","isEncrypted":false,"year":"2025","month":"06","day":"04"},{"id":"HackTheBoxSeason8 - Certificate","title":"HackTheBox - Season8 - Certificate","date":"2025-06-02","isEncrypted":true,"year":"2025","month":"06","day":"02"},{"id":"HackTheBoxMachine - Strutted","title":"HackTheBox - Machine - Strutted","date":"2025-06-02","isEncrypted":false,"year":"2025","month":"06","day":"02"}]},"__N_SSG":true}