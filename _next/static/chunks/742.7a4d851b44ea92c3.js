"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[742],{9742:(e,t,n)=>{n.r(t),n.d(t,{default:()=>o});var i=n(7876),r=n(4232),s=n(7212),a=n(6108);function o(){let[e,t]=(0,r.useState)(null),[n,o]=(0,r.useState)(!1),c=(0,r.useRef)(null),l=(0,r.useRef)(null),d=()=>{document.querySelectorAll(".markdown-body img").forEach(e=>{e.dataset.hasClickEvent||(e.hasAttribute("loading")||e.setAttribute("loading","lazy"),e.hasAttribute("decoding")||e.setAttribute("decoding","async"),e.style.cursor="zoom-in",e.addEventListener("click",n=>{n.preventDefault(),t(e.src)}),e.dataset.hasClickEvent="true")})};(0,r.useEffect)(()=>{d(),l.current=new MutationObserver(e=>{e.forEach(e=>{"childList"===e.type&&e.addedNodes.length>0&&setTimeout(()=>{d()},300)})}),l.current.observe(document.body,{childList:!0,subtree:!0});let e=()=>{setTimeout(()=>{d()},300)};return window.addEventListener("content-rendered",e),()=>{l.current&&l.current.disconnect(),window.removeEventListener("content-rendered",e)}},[]);let u=()=>{t(null),o(!1)};return(0,r.useEffect)(()=>{let e=e=>{"Escape"===e.key&&u()};return window.addEventListener("keydown",e),()=>{window.removeEventListener("keydown",e)}},[]),(0,i.jsx)(s.N,{children:e&&(0,i.jsx)(a.P.div,{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/80",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2},onClick:e=>{c.current&&!c.current.contains(e.target)&&u()},children:(0,i.jsxs)(a.P.div,{ref:c,className:"relative max-w-[90vw] max-h-[90vh]",initial:{scale:.8},animate:{scale:1},exit:{scale:.8},transition:{duration:.2},children:[!n&&(0,i.jsx)("div",{className:"absolute inset-0 flex items-center justify-center",children:(0,i.jsxs)("div",{className:"flex flex-col items-center gap-3",children:[(0,i.jsx)("div",{className:"w-12 h-12 border-4 border-white/30 border-t-white rounded-full animate-spin"}),(0,i.jsx)("p",{className:"text-white text-sm",children:"加载中..."})]})}),(0,i.jsx)("img",{src:e,alt:"预览图片",className:"max-w-full max-h-[90vh] object-contain transition-opacity duration-300 ".concat(n?"opacity-100":"opacity-0"),onLoad:()=>o(!0),onError:()=>o(!0)}),(0,i.jsx)("button",{className:"absolute top-2 right-2 bg-white/20 text-white rounded-full p-2 hover:bg-white/40 transition-colors",onClick:u,title:"关闭 (ESC)",children:(0,i.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:2,stroke:"currentColor",className:"w-6 h-6",children:(0,i.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})})]})})})}}}]);